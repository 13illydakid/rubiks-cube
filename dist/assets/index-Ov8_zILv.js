var ET=Object.defineProperty;var TT=(e,t,n)=>t in e?ET(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var He=(e,t,n)=>TT(e,typeof t!="symbol"?t+"":t,n);function LT(e,t){for(var n=0;n<t.length;n++){const i=t[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in e)){const o=Object.getOwnPropertyDescriptor(i,r);o&&Object.defineProperty(e,r,o.get?o:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();function Pr(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var z_={exports:{}},Lh={},H_={exports:{}},$e={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ku=Symbol.for("react.element"),CT=Symbol.for("react.portal"),RT=Symbol.for("react.fragment"),PT=Symbol.for("react.strict_mode"),AT=Symbol.for("react.profiler"),DT=Symbol.for("react.provider"),OT=Symbol.for("react.context"),FT=Symbol.for("react.forward_ref"),kT=Symbol.for("react.suspense"),NT=Symbol.for("react.memo"),IT=Symbol.for("react.lazy"),m0=Symbol.iterator;function BT(e){return e===null||typeof e!="object"?null:(e=m0&&e[m0]||e["@@iterator"],typeof e=="function"?e:null)}var j_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},V_=Object.assign,W_={};function Ia(e,t,n){this.props=e,this.context=t,this.refs=W_,this.updater=n||j_}Ia.prototype.isReactComponent={};Ia.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ia.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function G_(){}G_.prototype=Ia.prototype;function _v(e,t,n){this.props=e,this.context=t,this.refs=W_,this.updater=n||j_}var bv=_v.prototype=new G_;bv.constructor=_v;V_(bv,Ia.prototype);bv.isPureReactComponent=!0;var g0=Array.isArray,$_=Object.prototype.hasOwnProperty,Sv={current:null},X_={key:!0,ref:!0,__self:!0,__source:!0};function Y_(e,t,n){var i,r={},o=null,s=null;if(t!=null)for(i in t.ref!==void 0&&(s=t.ref),t.key!==void 0&&(o=""+t.key),t)$_.call(t,i)&&!X_.hasOwnProperty(i)&&(r[i]=t[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}if(e&&e.defaultProps)for(i in a=e.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:ku,type:e,key:o,ref:s,props:r,_owner:Sv.current}}function UT(e,t){return{$$typeof:ku,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Mv(e){return typeof e=="object"&&e!==null&&e.$$typeof===ku}function zT(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var v0=/\/+/g;function Td(e,t){return typeof e=="object"&&e!==null&&e.key!=null?zT(""+e.key):t.toString(36)}function mf(e,t,n,i,r){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case ku:case CT:s=!0}}if(s)return s=e,r=r(s),e=i===""?"."+Td(s,0):i,g0(r)?(n="",e!=null&&(n=e.replace(v0,"$&/")+"/"),mf(r,t,n,"",function(u){return u})):r!=null&&(Mv(r)&&(r=UT(r,n+(!r.key||s&&s.key===r.key?"":(""+r.key).replace(v0,"$&/")+"/")+e)),t.push(r)),1;if(s=0,i=i===""?".":i+":",g0(e))for(var a=0;a<e.length;a++){o=e[a];var l=i+Td(o,a);s+=mf(o,t,n,l,r)}else if(l=BT(e),typeof l=="function")for(e=l.call(e),a=0;!(o=e.next()).done;)o=o.value,l=i+Td(o,a++),s+=mf(o,t,n,l,r);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function ec(e,t,n){if(e==null)return e;var i=[],r=0;return mf(e,i,"","",function(o){return t.call(n,o,r++)}),i}function HT(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var _n={current:null},gf={transition:null},jT={ReactCurrentDispatcher:_n,ReactCurrentBatchConfig:gf,ReactCurrentOwner:Sv};function q_(){throw Error("act(...) is not supported in production builds of React.")}$e.Children={map:ec,forEach:function(e,t,n){ec(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return ec(e,function(){t++}),t},toArray:function(e){return ec(e,function(t){return t})||[]},only:function(e){if(!Mv(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};$e.Component=Ia;$e.Fragment=RT;$e.Profiler=AT;$e.PureComponent=_v;$e.StrictMode=PT;$e.Suspense=kT;$e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jT;$e.act=q_;$e.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=V_({},e.props),r=e.key,o=e.ref,s=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,s=Sv.current),t.key!==void 0&&(r=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(l in t)$_.call(t,l)&&!X_.hasOwnProperty(l)&&(i[l]=t[l]===void 0&&a!==void 0?a[l]:t[l])}var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];i.children=a}return{$$typeof:ku,type:e.type,key:r,ref:o,props:i,_owner:s}};$e.createContext=function(e){return e={$$typeof:OT,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:DT,_context:e},e.Consumer=e};$e.createElement=Y_;$e.createFactory=function(e){var t=Y_.bind(null,e);return t.type=e,t};$e.createRef=function(){return{current:null}};$e.forwardRef=function(e){return{$$typeof:FT,render:e}};$e.isValidElement=Mv;$e.lazy=function(e){return{$$typeof:IT,_payload:{_status:-1,_result:e},_init:HT}};$e.memo=function(e,t){return{$$typeof:NT,type:e,compare:t===void 0?null:t}};$e.startTransition=function(e){var t=gf.transition;gf.transition={};try{e()}finally{gf.transition=t}};$e.unstable_act=q_;$e.useCallback=function(e,t){return _n.current.useCallback(e,t)};$e.useContext=function(e){return _n.current.useContext(e)};$e.useDebugValue=function(){};$e.useDeferredValue=function(e){return _n.current.useDeferredValue(e)};$e.useEffect=function(e,t){return _n.current.useEffect(e,t)};$e.useId=function(){return _n.current.useId()};$e.useImperativeHandle=function(e,t,n){return _n.current.useImperativeHandle(e,t,n)};$e.useInsertionEffect=function(e,t){return _n.current.useInsertionEffect(e,t)};$e.useLayoutEffect=function(e,t){return _n.current.useLayoutEffect(e,t)};$e.useMemo=function(e,t){return _n.current.useMemo(e,t)};$e.useReducer=function(e,t,n){return _n.current.useReducer(e,t,n)};$e.useRef=function(e){return _n.current.useRef(e)};$e.useState=function(e){return _n.current.useState(e)};$e.useSyncExternalStore=function(e,t,n){return _n.current.useSyncExternalStore(e,t,n)};$e.useTransition=function(){return _n.current.useTransition()};$e.version="18.3.1";H_.exports=$e;var Z=H_.exports;const de=Pr(Z),VT=LT({__proto__:null,default:de},[Z]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WT=Z,GT=Symbol.for("react.element"),$T=Symbol.for("react.fragment"),XT=Object.prototype.hasOwnProperty,YT=WT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,qT={key:!0,ref:!0,__self:!0,__source:!0};function Z_(e,t,n){var i,r={},o=null,s=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(s=t.ref);for(i in t)XT.call(t,i)&&!qT.hasOwnProperty(i)&&(r[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps,t)r[i]===void 0&&(r[i]=t[i]);return{$$typeof:GT,type:e,key:o,ref:s,props:r,_owner:YT.current}}Lh.Fragment=$T;Lh.jsx=Z_;Lh.jsxs=Z_;z_.exports=Lh;var M=z_.exports,J_={exports:{}},Kn={},K_={exports:{}},Q_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(I,H){var V=I.length;I.push(H);e:for(;0<V;){var J=V-1>>>1,he=I[J];if(0<r(he,H))I[J]=H,I[V]=he,V=J;else break e}}function n(I){return I.length===0?null:I[0]}function i(I){if(I.length===0)return null;var H=I[0],V=I.pop();if(V!==H){I[0]=V;e:for(var J=0,he=I.length,ge=he>>>1;J<ge;){var xe=2*(J+1)-1,Y=I[xe],Qe=xe+1,Ce=I[Qe];if(0>r(Y,V))Qe<he&&0>r(Ce,Y)?(I[J]=Ce,I[Qe]=V,J=Qe):(I[J]=Y,I[xe]=V,J=xe);else if(Qe<he&&0>r(Ce,V))I[J]=Ce,I[Qe]=V,J=Qe;else break e}}return H}function r(I,H){var V=I.sortIndex-H.sortIndex;return V!==0?V:I.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();e.unstable_now=function(){return s.now()-a}}var l=[],u=[],c=1,f=null,h=3,d=!1,g=!1,v=!1,y=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(I){for(var H=n(u);H!==null;){if(H.callback===null)i(u);else if(H.startTime<=I)i(u),H.sortIndex=H.expirationTime,t(l,H);else break;H=n(u)}}function w(I){if(v=!1,x(I),!g)if(n(l)!==null)g=!0,D(b);else{var H=n(u);H!==null&&G(w,H.startTime-I)}}function b(I,H){g=!1,v&&(v=!1,m(L),L=-1),d=!0;var V=h;try{for(x(H),f=n(l);f!==null&&(!(f.expirationTime>H)||I&&!B());){var J=f.callback;if(typeof J=="function"){f.callback=null,h=f.priorityLevel;var he=J(f.expirationTime<=H);H=e.unstable_now(),typeof he=="function"?f.callback=he:f===n(l)&&i(l),x(H)}else i(l);f=n(l)}if(f!==null)var ge=!0;else{var xe=n(u);xe!==null&&G(w,xe.startTime-H),ge=!1}return ge}finally{f=null,h=V,d=!1}}var _=!1,S=null,L=-1,E=5,A=-1;function B(){return!(e.unstable_now()-A<E)}function j(){if(S!==null){var I=e.unstable_now();A=I;var H=!0;try{H=S(!0,I)}finally{H?z():(_=!1,S=null)}}else _=!1}var z;if(typeof p=="function")z=function(){p(j)};else if(typeof MessageChannel<"u"){var k=new MessageChannel,U=k.port2;k.port1.onmessage=j,z=function(){U.postMessage(null)}}else z=function(){y(j,0)};function D(I){S=I,_||(_=!0,z())}function G(I,H){L=y(function(){I(e.unstable_now())},H)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(I){I.callback=null},e.unstable_continueExecution=function(){g||d||(g=!0,D(b))},e.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<I?Math.floor(1e3/I):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(I){switch(h){case 1:case 2:case 3:var H=3;break;default:H=h}var V=h;h=H;try{return I()}finally{h=V}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(I,H){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var V=h;h=I;try{return H()}finally{h=V}},e.unstable_scheduleCallback=function(I,H,V){var J=e.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?J+V:J):V=J,I){case 1:var he=-1;break;case 2:he=250;break;case 5:he=1073741823;break;case 4:he=1e4;break;default:he=5e3}return he=V+he,I={id:c++,callback:H,priorityLevel:I,startTime:V,expirationTime:he,sortIndex:-1},V>J?(I.sortIndex=V,t(u,I),n(l)===null&&I===n(u)&&(v?(m(L),L=-1):v=!0,G(w,V-J))):(I.sortIndex=he,t(l,I),g||d||(g=!0,D(b))),I},e.unstable_shouldYield=B,e.unstable_wrapCallback=function(I){var H=h;return function(){var V=h;h=H;try{return I.apply(this,arguments)}finally{h=V}}}})(Q_);K_.exports=Q_;var ZT=K_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JT=Z,Yn=ZT;function ne(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var eb=new Set,ql={};function us(e,t){va(e,t),va(e+"Capture",t)}function va(e,t){for(ql[e]=t,e=0;e<t.length;e++)eb.add(t[e])}var wr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),bm=Object.prototype.hasOwnProperty,KT=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,y0={},x0={};function QT(e){return bm.call(x0,e)?!0:bm.call(y0,e)?!1:KT.test(e)?x0[e]=!0:(y0[e]=!0,!1)}function eL(e,t,n,i){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function tL(e,t,n,i){if(t===null||typeof t>"u"||eL(e,t,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function bn(e,t,n,i,r,o,s){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=s}var Kt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Kt[e]=new bn(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Kt[t]=new bn(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Kt[e]=new bn(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Kt[e]=new bn(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Kt[e]=new bn(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Kt[e]=new bn(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Kt[e]=new bn(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Kt[e]=new bn(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Kt[e]=new bn(e,5,!1,e.toLowerCase(),null,!1,!1)});var Ev=/[\-:]([a-z])/g;function Tv(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Ev,Tv);Kt[t]=new bn(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Ev,Tv);Kt[t]=new bn(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Ev,Tv);Kt[t]=new bn(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Kt[e]=new bn(e,1,!1,e.toLowerCase(),null,!1,!1)});Kt.xlinkHref=new bn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Kt[e]=new bn(e,1,!1,e.toLowerCase(),null,!0,!0)});function Lv(e,t,n,i){var r=Kt.hasOwnProperty(t)?Kt[t]:null;(r!==null?r.type!==0:i||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(tL(t,n,r,i)&&(n=null),i||r===null?QT(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):r.mustUseProperty?e[r.propertyName]=n===null?r.type===3?!1:"":n:(t=r.attributeName,i=r.attributeNamespace,n===null?e.removeAttribute(t):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}var Ar=JT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,tc=Symbol.for("react.element"),Gs=Symbol.for("react.portal"),$s=Symbol.for("react.fragment"),Cv=Symbol.for("react.strict_mode"),Sm=Symbol.for("react.profiler"),tb=Symbol.for("react.provider"),nb=Symbol.for("react.context"),Rv=Symbol.for("react.forward_ref"),Mm=Symbol.for("react.suspense"),Em=Symbol.for("react.suspense_list"),Pv=Symbol.for("react.memo"),$r=Symbol.for("react.lazy"),ib=Symbol.for("react.offscreen"),w0=Symbol.iterator;function Ka(e){return e===null||typeof e!="object"?null:(e=w0&&e[w0]||e["@@iterator"],typeof e=="function"?e:null)}var Ct=Object.assign,Ld;function bl(e){if(Ld===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Ld=t&&t[1]||""}return`
`+Ld+e}var Cd=!1;function Rd(e,t){if(!e||Cd)return"";Cd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var i=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){i=u}e.call(t.prototype)}else{try{throw Error()}catch(u){i=u}e()}}catch(u){if(u&&i&&typeof u.stack=="string"){for(var r=u.stack.split(`
`),o=i.stack.split(`
`),s=r.length-1,a=o.length-1;1<=s&&0<=a&&r[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(r[s]!==o[a]){if(s!==1||a!==1)do if(s--,a--,0>a||r[s]!==o[a]){var l=`
`+r[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=s&&0<=a);break}}}finally{Cd=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?bl(e):""}function nL(e){switch(e.tag){case 5:return bl(e.type);case 16:return bl("Lazy");case 13:return bl("Suspense");case 19:return bl("SuspenseList");case 0:case 2:case 15:return e=Rd(e.type,!1),e;case 11:return e=Rd(e.type.render,!1),e;case 1:return e=Rd(e.type,!0),e;default:return""}}function Tm(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case $s:return"Fragment";case Gs:return"Portal";case Sm:return"Profiler";case Cv:return"StrictMode";case Mm:return"Suspense";case Em:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case nb:return(e.displayName||"Context")+".Consumer";case tb:return(e._context.displayName||"Context")+".Provider";case Rv:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Pv:return t=e.displayName||null,t!==null?t:Tm(e.type)||"Memo";case $r:t=e._payload,e=e._init;try{return Tm(e(t))}catch{}}return null}function iL(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Tm(t);case 8:return t===Cv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function yo(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function rb(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function rL(e){var t=rb(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(s){i=""+s,o.call(this,s)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(s){i=""+s},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function nc(e){e._valueTracker||(e._valueTracker=rL(e))}function ob(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=rb(e)?e.checked?"true":"false":e.value),e=i,e!==n?(t.setValue(e),!0):!1}function Ff(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Lm(e,t){var n=t.checked;return Ct({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function _0(e,t){var n=t.defaultValue==null?"":t.defaultValue,i=t.checked!=null?t.checked:t.defaultChecked;n=yo(t.value!=null?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function sb(e,t){t=t.checked,t!=null&&Lv(e,"checked",t,!1)}function Cm(e,t){sb(e,t);var n=yo(t.value),i=t.type;if(n!=null)i==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(i==="submit"||i==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Rm(e,t.type,n):t.hasOwnProperty("defaultValue")&&Rm(e,t.type,yo(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function b0(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!(i!=="submit"&&i!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Rm(e,t,n){(t!=="number"||Ff(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Sl=Array.isArray;function aa(e,t,n,i){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&i&&(e[n].defaultSelected=!0)}else{for(n=""+yo(n),t=null,r=0;r<e.length;r++){if(e[r].value===n){e[r].selected=!0,i&&(e[r].defaultSelected=!0);return}t!==null||e[r].disabled||(t=e[r])}t!==null&&(t.selected=!0)}}function Pm(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ne(91));return Ct({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function S0(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(ne(92));if(Sl(n)){if(1<n.length)throw Error(ne(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:yo(n)}}function ab(e,t){var n=yo(t.value),i=yo(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),i!=null&&(e.defaultValue=""+i)}function M0(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function lb(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Am(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?lb(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ic,ub=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,i,r){MSApp.execUnsafeLocalFunction(function(){return e(t,n,i,r)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ic=ic||document.createElement("div"),ic.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ic.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Zl(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Rl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},oL=["Webkit","ms","Moz","O"];Object.keys(Rl).forEach(function(e){oL.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Rl[t]=Rl[e]})});function cb(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Rl.hasOwnProperty(e)&&Rl[e]?(""+t).trim():t+"px"}function fb(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=cb(n,t[n],i);n==="float"&&(n="cssFloat"),i?e.setProperty(n,r):e[n]=r}}var sL=Ct({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Dm(e,t){if(t){if(sL[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ne(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ne(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ne(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ne(62))}}function Om(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fm=null;function Av(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var km=null,la=null,ua=null;function E0(e){if(e=Bu(e)){if(typeof km!="function")throw Error(ne(280));var t=e.stateNode;t&&(t=Dh(t),km(e.stateNode,e.type,t))}}function hb(e){la?ua?ua.push(e):ua=[e]:la=e}function db(){if(la){var e=la,t=ua;if(ua=la=null,E0(e),t)for(e=0;e<t.length;e++)E0(t[e])}}function pb(e,t){return e(t)}function mb(){}var Pd=!1;function gb(e,t,n){if(Pd)return e(t,n);Pd=!0;try{return pb(e,t,n)}finally{Pd=!1,(la!==null||ua!==null)&&(mb(),db())}}function Jl(e,t){var n=e.stateNode;if(n===null)return null;var i=Dh(n);if(i===null)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(ne(231,t,typeof n));return n}var Nm=!1;if(wr)try{var Qa={};Object.defineProperty(Qa,"passive",{get:function(){Nm=!0}}),window.addEventListener("test",Qa,Qa),window.removeEventListener("test",Qa,Qa)}catch{Nm=!1}function aL(e,t,n,i,r,o,s,a,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var Pl=!1,kf=null,Nf=!1,Im=null,lL={onError:function(e){Pl=!0,kf=e}};function uL(e,t,n,i,r,o,s,a,l){Pl=!1,kf=null,aL.apply(lL,arguments)}function cL(e,t,n,i,r,o,s,a,l){if(uL.apply(this,arguments),Pl){if(Pl){var u=kf;Pl=!1,kf=null}else throw Error(ne(198));Nf||(Nf=!0,Im=u)}}function cs(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function vb(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function T0(e){if(cs(e)!==e)throw Error(ne(188))}function fL(e){var t=e.alternate;if(!t){if(t=cs(e),t===null)throw Error(ne(188));return t!==e?null:e}for(var n=e,i=t;;){var r=n.return;if(r===null)break;var o=r.alternate;if(o===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===n)return T0(r),e;if(o===i)return T0(r),t;o=o.sibling}throw Error(ne(188))}if(n.return!==i.return)n=r,i=o;else{for(var s=!1,a=r.child;a;){if(a===n){s=!0,n=r,i=o;break}if(a===i){s=!0,i=r,n=o;break}a=a.sibling}if(!s){for(a=o.child;a;){if(a===n){s=!0,n=o,i=r;break}if(a===i){s=!0,i=o,n=r;break}a=a.sibling}if(!s)throw Error(ne(189))}}if(n.alternate!==i)throw Error(ne(190))}if(n.tag!==3)throw Error(ne(188));return n.stateNode.current===n?e:t}function yb(e){return e=fL(e),e!==null?xb(e):null}function xb(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=xb(e);if(t!==null)return t;e=e.sibling}return null}var wb=Yn.unstable_scheduleCallback,L0=Yn.unstable_cancelCallback,hL=Yn.unstable_shouldYield,dL=Yn.unstable_requestPaint,Ft=Yn.unstable_now,pL=Yn.unstable_getCurrentPriorityLevel,Dv=Yn.unstable_ImmediatePriority,_b=Yn.unstable_UserBlockingPriority,If=Yn.unstable_NormalPriority,mL=Yn.unstable_LowPriority,bb=Yn.unstable_IdlePriority,Ch=null,Gi=null;function gL(e){if(Gi&&typeof Gi.onCommitFiberRoot=="function")try{Gi.onCommitFiberRoot(Ch,e,void 0,(e.current.flags&128)===128)}catch{}}var Pi=Math.clz32?Math.clz32:xL,vL=Math.log,yL=Math.LN2;function xL(e){return e>>>=0,e===0?32:31-(vL(e)/yL|0)|0}var rc=64,oc=4194304;function Ml(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Bf(e,t){var n=e.pendingLanes;if(n===0)return 0;var i=0,r=e.suspendedLanes,o=e.pingedLanes,s=n&268435455;if(s!==0){var a=s&~r;a!==0?i=Ml(a):(o&=s,o!==0&&(i=Ml(o)))}else s=n&~r,s!==0?i=Ml(s):o!==0&&(i=Ml(o));if(i===0)return 0;if(t!==0&&t!==i&&!(t&r)&&(r=i&-i,o=t&-t,r>=o||r===16&&(o&4194240)!==0))return t;if(i&4&&(i|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=i;0<t;)n=31-Pi(t),r=1<<n,i|=e[n],t&=~r;return i}function wL(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _L(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,r=e.expirationTimes,o=e.pendingLanes;0<o;){var s=31-Pi(o),a=1<<s,l=r[s];l===-1?(!(a&n)||a&i)&&(r[s]=wL(a,t)):l<=t&&(e.expiredLanes|=a),o&=~a}}function Bm(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Sb(){var e=rc;return rc<<=1,!(rc&4194240)&&(rc=64),e}function Ad(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Nu(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Pi(t),e[t]=n}function bL(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<n;){var r=31-Pi(n),o=1<<r;t[r]=0,i[r]=-1,e[r]=-1,n&=~o}}function Ov(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-Pi(n),r=1<<i;r&t|e[i]&t&&(e[i]|=t),n&=~r}}var nt=0;function Mb(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Eb,Fv,Tb,Lb,Cb,Um=!1,sc=[],io=null,ro=null,oo=null,Kl=new Map,Ql=new Map,Zr=[],SL="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function C0(e,t){switch(e){case"focusin":case"focusout":io=null;break;case"dragenter":case"dragleave":ro=null;break;case"mouseover":case"mouseout":oo=null;break;case"pointerover":case"pointerout":Kl.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ql.delete(t.pointerId)}}function el(e,t,n,i,r,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:o,targetContainers:[r]},t!==null&&(t=Bu(t),t!==null&&Fv(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,r!==null&&t.indexOf(r)===-1&&t.push(r),e)}function ML(e,t,n,i,r){switch(t){case"focusin":return io=el(io,e,t,n,i,r),!0;case"dragenter":return ro=el(ro,e,t,n,i,r),!0;case"mouseover":return oo=el(oo,e,t,n,i,r),!0;case"pointerover":var o=r.pointerId;return Kl.set(o,el(Kl.get(o)||null,e,t,n,i,r)),!0;case"gotpointercapture":return o=r.pointerId,Ql.set(o,el(Ql.get(o)||null,e,t,n,i,r)),!0}return!1}function Rb(e){var t=Wo(e.target);if(t!==null){var n=cs(t);if(n!==null){if(t=n.tag,t===13){if(t=vb(n),t!==null){e.blockedOn=t,Cb(e.priority,function(){Tb(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function vf(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=zm(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var i=new n.constructor(n.type,n);Fm=i,n.target.dispatchEvent(i),Fm=null}else return t=Bu(n),t!==null&&Fv(t),e.blockedOn=n,!1;t.shift()}return!0}function R0(e,t,n){vf(e)&&n.delete(t)}function EL(){Um=!1,io!==null&&vf(io)&&(io=null),ro!==null&&vf(ro)&&(ro=null),oo!==null&&vf(oo)&&(oo=null),Kl.forEach(R0),Ql.forEach(R0)}function tl(e,t){e.blockedOn===t&&(e.blockedOn=null,Um||(Um=!0,Yn.unstable_scheduleCallback(Yn.unstable_NormalPriority,EL)))}function eu(e){function t(r){return tl(r,e)}if(0<sc.length){tl(sc[0],e);for(var n=1;n<sc.length;n++){var i=sc[n];i.blockedOn===e&&(i.blockedOn=null)}}for(io!==null&&tl(io,e),ro!==null&&tl(ro,e),oo!==null&&tl(oo,e),Kl.forEach(t),Ql.forEach(t),n=0;n<Zr.length;n++)i=Zr[n],i.blockedOn===e&&(i.blockedOn=null);for(;0<Zr.length&&(n=Zr[0],n.blockedOn===null);)Rb(n),n.blockedOn===null&&Zr.shift()}var ca=Ar.ReactCurrentBatchConfig,Uf=!0;function TL(e,t,n,i){var r=nt,o=ca.transition;ca.transition=null;try{nt=1,kv(e,t,n,i)}finally{nt=r,ca.transition=o}}function LL(e,t,n,i){var r=nt,o=ca.transition;ca.transition=null;try{nt=4,kv(e,t,n,i)}finally{nt=r,ca.transition=o}}function kv(e,t,n,i){if(Uf){var r=zm(e,t,n,i);if(r===null)Hd(e,t,i,zf,n),C0(e,i);else if(ML(r,e,t,n,i))i.stopPropagation();else if(C0(e,i),t&4&&-1<SL.indexOf(e)){for(;r!==null;){var o=Bu(r);if(o!==null&&Eb(o),o=zm(e,t,n,i),o===null&&Hd(e,t,i,zf,n),o===r)break;r=o}r!==null&&i.stopPropagation()}else Hd(e,t,i,null,n)}}var zf=null;function zm(e,t,n,i){if(zf=null,e=Av(i),e=Wo(e),e!==null)if(t=cs(e),t===null)e=null;else if(n=t.tag,n===13){if(e=vb(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return zf=e,null}function Pb(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(pL()){case Dv:return 1;case _b:return 4;case If:case mL:return 16;case bb:return 536870912;default:return 16}default:return 16}}var Qr=null,Nv=null,yf=null;function Ab(){if(yf)return yf;var e,t=Nv,n=t.length,i,r="value"in Qr?Qr.value:Qr.textContent,o=r.length;for(e=0;e<n&&t[e]===r[e];e++);var s=n-e;for(i=1;i<=s&&t[n-i]===r[o-i];i++);return yf=r.slice(e,1<i?1-i:void 0)}function xf(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ac(){return!0}function P0(){return!1}function Qn(e){function t(n,i,r,o,s){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?ac:P0,this.isPropagationStopped=P0,this}return Ct(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ac)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ac)},persist:function(){},isPersistent:ac}),t}var Ba={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Iv=Qn(Ba),Iu=Ct({},Ba,{view:0,detail:0}),CL=Qn(Iu),Dd,Od,nl,Rh=Ct({},Iu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Bv,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==nl&&(nl&&e.type==="mousemove"?(Dd=e.screenX-nl.screenX,Od=e.screenY-nl.screenY):Od=Dd=0,nl=e),Dd)},movementY:function(e){return"movementY"in e?e.movementY:Od}}),A0=Qn(Rh),RL=Ct({},Rh,{dataTransfer:0}),PL=Qn(RL),AL=Ct({},Iu,{relatedTarget:0}),Fd=Qn(AL),DL=Ct({},Ba,{animationName:0,elapsedTime:0,pseudoElement:0}),OL=Qn(DL),FL=Ct({},Ba,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kL=Qn(FL),NL=Ct({},Ba,{data:0}),D0=Qn(NL),IL={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},BL={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},UL={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zL(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=UL[e])?!!t[e]:!1}function Bv(){return zL}var HL=Ct({},Iu,{key:function(e){if(e.key){var t=IL[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=xf(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?BL[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Bv,charCode:function(e){return e.type==="keypress"?xf(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?xf(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),jL=Qn(HL),VL=Ct({},Rh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),O0=Qn(VL),WL=Ct({},Iu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Bv}),GL=Qn(WL),$L=Ct({},Ba,{propertyName:0,elapsedTime:0,pseudoElement:0}),XL=Qn($L),YL=Ct({},Rh,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),qL=Qn(YL),ZL=[9,13,27,32],Uv=wr&&"CompositionEvent"in window,Al=null;wr&&"documentMode"in document&&(Al=document.documentMode);var JL=wr&&"TextEvent"in window&&!Al,Db=wr&&(!Uv||Al&&8<Al&&11>=Al),F0=" ",k0=!1;function Ob(e,t){switch(e){case"keyup":return ZL.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Fb(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Xs=!1;function KL(e,t){switch(e){case"compositionend":return Fb(t);case"keypress":return t.which!==32?null:(k0=!0,F0);case"textInput":return e=t.data,e===F0&&k0?null:e;default:return null}}function QL(e,t){if(Xs)return e==="compositionend"||!Uv&&Ob(e,t)?(e=Ab(),yf=Nv=Qr=null,Xs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Db&&t.locale!=="ko"?null:t.data;default:return null}}var eC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function N0(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!eC[e.type]:t==="textarea"}function kb(e,t,n,i){hb(i),t=Hf(t,"onChange"),0<t.length&&(n=new Iv("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var Dl=null,tu=null;function tC(e){$b(e,0)}function Ph(e){var t=Zs(e);if(ob(t))return e}function nC(e,t){if(e==="change")return t}var Nb=!1;if(wr){var kd;if(wr){var Nd="oninput"in document;if(!Nd){var I0=document.createElement("div");I0.setAttribute("oninput","return;"),Nd=typeof I0.oninput=="function"}kd=Nd}else kd=!1;Nb=kd&&(!document.documentMode||9<document.documentMode)}function B0(){Dl&&(Dl.detachEvent("onpropertychange",Ib),tu=Dl=null)}function Ib(e){if(e.propertyName==="value"&&Ph(tu)){var t=[];kb(t,tu,e,Av(e)),gb(tC,t)}}function iC(e,t,n){e==="focusin"?(B0(),Dl=t,tu=n,Dl.attachEvent("onpropertychange",Ib)):e==="focusout"&&B0()}function rC(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ph(tu)}function oC(e,t){if(e==="click")return Ph(t)}function sC(e,t){if(e==="input"||e==="change")return Ph(t)}function aC(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Oi=typeof Object.is=="function"?Object.is:aC;function nu(e,t){if(Oi(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!bm.call(t,r)||!Oi(e[r],t[r]))return!1}return!0}function U0(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function z0(e,t){var n=U0(e);e=0;for(var i;n;){if(n.nodeType===3){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=U0(n)}}function Bb(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Bb(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Ub(){for(var e=window,t=Ff();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Ff(e.document)}return t}function zv(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function lC(e){var t=Ub(),n=e.focusedElem,i=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Bb(n.ownerDocument.documentElement,n)){if(i!==null&&zv(n)){if(t=i.start,e=i.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var r=n.textContent.length,o=Math.min(i.start,r);i=i.end===void 0?o:Math.min(i.end,r),!e.extend&&o>i&&(r=i,i=o,o=r),r=z0(n,o);var s=z0(n,i);r&&s&&(e.rangeCount!==1||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&(t=t.createRange(),t.setStart(r.node,r.offset),e.removeAllRanges(),o>i?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var uC=wr&&"documentMode"in document&&11>=document.documentMode,Ys=null,Hm=null,Ol=null,jm=!1;function H0(e,t,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;jm||Ys==null||Ys!==Ff(i)||(i=Ys,"selectionStart"in i&&zv(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Ol&&nu(Ol,i)||(Ol=i,i=Hf(Hm,"onSelect"),0<i.length&&(t=new Iv("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=Ys)))}function lc(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var qs={animationend:lc("Animation","AnimationEnd"),animationiteration:lc("Animation","AnimationIteration"),animationstart:lc("Animation","AnimationStart"),transitionend:lc("Transition","TransitionEnd")},Id={},zb={};wr&&(zb=document.createElement("div").style,"AnimationEvent"in window||(delete qs.animationend.animation,delete qs.animationiteration.animation,delete qs.animationstart.animation),"TransitionEvent"in window||delete qs.transitionend.transition);function Ah(e){if(Id[e])return Id[e];if(!qs[e])return e;var t=qs[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in zb)return Id[e]=t[n];return e}var Hb=Ah("animationend"),jb=Ah("animationiteration"),Vb=Ah("animationstart"),Wb=Ah("transitionend"),Gb=new Map,j0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Mo(e,t){Gb.set(e,t),us(t,[e])}for(var Bd=0;Bd<j0.length;Bd++){var Ud=j0[Bd],cC=Ud.toLowerCase(),fC=Ud[0].toUpperCase()+Ud.slice(1);Mo(cC,"on"+fC)}Mo(Hb,"onAnimationEnd");Mo(jb,"onAnimationIteration");Mo(Vb,"onAnimationStart");Mo("dblclick","onDoubleClick");Mo("focusin","onFocus");Mo("focusout","onBlur");Mo(Wb,"onTransitionEnd");va("onMouseEnter",["mouseout","mouseover"]);va("onMouseLeave",["mouseout","mouseover"]);va("onPointerEnter",["pointerout","pointerover"]);va("onPointerLeave",["pointerout","pointerover"]);us("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));us("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));us("onBeforeInput",["compositionend","keypress","textInput","paste"]);us("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));us("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));us("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var El="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hC=new Set("cancel close invalid load scroll toggle".split(" ").concat(El));function V0(e,t,n){var i=e.type||"unknown-event";e.currentTarget=n,cL(i,t,void 0,e),e.currentTarget=null}function $b(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var i=e[n],r=i.event;i=i.listeners;e:{var o=void 0;if(t)for(var s=i.length-1;0<=s;s--){var a=i[s],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==o&&r.isPropagationStopped())break e;V0(r,a,u),o=l}else for(s=0;s<i.length;s++){if(a=i[s],l=a.instance,u=a.currentTarget,a=a.listener,l!==o&&r.isPropagationStopped())break e;V0(r,a,u),o=l}}}if(Nf)throw e=Im,Nf=!1,Im=null,e}function dt(e,t){var n=t[Xm];n===void 0&&(n=t[Xm]=new Set);var i=e+"__bubble";n.has(i)||(Xb(t,e,2,!1),n.add(i))}function zd(e,t,n){var i=0;t&&(i|=4),Xb(n,e,i,t)}var uc="_reactListening"+Math.random().toString(36).slice(2);function iu(e){if(!e[uc]){e[uc]=!0,eb.forEach(function(n){n!=="selectionchange"&&(hC.has(n)||zd(n,!1,e),zd(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[uc]||(t[uc]=!0,zd("selectionchange",!1,t))}}function Xb(e,t,n,i){switch(Pb(t)){case 1:var r=TL;break;case 4:r=LL;break;default:r=kv}n=r.bind(null,t,n,e),r=void 0,!Nm||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(r=!0),i?r!==void 0?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):r!==void 0?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function Hd(e,t,n,i,r){var o=i;if(!(t&1)&&!(t&2)&&i!==null)e:for(;;){if(i===null)return;var s=i.tag;if(s===3||s===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(s===4)for(s=i.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;s=s.return}for(;a!==null;){if(s=Wo(a),s===null)return;if(l=s.tag,l===5||l===6){i=o=s;continue e}a=a.parentNode}}i=i.return}gb(function(){var u=o,c=Av(n),f=[];e:{var h=Gb.get(e);if(h!==void 0){var d=Iv,g=e;switch(e){case"keypress":if(xf(n)===0)break e;case"keydown":case"keyup":d=jL;break;case"focusin":g="focus",d=Fd;break;case"focusout":g="blur",d=Fd;break;case"beforeblur":case"afterblur":d=Fd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":d=A0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":d=PL;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":d=GL;break;case Hb:case jb:case Vb:d=OL;break;case Wb:d=XL;break;case"scroll":d=CL;break;case"wheel":d=qL;break;case"copy":case"cut":case"paste":d=kL;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":d=O0}var v=(t&4)!==0,y=!v&&e==="scroll",m=v?h!==null?h+"Capture":null:h;v=[];for(var p=u,x;p!==null;){x=p;var w=x.stateNode;if(x.tag===5&&w!==null&&(x=w,m!==null&&(w=Jl(p,m),w!=null&&v.push(ru(p,w,x)))),y)break;p=p.return}0<v.length&&(h=new d(h,g,null,n,c),f.push({event:h,listeners:v}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",d=e==="mouseout"||e==="pointerout",h&&n!==Fm&&(g=n.relatedTarget||n.fromElement)&&(Wo(g)||g[_r]))break e;if((d||h)&&(h=c.window===c?c:(h=c.ownerDocument)?h.defaultView||h.parentWindow:window,d?(g=n.relatedTarget||n.toElement,d=u,g=g?Wo(g):null,g!==null&&(y=cs(g),g!==y||g.tag!==5&&g.tag!==6)&&(g=null)):(d=null,g=u),d!==g)){if(v=A0,w="onMouseLeave",m="onMouseEnter",p="mouse",(e==="pointerout"||e==="pointerover")&&(v=O0,w="onPointerLeave",m="onPointerEnter",p="pointer"),y=d==null?h:Zs(d),x=g==null?h:Zs(g),h=new v(w,p+"leave",d,n,c),h.target=y,h.relatedTarget=x,w=null,Wo(c)===u&&(v=new v(m,p+"enter",g,n,c),v.target=x,v.relatedTarget=y,w=v),y=w,d&&g)t:{for(v=d,m=g,p=0,x=v;x;x=_s(x))p++;for(x=0,w=m;w;w=_s(w))x++;for(;0<p-x;)v=_s(v),p--;for(;0<x-p;)m=_s(m),x--;for(;p--;){if(v===m||m!==null&&v===m.alternate)break t;v=_s(v),m=_s(m)}v=null}else v=null;d!==null&&W0(f,h,d,v,!1),g!==null&&y!==null&&W0(f,y,g,v,!0)}}e:{if(h=u?Zs(u):window,d=h.nodeName&&h.nodeName.toLowerCase(),d==="select"||d==="input"&&h.type==="file")var b=nC;else if(N0(h))if(Nb)b=sC;else{b=rC;var _=iC}else(d=h.nodeName)&&d.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(b=oC);if(b&&(b=b(e,u))){kb(f,b,n,c);break e}_&&_(e,h,u),e==="focusout"&&(_=h._wrapperState)&&_.controlled&&h.type==="number"&&Rm(h,"number",h.value)}switch(_=u?Zs(u):window,e){case"focusin":(N0(_)||_.contentEditable==="true")&&(Ys=_,Hm=u,Ol=null);break;case"focusout":Ol=Hm=Ys=null;break;case"mousedown":jm=!0;break;case"contextmenu":case"mouseup":case"dragend":jm=!1,H0(f,n,c);break;case"selectionchange":if(uC)break;case"keydown":case"keyup":H0(f,n,c)}var S;if(Uv)e:{switch(e){case"compositionstart":var L="onCompositionStart";break e;case"compositionend":L="onCompositionEnd";break e;case"compositionupdate":L="onCompositionUpdate";break e}L=void 0}else Xs?Ob(e,n)&&(L="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(L="onCompositionStart");L&&(Db&&n.locale!=="ko"&&(Xs||L!=="onCompositionStart"?L==="onCompositionEnd"&&Xs&&(S=Ab()):(Qr=c,Nv="value"in Qr?Qr.value:Qr.textContent,Xs=!0)),_=Hf(u,L),0<_.length&&(L=new D0(L,e,null,n,c),f.push({event:L,listeners:_}),S?L.data=S:(S=Fb(n),S!==null&&(L.data=S)))),(S=JL?KL(e,n):QL(e,n))&&(u=Hf(u,"onBeforeInput"),0<u.length&&(c=new D0("onBeforeInput","beforeinput",null,n,c),f.push({event:c,listeners:u}),c.data=S))}$b(f,t)})}function ru(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hf(e,t){for(var n=t+"Capture",i=[];e!==null;){var r=e,o=r.stateNode;r.tag===5&&o!==null&&(r=o,o=Jl(e,n),o!=null&&i.unshift(ru(e,o,r)),o=Jl(e,t),o!=null&&i.push(ru(e,o,r))),e=e.return}return i}function _s(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function W0(e,t,n,i,r){for(var o=t._reactName,s=[];n!==null&&n!==i;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&u!==null&&(a=u,r?(l=Jl(n,o),l!=null&&s.unshift(ru(n,l,a))):r||(l=Jl(n,o),l!=null&&s.push(ru(n,l,a)))),n=n.return}s.length!==0&&e.push({event:t,listeners:s})}var dC=/\r\n?/g,pC=/\u0000|\uFFFD/g;function G0(e){return(typeof e=="string"?e:""+e).replace(dC,`
`).replace(pC,"")}function cc(e,t,n){if(t=G0(t),G0(e)!==t&&n)throw Error(ne(425))}function jf(){}var Vm=null,Wm=null;function Gm(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var $m=typeof setTimeout=="function"?setTimeout:void 0,mC=typeof clearTimeout=="function"?clearTimeout:void 0,$0=typeof Promise=="function"?Promise:void 0,gC=typeof queueMicrotask=="function"?queueMicrotask:typeof $0<"u"?function(e){return $0.resolve(null).then(e).catch(vC)}:$m;function vC(e){setTimeout(function(){throw e})}function jd(e,t){var n=t,i=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){e.removeChild(r),eu(t);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);eu(t)}function so(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function X0(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Ua=Math.random().toString(36).slice(2),Hi="__reactFiber$"+Ua,ou="__reactProps$"+Ua,_r="__reactContainer$"+Ua,Xm="__reactEvents$"+Ua,yC="__reactListeners$"+Ua,xC="__reactHandles$"+Ua;function Wo(e){var t=e[Hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[_r]||n[Hi]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=X0(e);e!==null;){if(n=e[Hi])return n;e=X0(e)}return t}e=n,n=e.parentNode}return null}function Bu(e){return e=e[Hi]||e[_r],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Zs(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ne(33))}function Dh(e){return e[ou]||null}var Ym=[],Js=-1;function Eo(e){return{current:e}}function mt(e){0>Js||(e.current=Ym[Js],Ym[Js]=null,Js--)}function ct(e,t){Js++,Ym[Js]=e.current,e.current=t}var xo={},cn=Eo(xo),Pn=Eo(!1),Jo=xo;function ya(e,t){var n=e.type.contextTypes;if(!n)return xo;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var r={},o;for(o in n)r[o]=t[o];return i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=r),r}function An(e){return e=e.childContextTypes,e!=null}function Vf(){mt(Pn),mt(cn)}function Y0(e,t,n){if(cn.current!==xo)throw Error(ne(168));ct(cn,t),ct(Pn,n)}function Yb(e,t,n){var i=e.stateNode;if(t=t.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in t))throw Error(ne(108,iL(e)||"Unknown",r));return Ct({},n,i)}function Wf(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||xo,Jo=cn.current,ct(cn,e),ct(Pn,Pn.current),!0}function q0(e,t,n){var i=e.stateNode;if(!i)throw Error(ne(169));n?(e=Yb(e,t,Jo),i.__reactInternalMemoizedMergedChildContext=e,mt(Pn),mt(cn),ct(cn,e)):mt(Pn),ct(Pn,n)}var pr=null,Oh=!1,Vd=!1;function qb(e){pr===null?pr=[e]:pr.push(e)}function wC(e){Oh=!0,qb(e)}function To(){if(!Vd&&pr!==null){Vd=!0;var e=0,t=nt;try{var n=pr;for(nt=1;e<n.length;e++){var i=n[e];do i=i(!0);while(i!==null)}pr=null,Oh=!1}catch(r){throw pr!==null&&(pr=pr.slice(e+1)),wb(Dv,To),r}finally{nt=t,Vd=!1}}return null}var Ks=[],Qs=0,Gf=null,$f=0,oi=[],si=0,Ko=null,gr=1,vr="";function Ho(e,t){Ks[Qs++]=$f,Ks[Qs++]=Gf,Gf=e,$f=t}function Zb(e,t,n){oi[si++]=gr,oi[si++]=vr,oi[si++]=Ko,Ko=e;var i=gr;e=vr;var r=32-Pi(i)-1;i&=~(1<<r),n+=1;var o=32-Pi(t)+r;if(30<o){var s=r-r%5;o=(i&(1<<s)-1).toString(32),i>>=s,r-=s,gr=1<<32-Pi(t)+r|n<<r|i,vr=o+e}else gr=1<<o|n<<r|i,vr=e}function Hv(e){e.return!==null&&(Ho(e,1),Zb(e,1,0))}function jv(e){for(;e===Gf;)Gf=Ks[--Qs],Ks[Qs]=null,$f=Ks[--Qs],Ks[Qs]=null;for(;e===Ko;)Ko=oi[--si],oi[si]=null,vr=oi[--si],oi[si]=null,gr=oi[--si],oi[si]=null}var $n=null,Wn=null,_t=!1,Ei=null;function Jb(e,t){var n=ai(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Z0(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,$n=e,Wn=so(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,$n=e,Wn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Ko!==null?{id:gr,overflow:vr}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=ai(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,$n=e,Wn=null,!0):!1;default:return!1}}function qm(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Zm(e){if(_t){var t=Wn;if(t){var n=t;if(!Z0(e,t)){if(qm(e))throw Error(ne(418));t=so(n.nextSibling);var i=$n;t&&Z0(e,t)?Jb(i,n):(e.flags=e.flags&-4097|2,_t=!1,$n=e)}}else{if(qm(e))throw Error(ne(418));e.flags=e.flags&-4097|2,_t=!1,$n=e}}}function J0(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;$n=e}function fc(e){if(e!==$n)return!1;if(!_t)return J0(e),_t=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Gm(e.type,e.memoizedProps)),t&&(t=Wn)){if(qm(e))throw Kb(),Error(ne(418));for(;t;)Jb(e,t),t=so(t.nextSibling)}if(J0(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ne(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Wn=so(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Wn=null}}else Wn=$n?so(e.stateNode.nextSibling):null;return!0}function Kb(){for(var e=Wn;e;)e=so(e.nextSibling)}function xa(){Wn=$n=null,_t=!1}function Vv(e){Ei===null?Ei=[e]:Ei.push(e)}var _C=Ar.ReactCurrentBatchConfig;function il(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ne(309));var i=n.stateNode}if(!i)throw Error(ne(147,e));var r=i,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(s){var a=r.refs;s===null?delete a[o]:a[o]=s},t._stringRef=o,t)}if(typeof e!="string")throw Error(ne(284));if(!n._owner)throw Error(ne(290,e))}return e}function hc(e,t){throw e=Object.prototype.toString.call(t),Error(ne(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function K0(e){var t=e._init;return t(e._payload)}function Qb(e){function t(m,p){if(e){var x=m.deletions;x===null?(m.deletions=[p],m.flags|=16):x.push(p)}}function n(m,p){if(!e)return null;for(;p!==null;)t(m,p),p=p.sibling;return null}function i(m,p){for(m=new Map;p!==null;)p.key!==null?m.set(p.key,p):m.set(p.index,p),p=p.sibling;return m}function r(m,p){return m=co(m,p),m.index=0,m.sibling=null,m}function o(m,p,x){return m.index=x,e?(x=m.alternate,x!==null?(x=x.index,x<p?(m.flags|=2,p):x):(m.flags|=2,p)):(m.flags|=1048576,p)}function s(m){return e&&m.alternate===null&&(m.flags|=2),m}function a(m,p,x,w){return p===null||p.tag!==6?(p=Zd(x,m.mode,w),p.return=m,p):(p=r(p,x),p.return=m,p)}function l(m,p,x,w){var b=x.type;return b===$s?c(m,p,x.props.children,w,x.key):p!==null&&(p.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===$r&&K0(b)===p.type)?(w=r(p,x.props),w.ref=il(m,p,x),w.return=m,w):(w=Tf(x.type,x.key,x.props,null,m.mode,w),w.ref=il(m,p,x),w.return=m,w)}function u(m,p,x,w){return p===null||p.tag!==4||p.stateNode.containerInfo!==x.containerInfo||p.stateNode.implementation!==x.implementation?(p=Jd(x,m.mode,w),p.return=m,p):(p=r(p,x.children||[]),p.return=m,p)}function c(m,p,x,w,b){return p===null||p.tag!==7?(p=qo(x,m.mode,w,b),p.return=m,p):(p=r(p,x),p.return=m,p)}function f(m,p,x){if(typeof p=="string"&&p!==""||typeof p=="number")return p=Zd(""+p,m.mode,x),p.return=m,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case tc:return x=Tf(p.type,p.key,p.props,null,m.mode,x),x.ref=il(m,null,p),x.return=m,x;case Gs:return p=Jd(p,m.mode,x),p.return=m,p;case $r:var w=p._init;return f(m,w(p._payload),x)}if(Sl(p)||Ka(p))return p=qo(p,m.mode,x,null),p.return=m,p;hc(m,p)}return null}function h(m,p,x,w){var b=p!==null?p.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return b!==null?null:a(m,p,""+x,w);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case tc:return x.key===b?l(m,p,x,w):null;case Gs:return x.key===b?u(m,p,x,w):null;case $r:return b=x._init,h(m,p,b(x._payload),w)}if(Sl(x)||Ka(x))return b!==null?null:c(m,p,x,w,null);hc(m,x)}return null}function d(m,p,x,w,b){if(typeof w=="string"&&w!==""||typeof w=="number")return m=m.get(x)||null,a(p,m,""+w,b);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case tc:return m=m.get(w.key===null?x:w.key)||null,l(p,m,w,b);case Gs:return m=m.get(w.key===null?x:w.key)||null,u(p,m,w,b);case $r:var _=w._init;return d(m,p,x,_(w._payload),b)}if(Sl(w)||Ka(w))return m=m.get(x)||null,c(p,m,w,b,null);hc(p,w)}return null}function g(m,p,x,w){for(var b=null,_=null,S=p,L=p=0,E=null;S!==null&&L<x.length;L++){S.index>L?(E=S,S=null):E=S.sibling;var A=h(m,S,x[L],w);if(A===null){S===null&&(S=E);break}e&&S&&A.alternate===null&&t(m,S),p=o(A,p,L),_===null?b=A:_.sibling=A,_=A,S=E}if(L===x.length)return n(m,S),_t&&Ho(m,L),b;if(S===null){for(;L<x.length;L++)S=f(m,x[L],w),S!==null&&(p=o(S,p,L),_===null?b=S:_.sibling=S,_=S);return _t&&Ho(m,L),b}for(S=i(m,S);L<x.length;L++)E=d(S,m,L,x[L],w),E!==null&&(e&&E.alternate!==null&&S.delete(E.key===null?L:E.key),p=o(E,p,L),_===null?b=E:_.sibling=E,_=E);return e&&S.forEach(function(B){return t(m,B)}),_t&&Ho(m,L),b}function v(m,p,x,w){var b=Ka(x);if(typeof b!="function")throw Error(ne(150));if(x=b.call(x),x==null)throw Error(ne(151));for(var _=b=null,S=p,L=p=0,E=null,A=x.next();S!==null&&!A.done;L++,A=x.next()){S.index>L?(E=S,S=null):E=S.sibling;var B=h(m,S,A.value,w);if(B===null){S===null&&(S=E);break}e&&S&&B.alternate===null&&t(m,S),p=o(B,p,L),_===null?b=B:_.sibling=B,_=B,S=E}if(A.done)return n(m,S),_t&&Ho(m,L),b;if(S===null){for(;!A.done;L++,A=x.next())A=f(m,A.value,w),A!==null&&(p=o(A,p,L),_===null?b=A:_.sibling=A,_=A);return _t&&Ho(m,L),b}for(S=i(m,S);!A.done;L++,A=x.next())A=d(S,m,L,A.value,w),A!==null&&(e&&A.alternate!==null&&S.delete(A.key===null?L:A.key),p=o(A,p,L),_===null?b=A:_.sibling=A,_=A);return e&&S.forEach(function(j){return t(m,j)}),_t&&Ho(m,L),b}function y(m,p,x,w){if(typeof x=="object"&&x!==null&&x.type===$s&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case tc:e:{for(var b=x.key,_=p;_!==null;){if(_.key===b){if(b=x.type,b===$s){if(_.tag===7){n(m,_.sibling),p=r(_,x.props.children),p.return=m,m=p;break e}}else if(_.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===$r&&K0(b)===_.type){n(m,_.sibling),p=r(_,x.props),p.ref=il(m,_,x),p.return=m,m=p;break e}n(m,_);break}else t(m,_);_=_.sibling}x.type===$s?(p=qo(x.props.children,m.mode,w,x.key),p.return=m,m=p):(w=Tf(x.type,x.key,x.props,null,m.mode,w),w.ref=il(m,p,x),w.return=m,m=w)}return s(m);case Gs:e:{for(_=x.key;p!==null;){if(p.key===_)if(p.tag===4&&p.stateNode.containerInfo===x.containerInfo&&p.stateNode.implementation===x.implementation){n(m,p.sibling),p=r(p,x.children||[]),p.return=m,m=p;break e}else{n(m,p);break}else t(m,p);p=p.sibling}p=Jd(x,m.mode,w),p.return=m,m=p}return s(m);case $r:return _=x._init,y(m,p,_(x._payload),w)}if(Sl(x))return g(m,p,x,w);if(Ka(x))return v(m,p,x,w);hc(m,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,p!==null&&p.tag===6?(n(m,p.sibling),p=r(p,x),p.return=m,m=p):(n(m,p),p=Zd(x,m.mode,w),p.return=m,m=p),s(m)):n(m,p)}return y}var wa=Qb(!0),eS=Qb(!1),Xf=Eo(null),Yf=null,ea=null,Wv=null;function Gv(){Wv=ea=Yf=null}function $v(e){var t=Xf.current;mt(Xf),e._currentValue=t}function Jm(e,t,n){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function fa(e,t){Yf=e,Wv=ea=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Rn=!0),e.firstContext=null)}function hi(e){var t=e._currentValue;if(Wv!==e)if(e={context:e,memoizedValue:t,next:null},ea===null){if(Yf===null)throw Error(ne(308));ea=e,Yf.dependencies={lanes:0,firstContext:e}}else ea=ea.next=e;return t}var Go=null;function Xv(e){Go===null?Go=[e]:Go.push(e)}function tS(e,t,n,i){var r=t.interleaved;return r===null?(n.next=n,Xv(t)):(n.next=r.next,r.next=n),t.interleaved=n,br(e,i)}function br(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Xr=!1;function Yv(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function nS(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function yr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ao(e,t,n){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,Ze&2){var r=i.pending;return r===null?t.next=t:(t.next=r.next,r.next=t),i.pending=t,br(e,n)}return r=i.interleaved,r===null?(t.next=t,Xv(i)):(t.next=r.next,r.next=t),i.interleaved=t,br(e,n)}function wf(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,Ov(e,n)}}function Q0(e,t){var n=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?r=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?r=o=t:o=o.next=t}else r=o=t;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:i.shared,effects:i.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function qf(e,t,n,i){var r=e.updateQueue;Xr=!1;var o=r.firstBaseUpdate,s=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,u=l.next;l.next=null,s===null?o=u:s.next=u,s=l;var c=e.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==s&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(o!==null){var f=r.baseState;s=0,c=u=l=null,a=o;do{var h=a.lane,d=a.eventTime;if((i&h)===h){c!==null&&(c=c.next={eventTime:d,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=e,v=a;switch(h=t,d=n,v.tag){case 1:if(g=v.payload,typeof g=="function"){f=g.call(d,f,h);break e}f=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=v.payload,h=typeof g=="function"?g.call(d,f,h):g,h==null)break e;f=Ct({},f,h);break e;case 2:Xr=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,h=r.effects,h===null?r.effects=[a]:h.push(a))}else d={eventTime:d,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=d,l=f):c=c.next=d,s|=h;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;h=a,a=h.next,h.next=null,r.lastBaseUpdate=h,r.shared.pending=null}}while(!0);if(c===null&&(l=f),r.baseState=l,r.firstBaseUpdate=u,r.lastBaseUpdate=c,t=r.shared.interleaved,t!==null){r=t;do s|=r.lane,r=r.next;while(r!==t)}else o===null&&(r.shared.lanes=0);es|=s,e.lanes=s,e.memoizedState=f}}function e1(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var i=e[t],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(ne(191,r));r.call(i)}}}var Uu={},$i=Eo(Uu),su=Eo(Uu),au=Eo(Uu);function $o(e){if(e===Uu)throw Error(ne(174));return e}function qv(e,t){switch(ct(au,t),ct(su,e),ct($i,Uu),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Am(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Am(t,e)}mt($i),ct($i,t)}function _a(){mt($i),mt(su),mt(au)}function iS(e){$o(au.current);var t=$o($i.current),n=Am(t,e.type);t!==n&&(ct(su,e),ct($i,n))}function Zv(e){su.current===e&&(mt($i),mt(su))}var Et=Eo(0);function Zf(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Wd=[];function Jv(){for(var e=0;e<Wd.length;e++)Wd[e]._workInProgressVersionPrimary=null;Wd.length=0}var _f=Ar.ReactCurrentDispatcher,Gd=Ar.ReactCurrentBatchConfig,Qo=0,Lt=null,zt=null,Wt=null,Jf=!1,Fl=!1,lu=0,bC=0;function Qt(){throw Error(ne(321))}function Kv(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Oi(e[n],t[n]))return!1;return!0}function Qv(e,t,n,i,r,o){if(Qo=o,Lt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,_f.current=e===null||e.memoizedState===null?TC:LC,e=n(i,r),Fl){o=0;do{if(Fl=!1,lu=0,25<=o)throw Error(ne(301));o+=1,Wt=zt=null,t.updateQueue=null,_f.current=CC,e=n(i,r)}while(Fl)}if(_f.current=Kf,t=zt!==null&&zt.next!==null,Qo=0,Wt=zt=Lt=null,Jf=!1,t)throw Error(ne(300));return e}function ey(){var e=lu!==0;return lu=0,e}function Bi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Wt===null?Lt.memoizedState=Wt=e:Wt=Wt.next=e,Wt}function di(){if(zt===null){var e=Lt.alternate;e=e!==null?e.memoizedState:null}else e=zt.next;var t=Wt===null?Lt.memoizedState:Wt.next;if(t!==null)Wt=t,zt=e;else{if(e===null)throw Error(ne(310));zt=e,e={memoizedState:zt.memoizedState,baseState:zt.baseState,baseQueue:zt.baseQueue,queue:zt.queue,next:null},Wt===null?Lt.memoizedState=Wt=e:Wt=Wt.next=e}return Wt}function uu(e,t){return typeof t=="function"?t(e):t}function $d(e){var t=di(),n=t.queue;if(n===null)throw Error(ne(311));n.lastRenderedReducer=e;var i=zt,r=i.baseQueue,o=n.pending;if(o!==null){if(r!==null){var s=r.next;r.next=o.next,o.next=s}i.baseQueue=r=o,n.pending=null}if(r!==null){o=r.next,i=i.baseState;var a=s=null,l=null,u=o;do{var c=u.lane;if((Qo&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:e(i,u.action);else{var f={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=f,s=i):l=l.next=f,Lt.lanes|=c,es|=c}u=u.next}while(u!==null&&u!==o);l===null?s=i:l.next=a,Oi(i,t.memoizedState)||(Rn=!0),t.memoizedState=i,t.baseState=s,t.baseQueue=l,n.lastRenderedState=i}if(e=n.interleaved,e!==null){r=e;do o=r.lane,Lt.lanes|=o,es|=o,r=r.next;while(r!==e)}else r===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Xd(e){var t=di(),n=t.queue;if(n===null)throw Error(ne(311));n.lastRenderedReducer=e;var i=n.dispatch,r=n.pending,o=t.memoizedState;if(r!==null){n.pending=null;var s=r=r.next;do o=e(o,s.action),s=s.next;while(s!==r);Oi(o,t.memoizedState)||(Rn=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,i]}function rS(){}function oS(e,t){var n=Lt,i=di(),r=t(),o=!Oi(i.memoizedState,r);if(o&&(i.memoizedState=r,Rn=!0),i=i.queue,ty(lS.bind(null,n,i,e),[e]),i.getSnapshot!==t||o||Wt!==null&&Wt.memoizedState.tag&1){if(n.flags|=2048,cu(9,aS.bind(null,n,i,r,t),void 0,null),Xt===null)throw Error(ne(349));Qo&30||sS(n,t,r)}return r}function sS(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Lt.updateQueue,t===null?(t={lastEffect:null,stores:null},Lt.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function aS(e,t,n,i){t.value=n,t.getSnapshot=i,uS(t)&&cS(e)}function lS(e,t,n){return n(function(){uS(t)&&cS(e)})}function uS(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Oi(e,n)}catch{return!0}}function cS(e){var t=br(e,1);t!==null&&Ai(t,e,1,-1)}function t1(e){var t=Bi();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:uu,lastRenderedState:e},t.queue=e,e=e.dispatch=EC.bind(null,Lt,e),[t.memoizedState,e]}function cu(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},t=Lt.updateQueue,t===null?(t={lastEffect:null,stores:null},Lt.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e)),e}function fS(){return di().memoizedState}function bf(e,t,n,i){var r=Bi();Lt.flags|=e,r.memoizedState=cu(1|t,n,void 0,i===void 0?null:i)}function Fh(e,t,n,i){var r=di();i=i===void 0?null:i;var o=void 0;if(zt!==null){var s=zt.memoizedState;if(o=s.destroy,i!==null&&Kv(i,s.deps)){r.memoizedState=cu(t,n,o,i);return}}Lt.flags|=e,r.memoizedState=cu(1|t,n,o,i)}function n1(e,t){return bf(8390656,8,e,t)}function ty(e,t){return Fh(2048,8,e,t)}function hS(e,t){return Fh(4,2,e,t)}function dS(e,t){return Fh(4,4,e,t)}function pS(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function mS(e,t,n){return n=n!=null?n.concat([e]):null,Fh(4,4,pS.bind(null,t,e),n)}function ny(){}function gS(e,t){var n=di();t=t===void 0?null:t;var i=n.memoizedState;return i!==null&&t!==null&&Kv(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function vS(e,t){var n=di();t=t===void 0?null:t;var i=n.memoizedState;return i!==null&&t!==null&&Kv(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function yS(e,t,n){return Qo&21?(Oi(n,t)||(n=Sb(),Lt.lanes|=n,es|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Rn=!0),e.memoizedState=n)}function SC(e,t){var n=nt;nt=n!==0&&4>n?n:4,e(!0);var i=Gd.transition;Gd.transition={};try{e(!1),t()}finally{nt=n,Gd.transition=i}}function xS(){return di().memoizedState}function MC(e,t,n){var i=uo(e);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},wS(e))_S(t,n);else if(n=tS(e,t,n,i),n!==null){var r=yn();Ai(n,e,i,r),bS(n,t,i)}}function EC(e,t,n){var i=uo(e),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(wS(e))_S(t,r);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var s=t.lastRenderedState,a=o(s,n);if(r.hasEagerState=!0,r.eagerState=a,Oi(a,s)){var l=t.interleaved;l===null?(r.next=r,Xv(t)):(r.next=l.next,l.next=r),t.interleaved=r;return}}catch{}finally{}n=tS(e,t,r,i),n!==null&&(r=yn(),Ai(n,e,i,r),bS(n,t,i))}}function wS(e){var t=e.alternate;return e===Lt||t!==null&&t===Lt}function _S(e,t){Fl=Jf=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function bS(e,t,n){if(n&4194240){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,Ov(e,n)}}var Kf={readContext:hi,useCallback:Qt,useContext:Qt,useEffect:Qt,useImperativeHandle:Qt,useInsertionEffect:Qt,useLayoutEffect:Qt,useMemo:Qt,useReducer:Qt,useRef:Qt,useState:Qt,useDebugValue:Qt,useDeferredValue:Qt,useTransition:Qt,useMutableSource:Qt,useSyncExternalStore:Qt,useId:Qt,unstable_isNewReconciler:!1},TC={readContext:hi,useCallback:function(e,t){return Bi().memoizedState=[e,t===void 0?null:t],e},useContext:hi,useEffect:n1,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,bf(4194308,4,pS.bind(null,t,e),n)},useLayoutEffect:function(e,t){return bf(4194308,4,e,t)},useInsertionEffect:function(e,t){return bf(4,2,e,t)},useMemo:function(e,t){var n=Bi();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=Bi();return t=n!==void 0?n(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=MC.bind(null,Lt,e),[i.memoizedState,e]},useRef:function(e){var t=Bi();return e={current:e},t.memoizedState=e},useState:t1,useDebugValue:ny,useDeferredValue:function(e){return Bi().memoizedState=e},useTransition:function(){var e=t1(!1),t=e[0];return e=SC.bind(null,e[1]),Bi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var i=Lt,r=Bi();if(_t){if(n===void 0)throw Error(ne(407));n=n()}else{if(n=t(),Xt===null)throw Error(ne(349));Qo&30||sS(i,t,n)}r.memoizedState=n;var o={value:n,getSnapshot:t};return r.queue=o,n1(lS.bind(null,i,o,e),[e]),i.flags|=2048,cu(9,aS.bind(null,i,o,n,t),void 0,null),n},useId:function(){var e=Bi(),t=Xt.identifierPrefix;if(_t){var n=vr,i=gr;n=(i&~(1<<32-Pi(i)-1)).toString(32)+n,t=":"+t+"R"+n,n=lu++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=bC++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},LC={readContext:hi,useCallback:gS,useContext:hi,useEffect:ty,useImperativeHandle:mS,useInsertionEffect:hS,useLayoutEffect:dS,useMemo:vS,useReducer:$d,useRef:fS,useState:function(){return $d(uu)},useDebugValue:ny,useDeferredValue:function(e){var t=di();return yS(t,zt.memoizedState,e)},useTransition:function(){var e=$d(uu)[0],t=di().memoizedState;return[e,t]},useMutableSource:rS,useSyncExternalStore:oS,useId:xS,unstable_isNewReconciler:!1},CC={readContext:hi,useCallback:gS,useContext:hi,useEffect:ty,useImperativeHandle:mS,useInsertionEffect:hS,useLayoutEffect:dS,useMemo:vS,useReducer:Xd,useRef:fS,useState:function(){return Xd(uu)},useDebugValue:ny,useDeferredValue:function(e){var t=di();return zt===null?t.memoizedState=e:yS(t,zt.memoizedState,e)},useTransition:function(){var e=Xd(uu)[0],t=di().memoizedState;return[e,t]},useMutableSource:rS,useSyncExternalStore:oS,useId:xS,unstable_isNewReconciler:!1};function Si(e,t){if(e&&e.defaultProps){t=Ct({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Km(e,t,n,i){t=e.memoizedState,n=n(i,t),n=n==null?t:Ct({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var kh={isMounted:function(e){return(e=e._reactInternals)?cs(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=yn(),r=uo(e),o=yr(i,r);o.payload=t,n!=null&&(o.callback=n),t=ao(e,o,r),t!==null&&(Ai(t,e,r,i),wf(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=yn(),r=uo(e),o=yr(i,r);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=ao(e,o,r),t!==null&&(Ai(t,e,r,i),wf(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=yn(),i=uo(e),r=yr(n,i);r.tag=2,t!=null&&(r.callback=t),t=ao(e,r,i),t!==null&&(Ai(t,e,i,n),wf(t,e,i))}};function i1(e,t,n,i,r,o,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,o,s):t.prototype&&t.prototype.isPureReactComponent?!nu(n,i)||!nu(r,o):!0}function SS(e,t,n){var i=!1,r=xo,o=t.contextType;return typeof o=="object"&&o!==null?o=hi(o):(r=An(t)?Jo:cn.current,i=t.contextTypes,o=(i=i!=null)?ya(e,r):xo),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=kh,e.stateNode=t,t._reactInternals=e,i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=o),t}function r1(e,t,n,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&kh.enqueueReplaceState(t,t.state,null)}function Qm(e,t,n,i){var r=e.stateNode;r.props=n,r.state=e.memoizedState,r.refs={},Yv(e);var o=t.contextType;typeof o=="object"&&o!==null?r.context=hi(o):(o=An(t)?Jo:cn.current,r.context=ya(e,o)),r.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(Km(e,t,o,n),r.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(t=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),t!==r.state&&kh.enqueueReplaceState(r,r.state,null),qf(e,n,r,i),r.state=e.memoizedState),typeof r.componentDidMount=="function"&&(e.flags|=4194308)}function ba(e,t){try{var n="",i=t;do n+=nL(i),i=i.return;while(i);var r=n}catch(o){r=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:r,digest:null}}function Yd(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function eg(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var RC=typeof WeakMap=="function"?WeakMap:Map;function MS(e,t,n){n=yr(-1,n),n.tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){eh||(eh=!0,cg=i),eg(e,t)},n}function ES(e,t,n){n=yr(-1,n),n.tag=3;var i=e.type.getDerivedStateFromError;if(typeof i=="function"){var r=t.value;n.payload=function(){return i(r)},n.callback=function(){eg(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){eg(e,t),typeof i!="function"&&(lo===null?lo=new Set([this]):lo.add(this));var s=t.stack;this.componentDidCatch(t.value,{componentStack:s!==null?s:""})}),n}function o1(e,t,n){var i=e.pingCache;if(i===null){i=e.pingCache=new RC;var r=new Set;i.set(t,r)}else r=i.get(t),r===void 0&&(r=new Set,i.set(t,r));r.has(n)||(r.add(n),e=VC.bind(null,e,t,n),t.then(e,e))}function s1(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function a1(e,t,n,i,r){return e.mode&1?(e.flags|=65536,e.lanes=r,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=yr(-1,1),t.tag=2,ao(n,t,1))),n.lanes|=1),e)}var PC=Ar.ReactCurrentOwner,Rn=!1;function pn(e,t,n,i){t.child=e===null?eS(t,null,n,i):wa(t,e.child,n,i)}function l1(e,t,n,i,r){n=n.render;var o=t.ref;return fa(t,r),i=Qv(e,t,n,i,o,r),n=ey(),e!==null&&!Rn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Sr(e,t,r)):(_t&&n&&Hv(t),t.flags|=1,pn(e,t,i,r),t.child)}function u1(e,t,n,i,r){if(e===null){var o=n.type;return typeof o=="function"&&!cy(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,TS(e,t,o,i,r)):(e=Tf(n.type,null,i,t,t.mode,r),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&r)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:nu,n(s,i)&&e.ref===t.ref)return Sr(e,t,r)}return t.flags|=1,e=co(o,i),e.ref=t.ref,e.return=t,t.child=e}function TS(e,t,n,i,r){if(e!==null){var o=e.memoizedProps;if(nu(o,i)&&e.ref===t.ref)if(Rn=!1,t.pendingProps=i=o,(e.lanes&r)!==0)e.flags&131072&&(Rn=!0);else return t.lanes=e.lanes,Sr(e,t,r)}return tg(e,t,n,i,r)}function LS(e,t,n){var i=t.pendingProps,r=i.children,o=e!==null?e.memoizedState:null;if(i.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ct(na,Hn),Hn|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ct(na,Hn),Hn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=o!==null?o.baseLanes:n,ct(na,Hn),Hn|=i}else o!==null?(i=o.baseLanes|n,t.memoizedState=null):i=n,ct(na,Hn),Hn|=i;return pn(e,t,r,n),t.child}function CS(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function tg(e,t,n,i,r){var o=An(n)?Jo:cn.current;return o=ya(t,o),fa(t,r),n=Qv(e,t,n,i,o,r),i=ey(),e!==null&&!Rn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Sr(e,t,r)):(_t&&i&&Hv(t),t.flags|=1,pn(e,t,n,r),t.child)}function c1(e,t,n,i,r){if(An(n)){var o=!0;Wf(t)}else o=!1;if(fa(t,r),t.stateNode===null)Sf(e,t),SS(t,n,i),Qm(t,n,i,r),i=!0;else if(e===null){var s=t.stateNode,a=t.memoizedProps;s.props=a;var l=s.context,u=n.contextType;typeof u=="object"&&u!==null?u=hi(u):(u=An(n)?Jo:cn.current,u=ya(t,u));var c=n.getDerivedStateFromProps,f=typeof c=="function"||typeof s.getSnapshotBeforeUpdate=="function";f||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==i||l!==u)&&r1(t,s,i,u),Xr=!1;var h=t.memoizedState;s.state=h,qf(t,i,s,r),l=t.memoizedState,a!==i||h!==l||Pn.current||Xr?(typeof c=="function"&&(Km(t,n,c,i),l=t.memoizedState),(a=Xr||i1(t,n,a,i,h,l,u))?(f||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=l),s.props=i,s.state=l,s.context=u,i=a):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{s=t.stateNode,nS(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:Si(t.type,a),s.props=u,f=t.pendingProps,h=s.context,l=n.contextType,typeof l=="object"&&l!==null?l=hi(l):(l=An(n)?Jo:cn.current,l=ya(t,l));var d=n.getDerivedStateFromProps;(c=typeof d=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==f||h!==l)&&r1(t,s,i,l),Xr=!1,h=t.memoizedState,s.state=h,qf(t,i,s,r);var g=t.memoizedState;a!==f||h!==g||Pn.current||Xr?(typeof d=="function"&&(Km(t,n,d,i),g=t.memoizedState),(u=Xr||i1(t,n,u,i,h,g,l)||!1)?(c||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(i,g,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(i,g,l)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=g),s.props=i,s.state=g,s.context=l,i=u):(typeof s.componentDidUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),i=!1)}return ng(e,t,n,i,o,r)}function ng(e,t,n,i,r,o){CS(e,t);var s=(t.flags&128)!==0;if(!i&&!s)return r&&q0(t,n,!1),Sr(e,t,o);i=t.stateNode,PC.current=t;var a=s&&typeof n.getDerivedStateFromError!="function"?null:i.render();return t.flags|=1,e!==null&&s?(t.child=wa(t,e.child,null,o),t.child=wa(t,null,a,o)):pn(e,t,a,o),t.memoizedState=i.state,r&&q0(t,n,!0),t.child}function RS(e){var t=e.stateNode;t.pendingContext?Y0(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Y0(e,t.context,!1),qv(e,t.containerInfo)}function f1(e,t,n,i,r){return xa(),Vv(r),t.flags|=256,pn(e,t,n,i),t.child}var ig={dehydrated:null,treeContext:null,retryLane:0};function rg(e){return{baseLanes:e,cachePool:null,transitions:null}}function PS(e,t,n){var i=t.pendingProps,r=Et.current,o=!1,s=(t.flags&128)!==0,a;if((a=s)||(a=e!==null&&e.memoizedState===null?!1:(r&2)!==0),a?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(r|=1),ct(Et,r&1),e===null)return Zm(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(s=i.children,e=i.fallback,o?(i=t.mode,o=t.child,s={mode:"hidden",children:s},!(i&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=Bh(s,i,0,null),e=qo(e,i,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=rg(n),t.memoizedState=ig,e):iy(t,s));if(r=e.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return AC(e,t,s,i,a,r,n);if(o){o=i.fallback,s=t.mode,r=e.child,a=r.sibling;var l={mode:"hidden",children:i.children};return!(s&1)&&t.child!==r?(i=t.child,i.childLanes=0,i.pendingProps=l,t.deletions=null):(i=co(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?o=co(a,o):(o=qo(o,s,n,null),o.flags|=2),o.return=t,i.return=t,i.sibling=o,t.child=i,i=o,o=t.child,s=e.child.memoizedState,s=s===null?rg(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=e.childLanes&~n,t.memoizedState=ig,i}return o=e.child,e=o.sibling,i=co(o,{mode:"visible",children:i.children}),!(t.mode&1)&&(i.lanes=n),i.return=t,i.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function iy(e,t){return t=Bh({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function dc(e,t,n,i){return i!==null&&Vv(i),wa(t,e.child,null,n),e=iy(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function AC(e,t,n,i,r,o,s){if(n)return t.flags&256?(t.flags&=-257,i=Yd(Error(ne(422))),dc(e,t,s,i)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=i.fallback,r=t.mode,i=Bh({mode:"visible",children:i.children},r,0,null),o=qo(o,r,s,null),o.flags|=2,i.return=t,o.return=t,i.sibling=o,t.child=i,t.mode&1&&wa(t,e.child,null,s),t.child.memoizedState=rg(s),t.memoizedState=ig,o);if(!(t.mode&1))return dc(e,t,s,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,o=Error(ne(419)),i=Yd(o,i,void 0),dc(e,t,s,i)}if(a=(s&e.childLanes)!==0,Rn||a){if(i=Xt,i!==null){switch(s&-s){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|s)?0:r,r!==0&&r!==o.retryLane&&(o.retryLane=r,br(e,r),Ai(i,e,r,-1))}return uy(),i=Yd(Error(ne(421))),dc(e,t,s,i)}return r.data==="$?"?(t.flags|=128,t.child=e.child,t=WC.bind(null,e),r._reactRetry=t,null):(e=o.treeContext,Wn=so(r.nextSibling),$n=t,_t=!0,Ei=null,e!==null&&(oi[si++]=gr,oi[si++]=vr,oi[si++]=Ko,gr=e.id,vr=e.overflow,Ko=t),t=iy(t,i.children),t.flags|=4096,t)}function h1(e,t,n){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),Jm(e.return,t,n)}function qd(e,t,n,i,r){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=n,o.tailMode=r)}function AS(e,t,n){var i=t.pendingProps,r=i.revealOrder,o=i.tail;if(pn(e,t,i.children,n),i=Et.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&h1(e,n,t);else if(e.tag===19)h1(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(ct(Et,i),!(t.mode&1))t.memoizedState=null;else switch(r){case"forwards":for(n=t.child,r=null;n!==null;)e=n.alternate,e!==null&&Zf(e)===null&&(r=n),n=n.sibling;n=r,n===null?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),qd(t,!1,r,n,o);break;case"backwards":for(n=null,r=t.child,t.child=null;r!==null;){if(e=r.alternate,e!==null&&Zf(e)===null){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}qd(t,!0,n,null,o);break;case"together":qd(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Sf(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Sr(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),es|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ne(153));if(t.child!==null){for(e=t.child,n=co(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=co(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function DC(e,t,n){switch(t.tag){case 3:RS(t),xa();break;case 5:iS(t);break;case 1:An(t.type)&&Wf(t);break;case 4:qv(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,r=t.memoizedProps.value;ct(Xf,i._currentValue),i._currentValue=r;break;case 13:if(i=t.memoizedState,i!==null)return i.dehydrated!==null?(ct(Et,Et.current&1),t.flags|=128,null):n&t.child.childLanes?PS(e,t,n):(ct(Et,Et.current&1),e=Sr(e,t,n),e!==null?e.sibling:null);ct(Et,Et.current&1);break;case 19:if(i=(n&t.childLanes)!==0,e.flags&128){if(i)return AS(e,t,n);t.flags|=128}if(r=t.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),ct(Et,Et.current),i)break;return null;case 22:case 23:return t.lanes=0,LS(e,t,n)}return Sr(e,t,n)}var DS,og,OS,FS;DS=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};og=function(){};OS=function(e,t,n,i){var r=e.memoizedProps;if(r!==i){e=t.stateNode,$o($i.current);var o=null;switch(n){case"input":r=Lm(e,r),i=Lm(e,i),o=[];break;case"select":r=Ct({},r,{value:void 0}),i=Ct({},i,{value:void 0}),o=[];break;case"textarea":r=Pm(e,r),i=Pm(e,i),o=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(e.onclick=jf)}Dm(n,i);var s;n=null;for(u in r)if(!i.hasOwnProperty(u)&&r.hasOwnProperty(u)&&r[u]!=null)if(u==="style"){var a=r[u];for(s in a)a.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ql.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in i){var l=i[u];if(a=r!=null?r[u]:void 0,i.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(s in a)!a.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&a[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(o||(o=[]),o.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(o=o||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ql.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&dt("scroll",e),o||a===l||(o=[])):(o=o||[]).push(u,l))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}};FS=function(e,t,n,i){n!==i&&(t.flags|=4)};function rl(e,t){if(!_t)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function en(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,i=0;if(t)for(var r=e.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=e,r=r.sibling;else for(r=e.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function OC(e,t,n){var i=t.pendingProps;switch(jv(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return en(t),null;case 1:return An(t.type)&&Vf(),en(t),null;case 3:return i=t.stateNode,_a(),mt(Pn),mt(cn),Jv(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(fc(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ei!==null&&(dg(Ei),Ei=null))),og(e,t),en(t),null;case 5:Zv(t);var r=$o(au.current);if(n=t.type,e!==null&&t.stateNode!=null)OS(e,t,n,i,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(t.stateNode===null)throw Error(ne(166));return en(t),null}if(e=$o($i.current),fc(t)){i=t.stateNode,n=t.type;var o=t.memoizedProps;switch(i[Hi]=t,i[ou]=o,e=(t.mode&1)!==0,n){case"dialog":dt("cancel",i),dt("close",i);break;case"iframe":case"object":case"embed":dt("load",i);break;case"video":case"audio":for(r=0;r<El.length;r++)dt(El[r],i);break;case"source":dt("error",i);break;case"img":case"image":case"link":dt("error",i),dt("load",i);break;case"details":dt("toggle",i);break;case"input":_0(i,o),dt("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},dt("invalid",i);break;case"textarea":S0(i,o),dt("invalid",i)}Dm(n,o),r=null;for(var s in o)if(o.hasOwnProperty(s)){var a=o[s];s==="children"?typeof a=="string"?i.textContent!==a&&(o.suppressHydrationWarning!==!0&&cc(i.textContent,a,e),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&cc(i.textContent,a,e),r=["children",""+a]):ql.hasOwnProperty(s)&&a!=null&&s==="onScroll"&&dt("scroll",i)}switch(n){case"input":nc(i),b0(i,o,!0);break;case"textarea":nc(i),M0(i);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(i.onclick=jf)}i=r,t.updateQueue=i,i!==null&&(t.flags|=4)}else{s=r.nodeType===9?r:r.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=lb(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof i.is=="string"?e=s.createElement(n,{is:i.is}):(e=s.createElement(n),n==="select"&&(s=e,i.multiple?s.multiple=!0:i.size&&(s.size=i.size))):e=s.createElementNS(e,n),e[Hi]=t,e[ou]=i,DS(e,t,!1,!1),t.stateNode=e;e:{switch(s=Om(n,i),n){case"dialog":dt("cancel",e),dt("close",e),r=i;break;case"iframe":case"object":case"embed":dt("load",e),r=i;break;case"video":case"audio":for(r=0;r<El.length;r++)dt(El[r],e);r=i;break;case"source":dt("error",e),r=i;break;case"img":case"image":case"link":dt("error",e),dt("load",e),r=i;break;case"details":dt("toggle",e),r=i;break;case"input":_0(e,i),r=Lm(e,i),dt("invalid",e);break;case"option":r=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},r=Ct({},i,{value:void 0}),dt("invalid",e);break;case"textarea":S0(e,i),r=Pm(e,i),dt("invalid",e);break;default:r=i}Dm(n,r),a=r;for(o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="style"?fb(e,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&ub(e,l)):o==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Zl(e,l):typeof l=="number"&&Zl(e,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(ql.hasOwnProperty(o)?l!=null&&o==="onScroll"&&dt("scroll",e):l!=null&&Lv(e,o,l,s))}switch(n){case"input":nc(e),b0(e,i,!1);break;case"textarea":nc(e),M0(e);break;case"option":i.value!=null&&e.setAttribute("value",""+yo(i.value));break;case"select":e.multiple=!!i.multiple,o=i.value,o!=null?aa(e,!!i.multiple,o,!1):i.defaultValue!=null&&aa(e,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(e.onclick=jf)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return en(t),null;case 6:if(e&&t.stateNode!=null)FS(e,t,e.memoizedProps,i);else{if(typeof i!="string"&&t.stateNode===null)throw Error(ne(166));if(n=$o(au.current),$o($i.current),fc(t)){if(i=t.stateNode,n=t.memoizedProps,i[Hi]=t,(o=i.nodeValue!==n)&&(e=$n,e!==null))switch(e.tag){case 3:cc(i.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&cc(i.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Hi]=t,t.stateNode=i}return en(t),null;case 13:if(mt(Et),i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(_t&&Wn!==null&&t.mode&1&&!(t.flags&128))Kb(),xa(),t.flags|=98560,o=!1;else if(o=fc(t),i!==null&&i.dehydrated!==null){if(e===null){if(!o)throw Error(ne(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(ne(317));o[Hi]=t}else xa(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;en(t),o=!1}else Ei!==null&&(dg(Ei),Ei=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(i=i!==null,i!==(e!==null&&e.memoizedState!==null)&&i&&(t.child.flags|=8192,t.mode&1&&(e===null||Et.current&1?Ht===0&&(Ht=3):uy())),t.updateQueue!==null&&(t.flags|=4),en(t),null);case 4:return _a(),og(e,t),e===null&&iu(t.stateNode.containerInfo),en(t),null;case 10:return $v(t.type._context),en(t),null;case 17:return An(t.type)&&Vf(),en(t),null;case 19:if(mt(Et),o=t.memoizedState,o===null)return en(t),null;if(i=(t.flags&128)!==0,s=o.rendering,s===null)if(i)rl(o,!1);else{if(Ht!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=Zf(e),s!==null){for(t.flags|=128,rl(o,!1),i=s.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=n,n=t.child;n!==null;)o=n,e=i,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ct(Et,Et.current&1|2),t.child}e=e.sibling}o.tail!==null&&Ft()>Sa&&(t.flags|=128,i=!0,rl(o,!1),t.lanes=4194304)}else{if(!i)if(e=Zf(s),e!==null){if(t.flags|=128,i=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),rl(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!_t)return en(t),null}else 2*Ft()-o.renderingStartTime>Sa&&n!==1073741824&&(t.flags|=128,i=!0,rl(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(n=o.last,n!==null?n.sibling=s:t.child=s,o.last=s)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Ft(),t.sibling=null,n=Et.current,ct(Et,i?n&1|2:n&1),t):(en(t),null);case 22:case 23:return ly(),i=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==i&&(t.flags|=8192),i&&t.mode&1?Hn&1073741824&&(en(t),t.subtreeFlags&6&&(t.flags|=8192)):en(t),null;case 24:return null;case 25:return null}throw Error(ne(156,t.tag))}function FC(e,t){switch(jv(t),t.tag){case 1:return An(t.type)&&Vf(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return _a(),mt(Pn),mt(cn),Jv(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Zv(t),null;case 13:if(mt(Et),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ne(340));xa()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return mt(Et),null;case 4:return _a(),null;case 10:return $v(t.type._context),null;case 22:case 23:return ly(),null;case 24:return null;default:return null}}var pc=!1,an=!1,kC=typeof WeakSet=="function"?WeakSet:Set,ye=null;function ta(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){Rt(e,t,i)}else n.current=null}function sg(e,t,n){try{n()}catch(i){Rt(e,t,i)}}var d1=!1;function NC(e,t){if(Vm=Uf,e=Ub(),zv(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var s=0,a=-1,l=-1,u=0,c=0,f=e,h=null;t:for(;;){for(var d;f!==n||r!==0&&f.nodeType!==3||(a=s+r),f!==o||i!==0&&f.nodeType!==3||(l=s+i),f.nodeType===3&&(s+=f.nodeValue.length),(d=f.firstChild)!==null;)h=f,f=d;for(;;){if(f===e)break t;if(h===n&&++u===r&&(a=s),h===o&&++c===i&&(l=s),(d=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=d}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Wm={focusedElem:e,selectionRange:n},Uf=!1,ye=t;ye!==null;)if(t=ye,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ye=e;else for(;ye!==null;){t=ye;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var v=g.memoizedProps,y=g.memoizedState,m=t.stateNode,p=m.getSnapshotBeforeUpdate(t.elementType===t.type?v:Si(t.type,v),y);m.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var x=t.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ne(163))}}catch(w){Rt(t,t.return,w)}if(e=t.sibling,e!==null){e.return=t.return,ye=e;break}ye=t.return}return g=d1,d1=!1,g}function kl(e,t,n){var i=t.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&e)===e){var o=r.destroy;r.destroy=void 0,o!==void 0&&sg(t,n,o)}r=r.next}while(r!==i)}}function Nh(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function ag(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function kS(e){var t=e.alternate;t!==null&&(e.alternate=null,kS(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Hi],delete t[ou],delete t[Xm],delete t[yC],delete t[xC])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function NS(e){return e.tag===5||e.tag===3||e.tag===4}function p1(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||NS(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function lg(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=jf));else if(i!==4&&(e=e.child,e!==null))for(lg(e,t,n),e=e.sibling;e!==null;)lg(e,t,n),e=e.sibling}function ug(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(i!==4&&(e=e.child,e!==null))for(ug(e,t,n),e=e.sibling;e!==null;)ug(e,t,n),e=e.sibling}var Zt=null,Mi=!1;function Dr(e,t,n){for(n=n.child;n!==null;)IS(e,t,n),n=n.sibling}function IS(e,t,n){if(Gi&&typeof Gi.onCommitFiberUnmount=="function")try{Gi.onCommitFiberUnmount(Ch,n)}catch{}switch(n.tag){case 5:an||ta(n,t);case 6:var i=Zt,r=Mi;Zt=null,Dr(e,t,n),Zt=i,Mi=r,Zt!==null&&(Mi?(e=Zt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Zt.removeChild(n.stateNode));break;case 18:Zt!==null&&(Mi?(e=Zt,n=n.stateNode,e.nodeType===8?jd(e.parentNode,n):e.nodeType===1&&jd(e,n),eu(e)):jd(Zt,n.stateNode));break;case 4:i=Zt,r=Mi,Zt=n.stateNode.containerInfo,Mi=!0,Dr(e,t,n),Zt=i,Mi=r;break;case 0:case 11:case 14:case 15:if(!an&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var o=r,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&sg(n,t,s),r=r.next}while(r!==i)}Dr(e,t,n);break;case 1:if(!an&&(ta(n,t),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){Rt(n,t,a)}Dr(e,t,n);break;case 21:Dr(e,t,n);break;case 22:n.mode&1?(an=(i=an)||n.memoizedState!==null,Dr(e,t,n),an=i):Dr(e,t,n);break;default:Dr(e,t,n)}}function m1(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new kC),t.forEach(function(i){var r=GC.bind(null,e,i);n.has(i)||(n.add(i),i.then(r,r))})}}function vi(e,t){var n=t.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var o=e,s=t,a=s;e:for(;a!==null;){switch(a.tag){case 5:Zt=a.stateNode,Mi=!1;break e;case 3:Zt=a.stateNode.containerInfo,Mi=!0;break e;case 4:Zt=a.stateNode.containerInfo,Mi=!0;break e}a=a.return}if(Zt===null)throw Error(ne(160));IS(o,s,r),Zt=null,Mi=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(u){Rt(r,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)BS(t,e),t=t.sibling}function BS(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(vi(t,e),Fi(e),i&4){try{kl(3,e,e.return),Nh(3,e)}catch(v){Rt(e,e.return,v)}try{kl(5,e,e.return)}catch(v){Rt(e,e.return,v)}}break;case 1:vi(t,e),Fi(e),i&512&&n!==null&&ta(n,n.return);break;case 5:if(vi(t,e),Fi(e),i&512&&n!==null&&ta(n,n.return),e.flags&32){var r=e.stateNode;try{Zl(r,"")}catch(v){Rt(e,e.return,v)}}if(i&4&&(r=e.stateNode,r!=null)){var o=e.memoizedProps,s=n!==null?n.memoizedProps:o,a=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&sb(r,o),Om(a,s);var u=Om(a,o);for(s=0;s<l.length;s+=2){var c=l[s],f=l[s+1];c==="style"?fb(r,f):c==="dangerouslySetInnerHTML"?ub(r,f):c==="children"?Zl(r,f):Lv(r,c,f,u)}switch(a){case"input":Cm(r,o);break;case"textarea":ab(r,o);break;case"select":var h=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!o.multiple;var d=o.value;d!=null?aa(r,!!o.multiple,d,!1):h!==!!o.multiple&&(o.defaultValue!=null?aa(r,!!o.multiple,o.defaultValue,!0):aa(r,!!o.multiple,o.multiple?[]:"",!1))}r[ou]=o}catch(v){Rt(e,e.return,v)}}break;case 6:if(vi(t,e),Fi(e),i&4){if(e.stateNode===null)throw Error(ne(162));r=e.stateNode,o=e.memoizedProps;try{r.nodeValue=o}catch(v){Rt(e,e.return,v)}}break;case 3:if(vi(t,e),Fi(e),i&4&&n!==null&&n.memoizedState.isDehydrated)try{eu(t.containerInfo)}catch(v){Rt(e,e.return,v)}break;case 4:vi(t,e),Fi(e);break;case 13:vi(t,e),Fi(e),r=e.child,r.flags&8192&&(o=r.memoizedState!==null,r.stateNode.isHidden=o,!o||r.alternate!==null&&r.alternate.memoizedState!==null||(sy=Ft())),i&4&&m1(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(an=(u=an)||c,vi(t,e),an=u):vi(t,e),Fi(e),i&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!c&&e.mode&1)for(ye=e,c=e.child;c!==null;){for(f=ye=c;ye!==null;){switch(h=ye,d=h.child,h.tag){case 0:case 11:case 14:case 15:kl(4,h,h.return);break;case 1:ta(h,h.return);var g=h.stateNode;if(typeof g.componentWillUnmount=="function"){i=h,n=h.return;try{t=i,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(v){Rt(i,n,v)}}break;case 5:ta(h,h.return);break;case 22:if(h.memoizedState!==null){v1(f);continue}}d!==null?(d.return=h,ye=d):v1(f)}c=c.sibling}e:for(c=null,f=e;;){if(f.tag===5){if(c===null){c=f;try{r=f.stateNode,u?(o=r.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=f.stateNode,l=f.memoizedProps.style,s=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=cb("display",s))}catch(v){Rt(e,e.return,v)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(v){Rt(e,e.return,v)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:vi(t,e),Fi(e),i&4&&m1(e);break;case 21:break;default:vi(t,e),Fi(e)}}function Fi(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(NS(n)){var i=n;break e}n=n.return}throw Error(ne(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(Zl(r,""),i.flags&=-33);var o=p1(e);ug(e,o,r);break;case 3:case 4:var s=i.stateNode.containerInfo,a=p1(e);lg(e,a,s);break;default:throw Error(ne(161))}}catch(l){Rt(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function IC(e,t,n){ye=e,US(e)}function US(e,t,n){for(var i=(e.mode&1)!==0;ye!==null;){var r=ye,o=r.child;if(r.tag===22&&i){var s=r.memoizedState!==null||pc;if(!s){var a=r.alternate,l=a!==null&&a.memoizedState!==null||an;a=pc;var u=an;if(pc=s,(an=l)&&!u)for(ye=r;ye!==null;)s=ye,l=s.child,s.tag===22&&s.memoizedState!==null?y1(r):l!==null?(l.return=s,ye=l):y1(r);for(;o!==null;)ye=o,US(o),o=o.sibling;ye=r,pc=a,an=u}g1(e)}else r.subtreeFlags&8772&&o!==null?(o.return=r,ye=o):g1(e)}}function g1(e){for(;ye!==null;){var t=ye;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:an||Nh(5,t);break;case 1:var i=t.stateNode;if(t.flags&4&&!an)if(n===null)i.componentDidMount();else{var r=t.elementType===t.type?n.memoizedProps:Si(t.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&e1(t,o,i);break;case 3:var s=t.updateQueue;if(s!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}e1(t,s,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&eu(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ne(163))}an||t.flags&512&&ag(t)}catch(h){Rt(t,t.return,h)}}if(t===e){ye=null;break}if(n=t.sibling,n!==null){n.return=t.return,ye=n;break}ye=t.return}}function v1(e){for(;ye!==null;){var t=ye;if(t===e){ye=null;break}var n=t.sibling;if(n!==null){n.return=t.return,ye=n;break}ye=t.return}}function y1(e){for(;ye!==null;){var t=ye;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Nh(4,t)}catch(l){Rt(t,n,l)}break;case 1:var i=t.stateNode;if(typeof i.componentDidMount=="function"){var r=t.return;try{i.componentDidMount()}catch(l){Rt(t,r,l)}}var o=t.return;try{ag(t)}catch(l){Rt(t,o,l)}break;case 5:var s=t.return;try{ag(t)}catch(l){Rt(t,s,l)}}}catch(l){Rt(t,t.return,l)}if(t===e){ye=null;break}var a=t.sibling;if(a!==null){a.return=t.return,ye=a;break}ye=t.return}}var BC=Math.ceil,Qf=Ar.ReactCurrentDispatcher,ry=Ar.ReactCurrentOwner,ci=Ar.ReactCurrentBatchConfig,Ze=0,Xt=null,Bt=null,Jt=0,Hn=0,na=Eo(0),Ht=0,fu=null,es=0,Ih=0,oy=0,Nl=null,Tn=null,sy=0,Sa=1/0,dr=null,eh=!1,cg=null,lo=null,mc=!1,eo=null,th=0,Il=0,fg=null,Mf=-1,Ef=0;function yn(){return Ze&6?Ft():Mf!==-1?Mf:Mf=Ft()}function uo(e){return e.mode&1?Ze&2&&Jt!==0?Jt&-Jt:_C.transition!==null?(Ef===0&&(Ef=Sb()),Ef):(e=nt,e!==0||(e=window.event,e=e===void 0?16:Pb(e.type)),e):1}function Ai(e,t,n,i){if(50<Il)throw Il=0,fg=null,Error(ne(185));Nu(e,n,i),(!(Ze&2)||e!==Xt)&&(e===Xt&&(!(Ze&2)&&(Ih|=n),Ht===4&&Jr(e,Jt)),Dn(e,i),n===1&&Ze===0&&!(t.mode&1)&&(Sa=Ft()+500,Oh&&To()))}function Dn(e,t){var n=e.callbackNode;_L(e,t);var i=Bf(e,e===Xt?Jt:0);if(i===0)n!==null&&L0(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(n!=null&&L0(n),t===1)e.tag===0?wC(x1.bind(null,e)):qb(x1.bind(null,e)),gC(function(){!(Ze&6)&&To()}),n=null;else{switch(Mb(i)){case 1:n=Dv;break;case 4:n=_b;break;case 16:n=If;break;case 536870912:n=bb;break;default:n=If}n=XS(n,zS.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function zS(e,t){if(Mf=-1,Ef=0,Ze&6)throw Error(ne(327));var n=e.callbackNode;if(ha()&&e.callbackNode!==n)return null;var i=Bf(e,e===Xt?Jt:0);if(i===0)return null;if(i&30||i&e.expiredLanes||t)t=nh(e,i);else{t=i;var r=Ze;Ze|=2;var o=jS();(Xt!==e||Jt!==t)&&(dr=null,Sa=Ft()+500,Yo(e,t));do try{HC();break}catch(a){HS(e,a)}while(!0);Gv(),Qf.current=o,Ze=r,Bt!==null?t=0:(Xt=null,Jt=0,t=Ht)}if(t!==0){if(t===2&&(r=Bm(e),r!==0&&(i=r,t=hg(e,r))),t===1)throw n=fu,Yo(e,0),Jr(e,i),Dn(e,Ft()),n;if(t===6)Jr(e,i);else{if(r=e.current.alternate,!(i&30)&&!UC(r)&&(t=nh(e,i),t===2&&(o=Bm(e),o!==0&&(i=o,t=hg(e,o))),t===1))throw n=fu,Yo(e,0),Jr(e,i),Dn(e,Ft()),n;switch(e.finishedWork=r,e.finishedLanes=i,t){case 0:case 1:throw Error(ne(345));case 2:jo(e,Tn,dr);break;case 3:if(Jr(e,i),(i&130023424)===i&&(t=sy+500-Ft(),10<t)){if(Bf(e,0)!==0)break;if(r=e.suspendedLanes,(r&i)!==i){yn(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=$m(jo.bind(null,e,Tn,dr),t);break}jo(e,Tn,dr);break;case 4:if(Jr(e,i),(i&4194240)===i)break;for(t=e.eventTimes,r=-1;0<i;){var s=31-Pi(i);o=1<<s,s=t[s],s>r&&(r=s),i&=~o}if(i=r,i=Ft()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*BC(i/1960))-i,10<i){e.timeoutHandle=$m(jo.bind(null,e,Tn,dr),i);break}jo(e,Tn,dr);break;case 5:jo(e,Tn,dr);break;default:throw Error(ne(329))}}}return Dn(e,Ft()),e.callbackNode===n?zS.bind(null,e):null}function hg(e,t){var n=Nl;return e.current.memoizedState.isDehydrated&&(Yo(e,t).flags|=256),e=nh(e,t),e!==2&&(t=Tn,Tn=n,t!==null&&dg(t)),e}function dg(e){Tn===null?Tn=e:Tn.push.apply(Tn,e)}function UC(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],o=r.getSnapshot;r=r.value;try{if(!Oi(o(),r))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Jr(e,t){for(t&=~oy,t&=~Ih,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Pi(t),i=1<<n;e[n]=-1,t&=~i}}function x1(e){if(Ze&6)throw Error(ne(327));ha();var t=Bf(e,0);if(!(t&1))return Dn(e,Ft()),null;var n=nh(e,t);if(e.tag!==0&&n===2){var i=Bm(e);i!==0&&(t=i,n=hg(e,i))}if(n===1)throw n=fu,Yo(e,0),Jr(e,t),Dn(e,Ft()),n;if(n===6)throw Error(ne(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,jo(e,Tn,dr),Dn(e,Ft()),null}function ay(e,t){var n=Ze;Ze|=1;try{return e(t)}finally{Ze=n,Ze===0&&(Sa=Ft()+500,Oh&&To())}}function ts(e){eo!==null&&eo.tag===0&&!(Ze&6)&&ha();var t=Ze;Ze|=1;var n=ci.transition,i=nt;try{if(ci.transition=null,nt=1,e)return e()}finally{nt=i,ci.transition=n,Ze=t,!(Ze&6)&&To()}}function ly(){Hn=na.current,mt(na)}function Yo(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,mC(n)),Bt!==null)for(n=Bt.return;n!==null;){var i=n;switch(jv(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Vf();break;case 3:_a(),mt(Pn),mt(cn),Jv();break;case 5:Zv(i);break;case 4:_a();break;case 13:mt(Et);break;case 19:mt(Et);break;case 10:$v(i.type._context);break;case 22:case 23:ly()}n=n.return}if(Xt=e,Bt=e=co(e.current,null),Jt=Hn=t,Ht=0,fu=null,oy=Ih=es=0,Tn=Nl=null,Go!==null){for(t=0;t<Go.length;t++)if(n=Go[t],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,o=n.pending;if(o!==null){var s=o.next;o.next=r,i.next=s}n.pending=i}Go=null}return e}function HS(e,t){do{var n=Bt;try{if(Gv(),_f.current=Kf,Jf){for(var i=Lt.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}Jf=!1}if(Qo=0,Wt=zt=Lt=null,Fl=!1,lu=0,ry.current=null,n===null||n.return===null){Ht=1,fu=t,Bt=null;break}e:{var o=e,s=n.return,a=n,l=t;if(t=Jt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var h=c.alternate;h?(c.updateQueue=h.updateQueue,c.memoizedState=h.memoizedState,c.lanes=h.lanes):(c.updateQueue=null,c.memoizedState=null)}var d=s1(s);if(d!==null){d.flags&=-257,a1(d,s,a,o,t),d.mode&1&&o1(o,u,t),t=d,l=u;var g=t.updateQueue;if(g===null){var v=new Set;v.add(l),t.updateQueue=v}else g.add(l);break e}else{if(!(t&1)){o1(o,u,t),uy();break e}l=Error(ne(426))}}else if(_t&&a.mode&1){var y=s1(s);if(y!==null){!(y.flags&65536)&&(y.flags|=256),a1(y,s,a,o,t),Vv(ba(l,a));break e}}o=l=ba(l,a),Ht!==4&&(Ht=2),Nl===null?Nl=[o]:Nl.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var m=MS(o,l,t);Q0(o,m);break e;case 1:a=l;var p=o.type,x=o.stateNode;if(!(o.flags&128)&&(typeof p.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(lo===null||!lo.has(x)))){o.flags|=65536,t&=-t,o.lanes|=t;var w=ES(o,a,t);Q0(o,w);break e}}o=o.return}while(o!==null)}WS(n)}catch(b){t=b,Bt===n&&n!==null&&(Bt=n=n.return);continue}break}while(!0)}function jS(){var e=Qf.current;return Qf.current=Kf,e===null?Kf:e}function uy(){(Ht===0||Ht===3||Ht===2)&&(Ht=4),Xt===null||!(es&268435455)&&!(Ih&268435455)||Jr(Xt,Jt)}function nh(e,t){var n=Ze;Ze|=2;var i=jS();(Xt!==e||Jt!==t)&&(dr=null,Yo(e,t));do try{zC();break}catch(r){HS(e,r)}while(!0);if(Gv(),Ze=n,Qf.current=i,Bt!==null)throw Error(ne(261));return Xt=null,Jt=0,Ht}function zC(){for(;Bt!==null;)VS(Bt)}function HC(){for(;Bt!==null&&!hL();)VS(Bt)}function VS(e){var t=$S(e.alternate,e,Hn);e.memoizedProps=e.pendingProps,t===null?WS(e):Bt=t,ry.current=null}function WS(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=FC(n,t),n!==null){n.flags&=32767,Bt=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ht=6,Bt=null;return}}else if(n=OC(n,t,Hn),n!==null){Bt=n;return}if(t=t.sibling,t!==null){Bt=t;return}Bt=t=e}while(t!==null);Ht===0&&(Ht=5)}function jo(e,t,n){var i=nt,r=ci.transition;try{ci.transition=null,nt=1,jC(e,t,n,i)}finally{ci.transition=r,nt=i}return null}function jC(e,t,n,i){do ha();while(eo!==null);if(Ze&6)throw Error(ne(327));n=e.finishedWork;var r=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(ne(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(bL(e,o),e===Xt&&(Bt=Xt=null,Jt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||mc||(mc=!0,XS(If,function(){return ha(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=ci.transition,ci.transition=null;var s=nt;nt=1;var a=Ze;Ze|=4,ry.current=null,NC(e,n),BS(n,e),lC(Wm),Uf=!!Vm,Wm=Vm=null,e.current=n,IC(n),dL(),Ze=a,nt=s,ci.transition=o}else e.current=n;if(mc&&(mc=!1,eo=e,th=r),o=e.pendingLanes,o===0&&(lo=null),gL(n.stateNode),Dn(e,Ft()),t!==null)for(i=e.onRecoverableError,n=0;n<t.length;n++)r=t[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(eh)throw eh=!1,e=cg,cg=null,e;return th&1&&e.tag!==0&&ha(),o=e.pendingLanes,o&1?e===fg?Il++:(Il=0,fg=e):Il=0,To(),null}function ha(){if(eo!==null){var e=Mb(th),t=ci.transition,n=nt;try{if(ci.transition=null,nt=16>e?16:e,eo===null)var i=!1;else{if(e=eo,eo=null,th=0,Ze&6)throw Error(ne(331));var r=Ze;for(Ze|=4,ye=e.current;ye!==null;){var o=ye,s=o.child;if(ye.flags&16){var a=o.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(ye=u;ye!==null;){var c=ye;switch(c.tag){case 0:case 11:case 15:kl(8,c,o)}var f=c.child;if(f!==null)f.return=c,ye=f;else for(;ye!==null;){c=ye;var h=c.sibling,d=c.return;if(kS(c),c===u){ye=null;break}if(h!==null){h.return=d,ye=h;break}ye=d}}}var g=o.alternate;if(g!==null){var v=g.child;if(v!==null){g.child=null;do{var y=v.sibling;v.sibling=null,v=y}while(v!==null)}}ye=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,ye=s;else e:for(;ye!==null;){if(o=ye,o.flags&2048)switch(o.tag){case 0:case 11:case 15:kl(9,o,o.return)}var m=o.sibling;if(m!==null){m.return=o.return,ye=m;break e}ye=o.return}}var p=e.current;for(ye=p;ye!==null;){s=ye;var x=s.child;if(s.subtreeFlags&2064&&x!==null)x.return=s,ye=x;else e:for(s=p;ye!==null;){if(a=ye,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Nh(9,a)}}catch(b){Rt(a,a.return,b)}if(a===s){ye=null;break e}var w=a.sibling;if(w!==null){w.return=a.return,ye=w;break e}ye=a.return}}if(Ze=r,To(),Gi&&typeof Gi.onPostCommitFiberRoot=="function")try{Gi.onPostCommitFiberRoot(Ch,e)}catch{}i=!0}return i}finally{nt=n,ci.transition=t}}return!1}function w1(e,t,n){t=ba(n,t),t=MS(e,t,1),e=ao(e,t,1),t=yn(),e!==null&&(Nu(e,1,t),Dn(e,t))}function Rt(e,t,n){if(e.tag===3)w1(e,e,n);else for(;t!==null;){if(t.tag===3){w1(t,e,n);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(lo===null||!lo.has(i))){e=ba(n,e),e=ES(t,e,1),t=ao(t,e,1),e=yn(),t!==null&&(Nu(t,1,e),Dn(t,e));break}}t=t.return}}function VC(e,t,n){var i=e.pingCache;i!==null&&i.delete(t),t=yn(),e.pingedLanes|=e.suspendedLanes&n,Xt===e&&(Jt&n)===n&&(Ht===4||Ht===3&&(Jt&130023424)===Jt&&500>Ft()-sy?Yo(e,0):oy|=n),Dn(e,t)}function GS(e,t){t===0&&(e.mode&1?(t=oc,oc<<=1,!(oc&130023424)&&(oc=4194304)):t=1);var n=yn();e=br(e,t),e!==null&&(Nu(e,t,n),Dn(e,n))}function WC(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),GS(e,n)}function GC(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,r=e.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(ne(314))}i!==null&&i.delete(t),GS(e,n)}var $S;$S=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Pn.current)Rn=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Rn=!1,DC(e,t,n);Rn=!!(e.flags&131072)}else Rn=!1,_t&&t.flags&1048576&&Zb(t,$f,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;Sf(e,t),e=t.pendingProps;var r=ya(t,cn.current);fa(t,n),r=Qv(null,t,i,e,r,n);var o=ey();return t.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,An(i)?(o=!0,Wf(t)):o=!1,t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Yv(t),r.updater=kh,t.stateNode=r,r._reactInternals=t,Qm(t,i,e,n),t=ng(null,t,i,!0,o,n)):(t.tag=0,_t&&o&&Hv(t),pn(null,t,r,n),t=t.child),t;case 16:i=t.elementType;e:{switch(Sf(e,t),e=t.pendingProps,r=i._init,i=r(i._payload),t.type=i,r=t.tag=XC(i),e=Si(i,e),r){case 0:t=tg(null,t,i,e,n);break e;case 1:t=c1(null,t,i,e,n);break e;case 11:t=l1(null,t,i,e,n);break e;case 14:t=u1(null,t,i,Si(i.type,e),n);break e}throw Error(ne(306,i,""))}return t;case 0:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:Si(i,r),tg(e,t,i,r,n);case 1:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:Si(i,r),c1(e,t,i,r,n);case 3:e:{if(RS(t),e===null)throw Error(ne(387));i=t.pendingProps,o=t.memoizedState,r=o.element,nS(e,t),qf(t,i,null,n);var s=t.memoizedState;if(i=s.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){r=ba(Error(ne(423)),t),t=f1(e,t,i,n,r);break e}else if(i!==r){r=ba(Error(ne(424)),t),t=f1(e,t,i,n,r);break e}else for(Wn=so(t.stateNode.containerInfo.firstChild),$n=t,_t=!0,Ei=null,n=eS(t,null,i,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(xa(),i===r){t=Sr(e,t,n);break e}pn(e,t,i,n)}t=t.child}return t;case 5:return iS(t),e===null&&Zm(t),i=t.type,r=t.pendingProps,o=e!==null?e.memoizedProps:null,s=r.children,Gm(i,r)?s=null:o!==null&&Gm(i,o)&&(t.flags|=32),CS(e,t),pn(e,t,s,n),t.child;case 6:return e===null&&Zm(t),null;case 13:return PS(e,t,n);case 4:return qv(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=wa(t,null,i,n):pn(e,t,i,n),t.child;case 11:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:Si(i,r),l1(e,t,i,r,n);case 7:return pn(e,t,t.pendingProps,n),t.child;case 8:return pn(e,t,t.pendingProps.children,n),t.child;case 12:return pn(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(i=t.type._context,r=t.pendingProps,o=t.memoizedProps,s=r.value,ct(Xf,i._currentValue),i._currentValue=s,o!==null)if(Oi(o.value,s)){if(o.children===r.children&&!Pn.current){t=Sr(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var a=o.dependencies;if(a!==null){s=o.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(o.tag===1){l=yr(-1,n&-n),l.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Jm(o.return,n,t),a.lanes|=n;break}l=l.next}}else if(o.tag===10)s=o.type===t.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(ne(341));s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),Jm(s,n,t),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===t){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}pn(e,t,r.children,n),t=t.child}return t;case 9:return r=t.type,i=t.pendingProps.children,fa(t,n),r=hi(r),i=i(r),t.flags|=1,pn(e,t,i,n),t.child;case 14:return i=t.type,r=Si(i,t.pendingProps),r=Si(i.type,r),u1(e,t,i,r,n);case 15:return TS(e,t,t.type,t.pendingProps,n);case 17:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:Si(i,r),Sf(e,t),t.tag=1,An(i)?(e=!0,Wf(t)):e=!1,fa(t,n),SS(t,i,r),Qm(t,i,r,n),ng(null,t,i,!0,e,n);case 19:return AS(e,t,n);case 22:return LS(e,t,n)}throw Error(ne(156,t.tag))};function XS(e,t){return wb(e,t)}function $C(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ai(e,t,n,i){return new $C(e,t,n,i)}function cy(e){return e=e.prototype,!(!e||!e.isReactComponent)}function XC(e){if(typeof e=="function")return cy(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Rv)return 11;if(e===Pv)return 14}return 2}function co(e,t){var n=e.alternate;return n===null?(n=ai(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Tf(e,t,n,i,r,o){var s=2;if(i=e,typeof e=="function")cy(e)&&(s=1);else if(typeof e=="string")s=5;else e:switch(e){case $s:return qo(n.children,r,o,t);case Cv:s=8,r|=8;break;case Sm:return e=ai(12,n,t,r|2),e.elementType=Sm,e.lanes=o,e;case Mm:return e=ai(13,n,t,r),e.elementType=Mm,e.lanes=o,e;case Em:return e=ai(19,n,t,r),e.elementType=Em,e.lanes=o,e;case ib:return Bh(n,r,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case tb:s=10;break e;case nb:s=9;break e;case Rv:s=11;break e;case Pv:s=14;break e;case $r:s=16,i=null;break e}throw Error(ne(130,e==null?e:typeof e,""))}return t=ai(s,n,t,r),t.elementType=e,t.type=i,t.lanes=o,t}function qo(e,t,n,i){return e=ai(7,e,i,t),e.lanes=n,e}function Bh(e,t,n,i){return e=ai(22,e,i,t),e.elementType=ib,e.lanes=n,e.stateNode={isHidden:!1},e}function Zd(e,t,n){return e=ai(6,e,null,t),e.lanes=n,e}function Jd(e,t,n){return t=ai(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function YC(e,t,n,i,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ad(0),this.expirationTimes=Ad(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ad(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function fy(e,t,n,i,r,o,s,a,l){return e=new YC(e,t,n,a,l),t===1?(t=1,o===!0&&(t|=8)):t=0,o=ai(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Yv(o),e}function qC(e,t,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Gs,key:i==null?null:""+i,children:e,containerInfo:t,implementation:n}}function YS(e){if(!e)return xo;e=e._reactInternals;e:{if(cs(e)!==e||e.tag!==1)throw Error(ne(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(An(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ne(171))}if(e.tag===1){var n=e.type;if(An(n))return Yb(e,n,t)}return t}function qS(e,t,n,i,r,o,s,a,l){return e=fy(n,i,!0,e,r,o,s,a,l),e.context=YS(null),n=e.current,i=yn(),r=uo(n),o=yr(i,r),o.callback=t??null,ao(n,o,r),e.current.lanes=r,Nu(e,r,i),Dn(e,i),e}function Uh(e,t,n,i){var r=t.current,o=yn(),s=uo(r);return n=YS(n),t.context===null?t.context=n:t.pendingContext=n,t=yr(o,s),t.payload={element:e},i=i===void 0?null:i,i!==null&&(t.callback=i),e=ao(r,t,s),e!==null&&(Ai(e,r,s,o),wf(e,r,s)),s}function ih(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function _1(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function hy(e,t){_1(e,t),(e=e.alternate)&&_1(e,t)}function ZC(){return null}var ZS=typeof reportError=="function"?reportError:function(e){console.error(e)};function dy(e){this._internalRoot=e}zh.prototype.render=dy.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ne(409));Uh(e,t,null,null)};zh.prototype.unmount=dy.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ts(function(){Uh(null,e,null,null)}),t[_r]=null}};function zh(e){this._internalRoot=e}zh.prototype.unstable_scheduleHydration=function(e){if(e){var t=Lb();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Zr.length&&t!==0&&t<Zr[n].priority;n++);Zr.splice(n,0,e),n===0&&Rb(e)}};function py(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Hh(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function b1(){}function JC(e,t,n,i,r){if(r){if(typeof i=="function"){var o=i;i=function(){var u=ih(s);o.call(u)}}var s=qS(t,i,e,0,null,!1,!1,"",b1);return e._reactRootContainer=s,e[_r]=s.current,iu(e.nodeType===8?e.parentNode:e),ts(),s}for(;r=e.lastChild;)e.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var u=ih(l);a.call(u)}}var l=fy(e,0,!1,null,null,!1,!1,"",b1);return e._reactRootContainer=l,e[_r]=l.current,iu(e.nodeType===8?e.parentNode:e),ts(function(){Uh(t,l,n,i)}),l}function jh(e,t,n,i,r){var o=n._reactRootContainer;if(o){var s=o;if(typeof r=="function"){var a=r;r=function(){var l=ih(s);a.call(l)}}Uh(t,s,e,r)}else s=JC(n,t,e,r,i);return ih(s)}Eb=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Ml(t.pendingLanes);n!==0&&(Ov(t,n|1),Dn(t,Ft()),!(Ze&6)&&(Sa=Ft()+500,To()))}break;case 13:ts(function(){var i=br(e,1);if(i!==null){var r=yn();Ai(i,e,1,r)}}),hy(e,1)}};Fv=function(e){if(e.tag===13){var t=br(e,134217728);if(t!==null){var n=yn();Ai(t,e,134217728,n)}hy(e,134217728)}};Tb=function(e){if(e.tag===13){var t=uo(e),n=br(e,t);if(n!==null){var i=yn();Ai(n,e,t,i)}hy(e,t)}};Lb=function(){return nt};Cb=function(e,t){var n=nt;try{return nt=e,t()}finally{nt=n}};km=function(e,t,n){switch(t){case"input":if(Cm(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var r=Dh(i);if(!r)throw Error(ne(90));ob(i),Cm(i,r)}}}break;case"textarea":ab(e,n);break;case"select":t=n.value,t!=null&&aa(e,!!n.multiple,t,!1)}};pb=ay;mb=ts;var KC={usingClientEntryPoint:!1,Events:[Bu,Zs,Dh,hb,db,ay]},ol={findFiberByHostInstance:Wo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},QC={bundleType:ol.bundleType,version:ol.version,rendererPackageName:ol.rendererPackageName,rendererConfig:ol.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ar.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=yb(e),e===null?null:e.stateNode},findFiberByHostInstance:ol.findFiberByHostInstance||ZC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var gc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!gc.isDisabled&&gc.supportsFiber)try{Ch=gc.inject(QC),Gi=gc}catch{}}Kn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=KC;Kn.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!py(t))throw Error(ne(200));return qC(e,t,null,n)};Kn.createRoot=function(e,t){if(!py(e))throw Error(ne(299));var n=!1,i="",r=ZS;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(r=t.onRecoverableError)),t=fy(e,1,!1,null,null,n,!1,i,r),e[_r]=t.current,iu(e.nodeType===8?e.parentNode:e),new dy(t)};Kn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ne(188)):(e=Object.keys(e).join(","),Error(ne(268,e)));return e=yb(t),e=e===null?null:e.stateNode,e};Kn.flushSync=function(e){return ts(e)};Kn.hydrate=function(e,t,n){if(!Hh(t))throw Error(ne(200));return jh(null,e,t,!0,n)};Kn.hydrateRoot=function(e,t,n){if(!py(e))throw Error(ne(405));var i=n!=null&&n.hydratedSources||null,r=!1,o="",s=ZS;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),t=qS(t,null,e,1,n??null,r,!1,o,s),e[_r]=t.current,iu(e),i)for(e=0;e<i.length;e++)n=i[e],r=n._getVersion,r=r(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,r]:t.mutableSourceEagerHydrationData.push(n,r);return new zh(t)};Kn.render=function(e,t,n){if(!Hh(t))throw Error(ne(200));return jh(null,e,t,!1,n)};Kn.unmountComponentAtNode=function(e){if(!Hh(e))throw Error(ne(40));return e._reactRootContainer?(ts(function(){jh(null,null,e,!1,function(){e._reactRootContainer=null,e[_r]=null})}),!0):!1};Kn.unstable_batchedUpdates=ay;Kn.unstable_renderSubtreeIntoContainer=function(e,t,n,i){if(!Hh(n))throw Error(ne(200));if(e==null||e._reactInternals===void 0)throw Error(ne(38));return jh(e,t,n,!1,i)};Kn.version="18.3.1-next-f1338f8080-20240426";function JS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(JS)}catch(e){console.error(e)}}JS(),J_.exports=Kn;var xr=J_.exports;const Yi=Pr(xr);var KS,S1=xr;KS=S1.createRoot,S1.hydrateRoot;const e2=["top","front","left","right","back","bottom"],rh={red:["green","blue","orange","red","yellow","white"],blue:["red","orange","green","blue","yellow","white"],orange:["blue","green","red","orange","yellow","white"],green:["orange","red","blue","green","yellow","white"]},my={yellow:["blue","green","white","yellow","red","orange"],green:["yellow","white","blue","green","red","orange"],white:["green","blue","yellow","white","red","orange"],blue:["white","yellow","green","blue","red","orange"]},gy={red:["yellow","white","orange","red","blue","green"],white:["red","orange","yellow","white","blue","green"],orange:["white","yellow","red","orange","blue","green"],yellow:["orange","red","white","yellow","blue","green"]},vy={yellow:["green","blue","white","yellow","orange","red"],blue:["yellow","white","green","blue","orange","red"],white:["blue","green","yellow","white","orange","red"],green:["white","yellow","blue","green","orange","red"]},yy={red:["white","yellow","orange","red","green","blue"],yellow:["red","orange","white","yellow","green","blue"],orange:["yellow","white","red","orange","green","blue"],white:["orange","red","yellow","white","green","blue"]},xy={red:["blue","green","orange","red","white","yellow"],green:["red","orange","blue","green","white","yellow"],orange:["green","blue","red","orange","white","yellow"],blue:["orange","red","green","blue","white","yellow"]},t2=Object.freeze(Object.defineProperty({__proto__:null,BlueTop:gy,GreenTop:yy,OrangeTop:vy,RedTop:my,WhiteTop:xy,YellowTop:rh,arrayIndexAsCubeFace:e2},Symbol.toStringTag,{value:"Module"})),M1=["yellow","red","blue","orange","green","white"];function n2({onSetOrientation:e,currentTop:t,currentFront:n}){const[i,r]=Z.useState(t||"yellow"),[o,s]=Z.useState(n||"red"),[a,l]=Z.useState(!1),u=Z.useMemo(()=>{const h={yellow:rh,red:my,blue:gy,orange:vy,green:yy,white:xy}[i]||{};return Object.keys(h)},[i]);Z.useEffect(()=>{if(!u.includes(o)){const f=u.includes("red")?"red":u[0];f&&s(f)}},[u,o]);const c=()=>{console.log("Set Orientation clicked:",{topFaceColor:i,frontFaceColor:o,reset:a}),e(i,o,{reset:a})};return M.jsxs("div",{style:{position:"fixed",top:"50%",right:"32px",transform:"translateY(-50%)",background:"#fff",borderRadius:"12px",boxShadow:"0 2px 12px rgba(0,0,0,0.15)",padding:"2rem 1.5rem",zIndex:9999,pointerEvents:"auto",minWidth:"220px"},children:[M.jsx("h3",{style:{marginBottom:"1rem",fontSize:"1.1rem"},children:"Cube Orientation"}),M.jsxs("div",{style:{fontSize:".9rem",color:"#555",marginBottom:".5rem"},children:["Top: ",i,"  Front: ",o]}),M.jsxs("div",{style:{marginBottom:"1.5rem"},children:[M.jsx("label",{style:{fontWeight:"bold"},children:"Top Face:"}),M.jsx("div",{style:{display:"flex",gap:"0.5rem",marginTop:"0.5rem"},children:M1.map(f=>M.jsx("button",{style:{background:f,border:i===f?"2px solid #333":"1px solid #ccc",borderRadius:"50%",width:"32px",height:"32px",cursor:"pointer"},onClick:()=>r(f),"aria-label":`Set top face to ${f}`},f))})]}),M.jsxs("div",{style:{marginBottom:"1.5rem"},children:[M.jsx("label",{style:{fontWeight:"bold"},children:"Front Face:"}),M.jsx("div",{style:{display:"flex",gap:"0.5rem",marginTop:"0.5rem"},children:M1.map(f=>{const h=u.includes(f);return M.jsx("button",{style:{background:f,border:o===f?"2px solid #333":"1px solid #ccc",borderRadius:"50%",width:"32px",height:"32px",cursor:h?"pointer":"not-allowed",opacity:h?1:.3},onClick:()=>h&&s(f),"aria-label":`Set front face to ${f}`,disabled:!h},f)})})]}),M.jsxs("label",{style:{display:"flex",alignItems:"center",gap:".5rem",marginBottom:".5rem",fontSize:".9rem",color:"#444"},children:[M.jsx("input",{type:"checkbox",checked:a,onChange:f=>l(f.target.checked)}),"Reset cube on apply"]}),M.jsx("button",{style:{marginTop:"1rem",padding:"0.5rem 1.5rem",borderRadius:"6px",background:"#333",color:"#fff",fontWeight:"bold",border:"none",cursor:"pointer"},onClick:c,children:"Set Orientation"})]})}function Bl(){return Bl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Bl.apply(this,arguments)}var i2=function(t,n){n===void 0&&(n=!0),Z.useEffect(function(){if(n){var i=function(o){o.key==="Escape"&&t(o)};return document.addEventListener("keyup",i),function(){n&&document.removeEventListener("keyup",i)}}},[t,n])},r2=function(t,n){n===void 0&&(n=!0),Z.useEffect(function(){if(n){var i=function(){t()};return window.addEventListener("resize",i),function(){n&&window.removeEventListener("resize",i)}}},[t,n])},o2=function(t,n,i){i===void 0&&(i=!0),Z.useEffect(function(){if(i){var r=function(s){var a=Array.isArray(t)?t:[t],l=!1;a.forEach(function(u){if(!u.current||u.current.contains(s.target)){l=!0;return}}),s.stopPropagation(),l||n(s)};return document.addEventListener("mousedown",r),document.addEventListener("touchstart",r),function(){i&&(document.removeEventListener("mousedown",r),document.removeEventListener("touchstart",r))}}},[t,n,i])},s2=function(t,n){n===void 0&&(n=!0),Z.useEffect(function(){if(n){var i=function(o){if(o.keyCode===9){var s,a=t==null||(s=t.current)===null||s===void 0?void 0:s.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex="0"]'),l=Array.prototype.slice.call(a);if(l.length===1){o.preventDefault();return}var u=l[0],c=l[l.length-1];o.shiftKey&&document.activeElement===u?(o.preventDefault(),c.focus()):document.activeElement===c&&(o.preventDefault(),u.focus())}};return document.addEventListener("keydown",i),function(){n&&document.removeEventListener("keydown",i)}}},[t,n])},a2=typeof window<"u"?Z.useLayoutEffect:Z.useEffect,sl={popupContent:{tooltip:{position:"absolute",zIndex:999},modal:{position:"relative",margin:"auto"}},popupArrow:{height:"8px",width:"16px",position:"absolute",background:"transparent",color:"#FFF",zIndex:-1},overlay:{tooltip:{position:"fixed",top:"0",bottom:"0",left:"0",right:"0",zIndex:999},modal:{position:"fixed",top:"0",bottom:"0",left:"0",right:"0",display:"flex",zIndex:999}}},l2=["top left","top center","top right","right top","right center","right bottom","bottom left","bottom center","bottom right","left top","left center","left bottom"],u2=function(t,n,i,r,o){var s=o.offsetX,a=o.offsetY,l=r?8:0,u=i.split(" "),c=t.top+t.height/2,f=t.left+t.width/2,h=n.height,d=n.width,g=c-h/2,v=f-d/2,y="",m="0%",p="0%";switch(u[0]){case"top":g-=h/2+t.height/2+l,y="rotate(180deg)  translateX(50%)",m="100%",p="50%";break;case"bottom":g+=h/2+t.height/2+l,y="rotate(0deg) translateY(-100%) translateX(-50%)",p="50%";break;case"left":v-=d/2+t.width/2+l,y=" rotate(90deg)  translateY(50%) translateX(-25%)",p="100%",m="50%";break;case"right":v+=d/2+t.width/2+l,y="rotate(-90deg)  translateY(-150%) translateX(25%)",m="50%";break}switch(u[1]){case"top":g=t.top,m=t.height/2+"px";break;case"bottom":g=t.top-h+t.height,m=h-t.height/2+"px";break;case"left":v=t.left,p=t.width/2+"px";break;case"right":v=t.left-d+t.width,p=d-t.width/2+"px";break}return g=u[0]==="top"?g-a:g+a,v=u[0]==="left"?v-s:v+s,{top:g,left:v,transform:y,arrowLeft:p,arrowTop:m}},c2=function(t){var n={top:0,left:0,width:window.innerWidth,height:window.innerHeight};if(typeof t=="string"){var i=document.querySelector(t);i!==null&&(n=i.getBoundingClientRect())}return n},f2=function(t,n,i,r,o,s){var a=o.offsetX,l=o.offsetY,u={arrowLeft:"0%",arrowTop:"0%",left:0,top:0,transform:"rotate(135deg)"},c=0,f=c2(s),h=Array.isArray(i)?i:[i];for((s||Array.isArray(i))&&(h=[].concat(h,l2));c<h.length;){u=u2(t,n,h[c],r,{offsetX:a,offsetY:l});var d={top:u.top,left:u.left,width:n.width,height:n.height};if(d.top<=f.top||d.left<=f.left||d.top+d.height>=f.top+f.height||d.left+d.width>=f.left+f.width)c++;else break}return u},h2=0,d2=function(){var t=document.getElementById("popup-root");return t===null&&(t=document.createElement("div"),t.setAttribute("id","popup-root"),document.body.appendChild(t)),t},p2=Z.forwardRef(function(e,t){var n=e.trigger,i=n===void 0?null:n,r=e.onOpen,o=r===void 0?function(){}:r,s=e.onClose,a=s===void 0?function(){}:s,l=e.defaultOpen,u=l===void 0?!1:l,c=e.open,f=c===void 0?void 0:c,h=e.disabled,d=h===void 0?!1:h,g=e.nested,v=g===void 0?!1:g,y=e.closeOnDocumentClick,m=y===void 0?!0:y,p=e.repositionOnResize,x=p===void 0?!0:p,w=e.closeOnEscape,b=w===void 0?!0:w,_=e.on,S=_===void 0?["click"]:_,L=e.contentStyle,E=L===void 0?{}:L,A=e.arrowStyle,B=A===void 0?{}:A,j=e.overlayStyle,z=j===void 0?{}:j,k=e.className,U=k===void 0?"":k,D=e.position,G=D===void 0?"bottom center":D,I=e.modal,H=I===void 0?!1:I,V=e.lockScroll,J=V===void 0?!1:V,he=e.arrow,ge=he===void 0?!0:he,xe=e.offsetX,Y=xe===void 0?0:xe,Qe=e.offsetY,Ce=Qe===void 0?0:Qe,We=e.mouseEnterDelay,Ae=We===void 0?100:We,Ye=e.mouseLeaveDelay,Fe=Ye===void 0?100:Ye,ie=e.keepTooltipInside,ce=ie===void 0?!1:ie,ue=e.children,be=Z.useState(f||u),ae=be[0],R=be[1],T=Z.useRef(null),Q=Z.useRef(null),K=Z.useRef(null),N=Z.useRef(null),re=Z.useRef("popup-"+ ++h2),se=H?!0:!i,we=Z.useRef(0);a2(function(){return ae?(N.current=document.activeElement,Sn(),Ao(),Je()):At(),function(){clearTimeout(we.current)}},[ae]),Z.useEffect(function(){typeof f=="boolean"&&(f?le():O())},[f,d]);var le=function(Be){ae||d||(R(!0),setTimeout(function(){return o(Be)},0))},O=function(Be){var vt;!ae||d||(R(!1),se&&((vt=N.current)===null||vt===void 0||vt.focus()),setTimeout(function(){return a(Be)},0))},oe=function(Be){Be==null||Be.stopPropagation(),ae?O(Be):le(Be)},ve=function(Be){clearTimeout(we.current),we.current=setTimeout(function(){return le(Be)},Ae)},fe=function(Be){Be==null||Be.preventDefault(),oe()},Se=function(Be){clearTimeout(we.current),we.current=setTimeout(function(){return O(Be)},Fe)},Je=function(){se&&J&&(document.getElementsByTagName("body")[0].style.overflow="hidden")},At=function(){se&&J&&(document.getElementsByTagName("body")[0].style.overflow="auto")},Ao=function(){var Be,vt=Q==null||(Be=Q.current)===null||Be===void 0?void 0:Be.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex="0"]'),Dt=Array.prototype.slice.call(vt)[0];Dt==null||Dt.focus()};Z.useImperativeHandle(t,function(){return{open:function(){le()},close:function(){O()},toggle:function(){oe()}}});var Sn=function(){if(!(se||!ae)&&!(!(T!=null&&T.current)||!(T!=null&&T.current)||!(Q!=null&&Q.current))){var Be=T.current.getBoundingClientRect(),vt=Q.current.getBoundingClientRect(),Dt=f2(Be,vt,G,ge,{offsetX:Y,offsetY:Ce},ce);if(Q.current.style.top=Dt.top+window.scrollY+"px",Q.current.style.left=Dt.left+window.scrollX+"px",ge&&K.current){var rr,Oo;K.current.style.transform=Dt.transform,K.current.style.setProperty("-ms-transform",Dt.transform),K.current.style.setProperty("-webkit-transform",Dt.transform),K.current.style.top=((rr=B.top)===null||rr===void 0?void 0:rr.toString())||Dt.arrowTop,K.current.style.left=((Oo=B.left)===null||Oo===void 0?void 0:Oo.toString())||Dt.arrowLeft}}};i2(O,b),s2(Q,ae&&se),r2(Sn,x),o2(i?[Q,T]:[Q],O,m&&!v);var Mn=function(){for(var Be={key:"T",ref:T,"aria-describedby":re.current},vt=Array.isArray(S)?S:[S],Dt=0,rr=vt.length;Dt<rr;Dt++)switch(vt[Dt]){case"click":Be.onClick=oe;break;case"right-click":Be.onContextMenu=fe;break;case"hover":Be.onMouseEnter=ve,Be.onMouseLeave=Se;break;case"focus":Be.onFocus=ve,Be.onBlur=Se;break}if(typeof i=="function"){var Oo=i(ae);return!!i&&de.cloneElement(Oo,Be)}return!!i&&de.cloneElement(i,Be)},Sd=function(){var Be=se?sl.popupContent.modal:sl.popupContent.tooltip,vt={className:"popup-content "+(U!==""?U.split(" ").map(function(Dt){return Dt+"-content"}).join(" "):""),style:Bl({},Be,E,{pointerEvents:"auto"}),ref:Q,onClick:function(rr){rr.stopPropagation()}};return!H&&S.indexOf("hover")>=0&&(vt.onMouseEnter=ve,vt.onMouseLeave=Se),vt},xs=function(){return de.createElement("div",Object.assign({},Sd(),{key:"C",role:se?"dialog":"tooltip",id:re.current}),ge&&!se&&de.createElement("div",{ref:K,style:sl.popupArrow},de.createElement("svg",{"data-testid":"arrow",className:"popup-arrow "+(U!==""?U.split(" ").map(function(Be){return Be+"-arrow"}).join(" "):""),viewBox:"0 0 32 16",style:Bl({position:"absolute"},B)},de.createElement("path",{d:"M16 0l16 16H0z",fill:"currentcolor"}))),ue&&typeof ue=="function"?ue(O,ae):ue)},Md=!(S.indexOf("hover")>=0),Do=se?sl.overlay.modal:sl.overlay.tooltip,Qu=[Md&&de.createElement("div",{key:"O","data-testid":"overlay","data-popup":se?"modal":"tooltip",className:"popup-overlay "+(U!==""?U.split(" ").map(function(kt){return kt+"-overlay"}).join(" "):""),style:Bl({},Do,z,{pointerEvents:m&&v||se?"auto":"none"}),onClick:m&&v?O:void 0,tabIndex:-1},se&&xs()),!se&&xs()];return de.createElement(de.Fragment,null,Mn(),ae&&Yi.createPortal(Qu,d2()))});const m2="/assets/notations-Bn5Cvuq-.png";/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function hu(){return hu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},hu.apply(this,arguments)}var to;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(to||(to={}));const E1="popstate";function g2(e){e===void 0&&(e={});function t(i,r){let{pathname:o,search:s,hash:a}=i.location;return pg("",{pathname:o,search:s,hash:a},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(i,r){return typeof r=="string"?r:oh(r)}return y2(t,n,null,e)}function Ut(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function QS(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function v2(){return Math.random().toString(36).substr(2,8)}function T1(e,t){return{usr:e.state,key:e.key,idx:t}}function pg(e,t,n,i){return n===void 0&&(n=null),hu({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?za(t):t,{state:n,key:t&&t.key||i||v2()})}function oh(e){let{pathname:t="/",search:n="",hash:i=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(t+=i.charAt(0)==="#"?i:"#"+i),t}function za(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let i=e.indexOf("?");i>=0&&(t.search=e.substr(i),e=e.substr(0,i)),e&&(t.pathname=e)}return t}function y2(e,t,n,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:o=!1}=i,s=r.history,a=to.Pop,l=null,u=c();u==null&&(u=0,s.replaceState(hu({},s.state,{idx:u}),""));function c(){return(s.state||{idx:null}).idx}function f(){a=to.Pop;let y=c(),m=y==null?null:y-u;u=y,l&&l({action:a,location:v.location,delta:m})}function h(y,m){a=to.Push;let p=pg(v.location,y,m);u=c()+1;let x=T1(p,u),w=v.createHref(p);try{s.pushState(x,"",w)}catch(b){if(b instanceof DOMException&&b.name==="DataCloneError")throw b;r.location.assign(w)}o&&l&&l({action:a,location:v.location,delta:1})}function d(y,m){a=to.Replace;let p=pg(v.location,y,m);u=c();let x=T1(p,u),w=v.createHref(p);s.replaceState(x,"",w),o&&l&&l({action:a,location:v.location,delta:0})}function g(y){let m=r.location.origin!=="null"?r.location.origin:r.location.href,p=typeof y=="string"?y:oh(y);return p=p.replace(/ $/,"%20"),Ut(m,"No window.location.(origin|href) available to create URL for href: "+p),new URL(p,m)}let v={get action(){return a},get location(){return e(r,s)},listen(y){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(E1,f),l=y,()=>{r.removeEventListener(E1,f),l=null}},createHref(y){return t(r,y)},createURL:g,encodeLocation(y){let m=g(y);return{pathname:m.pathname,search:m.search,hash:m.hash}},push:h,replace:d,go(y){return s.go(y)}};return v}var L1;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(L1||(L1={}));function x2(e,t,n){return n===void 0&&(n="/"),w2(e,t,n)}function w2(e,t,n,i){let r=typeof t=="string"?za(t):t,o=wy(r.pathname||"/",n);if(o==null)return null;let s=eM(e);_2(s);let a=null;for(let l=0;a==null&&l<s.length;++l){let u=O2(o);a=P2(s[l],u)}return a}function eM(e,t,n,i){t===void 0&&(t=[]),n===void 0&&(n=[]),i===void 0&&(i="");let r=(o,s,a)=>{let l={relativePath:a===void 0?o.path||"":a,caseSensitive:o.caseSensitive===!0,childrenIndex:s,route:o};l.relativePath.startsWith("/")&&(Ut(l.relativePath.startsWith(i),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(i.length));let u=fo([i,l.relativePath]),c=n.concat(l);o.children&&o.children.length>0&&(Ut(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),eM(o.children,t,c,u)),!(o.path==null&&!o.index)&&t.push({path:u,score:C2(u,o.index),routesMeta:c})};return e.forEach((o,s)=>{var a;if(o.path===""||!((a=o.path)!=null&&a.includes("?")))r(o,s);else for(let l of tM(o.path))r(o,s,l)}),t}function tM(e){let t=e.split("/");if(t.length===0)return[];let[n,...i]=t,r=n.endsWith("?"),o=n.replace(/\?$/,"");if(i.length===0)return r?[o,""]:[o];let s=tM(i.join("/")),a=[];return a.push(...s.map(l=>l===""?o:[o,l].join("/"))),r&&a.push(...s),a.map(l=>e.startsWith("/")&&l===""?"/":l)}function _2(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:R2(t.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const b2=/^:[\w-]+$/,S2=3,M2=2,E2=1,T2=10,L2=-2,C1=e=>e==="*";function C2(e,t){let n=e.split("/"),i=n.length;return n.some(C1)&&(i+=L2),t&&(i+=M2),n.filter(r=>!C1(r)).reduce((r,o)=>r+(b2.test(o)?S2:o===""?E2:T2),i)}function R2(e,t){return e.length===t.length&&e.slice(0,-1).every((i,r)=>i===t[r])?e[e.length-1]-t[t.length-1]:0}function P2(e,t,n){let{routesMeta:i}=e,r={},o="/",s=[];for(let a=0;a<i.length;++a){let l=i[a],u=a===i.length-1,c=o==="/"?t:t.slice(o.length)||"/",f=A2({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},c),h=l.route;if(!f)return null;Object.assign(r,f.params),s.push({params:r,pathname:fo([o,f.pathname]),pathnameBase:I2(fo([o,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(o=fo([o,f.pathnameBase]))}return s}function A2(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,i]=D2(e.path,e.caseSensitive,e.end),r=t.match(n);if(!r)return null;let o=r[0],s=o.replace(/(.)\/+$/,"$1"),a=r.slice(1);return{params:i.reduce((u,c,f)=>{let{paramName:h,isOptional:d}=c;if(h==="*"){let v=a[f]||"";s=o.slice(0,o.length-v.length).replace(/(.)\/+$/,"$1")}const g=a[f];return d&&!g?u[h]=void 0:u[h]=(g||"").replace(/%2F/g,"/"),u},{}),pathname:o,pathnameBase:s,pattern:e}}function D2(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),QS(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let i=[],r="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,a,l)=>(i.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(i.push({paramName:"*"}),r+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":e!==""&&e!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,t?void 0:"i"),i]}function O2(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return QS(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function wy(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,i=e.charAt(n);return i&&i!=="/"?null:e.slice(n)||"/"}function F2(e,t){t===void 0&&(t="/");let{pathname:n,search:i="",hash:r=""}=typeof e=="string"?za(e):e;return{pathname:n?n.startsWith("/")?n:k2(n,t):t,search:B2(i),hash:U2(r)}}function k2(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function Kd(e,t,n,i){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function N2(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function nM(e,t){let n=N2(e);return t?n.map((i,r)=>r===n.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function iM(e,t,n,i){i===void 0&&(i=!1);let r;typeof e=="string"?r=za(e):(r=hu({},e),Ut(!r.pathname||!r.pathname.includes("?"),Kd("?","pathname","search",r)),Ut(!r.pathname||!r.pathname.includes("#"),Kd("#","pathname","hash",r)),Ut(!r.search||!r.search.includes("#"),Kd("#","search","hash",r)));let o=e===""||r.pathname==="",s=o?"/":r.pathname,a;if(s==null)a=n;else{let f=t.length-1;if(!i&&s.startsWith("..")){let h=s.split("/");for(;h[0]==="..";)h.shift(),f-=1;r.pathname=h.join("/")}a=f>=0?t[f]:"/"}let l=F2(r,a),u=s&&s!=="/"&&s.endsWith("/"),c=(o||s===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}const fo=e=>e.join("/").replace(/\/\/+/g,"/"),I2=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),B2=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,U2=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function z2(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const rM=["post","put","patch","delete"];new Set(rM);const H2=["get",...rM];new Set(H2);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function du(){return du=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},du.apply(this,arguments)}const _y=Z.createContext(null),j2=Z.createContext(null),fs=Z.createContext(null),Vh=Z.createContext(null),hs=Z.createContext({outlet:null,matches:[],isDataRoute:!1}),oM=Z.createContext(null);function V2(e,t){let{relative:n}=t===void 0?{}:t;zu()||Ut(!1);let{basename:i,navigator:r}=Z.useContext(fs),{hash:o,pathname:s,search:a}=aM(e,{relative:n}),l=s;return i!=="/"&&(l=s==="/"?i:fo([i,s])),r.createHref({pathname:l,search:a,hash:o})}function zu(){return Z.useContext(Vh)!=null}function Wh(){return zu()||Ut(!1),Z.useContext(Vh).location}function sM(e){Z.useContext(fs).static||Z.useLayoutEffect(e)}function W2(){let{isDataRoute:e}=Z.useContext(hs);return e?iR():G2()}function G2(){zu()||Ut(!1);let e=Z.useContext(_y),{basename:t,future:n,navigator:i}=Z.useContext(fs),{matches:r}=Z.useContext(hs),{pathname:o}=Wh(),s=JSON.stringify(nM(r,n.v7_relativeSplatPath)),a=Z.useRef(!1);return sM(()=>{a.current=!0}),Z.useCallback(function(u,c){if(c===void 0&&(c={}),!a.current)return;if(typeof u=="number"){i.go(u);return}let f=iM(u,JSON.parse(s),o,c.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:fo([t,f.pathname])),(c.replace?i.replace:i.push)(f,c.state,c)},[t,i,s,o,e])}function aM(e,t){let{relative:n}=t===void 0?{}:t,{future:i}=Z.useContext(fs),{matches:r}=Z.useContext(hs),{pathname:o}=Wh(),s=JSON.stringify(nM(r,i.v7_relativeSplatPath));return Z.useMemo(()=>iM(e,JSON.parse(s),o,n==="path"),[e,s,o,n])}function $2(e,t){return X2(e,t)}function X2(e,t,n,i){zu()||Ut(!1);let{navigator:r}=Z.useContext(fs),{matches:o}=Z.useContext(hs),s=o[o.length-1],a=s?s.params:{};s&&s.pathname;let l=s?s.pathnameBase:"/";s&&s.route;let u=Wh(),c;if(t){var f;let y=typeof t=="string"?za(t):t;l==="/"||(f=y.pathname)!=null&&f.startsWith(l)||Ut(!1),c=y}else c=u;let h=c.pathname||"/",d=h;if(l!=="/"){let y=l.replace(/^\//,"").split("/");d="/"+h.replace(/^\//,"").split("/").slice(y.length).join("/")}let g=x2(e,{pathname:d}),v=K2(g&&g.map(y=>Object.assign({},y,{params:Object.assign({},a,y.params),pathname:fo([l,r.encodeLocation?r.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?l:fo([l,r.encodeLocation?r.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),o,n,i);return t&&v?Z.createElement(Vh.Provider,{value:{location:du({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:to.Pop}},v):v}function Y2(){let e=nR(),t=z2(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return Z.createElement(Z.Fragment,null,Z.createElement("h2",null,"Unexpected Application Error!"),Z.createElement("h3",{style:{fontStyle:"italic"}},t),n?Z.createElement("pre",{style:r},n):null,null)}const q2=Z.createElement(Y2,null);class Z2 extends Z.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?Z.createElement(hs.Provider,{value:this.props.routeContext},Z.createElement(oM.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function J2(e){let{routeContext:t,match:n,children:i}=e,r=Z.useContext(_y);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),Z.createElement(hs.Provider,{value:t},i)}function K2(e,t,n,i){var r;if(t===void 0&&(t=[]),n===void 0&&(n=null),i===void 0&&(i=null),e==null){var o;if(!n)return null;if(n.errors)e=n.matches;else if((o=i)!=null&&o.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let s=e,a=(r=n)==null?void 0:r.errors;if(a!=null){let c=s.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);c>=0||Ut(!1),s=s.slice(0,Math.min(s.length,c+1))}let l=!1,u=-1;if(n&&i&&i.v7_partialHydration)for(let c=0;c<s.length;c++){let f=s[c];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=c),f.route.id){let{loaderData:h,errors:d}=n,g=f.route.loader&&h[f.route.id]===void 0&&(!d||d[f.route.id]===void 0);if(f.route.lazy||g){l=!0,u>=0?s=s.slice(0,u+1):s=[s[0]];break}}}return s.reduceRight((c,f,h)=>{let d,g=!1,v=null,y=null;n&&(d=a&&f.route.id?a[f.route.id]:void 0,v=f.route.errorElement||q2,l&&(u<0&&h===0?(rR("route-fallback"),g=!0,y=null):u===h&&(g=!0,y=f.route.hydrateFallbackElement||null)));let m=t.concat(s.slice(0,h+1)),p=()=>{let x;return d?x=v:g?x=y:f.route.Component?x=Z.createElement(f.route.Component,null):f.route.element?x=f.route.element:x=c,Z.createElement(J2,{match:f,routeContext:{outlet:c,matches:m,isDataRoute:n!=null},children:x})};return n&&(f.route.ErrorBoundary||f.route.errorElement||h===0)?Z.createElement(Z2,{location:n.location,revalidation:n.revalidation,component:v,error:d,children:p(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):p()},null)}var lM=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(lM||{}),uM=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(uM||{});function Q2(e){let t=Z.useContext(_y);return t||Ut(!1),t}function eR(e){let t=Z.useContext(j2);return t||Ut(!1),t}function tR(e){let t=Z.useContext(hs);return t||Ut(!1),t}function cM(e){let t=tR(),n=t.matches[t.matches.length-1];return n.route.id||Ut(!1),n.route.id}function nR(){var e;let t=Z.useContext(oM),n=eR(),i=cM();return t!==void 0?t:(e=n.errors)==null?void 0:e[i]}function iR(){let{router:e}=Q2(lM.UseNavigateStable),t=cM(uM.UseNavigateStable),n=Z.useRef(!1);return sM(()=>{n.current=!0}),Z.useCallback(function(r,o){o===void 0&&(o={}),n.current&&(typeof r=="number"?e.navigate(r):e.navigate(r,du({fromRouteId:t},o)))},[e,t])}const R1={};function rR(e,t,n){R1[e]||(R1[e]=!0)}function oR(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function fM(e){Ut(!1)}function sR(e){let{basename:t="/",children:n=null,location:i,navigationType:r=to.Pop,navigator:o,static:s=!1,future:a}=e;zu()&&Ut(!1);let l=t.replace(/^\/*/,"/"),u=Z.useMemo(()=>({basename:l,navigator:o,static:s,future:du({v7_relativeSplatPath:!1},a)}),[l,a,o,s]);typeof i=="string"&&(i=za(i));let{pathname:c="/",search:f="",hash:h="",state:d=null,key:g="default"}=i,v=Z.useMemo(()=>{let y=wy(c,l);return y==null?null:{location:{pathname:y,search:f,hash:h,state:d,key:g},navigationType:r}},[l,c,f,h,d,g,r]);return v==null?null:Z.createElement(fs.Provider,{value:u},Z.createElement(Vh.Provider,{children:n,value:v}))}function aR(e){let{children:t,location:n}=e;return $2(mg(t),n)}new Promise(()=>{});function mg(e,t){t===void 0&&(t=[]);let n=[];return Z.Children.forEach(e,(i,r)=>{if(!Z.isValidElement(i))return;let o=[...t,r];if(i.type===Z.Fragment){n.push.apply(n,mg(i.props.children,o));return}i.type!==fM&&Ut(!1),!i.props.index||!i.props.children||Ut(!1);let s={id:i.props.id||o.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(s.children=mg(i.props.children,o)),n.push(s)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function gg(){return gg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},gg.apply(this,arguments)}function lR(e,t){if(e==null)return{};var n={},i=Object.keys(e),r,o;for(o=0;o<i.length;o++)r=i[o],!(t.indexOf(r)>=0)&&(n[r]=e[r]);return n}function uR(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function cR(e,t){return e.button===0&&(!t||t==="_self")&&!uR(e)}const fR=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],hR="6";try{window.__reactRouterVersion=hR}catch{}const dR="startTransition",P1=VT[dR];function pR(e){let{basename:t,children:n,future:i,window:r}=e,o=Z.useRef();o.current==null&&(o.current=g2({window:r,v5Compat:!0}));let s=o.current,[a,l]=Z.useState({action:s.action,location:s.location}),{v7_startTransition:u}=i||{},c=Z.useCallback(f=>{u&&P1?P1(()=>l(f)):l(f)},[l,u]);return Z.useLayoutEffect(()=>s.listen(c),[s,c]),Z.useEffect(()=>oR(i),[i]),Z.createElement(sR,{basename:t,children:n,location:a.location,navigationType:a.action,navigator:s,future:i})}const mR=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",gR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,vR=Z.forwardRef(function(t,n){let{onClick:i,relative:r,reloadDocument:o,replace:s,state:a,target:l,to:u,preventScrollReset:c,viewTransition:f}=t,h=lR(t,fR),{basename:d}=Z.useContext(fs),g,v=!1;if(typeof u=="string"&&gR.test(u)&&(g=u,mR))try{let x=new URL(window.location.href),w=u.startsWith("//")?new URL(x.protocol+u):new URL(u),b=wy(w.pathname,d);w.origin===x.origin&&b!=null?u=b+w.search+w.hash:v=!0}catch{}let y=V2(u,{relative:r}),m=yR(u,{replace:s,state:a,target:l,preventScrollReset:c,relative:r,viewTransition:f});function p(x){i&&i(x),x.defaultPrevented||m(x)}return Z.createElement("a",gg({},h,{href:g||y,onClick:v||o?i:p,ref:n,target:l}))});var A1;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(A1||(A1={}));var D1;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(D1||(D1={}));function yR(e,t){let{target:n,replace:i,state:r,preventScrollReset:o,relative:s,viewTransition:a}=t===void 0?{}:t,l=W2(),u=Wh(),c=aM(e,{relative:s});return Z.useCallback(f=>{if(cR(f,n)){f.preventDefault();let h=i!==void 0?i:oh(u)===oh(c);l(e,{replace:h,state:r,preventScrollReset:o,relative:s,viewTransition:a})}},[u,l,c,i,r,n,e,o,s,a])}const xR="/assets/favicon-DbsscLa9.png",wR=e=>M.jsxs("nav",{className:"navbar navbar-dark fixed-top",children:[M.jsx("div",{className:"logo",children:M.jsx(vR,{to:"/",children:M.jsx("img",{src:xR,alt:"Logo"})})}),M.jsx("div",{style:{float:"right",height:"100%"},children:M.jsx(p2,{trigger:M.jsx("button",{id:"infoBtn",children:"Notations"}),children:t=>M.jsxs("div",{style:{zIndex:"100",width:"100%",height:"100%"},children:[M.jsx("div",{className:"shadeBackground",style:{backgroundColor:"black",zIndex:"101"},onClick:t}),M.jsxs("div",{style:{zIndex:"102",width:"max-content",margin:"auto",transform:"translateX(-50%)",padding:"8px"},className:"popupDiv",children:[M.jsx("b",{style:{fontSize:"2rem"},children:"Cube Notations"}),M.jsx("div",{className:"close",id:"closeBtn",onClick:t,children:""}),M.jsxs("div",{style:{backgroundColor:"rgba(0,0,0,.8)",height:"100%",marginTop:"0",color:"lightgrey",fontSize:"1rem",textAlign:"center",borderRadius:".25rem",padding:"8px"},children:[M.jsx("div",{style:{paddingTop:""},children:"Click and drag anywhere not on the cube to rotate."}),M.jsx("div",{className:"cube-notations-container",children:M.jsx("img",{src:m2,alt:"Cube Notations",className:"notations-image"})}),M.jsx("hr",{style:{backgroundColor:"lightgray",width:"60%"}}),M.jsxs("div",{children:["Click and drag anywhere on the cube to make a move ",M.jsx("br",{}),"or use the keyboard to make turns:"]}),M.jsx("div",{style:{display:"none"},children:M.jsxs("div",{style:{width:"100%",textAlign:"center"},children:[M.jsx("b",{style:{color:"white",backgroundColor:"black"},children:" F, "}),M.jsx("b",{style:{color:"white",backgroundColor:"black"},children:"f,"}),M.jsx("b",{style:{color:"blue",backgroundColor:"black"},children:" U, "}),M.jsx("b",{style:{color:"blue",backgroundColor:"black"},children:"u,"}),M.jsx("b",{style:{color:"red",backgroundColor:"black"},children:" R, "}),M.jsx("b",{style:{color:"red",backgroundColor:"black"},children:"r,"}),M.jsx("b",{style:{color:"yellow",backgroundColor:"black"},children:" B, "}),M.jsx("b",{style:{color:"yellow",backgroundColor:"black"},children:"b,"}),M.jsx("b",{style:{color:"orange",backgroundColor:"black"},children:" L, "}),M.jsx("b",{style:{color:"orange",backgroundColor:"black"},children:"l,"}),M.jsx("b",{style:{color:"green",backgroundColor:"black"},children:" D, "}),M.jsx("b",{style:{color:"green",backgroundColor:"black"},children:"d "}),M.jsx("p",{style:{width:"100%",textAlign:"center"},children:"(lower case is clockwise, upper case is counterclockwise)"})]})}),M.jsx("hr",{style:{backgroundColor:"lightgray",width:"60%"}})]})]})]})})})]});var hM={exports:{}},_R=hM.exports=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=_R);var ds=hM.exports,dM={exports:{}},bR=dM.exports={version:"2.6.12"};typeof __e=="number"&&(__e=bR);var ei=dM.exports,SR=function(e){if(typeof e!="function")throw TypeError(e+" is not a function!");return e},MR=SR,by=function(e,t,n){if(MR(e),t===void 0)return e;switch(n){case 1:return function(i){return e.call(t,i)};case 2:return function(i,r){return e.call(t,i,r)};case 3:return function(i,r,o){return e.call(t,i,r,o)}}return function(){return e.apply(t,arguments)}},Qd={},Ha=function(e){return typeof e=="object"?e!==null:typeof e=="function"},ER=Ha,ja=function(e){if(!ER(e))throw TypeError(e+" is not an object!");return e},Va=function(e){try{return!!e()}catch{return!0}},ep,O1;function Lo(){return O1||(O1=1,ep=!Va(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})),ep}var tp,F1;function pM(){if(F1)return tp;F1=1;var e=Ha,t=ds.document,n=e(t)&&e(t.createElement);return tp=function(i){return n?t.createElement(i):{}},tp}var np,k1;function mM(){return k1||(k1=1,np=!Lo()&&!Va(function(){return Object.defineProperty(pM()("div"),"a",{get:function(){return 7}}).a!=7})),np}var vc=Ha,Sy=function(e,t){if(!vc(e))return e;var n,i;if(t&&typeof(n=e.toString)=="function"&&!vc(i=n.call(e))||typeof(n=e.valueOf)=="function"&&!vc(i=n.call(e))||!t&&typeof(n=e.toString)=="function"&&!vc(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")},N1;function Co(){if(N1)return Qd;N1=1;var e=ja,t=mM(),n=Sy,i=Object.defineProperty;return Qd.f=Lo()?Object.defineProperty:function(o,s,a){if(e(o),s=n(s,!0),e(a),t)try{return i(o,s,a)}catch{}if("get"in a||"set"in a)throw TypeError("Accessors not supported!");return"value"in a&&(o[s]=a.value),o},Qd}var Hu=function(e,t){return{enumerable:!(e&1),configurable:!(e&2),writable:!(e&4),value:t}},TR=Co(),LR=Hu,Wa=Lo()?function(e,t,n){return TR.f(e,t,LR(1,n))}:function(e,t,n){return e[t]=n,e},CR={}.hasOwnProperty,ps=function(e,t){return CR.call(e,t)},yc=ds,ip=ei,I1=by,RR=Wa,PR=ps,xc="prototype",sn=function(e,t,n){var i=e&sn.F,r=e&sn.G,o=e&sn.S,s=e&sn.P,a=e&sn.B,l=e&sn.W,u=r?ip:ip[t]||(ip[t]={}),c=u[xc],f=r?yc:o?yc[t]:(yc[t]||{})[xc],h,d,g;r&&(n=t);for(h in n)d=!i&&f&&f[h]!==void 0,!(d&&PR(u,h))&&(g=d?f[h]:n[h],u[h]=r&&typeof f[h]!="function"?n[h]:a&&d?I1(g,yc):l&&f[h]==g?function(v){var y=function(m,p,x){if(this instanceof v){switch(arguments.length){case 0:return new v;case 1:return new v(m);case 2:return new v(m,p)}return new v(m,p,x)}return v.apply(this,arguments)};return y[xc]=v[xc],y}(g):s&&typeof g=="function"?I1(Function.call,g):g,s&&((u.virtual||(u.virtual={}))[h]=g,e&sn.R&&c&&!c[h]&&RR(c,h,g)))};sn.F=1;sn.G=2;sn.S=4;sn.P=8;sn.B=16;sn.W=32;sn.U=64;sn.R=128;var Ro=sn,AR={}.toString,My=function(e){return AR.call(e).slice(8,-1)},rp,B1;function gM(){if(B1)return rp;B1=1;var e=My;return rp=Object("z").propertyIsEnumerable(0)?Object:function(t){return e(t)=="String"?t.split(""):Object(t)},rp}var Ey=function(e){if(e==null)throw TypeError("Can't call method on  "+e);return e},DR=gM(),OR=Ey,ms=function(e){return DR(OR(e))},FR=Math.ceil,kR=Math.floor,Ty=function(e){return isNaN(e=+e)?0:(e>0?kR:FR)(e)},NR=Ty,IR=Math.min,vM=function(e){return e>0?IR(NR(e),9007199254740991):0},BR=Ty,UR=Math.max,zR=Math.min,HR=function(e,t){return e=BR(e),e<0?UR(e+t,0):zR(e,t)},jR=ms,VR=vM,WR=HR,GR=function(e){return function(t,n,i){var r=jR(t),o=VR(r.length),s=WR(i,o),a;if(e&&n!=n){for(;o>s;)if(a=r[s++],a!=a)return!0}else for(;o>s;s++)if((e||s in r)&&r[s]===n)return e||s||0;return!e&&-1}},yM={exports:{}},$R=ei,U1=ds,z1="__core-js_shared__",H1=U1[z1]||(U1[z1]={});(yM.exports=function(e,t){return H1[e]||(H1[e]=t!==void 0?t:{})})("versions",[]).push({version:$R.version,mode:"pure",copyright:" 2020 Denis Pushkarev (zloirock.ru)"});var Ly=yM.exports,XR=0,YR=Math.random(),Gh=function(e){return"Symbol(".concat(e===void 0?"":e,")_",(++XR+YR).toString(36))},op,j1;function Cy(){if(j1)return op;j1=1;var e=Ly("keys"),t=Gh;return op=function(n){return e[n]||(e[n]=t(n))},op}var V1=ps,qR=ms,ZR=GR(!1),JR=Cy()("IE_PROTO"),xM=function(e,t){var n=qR(e),i=0,r=[],o;for(o in n)o!=JR&&V1(n,o)&&r.push(o);for(;t.length>i;)V1(n,o=t[i++])&&(~ZR(r,o)||r.push(o));return r},Ry="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),KR=xM,QR=Ry,$h=Object.keys||function(t){return KR(t,QR)},Xh={};Xh.f=Object.getOwnPropertySymbols;var sp={},W1;function Yh(){return W1||(W1=1,sp.f={}.propertyIsEnumerable),sp}var eP=Ey,ju=function(e){return Object(eP(e))},ap,G1;function tP(){if(G1)return ap;G1=1;var e=Lo(),t=$h,n=Xh,i=Yh(),r=ju,o=gM(),s=Object.assign;return ap=!s||Va(function(){var a={},l={},u=Symbol(),c="abcdefghijklmnopqrst";return a[u]=7,c.split("").forEach(function(f){l[f]=f}),s({},a)[u]!=7||Object.keys(s({},l)).join("")!=c})?function(l,u){for(var c=r(l),f=arguments.length,h=1,d=n.f,g=i.f;f>h;)for(var v=o(arguments[h++]),y=d?t(v).concat(d(v)):t(v),m=y.length,p=0,x;m>p;)x=y[p++],(!e||g.call(v,x))&&(c[x]=v[x]);return c}:s,ap}var lp=Ro;lp(lp.S+lp.F,"Object",{assign:tP()});var nP=ei.Object.assign,iP={default:nP,__esModule:!0},rP=iP,oP=sP(rP);function sP(e){return e&&e.__esModule?e:{default:e}}var tt=oP.default||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},kn=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},up=Ro;up(up.S+up.F*!Lo(),"Object",{defineProperty:Co().f});var aP=ei.Object,lP=function(t,n,i){return aP.defineProperty(t,n,i)},wM={default:lP,__esModule:!0},uP=wM,cP=fP(uP);function fP(e){return e&&e.__esModule?e:{default:e}}var Po=function(){function e(t,n){for(var i=0;i<n.length;i++){var r=n[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,cP.default)(t,r.key,r)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),qh={},hP=Ty,dP=Ey,pP=function(e){return function(t,n){var i=String(dP(t)),r=hP(n),o=i.length,s,a;return r<0||r>=o?e?"":void 0:(s=i.charCodeAt(r),s<55296||s>56319||r+1===o||(a=i.charCodeAt(r+1))<56320||a>57343?e?i.charAt(r):s:e?i.slice(r,r+2):(s-55296<<10)+(a-56320)+65536)}},_M=Wa,Vu={},cp,$1;function mP(){if($1)return cp;$1=1;var e=Co(),t=ja,n=$h;return cp=Lo()?Object.defineProperties:function(r,o){t(r);for(var s=n(o),a=s.length,l=0,u;a>l;)e.f(r,u=s[l++],o[u]);return r},cp}var fp,X1;function gP(){if(X1)return fp;X1=1;var e=ds.document;return fp=e&&e.documentElement,fp}var hp,Y1;function Py(){if(Y1)return hp;Y1=1;var e=ja,t=mP(),n=Ry,i=Cy()("IE_PROTO"),r=function(){},o="prototype",s=function(){var a=pM()("iframe"),l=n.length,u="<",c=">",f;for(a.style.display="none",gP().appendChild(a),a.src="javascript:",f=a.contentWindow.document,f.open(),f.write(u+"script"+c+"document.F=Object"+u+"/script"+c),f.close(),s=f.F;l--;)delete s[o][n[l]];return s()};return hp=Object.create||function(l,u){var c;return l!==null?(r[o]=e(l),c=new r,r[o]=null,c[i]=l):c=s(),u===void 0?c:t(c,u)},hp}var bM={exports:{}},vg=Ly("wks"),vP=Gh,yg=ds.Symbol,q1=typeof yg=="function",yP=bM.exports=function(e){return vg[e]||(vg[e]=q1&&yg[e]||(q1?yg:vP)("Symbol."+e))};yP.store=vg;var er=bM.exports,xP=Co().f,wP=ps,Z1=er("toStringTag"),Ay=function(e,t,n){e&&!wP(e=n?e:e.prototype,Z1)&&xP(e,Z1,{configurable:!0,value:t})},_P=Py(),bP=Hu,SP=Ay,SM={};Wa(SM,er("iterator"),function(){return this});var MP=function(e,t,n){e.prototype=_P(SM,{next:bP(1,n)}),SP(e,t+" Iterator")},EP=ps,TP=ju,J1=Cy()("IE_PROTO"),LP=Object.prototype,MM=Object.getPrototypeOf||function(e){return e=TP(e),EP(e,J1)?e[J1]:typeof e.constructor=="function"&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?LP:null},dp=Ro,CP=_M,RP=Wa,K1=Vu,PP=MP,AP=Ay,DP=MM,pp=er("iterator"),mp=!([].keys&&"next"in[].keys()),OP="@@iterator",Q1="keys",wc="values",FP=function(){return this},EM=function(e,t,n,i,r,o,s){PP(n,t,i);var a=function(x){if(!mp&&x in f)return f[x];switch(x){case Q1:return function(){return new n(this,x)};case wc:return function(){return new n(this,x)}}return function(){return new n(this,x)}},l=t+" Iterator",u=r==wc,c=!1,f=e.prototype,h=f[pp]||f[OP]||r&&f[r],d=h||a(r),g=r?u?a("entries"):d:void 0,v=t=="Array"&&f.entries||h,y,m,p;if(v&&(p=DP(v.call(new e)),p!==Object.prototype&&p.next&&AP(p,l,!0)),u&&h&&h.name!==wc&&(c=!0,d=function(){return h.call(this)}),s&&(mp||c||!f[pp])&&RP(f,pp,d),K1[t]=d,K1[l]=FP,r)if(y={values:u?d:a(wc),keys:o?d:a(Q1),entries:g},s)for(m in y)m in f||CP(f,m,y[m]);else dp(dp.P+dp.F*(mp||c),t,y);return y},kP=pP(!0);EM(String,"String",function(e){this._t=String(e),this._i=0},function(){var e=this._t,t=this._i,n;return t>=e.length?{value:void 0,done:!0}:(n=kP(e,t),this._i+=n.length,{value:n,done:!1})});var NP=function(e,t){return{value:t,done:!!e}},_c=NP,ex=Vu,IP=ms;EM(Array,"Array",function(e,t){this._t=IP(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,_c(1)):t=="keys"?_c(0,n):t=="values"?_c(0,e[n]):_c(0,[n,e[n]])},"values");ex.Arguments=ex.Array;var BP=ds,UP=Wa,tx=Vu,nx=er("toStringTag"),ix="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(",");for(var gp=0;gp<ix.length;gp++){var vp=ix[gp],rx=BP[vp],yp=rx&&rx.prototype;yp&&!yp[nx]&&UP(yp,nx,vp),tx[vp]=tx.Array}var Zh={};Zh.f=er;var zP=Zh.f("iterator"),HP={default:zP,__esModule:!0},TM={exports:{}},ns=Gh("meta"),jP=Ha,Dy=ps,VP=Co().f,WP=0,Jh=Object.isExtensible||function(){return!0},GP=!Va(function(){return Jh(Object.preventExtensions({}))}),Oy=function(e){VP(e,ns,{value:{i:"O"+ ++WP,w:{}}})},$P=function(e,t){if(!jP(e))return typeof e=="symbol"?e:(typeof e=="string"?"S":"P")+e;if(!Dy(e,ns)){if(!Jh(e))return"F";if(!t)return"E";Oy(e)}return e[ns].i},XP=function(e,t){if(!Dy(e,ns)){if(!Jh(e))return!0;if(!t)return!1;Oy(e)}return e[ns].w},YP=function(e){return GP&&qP.NEED&&Jh(e)&&!Dy(e,ns)&&Oy(e),e},qP=TM.exports={KEY:ns,NEED:!1,fastKey:$P,getWeak:XP,onFreeze:YP},ZP=TM.exports,ox=ei,JP=Zh,KP=Co().f,Fy=function(e){var t=ox.Symbol||(ox.Symbol={});e.charAt(0)!="_"&&!(e in t)&&KP(t,e,{value:JP.f(e)})},QP=$h,eA=Xh,tA=Yh(),nA=function(e){var t=QP(e),n=eA.f;if(n)for(var i=n(e),r=tA.f,o=0,s;i.length>o;)r.call(e,s=i[o++])&&t.push(s);return t},iA=My,rA=Array.isArray||function(t){return iA(t)=="Array"},LM={},ky={},oA=xM,sA=Ry.concat("length","prototype");ky.f=Object.getOwnPropertyNames||function(t){return oA(t,sA)};var aA=ms,CM=ky.f,lA={}.toString,RM=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],uA=function(e){try{return CM(e)}catch{return RM.slice()}};LM.f=function(t){return RM&&lA.call(t)=="[object Window]"?uA(t):CM(aA(t))};var Kh={},cA=Yh(),fA=Hu,hA=ms,dA=Sy,pA=ps,mA=mM(),sx=Object.getOwnPropertyDescriptor;Kh.f=Lo()?sx:function(t,n){if(t=hA(t),n=dA(n,!0),mA)try{return sx(t,n)}catch{}if(pA(t,n))return fA(!cA.f.call(t,n),t[n])};var Qh=ds,$t=ps,PM=Lo(),ln=Ro,gA=_M,vA=ZP.KEY,Ny=Va,Iy=Ly,By=Ay,yA=Gh,Wu=er,xA=Zh,wA=Fy,_A=nA,bA=rA,xg=ja,SA=Ha,MA=ju,ed=ms,Uy=Sy,wg=Hu,pu=Py(),AM=LM,DM=Kh,td=Xh,OM=Co(),EA=$h,FM=DM.f,Vo=OM.f,kM=AM.f,On=Qh.Symbol,sh=Qh.JSON,bc=sh&&sh.stringify,ho="prototype",Ln=Wu("_hidden"),ax=Wu("toPrimitive"),TA={}.propertyIsEnumerable,al=Iy("symbol-registry"),Mr=Iy("symbols"),Gu=Iy("op-symbols"),Ri=Object[ho],Ga=typeof On=="function"&&!!td.f,xp=Qh.QObject,_g=!xp||!xp[ho]||!xp[ho].findChild,bg=PM&&Ny(function(){return pu(Vo({},"a",{get:function(){return Vo(this,"a",{value:7}).a}})).a!=7})?function(e,t,n){var i=FM(Ri,t);i&&delete Ri[t],Vo(e,t,n),i&&e!==Ri&&Vo(Ri,t,i)}:Vo,lx=function(e){var t=Mr[e]=pu(On[ho]);return t._k=e,t},Sg=Ga&&typeof On.iterator=="symbol"?function(e){return typeof e=="symbol"}:function(e){return e instanceof On},nd=function(t,n,i){return t===Ri&&nd(Gu,n,i),xg(t),n=Uy(n,!0),xg(i),$t(Mr,n)?(i.enumerable?($t(t,Ln)&&t[Ln][n]&&(t[Ln][n]=!1),i=pu(i,{enumerable:wg(0,!1)})):($t(t,Ln)||Vo(t,Ln,wg(1,{})),t[Ln][n]=!0),bg(t,n,i)):Vo(t,n,i)},NM=function(t,n){xg(t);for(var i=_A(n=ed(n)),r=0,o=i.length,s;o>r;)nd(t,s=i[r++],n[s]);return t},LA=function(t,n){return n===void 0?pu(t):NM(pu(t),n)},CA=function(t){var n=TA.call(this,t=Uy(t,!0));return this===Ri&&$t(Mr,t)&&!$t(Gu,t)?!1:n||!$t(this,t)||!$t(Mr,t)||$t(this,Ln)&&this[Ln][t]?n:!0},IM=function(t,n){if(t=ed(t),n=Uy(n,!0),!(t===Ri&&$t(Mr,n)&&!$t(Gu,n))){var i=FM(t,n);return i&&$t(Mr,n)&&!($t(t,Ln)&&t[Ln][n])&&(i.enumerable=!0),i}},BM=function(t){for(var n=kM(ed(t)),i=[],r=0,o;n.length>r;)!$t(Mr,o=n[r++])&&o!=Ln&&o!=vA&&i.push(o);return i},UM=function(t){for(var n=t===Ri,i=kM(n?Gu:ed(t)),r=[],o=0,s;i.length>o;)$t(Mr,s=i[o++])&&(!n||$t(Ri,s))&&r.push(Mr[s]);return r};Ga||(On=function(){if(this instanceof On)throw TypeError("Symbol is not a constructor!");var t=yA(arguments.length>0?arguments[0]:void 0),n=function(i){this===Ri&&n.call(Gu,i),$t(this,Ln)&&$t(this[Ln],t)&&(this[Ln][t]=!1),bg(this,t,wg(1,i))};return PM&&_g&&bg(Ri,t,{configurable:!0,set:n}),lx(t)},gA(On[ho],"toString",function(){return this._k}),DM.f=IM,OM.f=nd,ky.f=AM.f=BM,Yh().f=CA,td.f=UM,xA.f=function(e){return lx(Wu(e))});ln(ln.G+ln.W+ln.F*!Ga,{Symbol:On});for(var ux="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),cx=0;ux.length>cx;)Wu(ux[cx++]);for(var fx=EA(Wu.store),hx=0;fx.length>hx;)wA(fx[hx++]);ln(ln.S+ln.F*!Ga,"Symbol",{for:function(e){return $t(al,e+="")?al[e]:al[e]=On(e)},keyFor:function(t){if(!Sg(t))throw TypeError(t+" is not a symbol!");for(var n in al)if(al[n]===t)return n},useSetter:function(){_g=!0},useSimple:function(){_g=!1}});ln(ln.S+ln.F*!Ga,"Object",{create:LA,defineProperty:nd,defineProperties:NM,getOwnPropertyDescriptor:IM,getOwnPropertyNames:BM,getOwnPropertySymbols:UM});var RA=Ny(function(){td.f(1)});ln(ln.S+ln.F*RA,"Object",{getOwnPropertySymbols:function(t){return td.f(MA(t))}});sh&&ln(ln.S+ln.F*(!Ga||Ny(function(){var e=On();return bc([e])!="[null]"||bc({a:e})!="{}"||bc(Object(e))!="{}"})),"JSON",{stringify:function(t){for(var n=[t],i=1,r,o;arguments.length>i;)n.push(arguments[i++]);if(o=r=n[1],!(!SA(r)&&t===void 0||Sg(t)))return bA(r)||(r=function(s,a){if(typeof o=="function"&&(a=o.call(this,s,a)),!Sg(a))return a}),n[1]=r,bc.apply(sh,n)}});On[ho][ax]||Wa(On[ho],ax,On[ho].valueOf);By(On,"Symbol");By(Math,"Math",!0);By(Qh.JSON,"JSON",!0);Fy("asyncIterator");Fy("observable");var PA=ei.Symbol,AA={default:PA,__esModule:!0};qh.__esModule=!0;var DA=HP,zM=HM(DA),OA=AA,no=HM(OA),wp=typeof no.default=="function"&&typeof zM.default=="symbol"?function(e){return typeof e}:function(e){return e&&typeof no.default=="function"&&e.constructor===no.default&&e!==no.default.prototype?"symbol":typeof e};function HM(e){return e&&e.__esModule?e:{default:e}}var FA=qh.default=typeof no.default=="function"&&wp(zM.default)==="symbol"?function(e){return typeof e>"u"?"undefined":wp(e)}:function(e){return e&&typeof no.default=="function"&&e.constructor===no.default&&e!==no.default.prototype?"symbol":typeof e>"u"?"undefined":wp(e)},kA=qh,NA=IA(kA);function IA(e){return e&&e.__esModule?e:{default:e}}var Yt=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&((typeof t>"u"?"undefined":(0,NA.default)(t))==="object"||typeof t=="function")?t:e},_p,dx;function BA(){if(dx)return _p;dx=1;var e=Ha,t=ja,n=function(i,r){if(t(i),!e(r)&&r!==null)throw TypeError(r+": can't set as prototype!")};return _p={set:Object.setPrototypeOf||("__proto__"in{}?function(i,r,o){try{o=by(Function.call,Kh.f(Object.prototype,"__proto__").set,2),o(i,[]),r=!(i instanceof Array)}catch{r=!0}return function(a,l){return n(a,l),r?a.__proto__=l:o(a,l),a}}({},!1):void 0),check:n},_p}var px=Ro;px(px.S,"Object",{setPrototypeOf:BA().set});var UA=ei.Object.setPrototypeOf,zA={default:UA,__esModule:!0},mx=Ro;mx(mx.S,"Object",{create:Py()});var HA=ei.Object,jA=function(t,n){return HA.create(t,n)},VA={default:jA,__esModule:!0},WA=zA,gx=zy(WA),GA=VA,$A=zy(GA),XA=qh,YA=zy(XA);function zy(e){return e&&e.__esModule?e:{default:e}}var Nn=function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+(typeof t>"u"?"undefined":(0,YA.default)(t)));e.prototype=(0,$A.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(gx.default?(0,gx.default)(e,t):e.__proto__=t)},jM={exports:{}},qA="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ZA=qA,JA=ZA;function VM(){}function WM(){}WM.resetWarningCache=VM;var KA=function(){function e(i,r,o,s,a,l){if(l!==JA){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:WM,resetWarningCache:VM};return n.PropTypes=n,n};jM.exports=KA();var id=jM.exports;const P=Pr(id);var QA=function(){},eD=QA;const ah=Pr(eD);var tD=wM,nD=iD(tD);function iD(e){return e&&e.__esModule?e:{default:e}}var Ke=function(e,t,n){return t in e?(0,nD.default)(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},GM=function(t){var n,i,r=t.className,o=t.included,s=t.vertical,a=t.offset,l=t.length,u=t.style,c=t.reverse,f=s?(n={},Ke(n,c?"top":"bottom",a+"%"),Ke(n,c?"bottom":"top","auto"),Ke(n,"height",l+"%"),n):(i={},Ke(i,c?"right":"left",a+"%"),Ke(i,c?"left":"right","auto"),Ke(i,"width",l+"%"),i),h=tt({},u,f);return o?de.createElement("div",{className:r,style:h}):null},Ma=function(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n},bp=Ro,rD=ei,oD=Va,$M=function(e,t){var n=(rD.Object||{})[e]||Object[e],i={};i[e]=t(n),bp(bp.S+bp.F*oD(function(){n(1)}),"Object",i)},sD=ju,aD=MM;$M("getPrototypeOf",function(){return function(t){return aD(sD(t))}});var lD=ei.Object.getPrototypeOf,uD={default:lD,__esModule:!0},cD=ms,fD=Kh.f;$M("getOwnPropertyDescriptor",function(){return function(t,n){return fD(cD(t),n)}});var hD=ei.Object,dD=function(t,n){return hD.getOwnPropertyDescriptor(t,n)},pD={default:dD,__esModule:!0},mD=uD,gD=XM(mD),vD=pD,yD=XM(vD);function XM(e){return e&&e.__esModule?e:{default:e}}var Sp=function e(t,n,i){t===null&&(t=Function.prototype);var r=(0,yD.default)(t,n);if(r===void 0){var o=(0,gD.default)(t);return o===null?void 0:e(o,n,i)}else{if("value"in r)return r.value;var s=r.get;return s===void 0?void 0:s.call(i)}},Mg={exports:{}},Eg={exports:{}},Tg={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});function n(){return!1}function i(){return!0}function r(){this.timeStamp=Date.now(),this.target=void 0,this.currentTarget=void 0}r.prototype={isEventObject:1,constructor:r,isDefaultPrevented:n,isPropagationStopped:n,isImmediatePropagationStopped:n,preventDefault:function(){this.isDefaultPrevented=i},stopPropagation:function(){this.isPropagationStopped=i},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=i,this.stopPropagation()},halt:function(s){s?this.stopImmediatePropagation():this.stopPropagation(),this.preventDefault()}},t.default=r,e.exports=t.default})(Tg,Tg.exports);var xD=Tg.exports;/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var vx=Object.getOwnPropertySymbols,wD=Object.prototype.hasOwnProperty,_D=Object.prototype.propertyIsEnumerable;function bD(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function SD(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var i=Object.getOwnPropertyNames(t).map(function(o){return t[o]});if(i.join("")!=="0123456789")return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(o){r[o]=o}),Object.keys(Object.assign({},r)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var MD=SD()?Object.assign:function(e,t){for(var n,i=bD(e),r,o=1;o<arguments.length;o++){n=Object(arguments[o]);for(var s in n)wD.call(n,s)&&(i[s]=n[s]);if(vx){r=vx(n);for(var a=0;a<r.length;a++)_D.call(n,r[a])&&(i[r[a]]=n[r[a]])}}return i};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});function n(y){return y&&y.__esModule?y:{default:y}}var i=xD,r=n(i),o=MD,s=n(o),a=!0,l=!1,u=["altKey","bubbles","cancelable","ctrlKey","currentTarget","eventPhase","metaKey","shiftKey","target","timeStamp","view","type"];function c(y){return y==null}var f=[{reg:/^key/,props:["char","charCode","key","keyCode","which"],fix:function(m,p){c(m.which)&&(m.which=c(p.charCode)?p.keyCode:p.charCode),m.metaKey===void 0&&(m.metaKey=m.ctrlKey)}},{reg:/^touch/,props:["touches","changedTouches","targetTouches"]},{reg:/^hashchange$/,props:["newURL","oldURL"]},{reg:/^gesturechange$/i,props:["rotation","scale"]},{reg:/^(mousewheel|DOMMouseScroll)$/,props:[],fix:function(m,p){var x=void 0,w=void 0,b=void 0,_=p.wheelDelta,S=p.axis,L=p.wheelDeltaY,E=p.wheelDeltaX,A=p.detail;_&&(b=_/120),A&&(b=0-(A%3===0?A/3:A)),S!==void 0&&(S===m.HORIZONTAL_AXIS?(w=0,x=0-b):S===m.VERTICAL_AXIS&&(x=0,w=b)),L!==void 0&&(w=L/120),E!==void 0&&(x=-1*E/120),!x&&!w&&(w=b),x!==void 0&&(m.deltaX=x),w!==void 0&&(m.deltaY=w),b!==void 0&&(m.delta=b)}},{reg:/^mouse|contextmenu|click|mspointer|(^DOMMouseScroll$)/i,props:["buttons","clientX","clientY","button","offsetX","relatedTarget","which","fromElement","toElement","offsetY","pageX","pageY","screenX","screenY"],fix:function(m,p){var x=void 0,w=void 0,b=void 0,_=m.target,S=p.button;return _&&c(m.pageX)&&!c(p.clientX)&&(x=_.ownerDocument||document,w=x.documentElement,b=x.body,m.pageX=p.clientX+(w&&w.scrollLeft||b&&b.scrollLeft||0)-(w&&w.clientLeft||b&&b.clientLeft||0),m.pageY=p.clientY+(w&&w.scrollTop||b&&b.scrollTop||0)-(w&&w.clientTop||b&&b.clientTop||0)),!m.which&&S!==void 0&&(S&1?m.which=1:S&2?m.which=3:S&4?m.which=2:m.which=0),!m.relatedTarget&&m.fromElement&&(m.relatedTarget=m.fromElement===_?m.toElement:m.fromElement),m}}];function h(){return a}function d(){return l}function g(y){var m=y.type,p=typeof y.stopPropagation=="function"||typeof y.cancelBubble=="boolean";r.default.call(this),this.nativeEvent=y;var x=d;"defaultPrevented"in y?x=y.defaultPrevented?h:d:"getPreventDefault"in y?x=y.getPreventDefault()?h:d:"returnValue"in y&&(x=y.returnValue===l?h:d),this.isDefaultPrevented=x;var w=[],b=void 0,_=void 0,S=void 0,L=u.concat();for(f.forEach(function(E){m.match(E.reg)&&(L=L.concat(E.props),E.fix&&w.push(E.fix))}),_=L.length;_;)S=L[--_],this[S]=y[S];for(!this.target&&p&&(this.target=y.srcElement||document),this.target&&this.target.nodeType===3&&(this.target=this.target.parentNode),_=w.length;_;)b=w[--_],b(this,y);this.timeStamp=y.timeStamp||Date.now()}var v=r.default.prototype;(0,s.default)(g.prototype,v,{constructor:g,preventDefault:function(){var m=this.nativeEvent;m.preventDefault?m.preventDefault():m.returnValue=l,v.preventDefault.call(this)},stopPropagation:function(){var m=this.nativeEvent;m.stopPropagation?m.stopPropagation():m.cancelBubble=a,v.stopPropagation.call(this)}}),t.default=g,e.exports=t.default})(Eg,Eg.exports);var ED=Eg.exports;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;function n(s){return s&&s.__esModule?s:{default:s}}var i=ED,r=n(i);function o(s,a,l,u){function c(h){var d=new r.default(h);l.call(s,d)}if(s.addEventListener){var f=function(){var h=!1;return typeof u=="object"?h=u.capture||!1:typeof u=="boolean"&&(h=u),s.addEventListener(a,c,u||!1),{v:{remove:function(){s.removeEventListener(a,c,h)}}}}();if(typeof f=="object")return f.v}else if(s.attachEvent)return s.attachEvent("on"+a,c),{remove:function(){s.detachEvent("on"+a,c)}}}e.exports=t.default})(Mg,Mg.exports);var TD=Mg.exports;const LD=Pr(TD);function Vi(e,t,n,i){var r=Yi.unstable_batchedUpdates?function(s){Yi.unstable_batchedUpdates(n,s)}:n;return LD(e,t,r,i)}var YM={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var t={}.hasOwnProperty;function n(){for(var o="",s=0;s<arguments.length;s++){var a=arguments[s];a&&(o=r(o,i(a)))}return o}function i(o){if(typeof o=="string"||typeof o=="number")return o;if(typeof o!="object")return"";if(Array.isArray(o))return n.apply(null,o);if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]"))return o.toString();var s="";for(var a in o)t.call(o,a)&&o[a]&&(s=r(s,a));return s}function r(o,s){return s?o?o+" "+s:o+s:o}e.exports?(n.default=n,e.exports=n):window.classNames=n})()})(YM);var CD=YM.exports;const qi=Pr(CD);var RD=function(t,n,i,r,o,s){ah(i?r>0:!0,"`Slider[step]` should be a positive number in order to make Slider[dots] work.");var a=Object.keys(n).map(parseFloat).sort(function(u,c){return u-c});if(i&&r)for(var l=o;l<=s;l+=r)a.indexOf(l)===-1&&a.push(l);return a},qM=function(t){var n=t.prefixCls,i=t.vertical,r=t.reverse,o=t.marks,s=t.dots,a=t.step,l=t.included,u=t.lowerBound,c=t.upperBound,f=t.max,h=t.min,d=t.dotStyle,g=t.activeDotStyle,v=f-h,y=RD(i,o,s,a,h,f).map(function(m){var p,x=Math.abs(m-h)/v*100+"%",w=!l&&m===c||l&&m<=c&&m>=u,b=i?tt({},d,Ke({},r?"top":"bottom",x)):tt({},d,Ke({},r?"right":"left",x));w&&(b=tt({},b,g));var _=qi((p={},Ke(p,n+"-dot",!0),Ke(p,n+"-dot-active",w),Ke(p,n+"-dot-reverse",r),p));return de.createElement("span",{className:_,style:b,key:m})});return de.createElement("div",{className:n+"-step"},y)};qM.propTypes={prefixCls:P.string,activeDotStyle:P.object,dotStyle:P.object,min:P.number,max:P.number,upperBound:P.number,lowerBound:P.number,included:P.bool,dots:P.bool,step:P.number,marks:P.object,vertical:P.bool,reverse:P.bool};var ZM=function(t){var n=t.className,i=t.vertical,r=t.reverse,o=t.marks,s=t.included,a=t.upperBound,l=t.lowerBound,u=t.max,c=t.min,f=t.onClickLabel,h=Object.keys(o),d=u-c,g=h.map(parseFloat).sort(function(v,y){return v-y}).map(function(v){var y,m=o[v],p=typeof m=="object"&&!de.isValidElement(m),x=p?m.label:m;if(!x&&x!==0)return null;var w=!s&&v===a||s&&v<=a&&v>=l,b=qi((y={},Ke(y,n+"-text",!0),Ke(y,n+"-text-active",w),y)),_=Ke({marginBottom:"-50%"},r?"top":"bottom",(v-c)/d*100+"%"),S=Ke({transform:"translateX(-50%)",msTransform:"translateX(-50%)"},r?"right":"left",r?(v-c/4)/d*100+"%":(v-c)/d*100+"%"),L=i?_:S,E=p?tt({},L,m.style):L;return de.createElement("span",{className:b,style:E,key:v,onMouseDown:function(B){return f(B,v)},onTouchStart:function(B){return f(B,v)}},x)});return de.createElement("div",{className:n},g)};ZM.propTypes={className:P.string,vertical:P.bool,reverse:P.bool,marks:P.object,included:P.bool,upperBound:P.number,lowerBound:P.number,max:P.number,min:P.number,onClickLabel:P.func};var rd=function(e){Nn(t,e);function t(){var n,i,r,o;kn(this,t);for(var s=arguments.length,a=Array(s),l=0;l<s;l++)a[l]=arguments[l];return o=(i=(r=Yt(this,(n=t.__proto__||Object.getPrototypeOf(t)).call.apply(n,[this].concat(a))),r),r.state={clickFocused:!1},r.setHandleRef=function(u){r.handle=u},r.handleMouseUp=function(){document.activeElement===r.handle&&r.setClickFocus(!0)},r.handleMouseDown=function(){r.focus()},r.handleBlur=function(){r.setClickFocus(!1)},r.handleKeyDown=function(){r.setClickFocus(!1)},i),Yt(r,o)}return Po(t,[{key:"componentDidMount",value:function(){this.onMouseUpListener=Vi(document,"mouseup",this.handleMouseUp)}},{key:"componentWillUnmount",value:function(){this.onMouseUpListener&&this.onMouseUpListener.remove()}},{key:"setClickFocus",value:function(i){this.setState({clickFocused:i})}},{key:"clickFocus",value:function(){this.setClickFocus(!0),this.focus()}},{key:"focus",value:function(){this.handle.focus()}},{key:"blur",value:function(){this.handle.blur()}},{key:"render",value:function(){var i,r,o=this.props,s=o.prefixCls,a=o.vertical,l=o.reverse,u=o.offset,c=o.style,f=o.disabled,h=o.min,d=o.max,g=o.value,v=o.tabIndex,y=Ma(o,["prefixCls","vertical","reverse","offset","style","disabled","min","max","value","tabIndex"]),m=qi(this.props.className,Ke({},s+"-handle-click-focused",this.state.clickFocused)),p=a?(i={},Ke(i,l?"top":"bottom",u+"%"),Ke(i,l?"bottom":"top","auto"),Ke(i,"transform","translateY(+50%)"),i):(r={},Ke(r,l?"right":"left",u+"%"),Ke(r,l?"left":"right","auto"),Ke(r,"transform","translateX("+(l?"+":"-")+"50%)"),r),x=tt({},c,p),w=v||0;return(f||v===null)&&(w=null),de.createElement("div",tt({ref:this.setHandleRef,tabIndex:w},y,{className:m,style:x,onBlur:this.handleBlur,onKeyDown:this.handleKeyDown,onMouseDown:this.handleMouseDown,role:"slider","aria-valuemin":h,"aria-valuemax":d,"aria-valuenow":g,"aria-disabled":!!f}))}}]),t}(de.Component);rd.propTypes={prefixCls:P.string,className:P.string,vertical:P.bool,offset:P.number,style:P.object,disabled:P.bool,min:P.number,max:P.number,value:P.number,tabIndex:P.number,reverse:P.bool};var yx=ja,PD=function(e,t,n,i){try{return i?t(yx(n)[0],n[1]):t(n)}catch(o){var r=e.return;throw r!==void 0&&yx(r.call(e)),o}},AD=Vu,DD=er("iterator"),OD=Array.prototype,FD=function(e){return e!==void 0&&(AD.Array===e||OD[DD]===e)},kD=Co(),ND=Hu,ID=function(e,t,n){t in e?kD.f(e,t,ND(0,n)):e[t]=n},Lg=My,BD=er("toStringTag"),UD=Lg(function(){return arguments}())=="Arguments",zD=function(e,t){try{return e[t]}catch{}},HD=function(e){var t,n,i;return e===void 0?"Undefined":e===null?"Null":typeof(n=zD(t=Object(e),BD))=="string"?n:UD?Lg(t):(i=Lg(t))=="Object"&&typeof t.callee=="function"?"Arguments":i},jD=HD,VD=er("iterator"),WD=Vu,GD=ei.getIteratorMethod=function(e){if(e!=null)return e[VD]||e["@@iterator"]||WD[jD(e)]},Mp,xx;function $D(){if(xx)return Mp;xx=1;var e=er("iterator"),t=!1;try{var n=[7][e]();n.return=function(){t=!0},Array.from(n,function(){throw 2})}catch{}return Mp=function(i,r){if(!r&&!t)return!1;var o=!1;try{var s=[7],a=s[e]();a.next=function(){return{done:o=!0}},s[e]=function(){return a},i(s)}catch{}return o},Mp}var XD=by,Ep=Ro,YD=ju,qD=PD,ZD=FD,JD=vM,wx=ID,KD=GD;Ep(Ep.S+Ep.F*!$D()(function(e){Array.from(e)}),"Array",{from:function(t){var n=YD(t),i=typeof this=="function"?this:Array,r=arguments.length,o=r>1?arguments[1]:void 0,s=o!==void 0,a=0,l=KD(n),u,c,f,h;if(s&&(o=XD(o,r>2?arguments[2]:void 0,2)),l!=null&&!(i==Array&&ZD(l)))for(h=l.call(n),c=new i;!(f=h.next()).done;a++)wx(c,a,s?qD(h,o,[f.value,a],!0):f.value);else for(u=JD(n.length),c=new i(u);u>a;a++)wx(c,a,s?o(n[a],a):n[a]);return c.length=a,c}});var QD=ei.Array.from,eO={default:QD,__esModule:!0},tO=eO,nO=iO(tO);function iO(e){return e&&e.__esModule?e:{default:e}}var Lf=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}else return(0,nO.default)(e)},Or={PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40};function Sc(e,t){try{return Object.keys(t).some(function(n){return e.target===xr.findDOMNode(t[n])})}catch{return!1}}function JM(e,t){var n=t.min,i=t.max;return e<n||e>i}function _x(e){return e.touches.length>1||e.type.toLowerCase()==="touchend"&&e.touches.length>0}function bx(e,t){var n=t.marks,i=t.step,r=t.min,o=t.max,s=Object.keys(n).map(parseFloat);if(i!==null){var a=Math.floor((o-r)/i),l=Math.min((e-r)/i,a),u=Math.round(l)*i+r;s.push(u)}var c=s.map(function(f){return Math.abs(e-f)});return s[c.indexOf(Math.min.apply(Math,Lf(c)))]}function rO(e){var t=e.toString(),n=0;return t.indexOf(".")>=0&&(n=t.length-t.indexOf(".")-1),n}function Sx(e,t){return e?t.clientY:t.pageX}function Mx(e,t){return e?t.touches[0].clientY:t.touches[0].pageX}function Tp(e,t){var n=t.getBoundingClientRect();return e?n.top+n.height*.5:window.pageXOffset+n.left+n.width*.5}function Hy(e,t){var n=t.max,i=t.min;return e<=i?i:e>=n?n:e}function KM(e,t){var n=t.step,i=isFinite(bx(e,t))?bx(e,t):0;return n===null?i:parseFloat(i.toFixed(rO(n)))}function Ea(e){e.stopPropagation(),e.preventDefault()}function oO(e,t,n){var i={increase:function(a,l){return a+l},decrease:function(a,l){return a-l}},r=i[e](Object.keys(n.marks).indexOf(JSON.stringify(t)),1),o=Object.keys(n.marks)[r];return n.step?i[e](t,n.step):Object.keys(n.marks).length&&n.marks[o]?n.marks[o]:t}function QM(e,t,n){var i="increase",r="decrease",o=i;switch(e.keyCode){case Or.UP:o=t&&n?r:i;break;case Or.RIGHT:o=!t&&n?r:i;break;case Or.DOWN:o=t&&n?i:r;break;case Or.LEFT:o=!t&&n?i:r;break;case Or.END:return function(s,a){return a.max};case Or.HOME:return function(s,a){return a.min};case Or.PAGE_UP:return function(s,a){return s+a.step*2};case Or.PAGE_DOWN:return function(s,a){return s-a.step*2};default:return}return function(s,a){return oO(o,s,a)}}function ki(){}function eE(e){var t,n;return n=t=function(i){Nn(r,i);function r(o){kn(this,r);var s=Yt(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,o));s.onMouseDown=function(f){if(f.button===0){var h=s.props.vertical,d=Sx(h,f);if(!Sc(f,s.handlesRefs))s.dragOffset=0;else{var g=Tp(h,f.target);s.dragOffset=d-g,d=g}s.removeDocumentEvents(),s.onStart(d),s.addDocumentMouseEvents()}},s.onTouchStart=function(f){if(!_x(f)){var h=s.props.vertical,d=Mx(h,f);if(!Sc(f,s.handlesRefs))s.dragOffset=0;else{var g=Tp(h,f.target);s.dragOffset=d-g,d=g}s.onStart(d),s.addDocumentTouchEvents(),Ea(f)}},s.onFocus=function(f){var h=s.props,d=h.onFocus,g=h.vertical;if(Sc(f,s.handlesRefs)){var v=Tp(g,f.target);s.dragOffset=0,s.onStart(v),Ea(f),d&&d(f)}},s.onBlur=function(f){var h=s.props.onBlur;s.onEnd(),h&&h(f)},s.onMouseUp=function(){s.handlesRefs[s.prevMovedHandleIndex]&&s.handlesRefs[s.prevMovedHandleIndex].clickFocus()},s.onMouseMove=function(f){if(!s.sliderRef){s.onEnd();return}var h=Sx(s.props.vertical,f);s.onMove(f,h-s.dragOffset)},s.onTouchMove=function(f){if(_x(f)||!s.sliderRef){s.onEnd();return}var h=Mx(s.props.vertical,f);s.onMove(f,h-s.dragOffset)},s.onKeyDown=function(f){s.sliderRef&&Sc(f,s.handlesRefs)&&s.onKeyboard(f)},s.onClickMarkLabel=function(f,h){f.stopPropagation(),s.onChange({value:h}),s.setState({value:h},function(){return s.onEnd(!0)})},s.saveSlider=function(f){s.sliderRef=f};var a=o.step,l=o.max,u=o.min,c=isFinite(l-u)?(l-u)%a===0:!0;return ah(a&&Math.floor(a)===a?c:!0,"Slider[max] - Slider[min] (%s) should be a multiple of Slider[step] (%s)",l-u,a),s.handlesRefs={},s}return Po(r,[{key:"componentDidMount",value:function(){this.document=this.sliderRef&&this.sliderRef.ownerDocument;var s=this.props,a=s.autoFocus,l=s.disabled;a&&!l&&this.focus()}},{key:"componentWillUnmount",value:function(){Sp(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"componentWillUnmount",this)&&Sp(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"componentWillUnmount",this).call(this),this.removeDocumentEvents()}},{key:"getSliderStart",value:function(){var s=this.sliderRef,a=this.props,l=a.vertical,u=a.reverse,c=s.getBoundingClientRect();return l?u?c.bottom:c.top:window.pageXOffset+(u?c.right:c.left)}},{key:"getSliderLength",value:function(){var s=this.sliderRef;if(!s)return 0;var a=s.getBoundingClientRect();return this.props.vertical?a.height:a.width}},{key:"addDocumentTouchEvents",value:function(){this.onTouchMoveListener=Vi(this.document,"touchmove",this.onTouchMove),this.onTouchUpListener=Vi(this.document,"touchend",this.onEnd)}},{key:"addDocumentMouseEvents",value:function(){this.onMouseMoveListener=Vi(this.document,"mousemove",this.onMouseMove),this.onMouseUpListener=Vi(this.document,"mouseup",this.onEnd)}},{key:"removeDocumentEvents",value:function(){this.onTouchMoveListener&&this.onTouchMoveListener.remove(),this.onTouchUpListener&&this.onTouchUpListener.remove(),this.onMouseMoveListener&&this.onMouseMoveListener.remove(),this.onMouseUpListener&&this.onMouseUpListener.remove()}},{key:"focus",value:function(){this.props.disabled||this.handlesRefs[0].focus()}},{key:"blur",value:function(){var s=this;this.props.disabled||Object.keys(this.handlesRefs).forEach(function(a){s.handlesRefs[a]&&s.handlesRefs[a].blur&&s.handlesRefs[a].blur()})}},{key:"calcValue",value:function(s){var a=this.props,l=a.vertical,u=a.min,c=a.max,f=Math.abs(Math.max(s,0)/this.getSliderLength()),h=l?(1-f)*(c-u)+u:f*(c-u)+u;return h}},{key:"calcValueByPos",value:function(s){var a=this.props.reverse?-1:1,l=a*(s-this.getSliderStart()),u=this.trimAlignValue(this.calcValue(l));return u}},{key:"calcOffset",value:function(s){var a=this.props,l=a.min,u=a.max,c=(s-l)/(u-l);return c*100}},{key:"saveHandle",value:function(s,a){this.handlesRefs[s]=a}},{key:"render",value:function(){var s,a=this.props,l=a.prefixCls,u=a.className,c=a.marks,f=a.dots,h=a.step,d=a.included,g=a.disabled,v=a.vertical,y=a.reverse,m=a.min,p=a.max,x=a.children,w=a.maximumTrackStyle,b=a.style,_=a.railStyle,S=a.dotStyle,L=a.activeDotStyle,E=Sp(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"render",this).call(this),A=E.tracks,B=E.handles,j=qi(l,(s={},Ke(s,l+"-with-marks",Object.keys(c).length),Ke(s,l+"-disabled",g),Ke(s,l+"-vertical",v),Ke(s,u,u),s));return de.createElement("div",{ref:this.saveSlider,className:j,onTouchStart:g?ki:this.onTouchStart,onMouseDown:g?ki:this.onMouseDown,onMouseUp:g?ki:this.onMouseUp,onKeyDown:g?ki:this.onKeyDown,onFocus:g?ki:this.onFocus,onBlur:g?ki:this.onBlur,style:b},de.createElement("div",{className:l+"-rail",style:tt({},w,_)}),A,de.createElement(qM,{prefixCls:l,vertical:v,reverse:y,marks:c,dots:f,step:h,included:d,lowerBound:this.getLowerBound(),upperBound:this.getUpperBound(),max:p,min:m,dotStyle:S,activeDotStyle:L}),B,de.createElement(ZM,{className:l+"-mark",onClickLabel:g?ki:this.onClickMarkLabel,vertical:v,marks:c,included:d,lowerBound:this.getLowerBound(),upperBound:this.getUpperBound(),max:p,min:m,reverse:y}),x)}}]),r}(e),t.displayName="ComponentEnhancer("+e.displayName+")",t.propTypes=tt({},e.propTypes,{min:P.number,max:P.number,step:P.number,marks:P.object,included:P.bool,className:P.string,prefixCls:P.string,disabled:P.bool,children:P.any,onBeforeChange:P.func,onChange:P.func,onAfterChange:P.func,handle:P.func,dots:P.bool,vertical:P.bool,style:P.object,reverse:P.bool,minimumTrackStyle:P.object,maximumTrackStyle:P.object,handleStyle:P.oneOfType([P.object,P.arrayOf(P.object)]),trackStyle:P.oneOfType([P.object,P.arrayOf(P.object)]),railStyle:P.object,dotStyle:P.object,activeDotStyle:P.object,autoFocus:P.bool,onFocus:P.func,onBlur:P.func}),t.defaultProps=tt({},e.defaultProps,{prefixCls:"rc-slider",className:"",min:0,max:100,step:1,marks:{},handle:function(r){var o=r.index,s=Ma(r,["index"]);return delete s.dragging,s.value===null?null:de.createElement(rd,tt({},s,{key:o}))},onBeforeChange:ki,onChange:ki,onAfterChange:ki,included:!0,disabled:!1,dots:!1,vertical:!1,reverse:!1,trackStyle:[{}],handleStyle:[{}],railStyle:{},dotStyle:{},activeDotStyle:{}}),n}var tE=function(e){Nn(t,e);function t(n){kn(this,t);var i=Yt(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n));i.onEnd=function(s){var a=i.state.dragging;i.removeDocumentEvents(),(a||s)&&i.props.onAfterChange(i.getValue()),i.setState({dragging:!1})};var r=n.defaultValue!==void 0?n.defaultValue:n.min,o=n.value!==void 0?n.value:r;return i.state={value:i.trimAlignValue(o),dragging:!1},ah(!("minimumTrackStyle"in n),"minimumTrackStyle will be deprecated, please use trackStyle instead."),ah(!("maximumTrackStyle"in n),"maximumTrackStyle will be deprecated, please use railStyle instead."),i}return Po(t,[{key:"componentDidUpdate",value:function(i,r){if("value"in this.props||"min"in this.props||"max"in this.props){var o=this.props,s=o.value,a=o.onChange,l=s!==void 0?s:r.value,u=this.trimAlignValue(l,this.props);u!==r.value&&(this.setState({value:u}),JM(l,this.props)&&a(u))}}},{key:"onChange",value:function(i){var r=this.props,o=!("value"in r),s=i.value>this.props.max?tt({},i,{value:this.props.max}):i;o&&this.setState(s);var a=s.value;r.onChange(a)}},{key:"onStart",value:function(i){this.setState({dragging:!0});var r=this.props,o=this.getValue();r.onBeforeChange(o);var s=this.calcValueByPos(i);this.startValue=s,this.startPosition=i,s!==o&&(this.prevMovedHandleIndex=0,this.onChange({value:s}))}},{key:"onMove",value:function(i,r){Ea(i);var o=this.state.value,s=this.calcValueByPos(r);s!==o&&this.onChange({value:s})}},{key:"onKeyboard",value:function(i){var r=this.props,o=r.reverse,s=r.vertical,a=QM(i,s,o);if(a){Ea(i);var l=this.state,u=l.value,c=a(u,this.props),f=this.trimAlignValue(c);if(f===u)return;this.onChange({value:f}),this.props.onAfterChange(f),this.onEnd()}}},{key:"getValue",value:function(){return this.state.value}},{key:"getLowerBound",value:function(){return this.props.min}},{key:"getUpperBound",value:function(){return this.state.value}},{key:"trimAlignValue",value:function(i){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(i===null)return null;var o=tt({},this.props,r),s=Hy(i,o);return KM(s,o)}},{key:"render",value:function(){var i=this,r=this.props,o=r.prefixCls,s=r.vertical,a=r.included,l=r.disabled,u=r.minimumTrackStyle,c=r.trackStyle,f=r.handleStyle,h=r.tabIndex,d=r.min,g=r.max,v=r.reverse,y=r.handle,m=this.state,p=m.value,x=m.dragging,w=this.calcOffset(p),b=y({className:o+"-handle",prefixCls:o,vertical:s,offset:w,value:p,dragging:x,disabled:l,min:d,max:g,reverse:v,index:0,tabIndex:h,style:f[0]||f,ref:function(E){return i.saveHandle(0,E)}}),_=c[0]||c,S=de.createElement(GM,{className:o+"-track",vertical:s,included:a,offset:0,reverse:v,length:w,style:tt({},u,_)});return{tracks:S,handles:b}}}]),t}(de.Component);tE.propTypes={defaultValue:P.number,value:P.number,disabled:P.bool,autoFocus:P.bool,tabIndex:P.number,reverse:P.bool,min:P.number,max:P.number};const mu=eE(tE);function nE(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);e!=null&&this.setState(e)}function iE(e){function t(n){var i=this.constructor.getDerivedStateFromProps(e,n);return i??null}this.setState(t.bind(this))}function rE(e,t){try{var n=this.props,i=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,i)}finally{this.props=n,this.state=i}}nE.__suppressDeprecationWarning=!0;iE.__suppressDeprecationWarning=!0;rE.__suppressDeprecationWarning=!0;function oE(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if(typeof e.getDerivedStateFromProps!="function"&&typeof t.getSnapshotBeforeUpdate!="function")return e;var n=null,i=null,r=null;if(typeof t.componentWillMount=="function"?n="componentWillMount":typeof t.UNSAFE_componentWillMount=="function"&&(n="UNSAFE_componentWillMount"),typeof t.componentWillReceiveProps=="function"?i="componentWillReceiveProps":typeof t.UNSAFE_componentWillReceiveProps=="function"&&(i="UNSAFE_componentWillReceiveProps"),typeof t.componentWillUpdate=="function"?r="componentWillUpdate":typeof t.UNSAFE_componentWillUpdate=="function"&&(r="UNSAFE_componentWillUpdate"),n!==null||i!==null||r!==null){var o=e.displayName||e.name,s=typeof e.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error(`Unsafe legacy lifecycles will not be called for components using new component APIs.

`+o+" uses "+s+" but also contains the following legacy lifecycles:"+(n!==null?`
  `+n:"")+(i!==null?`
  `+i:"")+(r!==null?`
  `+r:"")+`

The above lifecycles should be removed. Learn more about this warning here:
https://fb.me/react-async-component-lifecycle-hooks`)}if(typeof e.getDerivedStateFromProps=="function"&&(t.componentWillMount=nE,t.componentWillReceiveProps=iE),typeof t.getSnapshotBeforeUpdate=="function"){if(typeof t.componentDidUpdate!="function")throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=rE;var a=t.componentDidUpdate;t.componentDidUpdate=function(u,c,f){var h=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:f;a.call(this,u,c,h)}}return e}var sO=function(t,n,i,r){var o=i?i.call(r,t,n):void 0;if(o!==void 0)return!!o;if(t===n)return!0;if(typeof t!="object"||!t||typeof n!="object"||!n)return!1;var s=Object.keys(t),a=Object.keys(n);if(s.length!==a.length)return!1;for(var l=Object.prototype.hasOwnProperty.bind(n),u=0;u<s.length;u++){var c=s[u];if(!l(c))return!1;var f=t[c],h=n[c];if(o=i?i.call(r,f,h,c):void 0,o===!1||o===void 0&&f!==h)return!1}return!0};const aO=Pr(sO);var Mc=function(t){var n=t.value,i=t.handle,r=t.bounds,o=t.props,s=o.allowCross,a=o.pushable,l=Number(a),u=Hy(n,o),c=u;return!s&&i!=null&&r!==void 0&&(i>0&&u<=r[i-1]+l&&(c=r[i-1]+l),i<r.length-1&&u>=r[i+1]-l&&(c=r[i+1]-l)),KM(c,o)},$u=function(e){Nn(t,e);function t(n){kn(this,t);var i=Yt(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n));i.onEnd=function(h){var d=i.state.handle;i.removeDocumentEvents(),(d!==null||h)&&i.props.onAfterChange(i.getValue()),i.setState({handle:null})};var r=n.count,o=n.min,s=n.max,a=Array.apply(void 0,Lf(Array(r+1))).map(function(){return o}),l="defaultValue"in n?n.defaultValue:a,u=n.value!==void 0?n.value:l,c=u.map(function(h,d){return Mc({value:h,handle:d,props:n})}),f=c[0]===s?0:c.length-1;return i.state={handle:null,recent:f,bounds:c},i}return Po(t,[{key:"componentDidUpdate",value:function(i,r){var o=this;if(("value"in this.props||"min"in this.props||"max"in this.props)&&!(this.props.min===i.min&&this.props.max===i.max&&aO(this.props.value,i.value))){var s=this.props,a=s.onChange,l=s.value,u=l||r.bounds;if(u.some(function(f){return JM(f,o.props)})){var c=u.map(function(f){return Hy(f,o.props)});a(c)}}}},{key:"onChange",value:function(i){var r=this.props,o=!("value"in r);if(o)this.setState(i);else{var s={};["handle","recent"].forEach(function(u){i[u]!==void 0&&(s[u]=i[u])}),Object.keys(s).length&&this.setState(s)}var a=tt({},this.state,i),l=a.bounds;r.onChange(l)}},{key:"onStart",value:function(i){var r=this.props,o=this.state,s=this.getValue();r.onBeforeChange(s);var a=this.calcValueByPos(i);this.startValue=a,this.startPosition=i;var l=this.getClosestBound(a);this.prevMovedHandleIndex=this.getBoundNeedMoving(a,l),this.setState({handle:this.prevMovedHandleIndex,recent:this.prevMovedHandleIndex});var u=s[this.prevMovedHandleIndex];if(a!==u){var c=[].concat(Lf(o.bounds));c[this.prevMovedHandleIndex]=a,this.onChange({bounds:c})}}},{key:"onMove",value:function(i,r){Ea(i);var o=this.state,s=this.calcValueByPos(r),a=o.bounds[o.handle];s!==a&&this.moveTo(s)}},{key:"onKeyboard",value:function(i){var r=this.props,o=r.reverse,s=r.vertical,a=QM(i,s,o);if(a){Ea(i);var l=this.state,u=this.props,c=l.bounds,f=l.handle,h=c[f===null?l.recent:f],d=a(h,u),g=Mc({value:d,handle:f,bounds:l.bounds,props:u});if(g===h)return;var v=!0;this.moveTo(g,v)}}},{key:"getValue",value:function(){return this.state.bounds}},{key:"getClosestBound",value:function(i){for(var r=this.state.bounds,o=0,s=1;s<r.length-1;++s)i>=r[s]&&(o=s);return Math.abs(r[o+1]-i)<Math.abs(r[o]-i)&&(o+=1),o}},{key:"getBoundNeedMoving",value:function(i,r){var o=this.state,s=o.bounds,a=o.recent,l=r,u=s[r+1]===s[r];return u&&s[a]===s[r]&&(l=a),u&&i!==s[r+1]&&(l=i<s[r+1]?r:r+1),l}},{key:"getLowerBound",value:function(){return this.state.bounds[0]}},{key:"getUpperBound",value:function(){var i=this.state.bounds;return i[i.length-1]}},{key:"getPoints",value:function(){var i=this.props,r=i.marks,o=i.step,s=i.min,a=i.max,l=this._getPointsCache;if(!l||l.marks!==r||l.step!==o){var u=tt({},r);if(o!==null)for(var c=s;c<=a;c+=o)u[c]=c;var f=Object.keys(u).map(parseFloat);f.sort(function(h,d){return h-d}),this._getPointsCache={marks:r,step:o,points:f}}return this._getPointsCache.points}},{key:"moveTo",value:function(i,r){var o=this,s=this.state,a=this.props,l=[].concat(Lf(s.bounds)),u=s.handle===null?s.recent:s.handle;l[u]=i;var c=u;a.pushable!==!1?this.pushSurroundingHandles(l,c):a.allowCross&&(l.sort(function(f,h){return f-h}),c=l.indexOf(i)),this.onChange({recent:c,handle:c,bounds:l}),r&&(this.props.onAfterChange(l),this.setState({},function(){o.handlesRefs[c].focus()}),this.onEnd())}},{key:"pushSurroundingHandles",value:function(i,r){var o=i[r],s=this.props.pushable;s=Number(s);var a=0;if(i[r+1]-o<s&&(a=1),o-i[r-1]<s&&(a=-1),a!==0){var l=r+a,u=a*(i[l]-o);this.pushHandle(i,l,a,s-u)||(i[r]=i[l]-a*s)}}},{key:"pushHandle",value:function(i,r,o,s){for(var a=i[r],l=i[r];o*(l-a)<s;){if(!this.pushHandleOnePoint(i,r,o))return i[r]=a,!1;l=i[r]}return!0}},{key:"pushHandleOnePoint",value:function(i,r,o){var s=this.getPoints(),a=s.indexOf(i[r]),l=a+o;if(l>=s.length||l<0)return!1;var u=r+o,c=s[l],f=this.props.pushable,h=o*(i[u]-c);return this.pushHandle(i,u,o,f-h)?(i[r]=c,!0):!1}},{key:"trimAlignValue",value:function(i){var r=this.state,o=r.handle,s=r.bounds;return Mc({value:i,handle:o,bounds:s,props:this.props})}},{key:"render",value:function(){var i=this,r=this.state,o=r.handle,s=r.bounds,a=this.props,l=a.prefixCls,u=a.vertical,c=a.included,f=a.disabled,h=a.min,d=a.max,g=a.reverse,v=a.handle,y=a.trackStyle,m=a.handleStyle,p=a.tabIndex,x=s.map(function(S){return i.calcOffset(S)}),w=l+"-handle",b=s.map(function(S,L){var E,A=p[L]||0;return(f||p[L]===null)&&(A=null),v({className:qi((E={},Ke(E,w,!0),Ke(E,w+"-"+(L+1),!0),E)),prefixCls:l,vertical:u,offset:x[L],value:S,dragging:o===L,index:L,tabIndex:A,min:h,max:d,reverse:g,disabled:f,style:m[L],ref:function(j){return i.saveHandle(L,j)}})}),_=s.slice(0,-1).map(function(S,L){var E,A=L+1,B=qi((E={},Ke(E,l+"-track",!0),Ke(E,l+"-track-"+A,!0),E));return de.createElement(GM,{className:B,vertical:u,reverse:g,included:c,offset:x[A-1],length:x[A]-x[A-1],style:y[L],key:A})});return{tracks:_,handles:b}}}],[{key:"getDerivedStateFromProps",value:function(i,r){if("value"in i||"min"in i||"max"in i){var o=i.value||r.bounds,s=o.map(function(a,l){return Mc({value:a,handle:l,bounds:r.bounds,props:i})});return s.length===r.bounds.length&&s.every(function(a,l){return a===r.bounds[l]})?null:tt({},r,{bounds:s})}return null}}]),t}(de.Component);$u.displayName="Range";$u.propTypes={autoFocus:P.bool,defaultValue:P.arrayOf(P.number),value:P.arrayOf(P.number),count:P.number,pushable:P.oneOfType([P.bool,P.number]),allowCross:P.bool,disabled:P.bool,reverse:P.bool,tabIndex:P.arrayOf(P.number),min:P.number,max:P.number};$u.defaultProps={count:1,allowCross:!0,pushable:!1,tabIndex:[]};oE($u);const lO=eE($u);function Cg(e,t){for(var n=t;n;){if(n===e)return!0;n=n.parentNode}return!1}function Cf(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Cf=function(n){return typeof n}:Cf=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Cf(e)}function uO(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cO(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function fO(e,t,n){return t&&cO(e.prototype,t),e}function hO(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Rg(e,t)}function Rg(e,t){return Rg=Object.setPrototypeOf||function(i,r){return i.__proto__=r,i},Rg(e,t)}function dO(e){var t=gO();return function(){var i=lh(e),r;if(t){var o=lh(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return pO(this,r)}}function pO(e,t){return t&&(Cf(t)==="object"||typeof t=="function")?t:mO(e)}function mO(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gO(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function lh(e){return lh=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},lh(e)}var jy=function(e){hO(n,e);var t=dO(n);function n(){var i;uO(this,n);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return i=t.call.apply(t,[this].concat(o)),i.removeContainer=function(){i.container&&(Yi.unmountComponentAtNode(i.container),i.container.parentNode.removeChild(i.container),i.container=null)},i.renderComponent=function(a,l){var u=i.props,c=u.visible,f=u.getComponent,h=u.forceRender,d=u.getContainer,g=u.parent;(c||g._component||h)&&(i.container||(i.container=d()),Yi.unstable_renderSubtreeIntoContainer(g,f(a),i.container,function(){l&&l.call(this)}))},i}return fO(n,[{key:"componentDidMount",value:function(){this.props.autoMount&&this.renderComponent()}},{key:"componentDidUpdate",value:function(){this.props.autoMount&&this.renderComponent()}},{key:"componentWillUnmount",value:function(){this.props.autoDestroy&&this.removeContainer()}},{key:"render",value:function(){return this.props.children({renderComponent:this.renderComponent,removeContainer:this.removeContainer})}}]),n}(de.Component);jy.propTypes={autoMount:P.bool,autoDestroy:P.bool,visible:P.bool,forceRender:P.bool,parent:P.any,getComponent:P.func.isRequired,getContainer:P.func.isRequired,children:P.func.isRequired};jy.defaultProps={autoMount:!0,autoDestroy:!0,forceRender:!1};function Rf(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Rf=function(n){return typeof n}:Rf=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Rf(e)}function vO(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yO(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function xO(e,t,n){return t&&yO(e.prototype,t),e}function wO(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pg(e,t)}function Pg(e,t){return Pg=Object.setPrototypeOf||function(i,r){return i.__proto__=r,i},Pg(e,t)}function _O(e){var t=MO();return function(){var i=uh(e),r;if(t){var o=uh(this).constructor;r=Reflect.construct(i,arguments,o)}else r=i.apply(this,arguments);return bO(this,r)}}function bO(e,t){return t&&(Rf(t)==="object"||typeof t=="function")?t:SO(e)}function SO(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function MO(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function uh(e){return uh=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},uh(e)}var sE=function(e){wO(n,e);var t=_O(n);function n(){return vO(this,n),t.apply(this,arguments)}return xO(n,[{key:"componentDidMount",value:function(){this.createContainer()}},{key:"componentDidUpdate",value:function(r){var o=this.props.didUpdate;o&&o(r)}},{key:"componentWillUnmount",value:function(){this.removeContainer()}},{key:"createContainer",value:function(){this._container=this.props.getContainer(),this.forceUpdate()}},{key:"removeContainer",value:function(){this._container&&this._container.parentNode.removeChild(this._container)}},{key:"render",value:function(){return this._container?Yi.createPortal(this.props.children,this._container):null}}]),n}(de.Component);sE.propTypes={getContainer:P.func.isRequired,children:P.node.isRequired,didUpdate:P.func};function EO(e,t,n){return n?e[0]===t[0]:e[0]===t[0]&&e[1]===t[1]}function TO(e,t,n){var i=e[t]||{};return tt({},i,n)}function LO(e,t,n,i){var r=n.points;for(var o in e)if(e.hasOwnProperty(o)&&EO(e[o].points,r,i))return t+"-placement-"+o;return""}function Ex(e,t){this[e]=t}function Tx(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,i)}return n}function Lx(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Tx(Object(n),!0).forEach(function(i){CO(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tx(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function Pf(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Pf=function(t){return typeof t}:Pf=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pf(e)}function CO(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ll,RO={Webkit:"-webkit-",Moz:"-moz-",ms:"-ms-",O:"-o-"};function ch(){if(ll!==void 0)return ll;ll="";var e=document.createElement("p").style,t="Transform";for(var n in RO)n+t in e&&(ll=n);return ll}function aE(){return ch()?"".concat(ch(),"TransitionProperty"):"transitionProperty"}function od(){return ch()?"".concat(ch(),"Transform"):"transform"}function Cx(e,t){var n=aE();n&&(e.style[n]=t,n!=="transitionProperty"&&(e.style.transitionProperty=t))}function Lp(e,t){var n=od();n&&(e.style[n]=t,n!=="transform"&&(e.style.transform=t))}function PO(e){return e.style.transitionProperty||e.style[aE()]}function AO(e){var t=window.getComputedStyle(e,null),n=t.getPropertyValue("transform")||t.getPropertyValue(od());if(n&&n!=="none"){var i=n.replace(/[^0-9\-.,]/g,"").split(",");return{x:parseFloat(i[12]||i[4],0),y:parseFloat(i[13]||i[5],0)}}return{x:0,y:0}}var DO=/matrix\((.*)\)/,OO=/matrix3d\((.*)\)/;function FO(e,t){var n=window.getComputedStyle(e,null),i=n.getPropertyValue("transform")||n.getPropertyValue(od());if(i&&i!=="none"){var r,o=i.match(DO);if(o)o=o[1],r=o.split(",").map(function(a){return parseFloat(a,10)}),r[4]=t.x,r[5]=t.y,Lp(e,"matrix(".concat(r.join(","),")"));else{var s=i.match(OO)[1];r=s.split(",").map(function(a){return parseFloat(a,10)}),r[12]=t.x,r[13]=t.y,Lp(e,"matrix3d(".concat(r.join(","),")"))}}else Lp(e,"translateX(".concat(t.x,"px) translateY(").concat(t.y,"px) translateZ(0)"))}var kO=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,Xu;function Rx(e){var t=e.style.display;e.style.display="none",e.offsetHeight,e.style.display=t}function da(e,t,n){var i=n;if(Pf(t)==="object"){for(var r in t)t.hasOwnProperty(r)&&da(e,r,t[r]);return}if(typeof i<"u"){typeof i=="number"&&(i="".concat(i,"px")),e.style[t]=i;return}return Xu(e,t)}function NO(e){var t,n,i,r=e.ownerDocument,o=r.body,s=r&&r.documentElement;return t=e.getBoundingClientRect(),n=t.left,i=t.top,n-=s.clientLeft||o.clientLeft||0,i-=s.clientTop||o.clientTop||0,{left:n,top:i}}function lE(e,t){var n=e["page".concat(t?"Y":"X","Offset")],i="scroll".concat(t?"Top":"Left");if(typeof n!="number"){var r=e.document;n=r.documentElement[i],typeof n!="number"&&(n=r.body[i])}return n}function uE(e){return lE(e)}function cE(e){return lE(e,!0)}function gu(e){var t=NO(e),n=e.ownerDocument,i=n.defaultView||n.parentWindow;return t.left+=uE(i),t.top+=cE(i),t}function Vy(e){return e!=null&&e==e.window}function fE(e){return Vy(e)?e.document:e.nodeType===9?e:e.ownerDocument}function IO(e,t,n){var i=n,r="",o=fE(e);return i=i||o.defaultView.getComputedStyle(e,null),i&&(r=i.getPropertyValue(t)||i[t]),r}var BO=new RegExp("^(".concat(kO,")(?!px)[a-z%]+$"),"i"),UO=/^(top|right|bottom|left)$/,Cp="currentStyle",Rp="runtimeStyle",ko="left",zO="px";function HO(e,t){var n=e[Cp]&&e[Cp][t];if(BO.test(n)&&!UO.test(t)){var i=e.style,r=i[ko],o=e[Rp][ko];e[Rp][ko]=e[Cp][ko],i[ko]=t==="fontSize"?"1em":n||0,n=i.pixelLeft+zO,i[ko]=r,e[Rp][ko]=o}return n===""?"auto":n}typeof window<"u"&&(Xu=window.getComputedStyle?IO:HO);function Ec(e,t){return e==="left"?t.useCssRight?"right":e:t.useCssBottom?"bottom":e}function Px(e){if(e==="left")return"right";if(e==="right")return"left";if(e==="top")return"bottom";if(e==="bottom")return"top"}function Ax(e,t,n){da(e,"position")==="static"&&(e.style.position="relative");var i=-999,r=-999,o=Ec("left",n),s=Ec("top",n),a=Px(o),l=Px(s);o!=="left"&&(i=999),s!=="top"&&(r=999);var u="",c=gu(e);("left"in t||"top"in t)&&(u=PO(e)||"",Cx(e,"none")),"left"in t&&(e.style[a]="",e.style[o]="".concat(i,"px")),"top"in t&&(e.style[l]="",e.style[s]="".concat(r,"px")),Rx(e);var f=gu(e),h={};for(var d in t)if(t.hasOwnProperty(d)){var g=Ec(d,n),v=d==="left"?i:r,y=c[d]-f[d];g===d?h[g]=v+y:h[g]=v-y}da(e,h),Rx(e),("left"in t||"top"in t)&&Cx(e,u);var m={};for(var p in t)if(t.hasOwnProperty(p)){var x=Ec(p,n),w=t[p]-c[p];p===x?m[x]=h[x]+w:m[x]=h[x]-w}da(e,m)}function jO(e,t){var n=gu(e),i=AO(e),r={x:i.x,y:i.y};"left"in t&&(r.x=i.x+t.left-n.left),"top"in t&&(r.y=i.y+t.top-n.top),FO(e,r)}function VO(e,t,n){if(n.ignoreShake){var i=gu(e),r=i.left.toFixed(0),o=i.top.toFixed(0),s=t.left.toFixed(0),a=t.top.toFixed(0);if(r===s&&o===a)return}n.useCssRight||n.useCssBottom?Ax(e,t,n):n.useCssTransform&&od()in document.body.style?jO(e,t):Ax(e,t,n)}function Wy(e,t){for(var n=0;n<e.length;n++)t(e[n])}function hE(e){return Xu(e,"boxSizing")==="border-box"}var WO=["margin","border","padding"],Ag=-1,GO=2,Dg=1,$O=0;function XO(e,t,n){var i={},r=e.style,o;for(o in t)t.hasOwnProperty(o)&&(i[o]=r[o],r[o]=t[o]);n.call(e);for(o in t)t.hasOwnProperty(o)&&(r[o]=i[o])}function Tl(e,t,n){var i=0,r,o,s;for(o=0;o<t.length;o++)if(r=t[o],r)for(s=0;s<n.length;s++){var a=void 0;r==="border"?a="".concat(r).concat(n[s],"Width"):a=r+n[s],i+=parseFloat(Xu(e,a))||0}return i}var Wi={getParent:function(t){var n=t;do n.nodeType===11&&n.host?n=n.host:n=n.parentNode;while(n&&n.nodeType!==1&&n.nodeType!==9);return n}};Wy(["Width","Height"],function(e){Wi["doc".concat(e)]=function(t){var n=t.document;return Math.max(n.documentElement["scroll".concat(e)],n.body["scroll".concat(e)],Wi["viewport".concat(e)](n))},Wi["viewport".concat(e)]=function(t){var n="client".concat(e),i=t.document,r=i.body,o=i.documentElement,s=o[n];return i.compatMode==="CSS1Compat"&&s||r&&r[n]||s}});function Dx(e,t,n){var i=n;if(Vy(e))return t==="width"?Wi.viewportWidth(e):Wi.viewportHeight(e);if(e.nodeType===9)return t==="width"?Wi.docWidth(e):Wi.docHeight(e);var r=t==="width"?["Left","Right"]:["Top","Bottom"],o=t==="width"?e.getBoundingClientRect().width:e.getBoundingClientRect().height,s=hE(e),a=0;(o==null||o<=0)&&(o=void 0,a=Xu(e,t),(a==null||Number(a)<0)&&(a=e.style[t]||0),a=parseFloat(a)||0),i===void 0&&(i=s?Dg:Ag);var l=o!==void 0||s,u=o||a;return i===Ag?l?u-Tl(e,["border","padding"],r):a:l?i===Dg?u:u+(i===GO?-Tl(e,["border"],r):Tl(e,["margin"],r)):a+Tl(e,WO.slice(i),r)}var YO={position:"absolute",visibility:"hidden",display:"block"};function Ox(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i,r=t[0];return r.offsetWidth!==0?i=Dx.apply(void 0,t):XO(r,YO,function(){i=Dx.apply(void 0,t)}),i}Wy(["width","height"],function(e){var t=e.charAt(0).toUpperCase()+e.slice(1);Wi["outer".concat(t)]=function(i,r){return i&&Ox(i,e,r?$O:Dg)};var n=e==="width"?["Left","Right"]:["Top","Bottom"];Wi[e]=function(i,r){var o=r;if(o!==void 0){if(i){var s=hE(i);return s&&(o+=Tl(i,["padding","border"],n)),da(i,e,o)}return}return i&&Ox(i,e,Ag)}});function dE(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}var Oe={getWindow:function(t){if(t&&t.document&&t.setTimeout)return t;var n=t.ownerDocument||t;return n.defaultView||n.parentWindow},getDocument:fE,offset:function(t,n,i){if(typeof n<"u")VO(t,n,i||{});else return gu(t)},isWindow:Vy,each:Wy,css:da,clone:function(t){var n,i={};for(n in t)t.hasOwnProperty(n)&&(i[n]=t[n]);var r=t.overflow;if(r)for(n in t)t.hasOwnProperty(n)&&(i.overflow[n]=t.overflow[n]);return i},mix:dE,getWindowScrollLeft:function(t){return uE(t)},getWindowScrollTop:function(t){return cE(t)},merge:function(){for(var t={},n=0;n<arguments.length;n++)Oe.mix(t,n<0||arguments.length<=n?void 0:arguments[n]);return t},viewportWidth:0,viewportHeight:0};dE(Oe,Wi);var Pp=Oe.getParent;function Og(e){if(Oe.isWindow(e)||e.nodeType===9)return null;var t=Oe.getDocument(e),n=t.body,i,r=Oe.css(e,"position"),o=r==="fixed"||r==="absolute";if(!o)return e.nodeName.toLowerCase()==="html"?null:Pp(e);for(i=Pp(e);i&&i!==n&&i.nodeType!==9;i=Pp(i))if(r=Oe.css(i,"position"),r!=="static")return i;return null}var Fx=Oe.getParent;function qO(e){if(Oe.isWindow(e)||e.nodeType===9)return!1;var t=Oe.getDocument(e),n=t.body,i=null;for(i=Fx(e);i&&i!==n&&i!==t;i=Fx(i)){var r=Oe.css(i,"position");if(r==="fixed")return!0}return!1}function Gy(e,t){for(var n={left:0,right:1/0,top:0,bottom:1/0},i=Og(e),r=Oe.getDocument(e),o=r.defaultView||r.parentWindow,s=r.body,a=r.documentElement;i;){if((navigator.userAgent.indexOf("MSIE")===-1||i.clientWidth!==0)&&i!==s&&i!==a&&Oe.css(i,"overflow")!=="visible"){var l=Oe.offset(i);l.left+=i.clientLeft,l.top+=i.clientTop,n.top=Math.max(n.top,l.top),n.right=Math.min(n.right,l.left+i.clientWidth),n.bottom=Math.min(n.bottom,l.top+i.clientHeight),n.left=Math.max(n.left,l.left)}else if(i===s||i===a)break;i=Og(i)}var u=null;if(!Oe.isWindow(e)&&e.nodeType!==9){u=e.style.position;var c=Oe.css(e,"position");c==="absolute"&&(e.style.position="fixed")}var f=Oe.getWindowScrollLeft(o),h=Oe.getWindowScrollTop(o),d=Oe.viewportWidth(o),g=Oe.viewportHeight(o),v=a.scrollWidth,y=a.scrollHeight,m=window.getComputedStyle(s);if(m.overflowX==="hidden"&&(v=o.innerWidth),m.overflowY==="hidden"&&(y=o.innerHeight),e.style&&(e.style.position=u),t||qO(e))n.left=Math.max(n.left,f),n.top=Math.max(n.top,h),n.right=Math.min(n.right,f+d),n.bottom=Math.min(n.bottom,h+g);else{var p=Math.max(v,f+d);n.right=Math.min(n.right,p);var x=Math.max(y,h+g);n.bottom=Math.min(n.bottom,x)}return n.top>=0&&n.left>=0&&n.bottom>n.top&&n.right>n.left?n:null}function ZO(e,t,n,i){var r=Oe.clone(e),o={width:t.width,height:t.height};return i.adjustX&&r.left<n.left&&(r.left=n.left),i.resizeWidth&&r.left>=n.left&&r.left+o.width>n.right&&(o.width-=r.left+o.width-n.right),i.adjustX&&r.left+o.width>n.right&&(r.left=Math.max(n.right-o.width,n.left)),i.adjustY&&r.top<n.top&&(r.top=n.top),i.resizeHeight&&r.top>=n.top&&r.top+o.height>n.bottom&&(o.height-=r.top+o.height-n.bottom),i.adjustY&&r.top+o.height>n.bottom&&(r.top=Math.max(n.bottom-o.height,n.top)),Oe.mix(r,o)}function $y(e){var t,n,i;if(!Oe.isWindow(e)&&e.nodeType!==9)t=Oe.offset(e),n=Oe.outerWidth(e),i=Oe.outerHeight(e);else{var r=Oe.getWindow(e);t={left:Oe.getWindowScrollLeft(r),top:Oe.getWindowScrollTop(r)},n=Oe.viewportWidth(r),i=Oe.viewportHeight(r)}return t.width=n,t.height=i,t}function kx(e,t){var n=t.charAt(0),i=t.charAt(1),r=e.width,o=e.height,s=e.left,a=e.top;return n==="c"?a+=o/2:n==="b"&&(a+=o),i==="c"?s+=r/2:i==="r"&&(s+=r),{left:s,top:a}}function Tc(e,t,n,i,r){var o=kx(t,n[1]),s=kx(e,n[0]),a=[s.left-o.left,s.top-o.top];return{left:Math.round(e.left-a[0]+i[0]-r[0]),top:Math.round(e.top-a[1]+i[1]-r[1])}}function Nx(e,t,n){return e.left<n.left||e.left+t.width>n.right}function Ix(e,t,n){return e.top<n.top||e.top+t.height>n.bottom}function JO(e,t,n){return e.left>n.right||e.left+t.width<n.left}function KO(e,t,n){return e.top>n.bottom||e.top+t.height<n.top}function Lc(e,t,n){var i=[];return Oe.each(e,function(r){i.push(r.replace(t,function(o){return n[o]}))}),i}function Cc(e,t){return e[t]=-e[t],e}function Bx(e,t){var n;return/%$/.test(e)?n=parseInt(e.substring(0,e.length-1),10)/100*t:n=parseInt(e,10),n||0}function Ux(e,t){e[0]=Bx(e[0],t.width),e[1]=Bx(e[1],t.height)}function pE(e,t,n,i){var r=n.points,o=n.offset||[0,0],s=n.targetOffset||[0,0],a=n.overflow,l=n.source||e;o=[].concat(o),s=[].concat(s),a=a||{};var u={},c=0,f=!!(a&&a.alwaysByViewport),h=Gy(l,f),d=$y(l);Ux(o,d),Ux(s,t);var g=Tc(d,t,r,o,s),v=Oe.merge(d,g);if(h&&(a.adjustX||a.adjustY)&&i){if(a.adjustX&&Nx(g,d,h)){var y=Lc(r,/[lr]/gi,{l:"r",r:"l"}),m=Cc(o,0),p=Cc(s,0),x=Tc(d,t,y,m,p);JO(x,d,h)||(c=1,r=y,o=m,s=p)}if(a.adjustY&&Ix(g,d,h)){var w=Lc(r,/[tb]/gi,{t:"b",b:"t"}),b=Cc(o,1),_=Cc(s,1),S=Tc(d,t,w,b,_);KO(S,d,h)||(c=1,r=w,o=b,s=_)}c&&(g=Tc(d,t,r,o,s),Oe.mix(v,g));var L=Nx(g,d,h),E=Ix(g,d,h);if(L||E){var A=r;L&&(A=Lc(r,/[lr]/gi,{l:"r",r:"l"})),E&&(A=Lc(r,/[tb]/gi,{t:"b",b:"t"})),r=A,o=n.offset||[0,0],s=n.targetOffset||[0,0]}u.adjustX=a.adjustX&&L,u.adjustY=a.adjustY&&E,(u.adjustX||u.adjustY)&&(v=ZO(g,d,h,u))}return v.width!==d.width&&Oe.css(l,"width",Oe.width(l)+v.width-d.width),v.height!==d.height&&Oe.css(l,"height",Oe.height(l)+v.height-d.height),Oe.offset(l,{left:v.left,top:v.top},{useCssRight:n.useCssRight,useCssBottom:n.useCssBottom,useCssTransform:n.useCssTransform,ignoreShake:n.ignoreShake}),{points:r,offset:o,targetOffset:s,overflow:u}}function QO(e,t){var n=Gy(e,t),i=$y(e);return!n||i.left+i.width<=n.left||i.top+i.height<=n.top||i.left>=n.right||i.top>=n.bottom}function Xy(e,t,n){var i=n.target||t,r=$y(i),o=!QO(i,n.overflow&&n.overflow.alwaysByViewport);return pE(e,r,n,o)}Xy.__getOffsetParent=Og;Xy.__getVisibleRectForElement=Gy;function e3(e,t,n){var i,r,o=Oe.getDocument(e),s=o.defaultView||o.parentWindow,a=Oe.getWindowScrollLeft(s),l=Oe.getWindowScrollTop(s),u=Oe.viewportWidth(s),c=Oe.viewportHeight(s);"pageX"in t?i=t.pageX:i=a+t.clientX,"pageY"in t?r=t.pageY:r=l+t.clientY;var f={left:i,top:r,width:0,height:0},h=i>=0&&i<=a+u&&r>=0&&r<=l+c,d=[n.points[0],"cc"];return pE(e,f,Lx(Lx({},n),{},{points:d}),h)}function t3(e,t){var n=void 0;function i(){n&&(clearTimeout(n),n=null)}function r(){i(),n=setTimeout(e,t)}return r.clear=i,r}function n3(e,t){return e===t?!0:!e||!t?!1:"pageX"in t&&"pageY"in t?e.pageX===t.pageX&&e.pageY===t.pageY:"clientX"in t&&"clientY"in t?e.clientX===t.clientX&&e.clientY===t.clientY:!1}function zx(e){return e&&typeof e=="object"&&e.window===e}function Hx(e,t){var n=Math.floor(e),i=Math.floor(t);return Math.abs(n-i)<=1}function i3(e,t){e!==document.activeElement&&Cg(t,e)&&e.focus()}function Ap(e){return typeof e!="function"||!e?null:e()}function Dp(e){return typeof e!="object"||!e?null:e}var fh=function(e){Nn(t,e);function t(){var n,i,r,o;kn(this,t);for(var s=arguments.length,a=Array(s),l=0;l<s;l++)a[l]=arguments[l];return o=(i=(r=Yt(this,(n=t.__proto__||Object.getPrototypeOf(t)).call.apply(n,[this].concat(a))),r),r.forceAlign=function(){var u=r.props,c=u.disabled,f=u.target,h=u.align,d=u.onAlign;if(!c&&f){var g=Yi.findDOMNode(r),v=void 0,y=Ap(f),m=Dp(f),p=document.activeElement;y?v=Xy(g,y,h):m&&(v=e3(g,m,h)),i3(p,g),d&&d(g,v)}},i),Yt(r,o)}return Po(t,[{key:"componentDidMount",value:function(){var i=this.props;this.forceAlign(),!i.disabled&&i.monitorWindowResize&&this.startMonitorWindowResize()}},{key:"componentDidUpdate",value:function(i){var r=!1,o=this.props;if(!o.disabled){var s=Yi.findDOMNode(this),a=s?s.getBoundingClientRect():null;if(i.disabled)r=!0;else{var l=Ap(i.target),u=Ap(o.target),c=Dp(i.target),f=Dp(o.target);zx(l)&&zx(u)?r=!1:(l!==u||l&&!u&&f||c&&f&&u||f&&!n3(c,f))&&(r=!0);var h=this.sourceRect||{};!r&&s&&(!Hx(h.width,a.width)||!Hx(h.height,a.height))&&(r=!0)}this.sourceRect=a}r&&this.forceAlign(),o.monitorWindowResize&&!o.disabled?this.startMonitorWindowResize():this.stopMonitorWindowResize()}},{key:"componentWillUnmount",value:function(){this.stopMonitorWindowResize()}},{key:"startMonitorWindowResize",value:function(){this.resizeHandler||(this.bufferMonitor=t3(this.forceAlign,this.props.monitorBufferTime),this.resizeHandler=Vi(window,"resize",this.bufferMonitor))}},{key:"stopMonitorWindowResize",value:function(){this.resizeHandler&&(this.bufferMonitor.clear(),this.resizeHandler.remove(),this.resizeHandler=null)}},{key:"render",value:function(){var i=this,r=this.props,o=r.childrenProps,s=r.children,a=de.Children.only(s);if(o){var l={},u=Object.keys(o);return u.forEach(function(c){l[c]=i.props[o[c]]}),de.cloneElement(a,l)}return a}}]),t}(Z.Component);fh.propTypes={childrenProps:P.object,align:P.object.isRequired,target:P.oneOfType([P.func,P.shape({clientX:P.number,clientY:P.number,pageX:P.number,pageY:P.number})]),onAlign:P.func,monitorBufferTime:P.number,monitorWindowResize:P.bool,disabled:P.bool,children:P.any};fh.defaultProps={target:function(){return window},monitorBufferTime:50,monitorWindowResize:!1,disabled:!1};var r3=function(t){var n=t.prototype;if(!n||!n.isReactComponent)throw new Error("Can only polyfill class components");return typeof n.componentWillReceiveProps!="function"||!de.Profiler||(n.UNSAFE_componentWillReceiveProps=n.componentWillReceiveProps,delete n.componentWillReceiveProps),t};function Ul(e){var t=[];return de.Children.forEach(e,function(n){t.push(n)}),t}function Hs(e,t){var n=null;return e&&e.forEach(function(i){n||i&&i.key===t&&(n=i)}),n}function Op(e,t,n){var i=null;return e&&e.forEach(function(r){if(r&&r.key===t&&r.props[n]){if(i)throw new Error("two child with same key for <rc-animate> children");i=r}}),i}function o3(e,t,n){var i=e.length===t.length;return i&&e.forEach(function(r,o){var s=t[o];r&&s&&(r&&!s||!r&&s||r.key!==s.key||n&&r.props[n]!==s.props[n])&&(i=!1)}),i}function s3(e,t){var n=[],i={},r=[];return e.forEach(function(o){o&&Hs(t,o.key)?r.length&&(i[o.key]=r,r=[]):r.push(o)}),t.forEach(function(o){o&&Object.prototype.hasOwnProperty.call(i,o.key)&&(n=n.concat(i[o.key])),n.push(o)}),n=n.concat(r),n}var Fp={transitionstart:{transition:"transitionstart",WebkitTransition:"webkitTransitionStart",MozTransition:"mozTransitionStart",OTransition:"oTransitionStart",msTransition:"MSTransitionStart"},animationstart:{animation:"animationstart",WebkitAnimation:"webkitAnimationStart",MozAnimation:"mozAnimationStart",OAnimation:"oAnimationStart",msAnimation:"MSAnimationStart"}},kp={transitionend:{transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"mozTransitionEnd",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd"},animationend:{animation:"animationend",WebkitAnimation:"webkitAnimationEnd",MozAnimation:"mozAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd"}},js=[],Vs=[];function a3(){var e=document.createElement("div"),t=e.style;"AnimationEvent"in window||(delete Fp.animationstart.animation,delete kp.animationend.animation),"TransitionEvent"in window||(delete Fp.transitionstart.transition,delete kp.transitionend.transition);function n(i,r){for(var o in i)if(i.hasOwnProperty(o)){var s=i[o];for(var a in s)if(a in t){r.push(s[a]);break}}}n(Fp,js),n(kp,Vs)}typeof window<"u"&&typeof document<"u"&&a3();function jx(e,t,n){e.addEventListener(t,n,!1)}function Vx(e,t,n){e.removeEventListener(t,n,!1)}var vu={startEvents:js,addStartEventListener:function(t,n){if(js.length===0){window.setTimeout(n,0);return}js.forEach(function(i){jx(t,i,n)})},removeStartEventListener:function(t,n){js.length!==0&&js.forEach(function(i){Vx(t,i,n)})},endEvents:Vs,addEndEventListener:function(t,n){if(Vs.length===0){window.setTimeout(n,0);return}Vs.forEach(function(i){jx(t,i,n)})},removeEndEventListener:function(t,n){Vs.length!==0&&Vs.forEach(function(i){Vx(t,i,n)})}},Np,Wx;function Gx(){return Wx||(Wx=1,Np=function(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}),Np}try{var sd=Gx()}catch{var sd=Gx()}var l3=/\s+/,u3=Object.prototype.toString,c3=function(e){return new wo(e)};function wo(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}wo.prototype.add=function(e){if(this.list)return this.list.add(e),this;var t=this.array(),n=sd(t,e);return~n||t.push(e),this.el.className=t.join(" "),this};wo.prototype.remove=function(e){if(u3.call(e)=="[object RegExp]")return this.removeMatching(e);if(this.list)return this.list.remove(e),this;var t=this.array(),n=sd(t,e);return~n&&t.splice(n,1),this.el.className=t.join(" "),this};wo.prototype.removeMatching=function(e){for(var t=this.array(),n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this};wo.prototype.toggle=function(e,t){return this.list?(typeof t<"u"?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e),this):(typeof t<"u"?t?this.add(e):this.remove(e):this.has(e)?this.remove(e):this.add(e),this)};wo.prototype.array=function(){var e=this.el.getAttribute("class")||"",t=e.replace(/^\s+|\s+$/g,""),n=t.split(l3);return n[0]===""&&n.shift(),n};wo.prototype.has=wo.prototype.contains=function(e){return this.list?this.list.contains(e):!!~sd(this.array(),e)};const f3=Pr(c3);var Yy=vu.endEvents.length!==0,h3=["Webkit","Moz","O","ms"],$x=["-webkit-","-moz-","-o-","ms-",""];function Rc(e,t){for(var n=window.getComputedStyle(e,null),i="",r=0;r<$x.length&&(i=n.getPropertyValue($x[r]+t),!i);r++);return i}function mE(e){if(Yy){var t=parseFloat(Rc(e,"transition-delay"))||0,n=parseFloat(Rc(e,"transition-duration"))||0,i=parseFloat(Rc(e,"animation-delay"))||0,r=parseFloat(Rc(e,"animation-duration"))||0,o=Math.max(n+t,r+i);e.rcEndAnimTimeout=setTimeout(function(){e.rcEndAnimTimeout=null,e.rcEndListener&&e.rcEndListener()},o*1e3+200)}}function gE(e){e.rcEndAnimTimeout&&(clearTimeout(e.rcEndAnimTimeout),e.rcEndAnimTimeout=null)}var ad=function(t,n,i){var r=(typeof n>"u"?"undefined":FA(n))==="object",o=r?n.name:n,s=r?n.active:n+"-active",a=i,l=void 0,u=void 0,c=f3(t);return i&&Object.prototype.toString.call(i)==="[object Object]"&&(a=i.end,l=i.start,u=i.active),t.rcEndListener&&t.rcEndListener(),t.rcEndListener=function(f){f&&f.target!==t||(t.rcAnimTimeout&&(clearTimeout(t.rcAnimTimeout),t.rcAnimTimeout=null),gE(t),c.remove(o),c.remove(s),vu.removeEndEventListener(t,t.rcEndListener),t.rcEndListener=null,a&&a())},vu.addEndEventListener(t,t.rcEndListener),l&&l(),c.add(o),t.rcAnimTimeout=setTimeout(function(){t.rcAnimTimeout=null,c.add(s),u&&setTimeout(u,0),mE(t)},30),{stop:function(){t.rcEndListener&&t.rcEndListener()}}};ad.style=function(e,t,n){e.rcEndListener&&e.rcEndListener(),e.rcEndListener=function(i){i&&i.target!==e||(e.rcAnimTimeout&&(clearTimeout(e.rcAnimTimeout),e.rcAnimTimeout=null),gE(e),vu.removeEndEventListener(e,e.rcEndListener),e.rcEndListener=null,n&&n())},vu.addEndEventListener(e,e.rcEndListener),e.rcAnimTimeout=setTimeout(function(){for(var i in t)t.hasOwnProperty(i)&&(e.style[i]=t[i]);e.rcAnimTimeout=null,mE(e)},0)};ad.setTransition=function(e,t,n){var i=t,r=n;n===void 0&&(r=i,i=""),i=i||"",h3.forEach(function(o){e.style[o+"Transition"+i]=r})};ad.isCssAnimationSupported=Yy;var pa={isAppearSupported:function(t){return t.transitionName&&t.transitionAppear||t.animation.appear},isEnterSupported:function(t){return t.transitionName&&t.transitionEnter||t.animation.enter},isLeaveSupported:function(t){return t.transitionName&&t.transitionLeave||t.animation.leave},allowAppearCallback:function(t){return t.transitionAppear||t.animation.appear},allowEnterCallback:function(t){return t.transitionEnter||t.animation.enter},allowLeaveCallback:function(t){return t.transitionLeave||t.animation.leave}},d3={enter:"transitionEnter",appear:"transitionAppear",leave:"transitionLeave"},vE=function(e){Nn(t,e);function t(){return kn(this,t),Yt(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Po(t,[{key:"componentWillUnmount",value:function(){this.stop()}},{key:"componentWillEnter",value:function(i){pa.isEnterSupported(this.props)?this.transition("enter",i):i()}},{key:"componentWillAppear",value:function(i){pa.isAppearSupported(this.props)?this.transition("appear",i):i()}},{key:"componentWillLeave",value:function(i){pa.isLeaveSupported(this.props)?this.transition("leave",i):i()}},{key:"transition",value:function(i,r){var o=this,s=Yi.findDOMNode(this),a=this.props,l=a.transitionName,u=typeof l=="object";this.stop();var c=function(){o.stopper=null,r()};if((Yy||!a.animation[i])&&l&&a[d3[i]]){var f=u?l[i]:l+"-"+i,h=f+"-active";u&&l[i+"Active"]&&(h=l[i+"Active"]),this.stopper=ad(s,{name:f,active:h},c)}else this.stopper=a.animation[i](s,c)}},{key:"stop",value:function(){var i=this.stopper;i&&(this.stopper=null,i.stop())}},{key:"render",value:function(){return this.props.children}}]),t}(de.Component);vE.propTypes={children:P.any,animation:P.any,transitionName:P.any};var p3="rc_animate_"+Date.now();function zl(e){var t=e.children;return de.isValidElement(t)&&!t.key?de.cloneElement(t,{key:p3}):t}function Pc(){}var ld=function(e){Nn(t,e);function t(n){kn(this,t);var i=Yt(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n));return m3.call(i),i.currentlyAnimatingKeys={},i.keysToEnter=[],i.keysToLeave=[],i.state={children:Ul(zl(n))},i.childrenRefs={},i}return Po(t,[{key:"componentDidMount",value:function(){var i=this,r=this.props.showProp,o=this.state.children;r&&(o=o.filter(function(s){return!!s.props[r]})),o.forEach(function(s){s&&i.performAppear(s.key)})}},{key:"componentWillReceiveProps",value:function(i){var r=this;this.nextProps=i;var o=Ul(zl(i)),s=this.props;s.exclusive&&Object.keys(this.currentlyAnimatingKeys).forEach(function(f){r.stop(f)});var a=s.showProp,l=this.currentlyAnimatingKeys,u=s.exclusive?Ul(zl(s)):this.state.children,c=[];a?(u.forEach(function(f){var h=f&&Hs(o,f.key),d=void 0;(!h||!h.props[a])&&f.props[a]?d=de.cloneElement(h||f,Ke({},a,!0)):d=h,d&&c.push(d)}),o.forEach(function(f){(!f||!Hs(u,f.key))&&c.push(f)})):c=s3(u,o),this.setState({children:c}),o.forEach(function(f){var h=f&&f.key;if(!(f&&l[h])){var d=f&&Hs(u,h);if(a){var g=f.props[a];if(d){var v=Op(u,h,a);!v&&g&&r.keysToEnter.push(h)}else g&&r.keysToEnter.push(h)}else d||r.keysToEnter.push(h)}}),u.forEach(function(f){var h=f&&f.key;if(!(f&&l[h])){var d=f&&Hs(o,h);if(a){var g=f.props[a];if(d){var v=Op(o,h,a);!v&&g&&r.keysToLeave.push(h)}else g&&r.keysToLeave.push(h)}else d||r.keysToLeave.push(h)}})}},{key:"componentDidUpdate",value:function(){var i=this.keysToEnter;this.keysToEnter=[],i.forEach(this.performEnter);var r=this.keysToLeave;this.keysToLeave=[],r.forEach(this.performLeave)}},{key:"isValidChildByKey",value:function(i,r){var o=this.props.showProp;return o?Op(i,r,o):Hs(i,r)}},{key:"stop",value:function(i){delete this.currentlyAnimatingKeys[i];var r=this.childrenRefs[i];r&&r.stop()}},{key:"render",value:function(){var i=this,r=this.props;this.nextProps=r;var o=this.state.children,s=null;o&&(s=o.map(function(u){if(u==null)return u;if(!u.key)throw new Error("must set key for <rc-animate> children");return de.createElement(vE,{key:u.key,ref:function(f){i.childrenRefs[u.key]=f},animation:r.animation,transitionName:r.transitionName,transitionEnter:r.transitionEnter,transitionAppear:r.transitionAppear,transitionLeave:r.transitionLeave},u)}));var a=r.component;if(a){var l=r;return typeof a=="string"&&(l=tt({className:r.className,style:r.style},r.componentProps)),de.createElement(a,l,s)}return s[0]||null}}]),t}(de.Component);ld.isAnimate=!0;ld.propTypes={className:P.string,style:P.object,component:P.any,componentProps:P.object,animation:P.object,transitionName:P.oneOfType([P.string,P.object]),transitionEnter:P.bool,transitionAppear:P.bool,exclusive:P.bool,transitionLeave:P.bool,onEnd:P.func,onEnter:P.func,onLeave:P.func,onAppear:P.func,showProp:P.string,children:P.node};ld.defaultProps={animation:{},component:"span",componentProps:{},transitionEnter:!0,transitionLeave:!0,transitionAppear:!1,onEnd:Pc,onEnter:Pc,onLeave:Pc,onAppear:Pc};var m3=function(){var t=this;this.performEnter=function(n){t.childrenRefs[n]&&(t.currentlyAnimatingKeys[n]=!0,t.childrenRefs[n].componentWillEnter(t.handleDoneAdding.bind(t,n,"enter")))},this.performAppear=function(n){t.childrenRefs[n]&&(t.currentlyAnimatingKeys[n]=!0,t.childrenRefs[n].componentWillAppear(t.handleDoneAdding.bind(t,n,"appear")))},this.handleDoneAdding=function(n,i){var r=t.props;if(delete t.currentlyAnimatingKeys[n],!(r.exclusive&&r!==t.nextProps)){var o=Ul(zl(r));t.isValidChildByKey(o,n)?i==="appear"?pa.allowAppearCallback(r)&&(r.onAppear(n),r.onEnd(n,!0)):pa.allowEnterCallback(r)&&(r.onEnter(n),r.onEnd(n,!0)):t.performLeave(n)}},this.performLeave=function(n){t.childrenRefs[n]&&(t.currentlyAnimatingKeys[n]=!0,t.childrenRefs[n].componentWillLeave(t.handleDoneLeaving.bind(t,n)))},this.handleDoneLeaving=function(n){var i=t.props;if(delete t.currentlyAnimatingKeys[n],!(i.exclusive&&i!==t.nextProps)){var r=Ul(zl(i));if(t.isValidChildByKey(r,n))t.performEnter(n);else{var o=function(){pa.allowLeaveCallback(i)&&(i.onLeave(n),i.onEnd(n,!1))};o3(t.state.children,r,i.showProp)?o():t.setState({children:r},o)}}}};const Ip=r3(ld);var qy=function(e){Nn(t,e);function t(){return kn(this,t),Yt(this,e.apply(this,arguments))}return t.prototype.shouldComponentUpdate=function(i){return i.hiddenClassName||i.visible},t.prototype.render=function(){var i=this.props,r=i.hiddenClassName,o=i.visible,s=Ma(i,["hiddenClassName","visible"]);return r||de.Children.count(s.children)>1?(!o&&r&&(s.className+=" "+r),de.createElement("div",s)):de.Children.only(s.children)},t}(Z.Component);qy.propTypes={children:P.any,className:P.string,visible:P.bool,hiddenClassName:P.string};var Fg=function(e){Nn(t,e);function t(){return kn(this,t),Yt(this,e.apply(this,arguments))}return t.prototype.render=function(){var i=this.props,r=i.className;return i.visible||(r+=" "+i.hiddenClassName),de.createElement("div",{className:r,onMouseEnter:i.onMouseEnter,onMouseLeave:i.onMouseLeave,onMouseDown:i.onMouseDown,onTouchStart:i.onTouchStart,style:i.style},de.createElement(qy,{className:i.prefixCls+"-content",visible:i.visible},i.children))},t}(Z.Component);Fg.propTypes={hiddenClassName:P.string,className:P.string,prefixCls:P.string,onMouseEnter:P.func,onMouseLeave:P.func,onMouseDown:P.func,onTouchStart:P.func,children:P.any};var yE=function(e){Nn(t,e);function t(n){kn(this,t);var i=Yt(this,e.call(this,n));return g3.call(i),i.state={stretchChecked:!1,targetWidth:void 0,targetHeight:void 0},i.savePopupRef=Ex.bind(i,"popupInstance"),i.saveAlignRef=Ex.bind(i,"alignInstance"),i}return t.prototype.componentDidMount=function(){this.rootNode=this.getPopupDomNode(),this.setStretchSize()},t.prototype.componentDidUpdate=function(){this.setStretchSize()},t.prototype.getPopupDomNode=function(){return Yi.findDOMNode(this.popupInstance)},t.prototype.getMaskTransitionName=function(){var i=this.props,r=i.maskTransitionName,o=i.maskAnimation;return!r&&o&&(r=i.prefixCls+"-"+o),r},t.prototype.getTransitionName=function(){var i=this.props,r=i.transitionName;return!r&&i.animation&&(r=i.prefixCls+"-"+i.animation),r},t.prototype.getClassName=function(i){return this.props.prefixCls+" "+this.props.className+" "+i},t.prototype.getPopupElement=function(){var i=this,r=this.savePopupRef,o=this.state,s=o.stretchChecked,a=o.targetHeight,l=o.targetWidth,u=this.props,c=u.align,f=u.visible,h=u.prefixCls,d=u.style,g=u.getClassNameFromAlign,v=u.destroyPopupOnHide,y=u.stretch,m=u.children,p=u.onMouseEnter,x=u.onMouseLeave,w=u.onMouseDown,b=u.onTouchStart,_=this.getClassName(this.currentAlignClassName||g(c)),S=h+"-hidden";f||(this.currentAlignClassName=null);var L={};y&&(y.indexOf("height")!==-1?L.height=a:y.indexOf("minHeight")!==-1&&(L.minHeight=a),y.indexOf("width")!==-1?L.width=l:y.indexOf("minWidth")!==-1&&(L.minWidth=l),s||(L.visibility="hidden",setTimeout(function(){i.alignInstance&&i.alignInstance.forceAlign()},0)));var E=tt({},L,d,this.getZIndexStyle()),A={className:_,prefixCls:h,ref:r,onMouseEnter:p,onMouseLeave:x,onMouseDown:w,onTouchStart:b,style:E};return v?de.createElement(Ip,{component:"",exclusive:!0,transitionAppear:!0,transitionName:this.getTransitionName()},f?de.createElement(fh,{target:this.getAlignTarget(),key:"popup",ref:this.saveAlignRef,monitorWindowResize:!0,align:c,onAlign:this.onAlign},de.createElement(Fg,tt({visible:!0},A),m)):null):de.createElement(Ip,{component:"",exclusive:!0,transitionAppear:!0,transitionName:this.getTransitionName(),showProp:"xVisible"},de.createElement(fh,{target:this.getAlignTarget(),key:"popup",ref:this.saveAlignRef,monitorWindowResize:!0,xVisible:f,childrenProps:{visible:"xVisible"},disabled:!f,align:c,onAlign:this.onAlign},de.createElement(Fg,tt({hiddenClassName:S},A),m)))},t.prototype.getZIndexStyle=function(){var i={},r=this.props;return r.zIndex!==void 0&&(i.zIndex=r.zIndex),i},t.prototype.getMaskElement=function(){var i=this.props,r=void 0;if(i.mask){var o=this.getMaskTransitionName();r=de.createElement(qy,{style:this.getZIndexStyle(),key:"mask",className:i.prefixCls+"-mask",hiddenClassName:i.prefixCls+"-mask-hidden",visible:i.visible}),o&&(r=de.createElement(Ip,{key:"mask",showProp:"visible",transitionAppear:!0,component:"",transitionName:o},r))}return r},t.prototype.render=function(){return de.createElement("div",null,this.getMaskElement(),this.getPopupElement())},t}(Z.Component);yE.propTypes={visible:P.bool,style:P.object,getClassNameFromAlign:P.func,onAlign:P.func,getRootDomNode:P.func,align:P.any,destroyPopupOnHide:P.bool,className:P.string,prefixCls:P.string,onMouseEnter:P.func,onMouseLeave:P.func,onMouseDown:P.func,onTouchStart:P.func,stretch:P.string,children:P.node,point:P.shape({pageX:P.number,pageY:P.number})};var g3=function(){var t=this;this.onAlign=function(n,i){var r=t.props,o=r.getClassNameFromAlign(i);t.currentAlignClassName!==o&&(t.currentAlignClassName=o,n.className=t.getClassName(o)),r.onAlign(n,i)},this.setStretchSize=function(){var n=t.props,i=n.stretch,r=n.getRootDomNode,o=n.visible,s=t.state,a=s.stretchChecked,l=s.targetHeight,u=s.targetWidth;if(!i||!o){a&&t.setState({stretchChecked:!1});return}var c=r();if(c){var f=c.offsetHeight,h=c.offsetWidth;(l!==f||u!==h||!a)&&t.setState({stretchChecked:!0,targetHeight:f,targetWidth:h})}},this.getTargetElement=function(){return t.props.getRootDomNode()},this.getAlignTarget=function(){var n=t.props.point;return n||t.getTargetElement}};function Bp(){}function v3(){return""}function y3(){return window.document}var x3=["onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur","onContextMenu"],Xx=!!xr.createPortal,xE={rcTrigger:P.shape({onPopupMouseDown:P.func})},$a=function(e){Nn(t,e);function t(n){kn(this,t);var i=Yt(this,e.call(this,n));w3.call(i);var r=void 0;return"popupVisible"in n?r=!!n.popupVisible:r=!!n.defaultPopupVisible,i.state={prevPopupVisible:r,popupVisible:r},x3.forEach(function(o){i["fire"+o]=function(s){i.fireEvents(o,s)}}),i}return t.prototype.getChildContext=function(){return{rcTrigger:{onPopupMouseDown:this.onPopupMouseDown}}},t.prototype.componentDidMount=function(){this.componentDidUpdate({},{popupVisible:this.state.popupVisible})},t.prototype.componentDidUpdate=function(i,r){var o=this.props,s=this.state,a=function(){r.popupVisible!==s.popupVisible&&o.afterPopupVisibleChange(s.popupVisible)};if(Xx||this.renderComponent(null,a),s.popupVisible){var l=void 0;!this.clickOutsideHandler&&(this.isClickToHide()||this.isContextMenuToShow())&&(l=o.getDocument(),this.clickOutsideHandler=Vi(l,"mousedown",this.onDocumentClick)),this.touchOutsideHandler||(l=l||o.getDocument(),this.touchOutsideHandler=Vi(l,"touchstart",this.onDocumentClick)),!this.contextMenuOutsideHandler1&&this.isContextMenuToShow()&&(l=l||o.getDocument(),this.contextMenuOutsideHandler1=Vi(l,"scroll",this.onContextMenuClose)),!this.contextMenuOutsideHandler2&&this.isContextMenuToShow()&&(this.contextMenuOutsideHandler2=Vi(window,"blur",this.onContextMenuClose));return}this.clearOutsideHandler()},t.prototype.componentWillUnmount=function(){this.clearDelayTimer(),this.clearOutsideHandler(),clearTimeout(this.mouseDownTimeout)},t.getDerivedStateFromProps=function(i,r){var o=i.popupVisible,s={};return o!==void 0&&r.popupVisible!==o&&(s.popupVisible=o,s.prevPopupVisible=r.popupVisible),s},t.prototype.getPopupDomNode=function(){return this._component&&this._component.getPopupDomNode?this._component.getPopupDomNode():null},t.prototype.getPopupAlign=function(){var i=this.props,r=i.popupPlacement,o=i.popupAlign,s=i.builtinPlacements;return r&&s?TO(s,r,o):o},t.prototype.setPopupVisible=function(i,r){var o=this.props.alignPoint,s=this.state.popupVisible;this.clearDelayTimer(),s!==i&&("popupVisible"in this.props||this.setState({popupVisible:i,prevPopupVisible:s}),this.props.onPopupVisibleChange(i)),o&&r&&this.setPoint(r)},t.prototype.delaySetPopupVisible=function(i,r,o){var s=this,a=r*1e3;if(this.clearDelayTimer(),a){var l=o?{pageX:o.pageX,pageY:o.pageY}:null;this.delayTimer=setTimeout(function(){s.setPopupVisible(i,l),s.clearDelayTimer()},a)}else this.setPopupVisible(i,o)},t.prototype.clearDelayTimer=function(){this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=null)},t.prototype.clearOutsideHandler=function(){this.clickOutsideHandler&&(this.clickOutsideHandler.remove(),this.clickOutsideHandler=null),this.contextMenuOutsideHandler1&&(this.contextMenuOutsideHandler1.remove(),this.contextMenuOutsideHandler1=null),this.contextMenuOutsideHandler2&&(this.contextMenuOutsideHandler2.remove(),this.contextMenuOutsideHandler2=null),this.touchOutsideHandler&&(this.touchOutsideHandler.remove(),this.touchOutsideHandler=null)},t.prototype.createTwoChains=function(i){var r=this.props.children.props,o=this.props;return r[i]&&o[i]?this["fire"+i]:r[i]||o[i]},t.prototype.isClickToShow=function(){var i=this.props,r=i.action,o=i.showAction;return r.indexOf("click")!==-1||o.indexOf("click")!==-1},t.prototype.isContextMenuToShow=function(){var i=this.props,r=i.action,o=i.showAction;return r.indexOf("contextMenu")!==-1||o.indexOf("contextMenu")!==-1},t.prototype.isClickToHide=function(){var i=this.props,r=i.action,o=i.hideAction;return r.indexOf("click")!==-1||o.indexOf("click")!==-1},t.prototype.isMouseEnterToShow=function(){var i=this.props,r=i.action,o=i.showAction;return r.indexOf("hover")!==-1||o.indexOf("mouseEnter")!==-1},t.prototype.isMouseLeaveToHide=function(){var i=this.props,r=i.action,o=i.hideAction;return r.indexOf("hover")!==-1||o.indexOf("mouseLeave")!==-1},t.prototype.isFocusToShow=function(){var i=this.props,r=i.action,o=i.showAction;return r.indexOf("focus")!==-1||o.indexOf("focus")!==-1},t.prototype.isBlurToHide=function(){var i=this.props,r=i.action,o=i.hideAction;return r.indexOf("focus")!==-1||o.indexOf("blur")!==-1},t.prototype.forcePopupAlign=function(){this.state.popupVisible&&this._component&&this._component.alignInstance&&this._component.alignInstance.forceAlign()},t.prototype.fireEvents=function(i,r){var o=this.props.children.props[i];o&&o(r);var s=this.props[i];s&&s(r)},t.prototype.close=function(){this.setPopupVisible(!1)},t.prototype.render=function(){var i=this,r=this.state.popupVisible,o=this.props,s=o.children,a=o.forceRender,l=o.alignPoint,u=o.className,c=de.Children.only(s),f={key:"trigger"};this.isContextMenuToShow()?f.onContextMenu=this.onContextMenu:f.onContextMenu=this.createTwoChains("onContextMenu"),this.isClickToHide()||this.isClickToShow()?(f.onClick=this.onClick,f.onMouseDown=this.onMouseDown,f.onTouchStart=this.onTouchStart):(f.onClick=this.createTwoChains("onClick"),f.onMouseDown=this.createTwoChains("onMouseDown"),f.onTouchStart=this.createTwoChains("onTouchStart")),this.isMouseEnterToShow()?(f.onMouseEnter=this.onMouseEnter,l&&(f.onMouseMove=this.onMouseMove)):f.onMouseEnter=this.createTwoChains("onMouseEnter"),this.isMouseLeaveToHide()?f.onMouseLeave=this.onMouseLeave:f.onMouseLeave=this.createTwoChains("onMouseLeave"),this.isFocusToShow()||this.isBlurToHide()?(f.onFocus=this.onFocus,f.onBlur=this.onBlur):(f.onFocus=this.createTwoChains("onFocus"),f.onBlur=this.createTwoChains("onBlur"));var h=qi(c&&c.props&&c.props.className,u);h&&(f.className=h);var d=de.cloneElement(c,f);if(!Xx)return de.createElement(jy,{parent:this,visible:r,autoMount:!1,forceRender:a,getComponent:this.getComponent,getContainer:this.getContainer},function(v){var y=v.renderComponent;return i.renderComponent=y,d});var g=void 0;return(r||this._component||a)&&(g=de.createElement(sE,{key:"portal",getContainer:this.getContainer,didUpdate:this.handlePortalUpdate},this.getComponent())),[d,g]},t}(de.Component);$a.propTypes={children:P.any,action:P.oneOfType([P.string,P.arrayOf(P.string)]),showAction:P.any,hideAction:P.any,getPopupClassNameFromAlign:P.any,onPopupVisibleChange:P.func,afterPopupVisibleChange:P.func,popup:P.oneOfType([P.node,P.func]).isRequired,popupStyle:P.object,prefixCls:P.string,popupClassName:P.string,className:P.string,popupPlacement:P.string,builtinPlacements:P.object,popupTransitionName:P.oneOfType([P.string,P.object]),popupAnimation:P.any,mouseEnterDelay:P.number,mouseLeaveDelay:P.number,zIndex:P.number,focusDelay:P.number,blurDelay:P.number,getPopupContainer:P.func,getDocument:P.func,forceRender:P.bool,destroyPopupOnHide:P.bool,mask:P.bool,maskClosable:P.bool,onPopupAlign:P.func,popupAlign:P.object,popupVisible:P.bool,defaultPopupVisible:P.bool,maskTransitionName:P.oneOfType([P.string,P.object]),maskAnimation:P.string,stretch:P.string,alignPoint:P.bool};$a.contextTypes=xE;$a.childContextTypes=xE;$a.defaultProps={prefixCls:"rc-trigger-popup",getPopupClassNameFromAlign:v3,getDocument:y3,onPopupVisibleChange:Bp,afterPopupVisibleChange:Bp,onPopupAlign:Bp,popupClassName:"",mouseEnterDelay:0,mouseLeaveDelay:.1,focusDelay:0,blurDelay:.15,popupStyle:{},destroyPopupOnHide:!1,popupAlign:{},defaultPopupVisible:!1,mask:!1,maskClosable:!0,action:[],showAction:[],hideAction:[]};var w3=function(){var t=this;this.onMouseEnter=function(n){var i=t.props.mouseEnterDelay;t.fireEvents("onMouseEnter",n),t.delaySetPopupVisible(!0,i,i?null:n)},this.onMouseMove=function(n){t.fireEvents("onMouseMove",n),t.setPoint(n)},this.onMouseLeave=function(n){t.fireEvents("onMouseLeave",n),t.delaySetPopupVisible(!1,t.props.mouseLeaveDelay)},this.onPopupMouseEnter=function(){t.clearDelayTimer()},this.onPopupMouseLeave=function(n){n.relatedTarget&&!n.relatedTarget.setTimeout&&t._component&&t._component.getPopupDomNode&&Cg(t._component.getPopupDomNode(),n.relatedTarget)||t.delaySetPopupVisible(!1,t.props.mouseLeaveDelay)},this.onFocus=function(n){t.fireEvents("onFocus",n),t.clearDelayTimer(),t.isFocusToShow()&&(t.focusTime=Date.now(),t.delaySetPopupVisible(!0,t.props.focusDelay))},this.onMouseDown=function(n){t.fireEvents("onMouseDown",n),t.preClickTime=Date.now()},this.onTouchStart=function(n){t.fireEvents("onTouchStart",n),t.preTouchTime=Date.now()},this.onBlur=function(n){t.fireEvents("onBlur",n),t.clearDelayTimer(),t.isBlurToHide()&&t.delaySetPopupVisible(!1,t.props.blurDelay)},this.onContextMenu=function(n){n.preventDefault(),t.fireEvents("onContextMenu",n),t.setPopupVisible(!0,n)},this.onContextMenuClose=function(){t.isContextMenuToShow()&&t.close()},this.onClick=function(n){if(t.fireEvents("onClick",n),t.focusTime){var i=void 0;if(t.preClickTime&&t.preTouchTime?i=Math.min(t.preClickTime,t.preTouchTime):t.preClickTime?i=t.preClickTime:t.preTouchTime&&(i=t.preTouchTime),Math.abs(i-t.focusTime)<20)return;t.focusTime=0}t.preClickTime=0,t.preTouchTime=0,t.isClickToShow()&&(t.isClickToHide()||t.isBlurToHide())&&n&&n.preventDefault&&n.preventDefault();var r=!t.state.popupVisible;(t.isClickToHide()&&!r||r&&t.isClickToShow())&&t.setPopupVisible(!t.state.popupVisible,n)},this.onPopupMouseDown=function(){var n=t.context.rcTrigger,i=n===void 0?{}:n;t.hasPopupMouseDown=!0,clearTimeout(t.mouseDownTimeout),t.mouseDownTimeout=setTimeout(function(){t.hasPopupMouseDown=!1},0),i.onPopupMouseDown&&i.onPopupMouseDown.apply(i,arguments)},this.onDocumentClick=function(n){if(!(t.props.mask&&!t.props.maskClosable)){var i=n.target,r=xr.findDOMNode(t);!Cg(r,i)&&!t.hasPopupMouseDown&&t.close()}},this.getRootDomNode=function(){return xr.findDOMNode(t)},this.getPopupClassNameFromAlign=function(n){var i=[],r=t.props,o=r.popupPlacement,s=r.builtinPlacements,a=r.prefixCls,l=r.alignPoint,u=r.getPopupClassNameFromAlign;return o&&s&&i.push(LO(s,a,n,l)),u&&i.push(u(n)),i.join(" ")},this.getComponent=function(){var n=t.props,i=n.prefixCls,r=n.destroyPopupOnHide,o=n.popupClassName,s=n.action,a=n.onPopupAlign,l=n.popupAnimation,u=n.popupTransitionName,c=n.popupStyle,f=n.mask,h=n.maskAnimation,d=n.maskTransitionName,g=n.zIndex,v=n.popup,y=n.stretch,m=n.alignPoint,p=t.state,x=p.popupVisible,w=p.point,b=t.getPopupAlign(),_={};return t.isMouseEnterToShow()&&(_.onMouseEnter=t.onPopupMouseEnter),t.isMouseLeaveToHide()&&(_.onMouseLeave=t.onPopupMouseLeave),_.onMouseDown=t.onPopupMouseDown,_.onTouchStart=t.onPopupMouseDown,de.createElement(yE,tt({prefixCls:i,destroyPopupOnHide:r,visible:x,point:m&&w,className:o,action:s,align:b,onAlign:a,animation:l,getClassNameFromAlign:t.getPopupClassNameFromAlign},_,{stretch:y,getRootDomNode:t.getRootDomNode,style:c,mask:f,zIndex:g,transitionName:u,maskAnimation:h,maskTransitionName:d,ref:t.savePopup}),typeof v=="function"?v():v)},this.getContainer=function(){var n=t.props,i=document.createElement("div");i.style.position="absolute",i.style.top="0",i.style.left="0",i.style.width="100%";var r=n.getPopupContainer?n.getPopupContainer(xr.findDOMNode(t)):n.getDocument().body;return r.appendChild(i),i},this.setPoint=function(n){var i=t.props.alignPoint;!i||!n||t.setState({point:{pageX:n.pageX,pageY:n.pageY}})},this.handlePortalUpdate=function(){t.state.prevPopupVisible!==t.state.popupVisible&&t.props.afterPopupVisibleChange(t.state.popupVisible)},this.savePopup=function(n){t._component=n}};oE($a);var ti={adjustX:1,adjustY:1},ni=[0,0],_3={left:{points:["cr","cl"],overflow:ti,offset:[-4,0],targetOffset:ni},right:{points:["cl","cr"],overflow:ti,offset:[4,0],targetOffset:ni},top:{points:["bc","tc"],overflow:ti,offset:[0,-4],targetOffset:ni},bottom:{points:["tc","bc"],overflow:ti,offset:[0,4],targetOffset:ni},topLeft:{points:["bl","tl"],overflow:ti,offset:[0,-4],targetOffset:ni},leftTop:{points:["tr","tl"],overflow:ti,offset:[-4,0],targetOffset:ni},topRight:{points:["br","tr"],overflow:ti,offset:[0,-4],targetOffset:ni},rightTop:{points:["tl","tr"],overflow:ti,offset:[4,0],targetOffset:ni},bottomRight:{points:["tr","br"],overflow:ti,offset:[0,4],targetOffset:ni},rightBottom:{points:["bl","br"],overflow:ti,offset:[4,0],targetOffset:ni},bottomLeft:{points:["tl","bl"],overflow:ti,offset:[0,4],targetOffset:ni},leftBottom:{points:["br","bl"],overflow:ti,offset:[-4,0],targetOffset:ni}},wE=function(e){Nn(t,e);function t(){return kn(this,t),Yt(this,e.apply(this,arguments))}return t.prototype.componentDidUpdate=function(){var i=this.props.trigger;i&&i.forcePopupAlign()},t.prototype.render=function(){var i=this.props,r=i.overlay,o=i.prefixCls,s=i.id;return de.createElement("div",{className:o+"-inner",id:s,role:"tooltip"},typeof r=="function"?r():r)},t}(de.Component);wE.propTypes={prefixCls:P.string,overlay:P.oneOfType([P.node,P.func]).isRequired,id:P.string,trigger:P.any};var Zy=function(e){Nn(t,e);function t(){var n,i,r;kn(this,t);for(var o=arguments.length,s=Array(o),a=0;a<o;a++)s[a]=arguments[a];return r=(n=(i=Yt(this,e.call.apply(e,[this].concat(s))),i),i.getPopupElement=function(){var l=i.props,u=l.arrowContent,c=l.overlay,f=l.prefixCls,h=l.id;return[de.createElement("div",{className:f+"-arrow",key:"arrow"},u),de.createElement(wE,{key:"content",trigger:i.trigger,prefixCls:f,id:h,overlay:c})]},i.saveTrigger=function(l){i.trigger=l},n),Yt(i,r)}return t.prototype.getPopupDomNode=function(){return this.trigger.getPopupDomNode()},t.prototype.render=function(){var i=this.props,r=i.overlayClassName,o=i.trigger,s=i.mouseEnterDelay,a=i.mouseLeaveDelay,l=i.overlayStyle,u=i.prefixCls,c=i.children,f=i.onVisibleChange,h=i.afterVisibleChange,d=i.transitionName,g=i.animation,v=i.placement,y=i.align,m=i.destroyTooltipOnHide,p=i.defaultVisible,x=i.getTooltipContainer,w=Ma(i,["overlayClassName","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle","prefixCls","children","onVisibleChange","afterVisibleChange","transitionName","animation","placement","align","destroyTooltipOnHide","defaultVisible","getTooltipContainer"]),b=tt({},w);return"visible"in this.props&&(b.popupVisible=this.props.visible),de.createElement($a,tt({popupClassName:r,ref:this.saveTrigger,prefixCls:u,popup:this.getPopupElement,action:o,builtinPlacements:_3,popupPlacement:v,popupAlign:y,getPopupContainer:x,onPopupVisibleChange:f,afterPopupVisibleChange:h,popupTransitionName:d,popupAnimation:g,defaultPopupVisible:p,destroyPopupOnHide:m,mouseLeaveDelay:a,popupStyle:l,mouseEnterDelay:s},b),c)},t}(Z.Component);Zy.propTypes={trigger:P.any,children:P.any,defaultVisible:P.bool,visible:P.bool,placement:P.string,transitionName:P.oneOfType([P.string,P.object]),animation:P.any,onVisibleChange:P.func,afterVisibleChange:P.func,overlay:P.oneOfType([P.node,P.func]).isRequired,overlayStyle:P.object,overlayClassName:P.string,prefixCls:P.string,mouseEnterDelay:P.number,mouseLeaveDelay:P.number,getTooltipContainer:P.func,destroyTooltipOnHide:P.bool,align:P.object,arrowContent:P.any,id:P.string};Zy.defaultProps={prefixCls:"rc-tooltip",mouseEnterDelay:0,destroyTooltipOnHide:!1,mouseLeaveDelay:.1,align:{},placement:"right",trigger:["hover"],arrowContent:null};function b3(e){var t,n;return n=t=function(i){Nn(r,i);function r(){var o,s,a,l;kn(this,r);for(var u=arguments.length,c=Array(u),f=0;f<u;f++)c[f]=arguments[f];return l=(s=(a=Yt(this,(o=r.__proto__||Object.getPrototypeOf(r)).call.apply(o,[this].concat(c))),a),a.state={visibles:{}},a.handleTooltipVisibleChange=function(h,d){a.setState(function(g){return{visibles:tt({},g.visibles,Ke({},h,d))}})},a.handleWithTooltip=function(h){var d=h.value,g=h.dragging,v=h.index,y=h.disabled,m=Ma(h,["value","dragging","index","disabled"]),p=a.props,x=p.tipFormatter,w=p.tipProps,b=p.handleStyle,_=w.prefixCls,S=_===void 0?"rc-slider-tooltip":_,L=w.overlay,E=L===void 0?x(d):L,A=w.placement,B=A===void 0?"top":A,j=w.visible,z=j===void 0?!1:j,k=Ma(w,["prefixCls","overlay","placement","visible"]),U=void 0;return Array.isArray(b)?U=b[v]||b[0]:U=b,de.createElement(Zy,tt({},k,{prefixCls:S,overlay:E,placement:B,visible:!y&&(a.state.visibles[v]||g)||z,key:v}),de.createElement(rd,tt({},m,{style:tt({},U),value:d,onMouseEnter:function(){return a.handleTooltipVisibleChange(v,!0)},onMouseLeave:function(){return a.handleTooltipVisibleChange(v,!1)}})))},s),Yt(a,l)}return Po(r,[{key:"render",value:function(){return de.createElement(e,tt({},this.props,{handle:this.handleWithTooltip}))}}]),r}(de.Component),t.propTypes={tipFormatter:P.func,handleStyle:P.oneOfType([P.object,P.arrayOf(P.object)]),tipProps:P.object},t.defaultProps={tipFormatter:function(r){return r},handleStyle:[{}],tipProps:{}},n}mu.Range=lO;mu.Handle=rd;mu.createSliderWithTooltip=b3;const S3={width:"20%",position:"fixed",top:"85px",left:"10px",fontSize:"1rem",display:"none"},M3=e=>M.jsx("div",{className:"sliderDiv",style:S3,children:e.isDisabled?M.jsx(mu,{defaultValue:40,value:e.speed,min:e.speed,max:e.speed,step:10}):M.jsx(mu,{defaultValue:40,value:e.speed,min:0,max:70,step:10,onChange:e.onSliderChange})});var ud={exports:{}},_E={},kg={exports:{}};function bE(e){var t,n,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e)){var r=e.length;for(t=0;t<r;t++)e[t]&&(n=bE(e[t]))&&(i&&(i+=" "),i+=n)}else for(n in e)e[n]&&(i&&(i+=" "),i+=n);return i}function Yx(){for(var e,t,n=0,i="",r=arguments.length;n<r;n++)(e=arguments[n])&&(t=bE(e))&&(i&&(i+=" "),i+=t);return i}kg.exports=Yx,kg.exports.clsx=Yx;var E3=kg.exports,Pt={},tr={};Object.defineProperty(tr,"__esModule",{value:!0});tr.dontSetMe=P3;tr.findInArray=T3;tr.int=R3;tr.isFunction=L3;tr.isNum=C3;function T3(e,t){for(let n=0,i=e.length;n<i;n++)if(t.apply(t,[e[n],n,e]))return e[n]}function L3(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Function]"}function C3(e){return typeof e=="number"&&!isNaN(e)}function R3(e){return parseInt(e,10)}function P3(e,t,n){if(e[t])return new Error(`Invalid prop ${t} passed to ${n} - do not set this, set it on the child.`)}var gs={};Object.defineProperty(gs,"__esModule",{value:!0});gs.browserPrefixToKey=ME;gs.browserPrefixToStyle=A3;gs.default=void 0;gs.getPrefix=SE;const Up=["Moz","Webkit","O","ms"];function SE(){var n,i;let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const t=(i=(n=window.document)==null?void 0:n.documentElement)==null?void 0:i.style;if(!t||e in t)return"";for(let r=0;r<Up.length;r++)if(ME(e,Up[r])in t)return Up[r];return""}function ME(e,t){return t?`${t}${D3(e)}`:e}function A3(e,t){return t?`-${t.toLowerCase()}-${e}`:e}function D3(e){let t="",n=!0;for(let i=0;i<e.length;i++)n?(t+=e[i].toUpperCase(),n=!1):e[i]==="-"?n=!0:t+=e[i];return t}gs.default=SE();Object.defineProperty(Pt,"__esModule",{value:!0});Pt.addClassName=LE;Pt.addEvent=F3;Pt.addUserSelectStyles=G3;Pt.createCSSTransform=H3;Pt.createSVGTransform=j3;Pt.getTouch=V3;Pt.getTouchIdentifier=W3;Pt.getTranslation=Jy;Pt.innerHeight=B3;Pt.innerWidth=U3;Pt.matchesSelector=TE;Pt.matchesSelectorAndParentsTo=O3;Pt.offsetXYFromParent=z3;Pt.outerHeight=N3;Pt.outerWidth=I3;Pt.removeClassName=CE;Pt.removeEvent=k3;Pt.scheduleRemoveUserSelectStyles=$3;var Xn=tr,qx=EE(gs);function EE(e,t){if(typeof WeakMap=="function")var n=new WeakMap,i=new WeakMap;return(EE=function(r,o){if(!o&&r&&r.__esModule)return r;var s,a,l={__proto__:null,default:r};if(r===null||typeof r!="object"&&typeof r!="function")return l;if(s=o?i:n){if(s.has(r))return s.get(r);s.set(r,l)}for(const u in r)u!=="default"&&{}.hasOwnProperty.call(r,u)&&((a=(s=Object.defineProperty)&&Object.getOwnPropertyDescriptor(r,u))&&(a.get||a.set)?s(l,u,a):l[u]=r[u]);return l})(e,t)}let Ac="";function TE(e,t){return Ac||(Ac=(0,Xn.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(n){return(0,Xn.isFunction)(e[n])})),(0,Xn.isFunction)(e[Ac])?e[Ac](t):!1}function O3(e,t,n){let i=e;do{if(TE(i,t))return!0;if(i===n)return!1;i=i.parentNode}while(i);return!1}function F3(e,t,n,i){if(!e)return;const r={capture:!0,...i};e.addEventListener?e.addEventListener(t,n,r):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n}function k3(e,t,n,i){if(!e)return;const r={capture:!0,...i};e.removeEventListener?e.removeEventListener(t,n,r):e.detachEvent?e.detachEvent("on"+t,n):e["on"+t]=null}function N3(e){let t=e.clientHeight;const n=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,Xn.int)(n.borderTopWidth),t+=(0,Xn.int)(n.borderBottomWidth),t}function I3(e){let t=e.clientWidth;const n=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,Xn.int)(n.borderLeftWidth),t+=(0,Xn.int)(n.borderRightWidth),t}function B3(e){let t=e.clientHeight;const n=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,Xn.int)(n.paddingTop),t-=(0,Xn.int)(n.paddingBottom),t}function U3(e){let t=e.clientWidth;const n=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,Xn.int)(n.paddingLeft),t-=(0,Xn.int)(n.paddingRight),t}function z3(e,t,n){const r=t===t.ownerDocument.body?{left:0,top:0}:t.getBoundingClientRect(),o=(e.clientX+t.scrollLeft-r.left)/n,s=(e.clientY+t.scrollTop-r.top)/n;return{x:o,y:s}}function H3(e,t){const n=Jy(e,t,"px");return{[(0,qx.browserPrefixToKey)("transform",qx.default)]:n}}function j3(e,t){return Jy(e,t,"")}function Jy(e,t,n){let{x:i,y:r}=e,o=`translate(${i}${n},${r}${n})`;if(t){const s=`${typeof t.x=="string"?t.x:t.x+n}`,a=`${typeof t.y=="string"?t.y:t.y+n}`;o=`translate(${s}, ${a})`+o}return o}function V3(e,t){return e.targetTouches&&(0,Xn.findInArray)(e.targetTouches,n=>t===n.identifier)||e.changedTouches&&(0,Xn.findInArray)(e.changedTouches,n=>t===n.identifier)}function W3(e){if(e.targetTouches&&e.targetTouches[0])return e.targetTouches[0].identifier;if(e.changedTouches&&e.changedTouches[0])return e.changedTouches[0].identifier}function G3(e){if(!e)return;let t=e.getElementById("react-draggable-style-el");t||(t=e.createElement("style"),t.type="text/css",t.id="react-draggable-style-el",t.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,t.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,e.getElementsByTagName("head")[0].appendChild(t)),e.body&&LE(e.body,"react-draggable-transparent-selection")}function $3(e){window.requestAnimationFrame?window.requestAnimationFrame(()=>{Zx(e)}):Zx(e)}function Zx(e){if(e)try{if(e.body&&CE(e.body,"react-draggable-transparent-selection"),e.selection)e.selection.empty();else{const t=(e.defaultView||window).getSelection();t&&t.type!=="Caret"&&t.removeAllRanges()}}catch{}}function LE(e,t){e.classList?e.classList.add(t):e.className.match(new RegExp(`(?:^|\\s)${t}(?!\\S)`))||(e.className+=` ${t}`)}function CE(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp(`(?:^|\\s)${t}(?!\\S)`,"g"),"")}var nr={};Object.defineProperty(nr,"__esModule",{value:!0});nr.canDragX=q3;nr.canDragY=Z3;nr.createCoreData=K3;nr.createDraggableData=Q3;nr.getBoundPosition=X3;nr.getControlPosition=J3;nr.snapToGrid=Y3;var zn=tr,ia=Pt;function X3(e,t,n){if(!e.props.bounds)return[t,n];let{bounds:i}=e.props;i=typeof i=="string"?i:eF(i);const r=Ky(e);if(typeof i=="string"){const{ownerDocument:o}=r,s=o.defaultView;let a;if(i==="parent"?a=r.parentNode:a=r.getRootNode().querySelector(i),!(a instanceof s.HTMLElement))throw new Error('Bounds selector "'+i+'" could not find an element.');const l=a,u=s.getComputedStyle(r),c=s.getComputedStyle(l);i={left:-r.offsetLeft+(0,zn.int)(c.paddingLeft)+(0,zn.int)(u.marginLeft),top:-r.offsetTop+(0,zn.int)(c.paddingTop)+(0,zn.int)(u.marginTop),right:(0,ia.innerWidth)(l)-(0,ia.outerWidth)(r)-r.offsetLeft+(0,zn.int)(c.paddingRight)-(0,zn.int)(u.marginRight),bottom:(0,ia.innerHeight)(l)-(0,ia.outerHeight)(r)-r.offsetTop+(0,zn.int)(c.paddingBottom)-(0,zn.int)(u.marginBottom)}}return(0,zn.isNum)(i.right)&&(t=Math.min(t,i.right)),(0,zn.isNum)(i.bottom)&&(n=Math.min(n,i.bottom)),(0,zn.isNum)(i.left)&&(t=Math.max(t,i.left)),(0,zn.isNum)(i.top)&&(n=Math.max(n,i.top)),[t,n]}function Y3(e,t,n){const i=Math.round(t/e[0])*e[0],r=Math.round(n/e[1])*e[1];return[i,r]}function q3(e){return e.props.axis==="both"||e.props.axis==="x"}function Z3(e){return e.props.axis==="both"||e.props.axis==="y"}function J3(e,t,n){const i=typeof t=="number"?(0,ia.getTouch)(e,t):null;if(typeof t=="number"&&!i)return null;const r=Ky(n),o=n.props.offsetParent||r.offsetParent||r.ownerDocument.body;return(0,ia.offsetXYFromParent)(i||e,o,n.props.scale)}function K3(e,t,n){const i=!(0,zn.isNum)(e.lastX),r=Ky(e);return i?{node:r,deltaX:0,deltaY:0,lastX:t,lastY:n,x:t,y:n}:{node:r,deltaX:t-e.lastX,deltaY:n-e.lastY,lastX:e.lastX,lastY:e.lastY,x:t,y:n}}function Q3(e,t){const n=e.props.scale;return{node:t.node,x:e.state.x+t.deltaX/n,y:e.state.y+t.deltaY/n,deltaX:t.deltaX/n,deltaY:t.deltaY/n,lastX:e.state.x,lastY:e.state.y}}function eF(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom}}function Ky(e){const t=e.findDOMNode();if(!t)throw new Error("<DraggableCore>: Unmounted during event!");return t}var cd={},fd={};Object.defineProperty(fd,"__esModule",{value:!0});fd.default=tF;function tF(){}Object.defineProperty(cd,"__esModule",{value:!0});cd.default=void 0;var zp=RE(Z),hn=Qy(id),nF=Qy(xr),tn=Pt,Fr=nr,Hp=tr,ul=Qy(fd);function Qy(e){return e&&e.__esModule?e:{default:e}}function RE(e,t){if(typeof WeakMap=="function")var n=new WeakMap,i=new WeakMap;return(RE=function(r,o){if(!o&&r&&r.__esModule)return r;var s,a,l={__proto__:null,default:r};if(r===null||typeof r!="object"&&typeof r!="function")return l;if(s=o?i:n){if(s.has(r))return s.get(r);s.set(r,l)}for(const u in r)u!=="default"&&{}.hasOwnProperty.call(r,u)&&((a=(s=Object.defineProperty)&&Object.getOwnPropertyDescriptor(r,u))&&(a.get||a.set)?s(l,u,a):l[u]=r[u]);return l})(e,t)}function dn(e,t,n){return(t=iF(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function iF(e){var t=rF(e,"string");return typeof t=="symbol"?t:t+""}function rF(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var i=n.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}const bi={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let kr=bi.mouse,hd=class extends zp.Component{constructor(){super(...arguments),dn(this,"dragging",!1),dn(this,"lastX",NaN),dn(this,"lastY",NaN),dn(this,"touchIdentifier",null),dn(this,"mounted",!1),dn(this,"handleDragStart",t=>{if(this.props.onMouseDown(t),!this.props.allowAnyClick&&typeof t.button=="number"&&t.button!==0)return!1;const n=this.findDOMNode();if(!n||!n.ownerDocument||!n.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:i}=n;if(this.props.disabled||!(t.target instanceof i.defaultView.Node)||this.props.handle&&!(0,tn.matchesSelectorAndParentsTo)(t.target,this.props.handle,n)||this.props.cancel&&(0,tn.matchesSelectorAndParentsTo)(t.target,this.props.cancel,n))return;t.type==="touchstart"&&!this.props.allowMobileScroll&&t.preventDefault();const r=(0,tn.getTouchIdentifier)(t);this.touchIdentifier=r;const o=(0,Fr.getControlPosition)(t,r,this);if(o==null)return;const{x:s,y:a}=o,l=(0,Fr.createCoreData)(this,s,a);(0,ul.default)("DraggableCore: handleDragStart: %j",l),(0,ul.default)("calling",this.props.onStart),!(this.props.onStart(t,l)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,tn.addUserSelectStyles)(i),this.dragging=!0,this.lastX=s,this.lastY=a,(0,tn.addEvent)(i,kr.move,this.handleDrag),(0,tn.addEvent)(i,kr.stop,this.handleDragStop))}),dn(this,"handleDrag",t=>{const n=(0,Fr.getControlPosition)(t,this.touchIdentifier,this);if(n==null)return;let{x:i,y:r}=n;if(Array.isArray(this.props.grid)){let a=i-this.lastX,l=r-this.lastY;if([a,l]=(0,Fr.snapToGrid)(this.props.grid,a,l),!a&&!l)return;i=this.lastX+a,r=this.lastY+l}const o=(0,Fr.createCoreData)(this,i,r);if((0,ul.default)("DraggableCore: handleDrag: %j",o),this.props.onDrag(t,o)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const l=document.createEvent("MouseEvents");l.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(l)}return}this.lastX=i,this.lastY=r}),dn(this,"handleDragStop",t=>{if(!this.dragging)return;const n=(0,Fr.getControlPosition)(t,this.touchIdentifier,this);if(n==null)return;let{x:i,y:r}=n;if(Array.isArray(this.props.grid)){let l=i-this.lastX||0,u=r-this.lastY||0;[l,u]=(0,Fr.snapToGrid)(this.props.grid,l,u),i=this.lastX+l,r=this.lastY+u}const o=(0,Fr.createCoreData)(this,i,r);if(this.props.onStop(t,o)===!1||this.mounted===!1)return!1;const a=this.findDOMNode();a&&this.props.enableUserSelectHack&&(0,tn.scheduleRemoveUserSelectStyles)(a.ownerDocument),(0,ul.default)("DraggableCore: handleDragStop: %j",o),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,a&&((0,ul.default)("DraggableCore: Removing handlers"),(0,tn.removeEvent)(a.ownerDocument,kr.move,this.handleDrag),(0,tn.removeEvent)(a.ownerDocument,kr.stop,this.handleDragStop))}),dn(this,"onMouseDown",t=>(kr=bi.mouse,this.handleDragStart(t))),dn(this,"onMouseUp",t=>(kr=bi.mouse,this.handleDragStop(t))),dn(this,"onTouchStart",t=>(kr=bi.touch,this.handleDragStart(t))),dn(this,"onTouchEnd",t=>(kr=bi.touch,this.handleDragStop(t)))}componentDidMount(){this.mounted=!0;const t=this.findDOMNode();t&&(0,tn.addEvent)(t,bi.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const t=this.findDOMNode();if(t){const{ownerDocument:n}=t;(0,tn.removeEvent)(n,bi.mouse.move,this.handleDrag),(0,tn.removeEvent)(n,bi.touch.move,this.handleDrag),(0,tn.removeEvent)(n,bi.mouse.stop,this.handleDragStop),(0,tn.removeEvent)(n,bi.touch.stop,this.handleDragStop),(0,tn.removeEvent)(t,bi.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,tn.scheduleRemoveUserSelectStyles)(n)}}findDOMNode(){var t,n,i;return(t=this.props)!=null&&t.nodeRef?(i=(n=this.props)==null?void 0:n.nodeRef)==null?void 0:i.current:nF.default.findDOMNode(this)}render(){return zp.cloneElement(zp.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};cd.default=hd;dn(hd,"displayName","DraggableCore");dn(hd,"propTypes",{allowAnyClick:hn.default.bool,allowMobileScroll:hn.default.bool,children:hn.default.node.isRequired,disabled:hn.default.bool,enableUserSelectHack:hn.default.bool,offsetParent:function(e,t){if(e[t]&&e[t].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:hn.default.arrayOf(hn.default.number),handle:hn.default.string,cancel:hn.default.string,nodeRef:hn.default.object,onStart:hn.default.func,onDrag:hn.default.func,onStop:hn.default.func,onMouseDown:hn.default.func,scale:hn.default.number,className:Hp.dontSetMe,style:Hp.dontSetMe,transform:Hp.dontSetMe});dn(hd,"defaultProps",{allowAnyClick:!1,allowMobileScroll:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1});(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"DraggableCore",{enumerable:!0,get:function(){return l.default}}),e.default=void 0;var t=f(Z),n=c(id),i=c(xr),r=E3,o=Pt,s=nr,a=tr,l=c(cd),u=c(fd);function c(m){return m&&m.__esModule?m:{default:m}}function f(m,p){if(typeof WeakMap=="function")var x=new WeakMap,w=new WeakMap;return(f=function(b,_){if(!_&&b&&b.__esModule)return b;var S,L,E={__proto__:null,default:b};if(b===null||typeof b!="object"&&typeof b!="function")return E;if(S=_?w:x){if(S.has(b))return S.get(b);S.set(b,E)}for(const A in b)A!=="default"&&{}.hasOwnProperty.call(b,A)&&((L=(S=Object.defineProperty)&&Object.getOwnPropertyDescriptor(b,A))&&(L.get||L.set)?S(E,A,L):E[A]=b[A]);return E})(m,p)}function h(){return h=Object.assign?Object.assign.bind():function(m){for(var p=1;p<arguments.length;p++){var x=arguments[p];for(var w in x)({}).hasOwnProperty.call(x,w)&&(m[w]=x[w])}return m},h.apply(null,arguments)}function d(m,p,x){return(p=g(p))in m?Object.defineProperty(m,p,{value:x,enumerable:!0,configurable:!0,writable:!0}):m[p]=x,m}function g(m){var p=v(m,"string");return typeof p=="symbol"?p:p+""}function v(m,p){if(typeof m!="object"||!m)return m;var x=m[Symbol.toPrimitive];if(x!==void 0){var w=x.call(m,p);if(typeof w!="object")return w;throw new TypeError("@@toPrimitive must return a primitive value.")}return(p==="string"?String:Number)(m)}class y extends t.Component{static getDerivedStateFromProps(p,x){let{position:w}=p,{prevPropsPosition:b}=x;return w&&(!b||w.x!==b.x||w.y!==b.y)?((0,u.default)("Draggable: getDerivedStateFromProps %j",{position:w,prevPropsPosition:b}),{x:w.x,y:w.y,prevPropsPosition:{...w}}):null}constructor(p){super(p),d(this,"onDragStart",(x,w)=>{if((0,u.default)("Draggable: onDragStart: %j",w),this.props.onStart(x,(0,s.createDraggableData)(this,w))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),d(this,"onDrag",(x,w)=>{if(!this.state.dragging)return!1;(0,u.default)("Draggable: onDrag: %j",w);const b=(0,s.createDraggableData)(this,w),_={x:b.x,y:b.y,slackX:0,slackY:0};if(this.props.bounds){const{x:L,y:E}=_;_.x+=this.state.slackX,_.y+=this.state.slackY;const[A,B]=(0,s.getBoundPosition)(this,_.x,_.y);_.x=A,_.y=B,_.slackX=this.state.slackX+(L-_.x),_.slackY=this.state.slackY+(E-_.y),b.x=_.x,b.y=_.y,b.deltaX=_.x-this.state.x,b.deltaY=_.y-this.state.y}if(this.props.onDrag(x,b)===!1)return!1;this.setState(_)}),d(this,"onDragStop",(x,w)=>{if(!this.state.dragging||this.props.onStop(x,(0,s.createDraggableData)(this,w))===!1)return!1;(0,u.default)("Draggable: onDragStop: %j",w);const _={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:L,y:E}=this.props.position;_.x=L,_.y=E}this.setState(_)}),this.state={dragging:!1,dragged:!1,x:p.position?p.position.x:p.defaultPosition.x,y:p.position?p.position.y:p.defaultPosition.y,prevPropsPosition:{...p.position},slackX:0,slackY:0,isElementSVG:!1},p.position&&!(p.onDrag||p.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.state.dragging&&this.setState({dragging:!1})}findDOMNode(){var p,x;return((x=(p=this.props)==null?void 0:p.nodeRef)==null?void 0:x.current)??i.default.findDOMNode(this)}render(){const{axis:p,bounds:x,children:w,defaultPosition:b,defaultClassName:_,defaultClassNameDragging:S,defaultClassNameDragged:L,position:E,positionOffset:A,scale:B,...j}=this.props;let z={},k=null;const D=!!!E||this.state.dragging,G=E||b,I={x:(0,s.canDragX)(this)&&D?this.state.x:G.x,y:(0,s.canDragY)(this)&&D?this.state.y:G.y};this.state.isElementSVG?k=(0,o.createSVGTransform)(I,A):z=(0,o.createCSSTransform)(I,A);const H=(0,r.clsx)(w.props.className||"",_,{[S]:this.state.dragging,[L]:this.state.dragged});return t.createElement(l.default,h({},j,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),t.cloneElement(t.Children.only(w),{className:H,style:{...w.props.style,...z},transform:k}))}}e.default=y,d(y,"displayName","Draggable"),d(y,"propTypes",{...l.default.propTypes,axis:n.default.oneOf(["both","x","y","none"]),bounds:n.default.oneOfType([n.default.shape({left:n.default.number,right:n.default.number,top:n.default.number,bottom:n.default.number}),n.default.string,n.default.oneOf([!1])]),defaultClassName:n.default.string,defaultClassNameDragging:n.default.string,defaultClassNameDragged:n.default.string,defaultPosition:n.default.shape({x:n.default.number,y:n.default.number}),positionOffset:n.default.shape({x:n.default.oneOfType([n.default.number,n.default.string]),y:n.default.oneOfType([n.default.number,n.default.string])}),position:n.default.shape({x:n.default.number,y:n.default.number}),className:a.dontSetMe,style:a.dontSetMe,transform:a.dontSetMe}),d(y,"defaultProps",{...l.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})})(_E);const{default:PE,DraggableCore:oF}=_E;ud.exports=PE;ud.exports.default=PE;ud.exports.DraggableCore=oF;var sF=ud.exports;const aF=Pr(sF),lF=e=>{const t=n=>{n.key==="Enter"&&e.algorithm(document.getElementById("moveInput").value,"Custom"),n.stopPropagation()};return M.jsx("div",{style:{position:"absolute",zIndex:"99"},children:M.jsx(aF,{handle:".handle",defaultPosition:{x:0,y:150},position:null,grid:[50,50],scale:1,onStart:e.handleStart,onDrag:e.handleDrag,onStop:e.handleStop,children:M.jsxs("div",{children:[M.jsx("div",{className:"handle",style:{color:"grey"},children:"Drag from here"}),M.jsxs("div",{children:[M.jsx("input",{placeholder:"type moves here",id:"moveInput",onKeyDown:t,style:{borderRadius:"4px",margin:"1px",border:"1.5px solid #007bff",width:"200px"}}),M.jsx("button",{id:"moveSubmit",onClick:()=>e.algorithm(document.getElementById("moveInput").value,"Custom"),children:"Enter"})]})]})})})},uF=e=>M.jsxs("div",{className:window.innerWidth>900&&window.innerHeight>580?"sideSolverInfo":"solverInfo",children:[M.jsxs("div",{className:"setLengthWrapper",children:["Total Moves: ",M.jsx("div",{className:"setLength",children:e.solvedSetLength})]}),M.jsxs("div",{className:"setLengthWrapper",children:["Current Move: ",M.jsx("div",{className:"setLength",children:e.prevSetLength})]})]}),cF=e=>M.jsx("div",{className:window.innerWidth>900&&window.innerHeight>580?"sideSolverInfo":"solverInfo",children:M.jsxs("div",{className:"setLengthWrapper",children:["Current Color: ",M.jsx("div",{className:"setLength",style:{backgroundColor:e.colorPicked}})]})});let Dc=[],No=[],Io=[],jp=[],Vp=[],nn=0;function Jx(e){switch(e){case"F":return{bgc:"white",color:"black"};case"U":return{bgc:"blue",color:"white"};case"R":return{bgc:"red",color:"white"};case"B":return{bgc:"yellow",color:"black"};case"L":return{bgc:"orange",color:"black"};case"D":return{bgc:"green",color:"white"}}}const e0=e=>(Dc=[],No=[],Io=[],jp=[],Vp=[],M.jsxs("div",{id:"controlsDiv",children:[e.size%2?M.jsx("div",{className:"centerMoves",style:{marginRight:"5px"},children:M.jsxs("div",{className:"centerLayerColumns",children:[e.generatedButtons.center.forEach(t=>{Dc.push(M.jsx("div",{className:"moveBtn",onMouseDown:()=>e.rotateOneFace(t.clockwise.name,t.clockwise.data),style:{position:"relative",left:"0px",backgroundColor:"magenta",width:"45px"},onMouseEnter:n=>e.mouseEnter(t.clockwise.name,t.clockwise.data,n),onMouseLeave:()=>e.mouseLeave(),children:t.clockwise.name},nn)),nn+=1,Dc.push(M.jsx("div",{className:"moveBtn",onMouseDown:()=>e.rotateOneFace(t.counter.name,t.counter.data),style:{position:"relative",left:"0px",backgroundColor:"magenta",width:"45px"},onMouseEnter:()=>e.mouseEnter(t.counter.name,t.counter.data),onMouseLeave:()=>e.mouseLeave(),children:t.counter.name},nn)),nn+=1}),Dc]})}):"",M.jsxs("div",{className:"singleLayerMoves",style:{marginRight:"5px"},children:[e.generatedButtons.single.forEach(t=>{let n=Jx(t.counter.face);t.counter.face==="F"&&No.push([],[]);let i=No.length-2,r=No.length-1;No[i].push(M.jsx("div",{className:"moveBtn",onMouseDown:()=>e.rotateOneFace(t.counter.name,t.counter.data),style:{position:"relative",left:"0px",backgroundColor:n.bgc,color:n.color,width:"45px"},onMouseEnter:()=>e.mouseEnter(t.counter.name,t.counter.data),onMouseLeave:()=>e.mouseLeave(),children:t.counter.name},nn)),nn+=1,No[r].push(M.jsx("div",{className:"moveBtn",onMouseDown:()=>e.rotateOneFace(t.clockwise.name,t.clockwise.data),style:{position:"relative",left:"0px",backgroundColor:n.bgc,color:n.color,width:"45px"},onMouseEnter:()=>e.mouseEnter(t.clockwise.name,t.clockwise.data),onMouseLeave:()=>e.mouseLeave(),children:t.clockwise.name},nn)),nn+=1}),No.forEach(t=>{nn+=1,jp.push(M.jsx("div",{className:"singleLayerColumns",children:t},nn))}),jp]}),M.jsxs("div",{className:"multiLayerMoves",children:[e.generatedButtons.multi.forEach(t=>{let n=Jx(t.counter.face);t.counter.face==="F"&&Io.push([],[]);let i=Io.length-2,r=Io.length-1;Io[i].push(M.jsx("div",{className:"moveBtn",onMouseDown:()=>e.rotateOneFace(t.counter.name,t.counter.data),style:{position:"relative",left:"0px",backgroundColor:n.bgc,color:n.color,width:"45px"},onMouseEnter:()=>e.mouseEnter(t.counter.name,t.counter.data),onMouseLeave:()=>e.mouseLeave(),children:t.counter.name},nn)),nn+=1,Io[r].push(M.jsx("div",{className:"moveBtn",onMouseDown:()=>e.rotateOneFace(t.clockwise.name,t.clockwise.data),style:{position:"relative",left:"0px",backgroundColor:n.bgc,color:n.color,width:"45px"},onMouseEnter:()=>e.mouseEnter(t.clockwise.name,t.clockwise.data),onMouseLeave:()=>e.mouseLeave(),children:t.clockwise.name},nn)),nn+=1}),Io.forEach(t=>{nn+=1,Vp.push(M.jsx("div",{className:"multiLayerColumns",children:t},nn))}),Vp]})]})),fF=["xxl","xl","lg","md","sm","xs"],hF="xs",dd=Z.createContext({prefixes:{},breakpoints:fF,minBreakpoint:hF}),{Consumer:$j,Provider:Xj}=dd;function AE(e,t){const{prefixes:n}=Z.useContext(dd);return e||n[t]||t}function DE(){const{breakpoints:e}=Z.useContext(dd);return e}function OE(){const{minBreakpoint:e}=Z.useContext(dd);return e}function dF({as:e,bsPrefix:t,className:n,...i}){t=AE(t,"col");const r=DE(),o=OE(),s=[],a=[];return r.forEach(l=>{const u=i[l];delete i[l];let c,f,h;typeof u=="object"&&u!=null?{span:c,offset:f,order:h}=u:c=u;const d=l!==o?`-${l}`:"";c&&s.push(c===!0?`${t}${d}`:`${t}${d}-${c}`),h!=null&&a.push(`order${d}-${h}`),f!=null&&a.push(`offset${d}-${f}`)}),[{...i,className:qi(n,...s,...a)},{as:e,bsPrefix:t,spans:s}]}const Gn=Z.forwardRef((e,t)=>{const[{className:n,...i},{as:r="div",bsPrefix:o,spans:s}]=dF(e);return M.jsx(r,{...i,ref:t,className:qi(n,!s.length&&o)})});Gn.displayName="Col";const po=Z.forwardRef(({bsPrefix:e,className:t,as:n="div",...i},r)=>{const o=AE(e,"row"),s=DE(),a=OE(),l=`${o}-cols`,u=[];return s.forEach(c=>{const f=i[c];delete i[c];let h;f!=null&&typeof f=="object"?{cols:h}=f:h=f;const d=c!==a?`-${c}`:"";h!=null&&u.push(`${l}${d}-${h}`)}),M.jsx(n,{ref:r,...i,className:qi(t,o,...u)})});po.displayName="Row";const FE=30,pF=Ee("RU'U'R'R'FRF'UUR'FRF'"),mF=Te(Ee("FRUR'U'F'fRUR'U'f'")),gF=Te(Ee("fRUR'U'f'U'FRUR'U'F'")),vF=Te(Ee("fRUR'U'f'UFRUR'U'F'")),yF=Te(Ee("r'UURUR'Ur")),xF=Te(Ee("rU'U'R'U'RU'r'")),wF=Te(Ee("rUR'URU'U'r'")),_F=Te(Ee("r'u'RU'R'UUr")),bF=Te(Ee("RUR'U'R'FRRUR'U'F'")),SF=Te(Ee("RUR'UR'FRF'RU'U'R'")),MF=Te(Ee("r'RRUR'URU'U'R'UM'")),EF=Te(Ee("M'R'U'RU'R'UURU'M")),TF=Te(Ee("fRURRU'R'URU'f'")),LF=Te(Ee("R'FRUR'F'RFU'F'")),CF=Te(Ee("r'U'rR'U'RUr'Ur")),RF=Te(Ee("rUr'RUR'U'rU'r'")),PF=Te(Ee("lU'l'fRRBR'UR'U'f'")),AF=Te(Ee("rUR'URU'U'r'r'U'RU'R'UUr")),DF=Te(Ee("r'RURUU'U'rR'R'FRF'")),OF=Te(Ee("rUR'U'M'M'URU'R'U'M'")),FF=Te(Ee("RU'U'R'U'RUR'U'RU'R'")),kF=Te(Ee("RU'U'R'R'U'RRU'R'R'U'U'R")),NF=Te(Ee("RRD'RU'U'R'DRU'U'R")),IF=Te(Ee("rUR'U'r'FRF'")),BF=Te(Ee("F'rUR'U'r'FR")),UF=Te(Ee("RU'U'R'U'RU'R'")),zF=Te(Ee("RUR'URU'U'R'")),HF=Te(Ee("rUR'U'r'RURU'R'")),jF=Te(Ee("RUR'U'RU'R'F'U'FRUR'")),VF=Te(Ee("fRURRU'U'URRU'R'f'")),WF=Te(Ee("r'F'UFrU'r'U'r")),GF=Te(Ee("RUB'U'R'URBR'")),$F=Te(Ee("RUR'U'R'FRF'")),XF=Te(Ee("RURRU'R'FRURU'F'")),YF=Te(Ee("RU'U'R'R'FRF'RU'U'R'")),qF=Te(Ee("R'U'RU'R'URUlU'R'U")),ZF=Te(Ee("FRU'R'U'RUR'F'")),JF=Te(Ee("RUR'URU'R'U'R'FRF'")),KF=Te(Ee("RUR'F'U'FURUUR'")),QF=Te(Ee("R'FRUR'U'F'UR")),ek=Te(Ee("RUR'URU'U'R'FRUR'U'F'")),tk=Te(Ee("R'U'RU'R'UURFRUR'U'F'")),nk=Te(Ee("B'U'R'URB")),ik=Te(Ee("fRUR'U'f'")),rk=Te(Ee("FRUR'U'F'")),ok=Te(Ee("R'U'R'FRF'UR")),sk=Te(Ee("b'U'R'URU'R'URb")),ak=Te(Ee("FRUR'U'RUR'U'F'")),lk=Te(Ee("RB'R'R'FRRBR'R'F'R")),uk=Te(Ee("r'UrrU'r'r'U'rrUr'")),ck=Te(Ee("fRUR'U'RUR'U'f'")),fk=Te(Ee("R'F'U'FU'RUR'UR")),hk=Te(Ee("r'UURUR'U'RUR'Ur")),dk=Te(Ee("rU'U'R'U'RUR'U'RU'r'")),pk=Te(Ee("rU'U'R'U'r'RRUR'U'rU'r'")),mk=Te(Ee("rUr'URU'R'URU'R'rU'r'")),gk=Te(Ee("RUR'U'M'URU'r'"));function Te(e){let t=e.split(" ").reverse();for(let n=0;n<t.length;n++){let i=t[n],r=i[i.length-1],o;r==="'"?o=i.slice(0,i.length-1):o=i.slice()+"'",t[n]=o}return t.join(" ")}function Ee(e){return e.split("").map((t,n)=>t!=="'"&&t!=="2"?" 01"+t:t==="2"?" 01"+e[n-1]:t).join("").trim()}let vk=e=>{let t=[];for(let n=2;n<=FE;n++)t.push(n);return{name:e,worksFor:t}},Me=(e,t,n)=>{let i=[];for(let r=3;r<=FE;r++){let o=e;e==="Cube x3"&&(o=o.split(""),o.pop(),o.push(r),o=o.join("")),i.push({name:o,moves:yk(r,t),worksFor:[r]}),r<-1&&i.push({name:o+" (Inverse)",moves:wk(r,t),worksFor:[r]})}return i},yk=(e,t,n)=>{const i=[];for(let r=1;r<=Math.floor(e/2);r++)i.push(xk(r,t));return i.join(" ")},xk=(e,t)=>{const n=[];return e>1?t.split(" ").forEach(i=>n.push(Ng(e,i.substring(2).toLowerCase()))):t.split(" ").forEach(i=>n.push(Ng(e,i.substring(2).toUpperCase()))),n.join(" ")},wk=(e,t)=>{const n=[];for(let i=1;i<=Math.floor(e/2);i++)n.push(_k(i,t));return n.join(" ")},_k=(e,t)=>{const n=[];return t.split(" ").forEach(i=>n.push(Ng(e,i.substring(2).toUpperCase()))),n.join(" ")};function Ng(e,t){return(e<10?"0":"")+e+t}let yu=[vk("None Selected"),...Me("OLL-1",pF),...Me("OLL-2",mF),...Me("OLL-3",gF),...Me("OLL-4",vF),...Me("OLL-5",yF),...Me("OLL-6",xF),...Me("OLL-7",wF),...Me("OLL-8",_F),...Me("OLL-9",bF),...Me("OLL-10",SF),...Me("OLL-11",MF),...Me("OLL-12",EF),...Me("OLL-13",TF),...Me("OLL-14",LF),...Me("OLL-15",CF),...Me("OLL-16",RF),...Me("OLL-17",PF),...Me("OLL-18",AF),...Me("OLL-19",DF),...Me("OLL-20",OF),...Me("OLL-21",FF),...Me("OLL-22",kF),...Me("OLL-23",NF),...Me("OLL-24",IF),...Me("OLL-25",BF),...Me("OLL-26",UF),...Me("OLL-27",zF),...Me("OLL-28",HF),...Me("OLL-29",jF),...Me("OLL-30",VF),...Me("OLL-31",WF),...Me("OLL-32",GF),...Me("OLL-33",$F),...Me("OLL-34",XF),...Me("OLL-35",YF),...Me("OLL-36",qF),...Me("OLL-37",ZF),...Me("OLL-38",JF),...Me("OLL-39",KF),...Me("OLL-40",QF),...Me("OLL-41",ek),...Me("OLL-42",tk),...Me("OLL-43",nk),...Me("OLL-44",ik),...Me("OLL-45",rk),...Me("OLL-46",ok),...Me("OLL-47",sk),...Me("OLL-48",ak),...Me("OLL-49",lk),...Me("OLL-50",uk),...Me("OLL-51",ck),...Me("OLL-52",fk),...Me("OLL-53",hk),...Me("OLL-54",dk),...Me("OLL-55",pk),...Me("OLL-56",mk),...Me("OLL-57",gk)];var mo={},pd={};Object.defineProperty(pd,"__esModule",{value:!0});pd.on=bk;pd.off=Sk;function bk(e,t,n,i){i=i||!1,e.addEventListener?e.addEventListener(t,n,i):e.attachEvent&&e.attachEvent("on"+t,function(r){n.call(e,r||window.event)})}function Sk(e,t,n,i){i=i||!1,e.removeEventListener?e.removeEventListener(t,n,i):e.detachEvent&&e.detachEvent("on"+t,n)}var t0={};Object.defineProperty(t0,"__esModule",{value:!0});t0.default=function(e){if(!(e instanceof HTMLElement))return document.documentElement;for(var t=e.style.position==="absolute",n=/(scroll|auto)/,i=e;i;){if(!i.parentNode)return e.ownerDocument||document.documentElement;var r=window.getComputedStyle(i),o=r.position,s=r.overflow,a=r["overflow-x"],l=r["overflow-y"];if(o==="static"&&t){i=i.parentNode;continue}if(n.test(s)&&n.test(a)&&n.test(l))return i;i=i.parentNode}return e.ownerDocument||e.documentElement||document.documentElement};var n0={};Object.defineProperty(n0,"__esModule",{value:!0});n0.default=Mk;function Mk(e,t,n){var i=void 0,r=void 0,o=void 0,s=void 0,a=void 0,l=function u(){var c=+new Date-s;c<t&&c>=0?i=setTimeout(u,t-c):(i=null,n||(a=e.apply(o,r),i||(o=null,r=null)))};return function(){o=this,r=arguments,s=+new Date;var c=n&&!i;return i||(i=setTimeout(l,t)),c&&(a=e.apply(o,r),o=null,r=null),a}}var i0={};Object.defineProperty(i0,"__esModule",{value:!0});i0.default=Ek;function Ek(e,t,n){t||(t=250);var i,r;return function(){var o=n||this,s=+new Date,a=arguments;i&&s<i+t?(clearTimeout(r),r=setTimeout(function(){i=s,e.apply(o,a)},t)):(i=s,e.apply(o,a))}}Object.defineProperty(mo,"__esModule",{value:!0});mo.forceVisible=mo.forceCheck=mo.lazyload=void 0;var kE=function(){function e(t,n){for(var i=0;i<n.length;i++){var r=n[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r0=Z,hh=Yu(r0),Tk=id,at=Yu(Tk),bs=pd,Lk=t0,Ig=Yu(Lk),Ck=n0,Rk=Yu(Ck),Pk=i0,Ak=Yu(Pk);function Yu(e){return e&&e.__esModule?e:{default:e}}function NE(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function IE(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function BE(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Ui={top:0,left:0,width:0,height:0},cl="data-lazyload-listened",Li=[],Bg=[],UE=!1;try{var Dk=Object.defineProperty({},"passive",{get:function(){UE=!0}});window.addEventListener("test",null,Dk)}catch{}var Nr=UE?{capture:!1,passive:!0}:!1,Ok=function(t,n){var i=t.ref,r=void 0,o=void 0,s=void 0,a=void 0;try{var l=n.getBoundingClientRect();r=l.top,o=l.left,s=l.height,a=l.width}catch{r=Ui.top,o=Ui.left,s=Ui.height,a=Ui.width}var u=window.innerHeight||document.documentElement.clientHeight,c=window.innerWidth||document.documentElement.clientWidth,f=Math.max(r,0),h=Math.max(o,0),d=Math.min(u,r+s)-f,g=Math.min(c,o+a)-h,v=void 0,y=void 0,m=void 0,p=void 0;try{var x=i.getBoundingClientRect();v=x.top,y=x.left,m=x.height,p=x.width}catch{v=Ui.top,y=Ui.left,m=Ui.height,p=Ui.width}var w=v-f,b=y-h,_=Array.isArray(t.props.offset)?t.props.offset:[t.props.offset,t.props.offset];return w-_[0]<=d&&w+m+_[1]>=0&&b-_[0]<=g&&b+p+_[1]>=0},Fk=function(t){var n=t.ref;if(!(n.offsetWidth||n.offsetHeight||n.getClientRects().length))return!1;var i=void 0,r=void 0;try{var o=n.getBoundingClientRect();i=o.top,r=o.height}catch{i=Ui.top,r=Ui.height}var s=window.innerHeight||document.documentElement.clientHeight,a=Array.isArray(t.props.offset)?t.props.offset:[t.props.offset,t.props.offset];return i-a[0]<=s&&i+r+a[1]>=0},zE=function(t){var n=t.ref;if(n instanceof HTMLElement){var i=(0,Ig.default)(n),r=t.props.overflow&&i!==n.ownerDocument&&i!==document&&i!==document.documentElement,o=r?Ok(t,i):Fk(t);o?t.visible||(t.props.once&&Bg.push(t),t.visible=!0,t.forceUpdate()):t.props.once&&t.visible||(t.visible=!1,t.props.unmountIfInvisible&&t.forceUpdate())}},HE=function(){Bg.forEach(function(t){var n=Li.indexOf(t);n!==-1&&Li.splice(n,1)}),Bg=[]},Af=function(){for(var t=0;t<Li.length;++t){var n=Li[t];zE(n)}HE()},kk=function(){for(var t=0;t<Li.length;++t){var n=Li[t];n.visible=!0,n.forceUpdate()}HE()},Oc=void 0,In=null,Nk=function(t){return typeof t=="string"},md=function(e){BE(t,e);function t(n){NE(this,t);var i=IE(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n));return i.visible=!1,i.setRef=i.setRef.bind(i),i}return kE(t,[{key:"componentDidMount",value:function(){var i=window,r=this.props.scrollContainer;r&&Nk(r)&&(i=i.document.querySelector(r));var o=this.props.debounce!==void 0&&Oc==="throttle"||Oc==="debounce"&&this.props.debounce===void 0;if(o&&((0,bs.off)(i,"scroll",In,Nr),(0,bs.off)(window,"resize",In,Nr),In=null),In||(this.props.debounce!==void 0?(In=(0,Rk.default)(Af,typeof this.props.debounce=="number"?this.props.debounce:300),Oc="debounce"):this.props.throttle!==void 0?(In=(0,Ak.default)(Af,typeof this.props.throttle=="number"?this.props.throttle:300),Oc="throttle"):In=Af),this.props.overflow){var s=(0,Ig.default)(this.ref);if(s&&typeof s.getAttribute=="function"){var a=1+ +s.getAttribute(cl);a===1&&s.addEventListener("scroll",In,Nr),s.setAttribute(cl,a)}}else if(Li.length===0||o){var l=this.props,u=l.scroll,c=l.resize;u&&(0,bs.on)(i,"scroll",In,Nr),c&&(0,bs.on)(window,"resize",In,Nr)}Li.push(this),zE(this)}},{key:"shouldComponentUpdate",value:function(){return this.visible}},{key:"componentWillUnmount",value:function(){if(this.props.overflow){var i=(0,Ig.default)(this.ref);if(i&&typeof i.getAttribute=="function"){var r=+i.getAttribute(cl)-1;r===0?(i.removeEventListener("scroll",In,Nr),i.removeAttribute(cl)):i.setAttribute(cl,r)}}var o=Li.indexOf(this);o!==-1&&Li.splice(o,1),Li.length===0&&typeof window<"u"&&((0,bs.off)(window,"resize",In,Nr),(0,bs.off)(window,"scroll",In,Nr))}},{key:"setRef",value:function(i){i&&(this.ref=i)}},{key:"render",value:function(){var i=this.props,r=i.height,o=i.children,s=i.placeholder,a=i.className,l=i.classNamePrefix,u=i.style;return hh.default.createElement("div",{className:l+"-wrapper "+a,ref:this.setRef,style:u},this.visible?o:s||hh.default.createElement("div",{style:{height:r},className:l+"-placeholder"}))}}]),t}(r0.Component);md.propTypes={className:at.default.string,classNamePrefix:at.default.string,once:at.default.bool,height:at.default.oneOfType([at.default.number,at.default.string]),offset:at.default.oneOfType([at.default.number,at.default.arrayOf(at.default.number)]),overflow:at.default.bool,resize:at.default.bool,scroll:at.default.bool,children:at.default.node,throttle:at.default.oneOfType([at.default.number,at.default.bool]),debounce:at.default.oneOfType([at.default.number,at.default.bool]),placeholder:at.default.node,scrollContainer:at.default.oneOfType([at.default.string,at.default.object]),unmountIfInvisible:at.default.bool,style:at.default.object};md.defaultProps={className:"",classNamePrefix:"lazyload",once:!1,offset:0,overflow:!1,resize:!1,scroll:!0,unmountIfInvisible:!1};var Ik=function(t){return t.displayName||t.name||"Component"},Bk=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return function(i){return function(r){BE(o,r);function o(){NE(this,o);var s=IE(this,(o.__proto__||Object.getPrototypeOf(o)).call(this));return s.displayName="LazyLoad"+Ik(i),s}return kE(o,[{key:"render",value:function(){return hh.default.createElement(md,t,hh.default.createElement(i,this.props))}}]),o}(r0.Component)}};mo.lazyload=Bk;var Uk=mo.default=md;mo.forceCheck=Af;mo.forceVisible=kk;function Ne(e,t,n){return e>n&&e<t}function zk(e){let t=[],n=e.length/3,r=n/4,o=[];for(let s=0;s<n;s++)o.push(e[s]),o.length===r&&(t.push(o),o=[]);return t}function Hk(e,t,n,i){let r="",o=e,s="",a=0,l=t;const u=l-1,c=0;if(l===2)return{solveState:2};let f=zk(i),h=f[0][0],d=f[3][0],g=f[1][0],v=f[2][0];for(let m=0;m<o.length;m++)if(r.length&&(s=" "),o[m].includes("white")){let p=0,x=-1,w=o[m][6],b=o[m][7],_=o[m][8];for(let S=0;S<6;S++)o[m][S]==="black"?p++:o[m][S]==="white"&&(x=S);p===4&&(m===h&&a===0&&(Ne(w,u,c)&&b===c&&_===u?x?r+=s+"01U' 01R' 01F'":a++:w===u&&b===c&&Ne(_,u,c)?x?r+=s+"01R 01U":r+=s+"01F'":Ne(w,u,c)&&b===c&&_===c?x?r+=s+"01D 01R 01F'":r+=s+"01F2":w===c&&b===c&&Ne(_,u,c)?x?r+=s+"01L' 01U'":r+=s+"01F":w===c&&Ne(b,u,c)&&_===u?x===1?r+=s+"01L 01F":r+=s+"01U'":w===u&&Ne(b,u,c)&&_===u?x===1?r+=s+"01R' 01F'":r+=s+"01U":w===u&&Ne(b,u,c)&&_===c?x===2?r+=s+"01D' 01F2":r+=s+"01R 01F'":w===c&&Ne(b,u,c)&&_===c?x===4?r+=s+"01D 01F2":r+=s+"01L' 01F":Ne(w,u,c)&&b===u&&_===u?x===3?r+=s+"01U2":r+=s+"01B 01L 01U'":w===u&&b===u&&Ne(_,u,c)?x===3?r+=s+"01R2 01F'":r+=s+"01R' 01U":Ne(w,u,c)&&b===u&&_===c?x===3?r+=s+"01B2 01U2":r+=s+"01B' 01L 01U'":w===c&&b===u&&Ne(_,u,c)&&(x===3?r+=s+"01B' 01U2":r+=s+"01L 01U'")),m===d&&a===1&&(w===c&&b===c&&Ne(_,u,c)?x?r+=s+"01L' 01R 01U' 01R'":a++:Ne(w,u,c)&&b===c&&_===c?x?r+=s+"01D' 01L'":r+=s+"01D' 01F' 01D 01F":w===u&&b===c&&Ne(_,u,c)&&(x?r+=s+"01R 01F 01U 01F'":r+=s+"01R 01F2 01R' 01F2"),w===c&&Ne(b,u,c)&&_===u?x===1?r+=s+"01L":r+=s+"01F 01U' 01F'":w===u&&Ne(b,u,c)&&_===u?x===1?r+=s+"01F2 01R' 01F2":r+=s+"01U 01F' 01U'":w===u&&Ne(b,u,c)&&_===c?x===2?r+=s+"01F' 01D' 01F":r+=s+"01F2 01R 01F2":w===c&&Ne(b,u,c)&&_===c&&(x===4?r+=s+"01F' 01D 01F":r+=s+"01L'"),Ne(w,u,c)&&b===u&&_===u?x===3?r+=s+"01F 01U2 01F'":r+=s+"01U' 01L 01U":w===u&&b===u&&Ne(_,u,c)?x===3?r+=s+"01B2 01L2":r+=s+"01R' 01F 01U 01F'":Ne(w,u,c)&&b===u&&_===c?x===3?r+=s+"01F' 01D2 01F":r+=s+"01D 01L'":w===c&&b===u&&Ne(_,u,c)&&(x===3?r+=s+"01L2":r+=s+"01B' 01U' 01L 01U")),m===g&&a===2&&(Ne(w,u,c)&&b===c&&_===c?x?r+=s+"01D 01R":r+=s+"01D 01F 01D' 01F'":w===u&&b===c&&Ne(_,u,c)&&(x?r+=s+"01R 01F' 01U 01F":a++),w===c&&Ne(b,u,c)&&_===u?x===1?r+=s+"01F2 01L 01F2":r+=s+"01F' 01U' 01F":w===u&&Ne(b,u,c)&&_===u?x===1?r+=s+"01R'":r+=s+"01F' 01U 01F":w===u&&Ne(b,u,c)&&_===c?x===2?r+=s+"01F 01D' 01F'":r+=s+"01R":w===c&&Ne(b,u,c)&&_===c&&(x===4?r+=s+"01F 01D 01F'":r+=s+"01F2 01L' 01F2"),Ne(w,u,c)&&b===u&&_===u?x===3?r+=s+"01F' 01U2 01F":r+=s+"01U 01R' 01U'":w===u&&b===u&&Ne(_,u,c)?x===3?r+=s+"01R2":r+=s+"01R' 01F' 01U 01F":Ne(w,u,c)&&b===u&&_===c?x===3?r+=s+"01F 01D2 01F'":r+=s+"01D' 01L":w===c&&b===u&&Ne(_,u,c)&&(x===3?r+=s+"01B2 01R2":r+=s+"01B' 01U 01R' 01U'")),m===v&&a===3&&(Ne(w,u,c)&&b===c&&_===c&&(x?r+=s+"01D 01F' 01R 01F":a++),w===c&&Ne(b,u,c)&&_===u?x===1?r+=s+"01F 01L 01F'":r+=s+"01F2 01U' 01F2":w===u&&Ne(b,u,c)&&_===u?x===1?r+=s+"01F' 01R' 01F":r+=s+"01F2 01U 01F2":w===u&&Ne(b,u,c)&&_===c?x===2?r+=s+"01D'":r+=s+"01F' 01R 01F":w===c&&Ne(b,u,c)&&_===c&&(x===4?r+=s+"01D":r+=s+"01F 01L' 01F'"),Ne(w,u,c)&&b===u&&_===u?x===3?r+=s+"01F2 01U2 01F2":r+=s+"01B 01L' 01D 01L":w===u&&b===u&&Ne(_,u,c)?x===3?r+=s+"01F' 01R2 01F":r+=s+"01R 01D' 01R'":Ne(w,u,c)&&b===u&&_===c?x===3?r+=s+"01D2":r+=s+"01D' 01F' 01R 01F":w===c&&b===u&&Ne(_,u,c)&&(x===3?r+=s+"01F 01L2 01F'":r+=s+"01L' 01D 01L")))}const y=n(r);return a<4?{moveSet:y}:{solveState:2}}function jk(e,t,n,i){let r="",o=e,s=0,a=t,l=a-1,u=0,c=i[0],f=i[1],h=i[2],d=i[3];for(let v=0;v<o.length;v++){let y=-1,m=o[v][6],p=o[v][7],x=o[v][8];for(let w=0;w<6;w++)o[v][w]==="white"&&(y=w);v===c&&s===0&&(m===u&&p===u&&x===l?y===0?s++:y===1?r="01L' 01B 01L 01B' 01L' 01B 01L":r="01L' 01B' 01L 01B2 01U 01B' 01U'":m===l&&p===u&&x===l?r="01R 01L' 01B 01L 01R'":m===l&&p===u&&x===u?r="01R' 01B' 01R 01U 01B' 01U'":m===u&&p===u&&x===u?r="01D' 01U 01B 01U' 01D":m===u&&p===l&&x===l?r="01U 01B 01U'":m===l&&p===l&&x===l?r="01L' 01B 01L":m===l&&p===l&&x===u?r="01L' 01B2 01L":m===u&&p===l&&x===u&&(r="01U 01B' 01U'")),v===f&&s===1&&(m===l&&p===u&&x===l?y===0?s++:y===1?r="01R 01B' 01R' 01B 01R 01B' 01R'":r="01U' 01B 01U 01B' 01U' 01B 01U":m===l&&p===u&&x===u?r="01U' 01D 01B 01D' 01U":m===u&&p===u&&x===u?r="01L 01R 01B2 01R' 01L'":m===u&&p===l&&x===l?r="01R 01B' 01R'":m===l&&p===l&&x===l?r="01B 01R 01B' 01R'":m===l&&p===l&&x===u?r="01B2 01R 01B' 01R'":m===u&&p===l&&x===u&&(r="01R 01B2 01R'")),v===h&&s===2&&(m===u&&p===u&&x===u?y===0?s++:y===4?r="01D' 01B 01D 01B' 01D' 01B 01D":r="01L 01B' 01L' 01B 01L 01B' 01L'":m===l&&p===u&&x===u?r="01R' 01L 01B' 01L' 01R":m===u&&p===l&&x===l?r="01D' 01B 01D":m===l&&p===l&&x===l?r="01D' 01B2 01D":m===l&&p===l&&x===u?r="01B' 01D' 01B' 01D":m===u&&p===l&&x===u&&(r="01D' 01B' 01D")),v===d&&s===3&&(m===l&&p===u&&x===u?y===0?s++:y===2?r="01D 01B' 01D' 01B 01D 01B' 01D'":r="01R' 01B 01R 01B' 01R' 01B 01R":m===u&&p===l&&x===l?r=" 01R' 01B2 01R":m===l&&p===l&&x===l?r="01D 01B' 01D'":m===l&&p===l&&x===u?r="01B 01D 01B' 01D'":m===u&&p===l&&x===u&&(r="01R' 01B 01R"))}const g=n(r);return s<4?{moveSet:g}:a===2?{solveState:6}:{solveState:3}}function lt(e,t,n){return e>n&&e<t}function Vk(e){let t=[],n=e.length/3,r=n/4,o=[];for(let s=n*2;s<n*3;s++)o.push(e[s]),o.length===r&&(t.push(o),o=[]);return t}function Wk(e,t,n,i){let r="",o=e,s="",a=0,l="01B 01U 01B' 01U' 01B' 01L' 01B 01L",u="01B 01R 01B' 01R' 01B' 01U' 01B 01U",c="01B 01D 01B' 01D' 01B' 01R' 01B 01R",f="01B 01L 01B' 01L' 01B' 01D' 01B 01D",h=0,d=i-1,g=Vk(n),v=g[0][0],y=g[1][0],m=g[3][0],p=g[2][0];for(let w=0;w<o.length;w++){r.length&&(s=" ");let b=-1,_=-1,S=o[w][6],L=o[w][7],E=o[w][8];for(let A=0;A<6;A++)o[w][A]==="black"||(o[w][A]==="blue"?b=A:o[w][A]==="green"&&(_=A));w===v&&a===0&&(S===h&&lt(L,d,h)&&E===d?b===1?a++:r+=s+l:S===d&&lt(L,d,h)&&E===d?r+=s+u:S===h&&lt(L,d,h)&&E===h?r+=s+f:S===d&&lt(L,d,h)&&E===h?r+=s+c:S===h&&L===d&&lt(E,d,h)?b===3?r+=s+l:r+=s+"01B2 01L' 01B' 01L 01B 01U 01B 01U'":lt(S,d,h)&&L===d&&E===d?r+=s+"01B":S===d&&L===d&&lt(E,d,h)?r+=s+"01B2":lt(S,d,h)&&L===d&&E===h&&(r+=s+"01B'")),w===y&&a===1&&(S===d&&lt(L,d,h)&&E===d?b===1?a++:r+=s+u:S===h&&lt(L,d,h)&&E===h?r+=s+f:S===d&&lt(L,d,h)&&E===h?r+=s+c:lt(S,d,h)&&L===d&&E===d?b===1?r+=s+u:r+=s+"01B2 01U' 01B' 01U 01B 01R 01B 01R'":S===d&&L===d&&lt(E,d,h)?r+=s+"01B":lt(S,d,h)&&L===d&&E===h?r+=s+"01B2":S===h&&L===d&&lt(E,d,h)&&(r+=s+"01B'")),w===m&&a===2&&(S===h&&lt(L,d,h)&&E===h?_===5?a++:r+=s+f:S===d&&lt(L,d,h)&&E===h?r+=s+c:lt(S,d,h)&&L===d&&E===h?_===5?r+=s+f:r+=s+"01B2 01D' 01B' 01D 01B 01L 01B 01L'":S===h&&L===d&&lt(E,d,h)?r+=s+"01B":lt(S,d,h)&&L===d&&E===d?r+=s+"01B2":S===d&&L===d&&lt(E,d,h)&&(r+=s+"01B'")),w===p&&a===3&&(S===d&&lt(L,d,h)&&E===h?_===5?a++:r+=s+c:S===d&&L===d&&lt(E,d,h)?_===3?r+=s+c:r+=s+"01B2 01R' 01B' 01R 01B 01D 01B 01D'":lt(S,d,h)&&L===d&&E===h?r+=s+"01B":S===h&&L===d&&lt(E,d,h)?r+=s+"01B2":lt(S,d,h)&&L===d&&E===d&&(r+=s+"01B'"))}const x=t(r);return a<4?{moveSet:x}:{solveState:4}}function Gk(e){let t=[],n=e.length/3,r=n/4,o=[];for(let s=n;s<n*2;s++)o.push(e[s]),o.length===r&&(t.push(o),o=[]);return t}function Fc(e,t,n){return e>n&&e<t}function sr(e,t){return(e<10?"0":"")+e+t}function $k(e,t,n,i){if(i===2)return{solveState:5};let r="",o=e,s="01U 01R 01B 01R' 01B' 01U'",a=i-1,l=0,u=Gk(n),c=[u[0][0],u[3][0],u[1][0],u[2][0]],f=[];for(let g=0;g<4;g++)Fc(o[c[g]][6],a,l)&&o[c[g]][7]===a&&o[c[g]][8]===a?f[0]=o[c[g]][3]:o[c[g]][6]===l&&o[c[g]][7]===a&&Fc(o[c[g]][8],a,l)?f[1]=o[c[g]][3]:o[c[g]][6]===a&&o[c[g]][7]===a&&Fc(o[c[g]][8],a,l)?f[2]=o[c[g]][3]:Fc(o[c[g]][6],a,l)&&o[c[g]][7]===a&&o[c[g]][8]===l&&(f[3]=o[c[g]][3]);let h=!1;if(i%2===0&&i>=4){let g=0;for(let v=0;v<4;v++)o[c[v]][3]==="yellow"&&g++;g%2&&(h=!0,r=`${sr(i/2,"r")} 01B2 ${sr(i/2,"r'")} 01B2
          ${sr(i/2,"r")} 01B2 ${sr(i/2,"r")} 01B2
          ${sr(i/2,"l'")} 01B2 ${sr(i/2,"r")} 01B2
          ${sr(i/2,"r'")} 01B2 01D2
          ${sr(i/2,"r2")} 01D2 ${sr(i,"r'")}`)}h||o[c[0]][3]==="yellow"&&o[c[1]][3]==="yellow"&&o[c[2]][3]==="yellow"&&o[c[3]][3]==="yellow"||(f[0]==="yellow"&&f[3]==="yellow"?r="01B "+s:f[1]==="yellow"&&f[2]==="yellow"?r=s:f[0]==="yellow"&&f[2]==="yellow"?r="01B2 "+s+" "+s:f[1]==="yellow"&&f[3]==="yellow"?r=s+" "+s:f[0]==="yellow"&&f[1]==="yellow"?r="01B "+s+" "+s:f[2]==="yellow"&&f[3]?r="01B' "+s+" "+s:r=s);const d=t(r);return r.length?{moveSet:d}:{solveState:5}}function Xk(e){let t=[],n=e.length/3,r=n/4,o=[];for(let s=n;s<n*2;s++)o.push(e[s]),o.length===r&&(t.push(o),o=[]);return t}function Ir(e,t,n){return e>n&&e<t}function Yk(e,t,n,i){if(i===2)return{solveState:6};let r="",o=e,s=i-1,a=0,l=Xk(n),u=[l[0][0],l[3][0],l[1][0],l[2][0]];Ir(o[u[0]][6],s,a)&&o[u[0]][7]===s&&o[u[0]][8]===s?o[u[1]][6]===a&&Ir(o[u[1]][8],s,a)&&o[u[2]][6]===s&&Ir(o[u[2]][8],s,a)||(o[u[1]][6]===s&&Ir(o[u[2]][8],s,a)&&Ir(o[u[3]][6],s,a)&&o[u[3]][8]===a?r="01D 01B 01D' 01B 01D 01B2 01D' 01B2 01L 01B 01L' 01B 01L 01B2 01L' 01B":(o[u[3]][6]===s&&Ir(o[u[3]][8],s,a)||o[u[3]][6]===a&&Ir(o[u[3]][8],s,a))&&(r="01R 01B 01R' 01B 01R 01B2 01R' 01B")):o[u[0]][6]===s&&o[u[0]][7]===s&&Ir(o[u[0]][8],s,a)?r="01B":r="01B'";const c=t(r);return r.length?{moveSet:c}:{solveState:6}}function fl(e,t){return(e<10?"0":"")+e+t}function qk(e,t,n,i,r){let o="",s=e,a="01U' 01F' 01U 01F 01U' 01F' 01U 01F",l=t,u=l-1,c=0,f=r[4],h=r[5],d=r[6],g=r[7],v;if(s[f][3]==="yellow"&&s[h][3]==="yellow"&&s[d][3]==="yellow"&&s[g][3]==="yellow"?s[f][6]===c&&s[f][8]===u||(o="01B"):s[f][3]!=="yellow"?o=a:s[h][3]!=="yellow"?s[h][6]===c&&s[h][8]===u?o=a:o="01B":s[g][3]!=="yellow"?s[g][6]===c&&s[g][8]===u?o=a:o="01B":s[d][3]!=="yellow"&&(s[d][6]===c&&s[d][8]===u?o=a:o="01B"),v=n(o),o.length)return{moveSet:v};if(l===2)if(s[f][6]===c&&s[f][8]===u){if(s[h][6]===u&&s[h][8]===u)if(s[d][6]===c&&s[d][8]===c){let y={moveLog:"",currentFunc:"None",moveSet:[],solveState:-1};return i.length&&(y.solveMoves=""),y}else return o="01R 01D' 01R' 01F' 01R' 01F 01D",v=n(o),{moveSet:v}}else return o="01B",v=n(o),{moveSet:v};else if(l>3){if(s[f][6]===c&&s[f][8]===u&&s[h][6]===u&&s[h][8]===u)if(s[d][6]===c&&s[d][8]===c){let y={moveLog:"",currentFunc:"None",moveSet:[],solveState:-1};return i.length&&(y.solveMoves=""),y}else return o="02R2 01B2 02R2 01B2 02B2 02R2 02B2",o=`${fl(l/2,"r2")} 01R2 01B2 ${fl(l/2,"r2")} 01R2 01B2 ${fl(l/2,"b2")} 01B2 ${fl(l/2,"r2")} 01R2 ${fl(l/2,"b2")} 01B2`,v=n(o),{moveSet:v,solveState:4}}else{let y={moveLog:"",currentFunc:"None",moveSet:[],solveState:-1};return i.length&&(y.solveMoves=""),y}}function hl(e,t){return(e<10?"0":"")+e+t}function Zk(e,t,n,i){let r="",o=e,s=t,a=s-1,l=0,u=i[4],c=i[5],f=i[6],h=i[7],d=0;if(o[u][6]===o[u][9]&&o[u][7]===o[u][10]&&o[u][8]===o[u][11]&&d++,o[c][6]===o[c][9]&&o[c][7]===o[c][10]&&o[c][8]===o[c][11]&&d++,o[f][6]===o[f][9]&&o[f][7]===o[f][10]&&o[f][8]===o[f][11]&&d++,o[h][6]===o[h][9]&&o[h][7]===o[h][10]&&o[h][8]===o[h][11]&&d++,!(o[u][6]===l&&o[u][8]===a&&o[c][6]===a&&o[c][8]===a))if(d===2&&s>3){r="02D2 01B2 02D2 02b2 02D2 02b2",r=`${hl(s/2,"d2")} 01D2 01B2 ${hl(s/2,"d2")} 01D2 ${hl(s/2,"b2")} ${hl(s/2,"d2")} 01D2 ${hl(s/2,"b2")}`;const v=n(r);if(r.length)return{moveSet:v,solveState:5}}else o[u][6]===l&&o[u][8]===a?r="01B 01U 01B' 01D' 01B 01U' 01B' 01D":o[c][6]===a&&o[c][8]===a?r="01B 01R 01B' 01L' 01B 01R' 01B' 01L":o[f][6]===l&&o[f][8]===l?r="01B 01L 01B' 01R' 01B 01L' 01B' 01R":o[h][6]===a&&o[h][8]===l?r="01B 01D 01B' 01U' 01B 01D' 01B' 01U":r="01B 01U 01B' 01D' 01B 01U' 01B' 01D";const g=n(r);return r.length?{moveSet:g}:{solveState:7}}function St(e,t,n){return e+(t<10?"0":"")+t+n}let Jk=(e,t,n,i)=>{let r="F",o=Math.floor(i/(n-2)),s=i%(n-2),a="";return e.x===0?r="L":e.x===n-1?r="R":e.y===n-1?r="B":e.z===0?r="D":e.z===n-1&&(r="U"),t.x===1?n-t.z===2?r==="F"?a="01F":r!=="D"&&r!=="U"?e.z!==n-2?a="01"+r:a=St("",n-e.z,"U"):e.x!==t.x?a="01"+r:a="02L":r==="F"?a=St("",e.z+1,"D'"):r==="B"?e.z<=t.z?a=St("",e.z+1,"D"):a="01B":r==="L"?e.y!==n-2||e.z!==t.z?a="01L":a=St("",e.z+1,"D"):a=St("",e.y+1,"F'"):o===0?r==="F"?e.z<t.z&&e.x>=t.x?a=St("",n-e.x,"R"):a=St("",e.z+1,"D"):r==="B"?e.x===t.x&&e.z!==t.z?a=St("",s+2,"L2"):a="01B":e.y===n-2?e.z!==n-1?a=St("",o+2,"B"):e.x!==t.x?a="01U":a=St("",s+2,"L"):a="01"+r:r==="F"?e.z<t.z?a=St("",n-e.z,"U"):(a=St("",n-e.z,"U"),a+=St(" ",n-e.x,"F'"),a+=St(" ",n-e.z,"U'")):r==="B"?e.z===t.z?t.x===e.x?(a=St("",n-e.z,"U"),a+=St(" ",e.x+1,"B"),a+=St(" ",n-e.z,"U'")):(a=St("",n-e.z,"U"),a+=" 01R",a+=St(" ",n-e.z,"U'")):a="01B":r!=="U"?a+=St(" ",e.y+1,"F"):e.x!==t.x||e.y!==t.z?a="01U":(a="01U'",a+=St(" ",n-t.z,"U'"),a+=St(" ",e.x+1,"F"),a+=St(" ",n-t.z,"U")),a};function Ni(e,t,n){return e+(t<10?"0":"")+t+n}let Kk=(e,t,n,i)=>{let r="F",o=Math.floor(n/2),s="";return e.x===0?r="L":e.x===n-1?r="R":e.y===n-1?r="B":e.z===0?r="D":e.z===n-1&&(r="U"),r==="B"?(s+=Ni(" ",e.z+1,"D'"),s+=n%2&&e.z===o?" 01R":" 01R2",s+=Ni(" ",e.z+1,"D"),s+=n%2&&e.z===o?" 01R":"",s+=Ni(" ",e.x+1,"F"),s+=n%2&&e.z===o?" 01R'":"",s+=Ni(" ",e.z+1,"D'"),s+=n%2&&e.z===o?" 01R'":" 01R2",s+=Ni(" ",e.z+1,"D")):r!=="R"?s=Ni("",e.y+1,"F"):e.y!==n-(t.x+1)||e.z!==t.z?s="01R":(s=Ni("",e.y+1,"F'"),s+=Ni(" ",e.z+1,"D'"),e.y>=o&&e.z>=o||e.y<o&&e.z<o?s+=" 01L":s+=" 01L'",s+=Ni(" ",e.y+1,"F"),e.y>=o&&e.z>=o||e.y<o&&e.z<o?s+=" 01L'":s+=" 01L",s+=Ni(" ",e.z+1,"D")),s};function Mt(e,t,n){return e+(t<10?"0":"")+t+n}let Qk=(e,t,n)=>{let i="F",r=Math.floor(n/2),o=n%2,s="";if(e.x===0?i="L":e.x===n-1?i="R":e.z===0?i="D":e.z===n-1&&(i="U"),o&&t.x===r&&t.y===r)switch(i){case"L":s=Mt("",e.y+1,"F'"),s+=" 01L",s+=Mt(" ",e.y+1,"F"),s+=" 01L'",s+=Mt(" ",e.y+1,"F");break;case"D":s=Mt("",e.y+1,"F'"),s+=" 01L",s+=Mt(" ",e.y+1,"F2"),s+=" 01L'",s+=Mt(" ",e.y+1,"F");break;case"R":s=Mt("",e.y+1,"F"),s+=" 01R",s+=Mt(" ",e.y+1,"F'"),s+=" 01R'",s+=Mt(" ",e.y+1,"F'");break;default:console.log("Shouldn't be checking middle if already in solved location.")}else i==="U"?(s=Mt("",e.y+1,"F"),s+=Mt(" ",e.x+1,"U2"),o&&e.y===r&&(s+=" 01L'"),s+=Mt(" ",e.y+1,"F'"),o&&e.y===r&&(s+=" 01L"),s+=Mt(" ",e.x+1,"U2")):i==="R"?n-e.z===t.x+1&&e.y===t.y?(s=Mt("",t.x+1,"U2"),o&&t.y===r&&(s+=" 01L'"),s+=Mt(" ",t.y+1,"F"),o&&t.y===r&&(s+=" 01L"),s+=Mt(" ",t.x+1,"U2"),s+=Mt(" ",t.y+1,"F'")):s="01R'":i==="L"?e.z===t.x&&e.y===t.y?(s=Mt("",e.z+1,"D2"),o&&t.y===r&&(s+=" 01R"),s+=Mt(" ",t.y+1,"F'"),o&&t.y===r&&(s+=" 01R'"),s+=Mt(" ",e.z+1,"D2"),s+=Mt(" ",t.y+1,"F")):s="01L":e.y!==t.y?s="01D":(s=Mt("",t.y+1,"F'"),s+=" 01R",s+=Mt(" ",t.y+1,"F"));return s};function te(e,t){return(e<10?"0":"")+e+t}function eN(e,t){let n="F";return e.x===0?n="L":e.x===t-1?n="R":e.y===t-1?n="B":e.z===0?n="D":e.z===t-1&&(n="U"),n}let tN=(e,t,n)=>{const i=eN(e,n),r=Math.floor(n/2),o=r+1,s=r-1,a=[];if(n%2===0)i==="D"&&(t.x===r-1&&t.y===r-1&&t.z===0?a.push("01D"):t.x===r&&t.y===r-1&&t.z===0?(a.push(te(e.y+1,"F'")),a.push("01R2"),a.push(te(e.y+1,"F"))):t.x===r-1&&t.y===r&&t.z===0?(a.push(te(r+1,"F'")),a.push("01R'"),a.push(te(r+1,"F"))):t.x===t.y||t.x===n-1-t.y||n-1-t.x===n-1-t.y||n-1-t.x===t.y?t.y<r&&t.x<r?a.push("01D"):t.x>r&&t.y<r?a.push(te(e.y+1,"F'"),"01R2",te(e.y+1,"F")):t.x<r&&t.y>r&&a.push(te(e.y+1,"F'"),"01R",te(e.y+1,"F")):a.push("01R'","01D'",te(n-e.x,"F"),"01D",te(n-e.y,"B'"),"01D'",te(n-e.x,"F'"),"01D",te(n-e.y,"B"),"01R")),i==="R"&&(t.x===r-1&&t.y===r-1&&t.z===0?(a.push(te(e.y+1,"F")),a.push("01D2"),a.push(te(e.y+1,"F'"))):t.x===r&&t.y===r-1&&t.z===0?e.y===r&&e.z===r?(a.push("01D"),a.push(te(r+1,"F")),a.push("01D'"),a.push(te(r+1,"F'"))):a.push("01R"):t.x===r-1&&t.y===r&&t.z===0?e.y===r&&e.z===r-1?(a.push("01R"),a.push(te(r+1,"F'")),a.push("01R'"),a.push(te(r+1,"F"))):a.push("01R"):t.x===r&&t.y===r&&t.z===0?e.y===r-1&&e.z===r?(a.push(te(r+1,"F'")),a.push("01R'"),a.push(te(r+1,"F")),a.push("01R"),a.push(te(r+1,"F'")),a.push("01R"),a.push(te(r+1,"F"))):a.push("01R"):t.x===t.y||t.x===n-1-t.y||n-1-t.x===n-1-t.y||n-1-t.x===t.y?e.y<r&&e.z<r?t.x<r&&t.y<r?a.push(te(e.y+1,"F"),"01D'",te(e.y+1,"F'"),"01D"):t.x>r&&t.y<r?a.push("01D'",te(e.y+1,"F"),"01D'",te(e.y+1,"F'"),"01D2"):t.x<r&&t.y>r?a.push(te(n-e.y,"F'"),"01R'",te(n-e.y,"F")):t.x>r&&t.y>r&&a.push("01R'",te(n-e.y,"F"),"01D'",te(n-e.y,"F'"),"01R2","01D",te(n-e.y,"F'"),"01R2",te(n-e.y,"F")):a.push("01R"):e.y===t.y&&e.z===t.x?a.push("01R'","01D'",te(n-e.z,"F"),"01D",te(n-e.y,"B'"),"01D'",te(n-e.z,"F'"),"01D",te(n-e.y,"B"),"01R"):a.push("01R"));else if(n%2)switch(i){case"D":t.x>=s&&t.x<=o&&t.y>=s&&t.y<=o?t.y===s?t.x===s?a.push("01D"):t.x===r?e.x<r?(a.push(te(e.y+1,"F")),a.push("01D'"),a.push(te(e.y+1,"F'")),a.push("01D")):e.x>r?(a.push(te(e.y+1,"F")),a.push("01D"),a.push(te(e.y+1,"F'")),a.push("01D'")):(a.push(te(e.y+1,"F'")),a.push("01R'"),a.push(te(e.y+1,"F"))):(a.push(te(e.y+1,"F")),a.push("01D"),a.push(te(e.y+1,"F'")),a.push("01D'")):t.y===r?t.x===s?e.y===r?(a.push(te(s+1,"F")),a.push("01D2"),a.push(te(s+1,"F'"))):(a.push(te(s+1,"F")),a.push("01D"),a.push(te(s+1,"F'"))):(a.push(te(e.y+1,"F'")),a.push("01R"),a.push(te(e.y+1,"F"))):t.x===s&&(a.push(te(e.y+1,"F'")),a.push("01R"),a.push(te(e.y+1,"F"))):t.x===t.y||t.x===n-1-t.y||n-1-t.x===n-1-t.y||n-1-t.x===t.y?t.y<r&&t.x<r?a.push("01D"):t.x>r&&t.y<r?a.push(te(e.y+1,"F'"),"01R2",te(e.y+1,"F")):t.x<r&&t.y>r&&a.push(te(e.y+1,"F'"),"01R",te(e.y+1,"F")):a.push("01R'","01D'",te(n-e.x,"F"),"01D",te(n-e.y,"B'"),"01D'",te(n-e.x,"F'"),"01D",te(n-e.y,"B"),"01R");break;case"R":t.x>=r-1&&t.x<=r+1&&t.y>=r-1&&t.y<=r+1?t.y===s?t.x===s?(a.push(te(e.y+1,"F")),a.push("01D2"),a.push(te(e.y+1,"F'"))):t.x===r?e.z===o?(a.push("01D"),a.push(te(e.y+1,"F")),a.push("01D'"),a.push(te(e.y+1,"F'"))):a.push("01R"):e.y===o&&e.z===o?(a.push("01D"),a.push(te(e.y+1,"F")),a.push("01D'"),a.push(te(e.y+1,"F'"))):a.push("01R"):t.y===r?t.x===s?e.y===o?(a.push(te(r+1,"F'")),a.push("01R"),a.push(te(r+1,"F"))):a.push("01R'"):e.z===s?(a.push(te(s+1,"F")),a.push("01D'"),a.push(te(s+1,"F'")),a.push("01R"),a.push(te(s+1,"F")),a.push("01D"),a.push(te(s+1,"F'"))):a.push("01R'"):t.x===s?e.z===s&&e.y===s?(a.push(te(o+1,"F'")),a.push("01R'"),a.push(te(o+1,"F"))):a.push("01R"):t.x===r?e.y===o?(a.push(te(e.y+1,"F'")),a.push("01R'"),a.push(te(e.y+1,"F")),a.push("01R'"),a.push(te(e.y+1,"F'")),a.push("01R"),a.push(te(e.y+1,"F"))):a.push("01R"):e.y===o&&e.z===s?(a.push(te(e.y+1,"F")),a.push("01D'"),a.push(te(e.y+1,"F'")),a.push("01D'"),a.push(te(e.y+1,"F")),a.push("01D2"),a.push(te(e.y+1,"F'"))):a.push("01R"):t.x===t.y||t.x===n-1-t.y||n-1-t.x===n-1-t.y||n-1-t.x===t.y?e.y<r&&e.z<r?t.x<r&&t.y<r?a.push(te(e.y+1,"F"),"01D'",te(e.y+1,"F'"),"01D"):t.x>r&&t.y<r?a.push("01D'",te(e.y+1,"F"),"01D'",te(e.y+1,"F'"),"01D2"):t.x<r&&t.y>r?a.push(te(n-e.y,"F'"),"01R'",te(n-e.y,"F")):t.x>r&&t.y>r&&a.push("01R'",te(n-e.y,"F"),"01D'",te(n-e.y,"F'"),"01R2","01D",te(n-e.y,"F'"),"01R2",te(n-e.y,"F")):a.push("01R"):e.y===t.y&&e.z===t.x?a.push("01R'","01D'",te(n-e.z,"F"),"01D",te(n-e.y,"B'"),"01D'",te(n-e.z,"F'"),"01D",te(n-e.y,"B"),"01R"):a.push("01R");break;default:console.log("Woops something broke. Only red and green should be unsolved.")}return a.join(" ")};function W(e,t){return(e<10?"0":"")+e+t}let nN=(e,t,n)=>{let i=Math.floor(n/2),r=n%2,o=[],s="F";if(e.x===0?s="L":e.x===n-1?s="R":e.z===0&&(s="D"),n%2===0)switch(s){case"L":t.x===0&&t.y===i-1&&t.z===i?o.push("01L"):t.x===0&&t.y===i-1&&t.z===i-1||t.x===0&&t.y===i&&t.z===i?(o.push(W(e.y+1,"F'")),o.push(" 01D2"),o.push(W(e.y+1,"F"))):t.z===t.y||t.z===n-1-t.y||n-1-t.z===n-1-t.y||n-1-t.z===t.y?e.z<i-1&&e.y<i-1?o.push("01L'","01D'",W(e.y+1,"B'"),"01D",W(e.y+1,"F'"),"01D'",W(e.y+1,"B"),"01D",W(e.y+1,"F"),"01L"):e.z>i&&e.y<i-1?o.push("01D'",W(e.y+1,"B'"),"01D",W(e.y+1,"F'"),"01D'",W(e.y+1,"B"),"01D",W(e.y+1,"F")):e.z>i&&e.y>i?o.push("01L","01D'",W(n-e.y,"B'"),"01D",W(n-e.y,"F'"),"01D'",W(n-e.y,"B"),"01D",W(n-e.y,"F"),"01L'"):e.z<i-1&&e.y>i&&o.push("01L2","01D'",W(n-e.y,"B'"),"01D",W(n-e.y,"F'"),"01D'",W(n-e.y,"B"),"01D",W(n-e.y,"F"),"01L2"):o.push("01D'",W(n-1-e.z+1,"B'"),"01D",W(e.y+1,"F'"),"01D'",W(n-1-e.z+1,"B"),"01D",W(e.y+1,"F"));break;case"D":t.x===0&&t.y===i-1&&t.z===i?(o.push(W(e.y+1,"F")),o.push(" 01L2"),o.push(W(e.y+1,"F'"))):t.x===0&&t.y===i-1&&t.z===i-1?e.x===i&&e.y===i?o.push("01L",W(i,"F'"),"01D'",W(i,"F")):o.push("01D"):t.x===0&&t.y===i&&t.z===i?e.y===i-1&&e.x===i-1?o.push(W(i+1,"F'"),"01D'",W(i+1,"F")):o.push("01D"):t.x===0&&t.y===i&&t.z===i-1?e.y===i-1&&e.x===i?o.push(W(i+1,"F'"),"01D'",W(i+1,"F"),"01D",W(i+1,"F'"),"01D",W(i+1,"F")):o.push("01D"):t.x===t.y||t.x===n-1-t.y||n-1-t.z===n-1-t.y||n-1-t.z===t.y?e.x<i-1&&e.y<i-1?t.z<i-1&&t.y<i-1?o.push("01L'","01D'",W(t.y+1,"B'"),"01D",W(t.y+1,"F'"),"01D'",W(t.y+1,"B"),"01D",W(t.y+1,"F"),"01L"):t.z>i&&t.y<i-1?o.push("01D'",W(t.y+1,"B'"),"01D",W(t.y+1,"F'"),"01D'",W(t.y+1,"B"),"01D",W(t.y+1,"F")):t.z>i&&t.y>i?o.push("01L","01D'",W(n-t.y,"B'"),"01D",W(n-t.y,"F'"),"01D'",W(n-t.y,"B"),"01D",W(n-t.y,"F"),"01L'"):t.z<i-1&&t.y>i&&o.push("01L2","01D'",W(n-t.y,"B'"),"01D",W(n-t.y,"F'"),"01D'",W(n-t.y,"B"),"01D",W(n-t.y,"F"),"01L2"):o.push("01D"):e.y===t.y&&e.x===n-1-t.z?o.push("01D'",W(e.x+1,"B'"),"01D",W(e.y+1,"F'"),"01D'",W(e.x+1,"B"),"01D",W(e.y+1,"F")):o.push("01D");break;case"R":t.x===0&&t.y===i-1&&t.z===i?(o.push(W(e.y+1,"F2")),o.push("01L2"),o.push(W(e.y+1,"F2"))):t.x===0&&t.y===i-1&&t.z===i-1||t.x===0&&t.y===i&&t.z===i-1||t.x===0&&t.y===i&&t.z===i?(o.push(W(e.y+1,"F")),o.push("01D2"),o.push(W(e.y+1,"F'"))):o.push(W(e.y+1,"F"),"01D",W(e.y+1,"F'"));break;default:console.log("Something broke")}else if(n%2){switch(s){case"L":t.z>=i-1&&t.z<=i+1&&t.y>=i-1&&t.y<=i+1?t.x===0&&t.y===i-1&&t.z===i+1?o.push("01L"):t.y===i-1?(o.push(W(e.y+1,"F'")),i&&r?o.push("01D'",W(e.y+1,"F")):o.push("01D2",W(e.y+1,"F"))):t.y===i?(o.push(W(e.y+1,"F'")),o.push("01D'"),o.push(W(e.y+1,"F"))):t.y===i+1&&t.z===i+1&&(o.push(W(e.y+1,"F'")),o.push("01D"),o.push(W(e.y+1,"F"))):t.z===t.y||t.z===n-1-t.y||n-1-t.z===n-1-t.y||n-1-t.z===t.y?e.z<i-1&&e.y<i-1?o.push("01L'","01D'",W(e.y+1,"B'"),"01D",W(e.y+1,"F'"),"01D'",W(e.y+1,"B"),"01D",W(e.y+1,"F"),"01L"):e.z>i&&e.y<i-1?o.push("01D'",W(e.y+1,"B'"),"01D",W(e.y+1,"F'"),"01D'",W(e.y+1,"B"),"01D",W(e.y+1,"F")):e.z>i&&e.y>i?o.push("01L","01D'",W(n-e.y,"B'"),"01D",W(n-e.y,"F'"),"01D'",W(n-e.y,"B"),"01D",W(n-e.y,"F"),"01L'"):e.z<i-1&&e.y>i&&o.push("01L2","01D'",W(n-e.y,"B'"),"01D",W(n-e.y,"F'"),"01D'",W(n-e.y,"B"),"01D",W(n-e.y,"F"),"01L2"):o.push("01D'",W(n-1-e.z+1,"B'"),"01D",W(e.y+1,"F'"),"01D'",W(n-1-e.z+1,"B"),"01D",W(e.y+1,"F"));break;case"D":t.z>=i-1&&t.z<=i+1&&t.y>=i-1&&t.y<=i+1?t.x===0&&t.y===i-1&&t.z===i+1?o.push(W(e.y+1,"F"),"01L2",W(e.y+1,"F'")):t.y===i-1?e.x<i+1||e.y===i-1?o.push("01D"):o.push("01L",W(e.y+1,"F"),"01L'",W(e.y+1,"F'")):t.y===i?t.z===i+1?e.y!==i-1?o.push("01D"):(o.push(W(i+1,"F'")),o.push("01D'"),o.push(W(i+1,"F"))):t.z===i-1&&(e.y!==i+1?o.push("01D"):(o.push(W(i+1,"F'")),o.push(W(e.y+1,"F")),o.push("01D"),o.push(W(e.y+1,"F'")),o.push("01D'"),o.push(W(i+1,"F")))):t.y===i+1&&(t.z===i+1?e.x===i-1&&e.y===i-1?(o.push(W(i+1+1,"F'")),o.push("01D'"),o.push(W(i+1+1,"F"))):o.push("01D"):t.z===i?e.x===i+1?(o.push(W(i+1+1,"F2")),o.push("01R'"),o.push(W(i+1+1,"F")),o.push("01D"),o.push(W(i+1+1,"F"))):o.push("01D'"):t.z===i-1&&(e.x===i-1&&e.y===i+1?(o.push(W(i+1+1,"F")),o.push("01L'"),o.push(W(i+1+1,"F'")),o.push("01L"),o.push("01D2"),o.push(W(i+1+1,"F'")),o.push("01D2"),o.push(W(i+1+1,"F"))):o.push("01D"))):t.z===t.y||t.z===n-1-t.y||n-1-t.z===n-1-t.y||n-1-t.z===t.y?e.x<i-1&&e.y<i-1?t.z<i-1&&t.y<i-1?o.push("01L'","01D'",W(t.y+1,"B'"),"01D",W(t.y+1,"F'"),"01D'",W(t.y+1,"B"),"01D",W(t.y+1,"F"),"01L"):t.z>i&&t.y<i-1?o.push("01D'",W(t.y+1,"B'"),"01D",W(t.y+1,"F'"),"01D'",W(t.y+1,"B"),"01D",W(t.y+1,"F")):t.z>i&&t.y>i?o.push("01L","01D'",W(n-t.y,"B'"),"01D",W(n-t.y,"F'"),"01D'",W(n-t.y,"B"),"01D",W(n-t.y,"F"),"01L'"):t.z<i-1&&t.y>i&&o.push("01L2","01D'",W(n-t.y,"B'"),"01D",W(n-t.y,"F'"),"01D'",W(n-t.y,"B"),"01D",W(n-t.y,"F"),"01L2"):o.push("01D"):e.y===t.y&&e.x===n-1-t.z?o.push("01D'",W(e.x+1,"B'"),"01D",W(e.y+1,"F'"),"01D'",W(e.x+1,"B"),"01D",W(e.y+1,"F")):o.push("01D");break;case"R":t.z>=i-1&&t.z<=i+1&&t.y>=i-1&&t.y<=i+1?t.x===0&&t.y===i-1&&t.z===i+1?o.push(W(e.y+1,"F2"),"01L2",W(e.y+1,"F2")):t.y===i-1?e.z!==i+1||e.y===i-1?o.push("01R"):o.push("01L",W(e.y+1,"F2"),"01L'",W(e.y+1,"F2")):t.y===i?(o.push(W(e.y+1,"F")),o.push("01D"),o.push(W(e.y+1,"F'"))):t.y===i+1&&(t.z===i+1?e.y===i-1&&e.z===i-1?(o.push(W(i+1+1,"F2")),o.push("01R'"),o.push(W(i+1+1,"F2"))):o.push("01R"):t.z===i?(o.push(W(e.y+1,"F")),o.push("01D"),o.push(W(e.y+1,"F'"))):t.z===i-1&&(o.push(W(e.y+1,"F")),o.push("01D2"),o.push(W(e.y+1,"F'")))):o.push(W(e.y+1,"F"),"01D",W(e.y+1,"F'"));break;default:return console.log("Something broke"),""}return o.join(" ")}return o.join(" ")};function iN(e,t,n){let i=e,r=Math.floor(n/((i-2)*(i-2))),o={x:t[6],y:t[7],z:t[8]},s={x:t[9],y:t[10],z:t[11]};function a(l){switch(l){case 0:return Jk(o,s,i,n);case 1:return Kk(o,s,i);case 2:return Qk(o,s,i);case 3:return nN(o,s,i);case 4:return tN(o,s,i);default:console.log("Should never reach here")}}return o.x===s.x&&o.y===s.y&&o.z===s.z?"":a(r)}function rN(e,t,n,i,r){if(t===2)return{solveState:1};const o=(t-2)*(t-2)*5,s={};let a="";if(t===3){e[4][7]===0&&e[10][8]===2||(e[4][8]===2?e[12][6]===0?a+="02R'":a+="02U'":e[4][6]===0?e[10][8]===2?a+="02U'":a+="02R'":e[4][6]===2?e[10][8]===2?a+="02U":a+="02R'":e[4][8]===0?e[12][6]===0?a+="02R":a+="02U'":e[4][7]===2?e[10][8]===2?a+="02U2":a+="02F'":a+="02B'");const l=n(a);a.trim().length?s.moveSet=l:s.solveState=1}else if(i<o){a=iN(t,e[r[i]],i);const l=n(a);a.trim().length?s.moveSet=l:s.rubiksIndex=i+1}else s.solveState=.1,s.rubiksIndex=0,s.currentFunc="Solving",s.moveSet=["stop"];return s}function on(e,t,n){return e+(t<10?"0":"")+t+n}function oN(e,t,n){if(e.z===t)return`${on("",e.x+1,"L'")} 01B' 01R 01B ${on("",e.x+1,"L")} 01R'`;if(e.x===t)return`${on("",e.z+1,"D")} 01B' 01D 01B ${on("",e.z+1,"D'")} 01D'`;if(e.z===n)return`${on("",e.x+1,"L")} 01B' 01L 01B ${on("",e.x+1,"L'")} 01L'`;if(e.x===n)return`${on("",e.z+1,"D'")} 01B' 01U 01B ${on("",e.z+1,"D")} 01U'`}function sN(e,t,n,i){if(e.x===t&&e.z===t)return i===1?"01U' 01B 01U":"01R 01B 01R'";if(e.x===n&&e.z===t)return i===1?"01U 01B 01U'":"01L' 01B 01L";if(e.x===t&&e.z===n)return i===5?"01D 01B 01D'":"01R' 01B 01R";if(e.x===n&&e.z===n)return i===1?"01D' 01B 01U":"01L 01B 01L'"}function aN(e,t,n){if(e.z===t)return"01U 01R 01B2 01R' 01U' 01B'";if(e.x===t)return"01R 01D 01B2 01D' 01R' 01B'";if(e.z===n)return"01D 01L 01B2 01L' 01D' 01B'";if(e.x===n)return"01L 01U 01B2 01U' 01L' 01B'"}function lN(e,t,n,i){return e.z===n&&t.z===n?`${on("",e.x+1,"L")} 01F 01R' 01F' ${on("",e.x+1,"L'")} 01F 01R 01F'`:e.x===n&&t.x===n?`${on("",e.z+1,"D'")} 01F 01D' 01F' ${on("",e.z+1,"D")} 01F 01D 01F'`:e.z===i&&t.z===i?`${on("",e.x+1,"L'")} 01F 01L' 01F' ${on("",e.x+1,"L")} 01F 01L 01F'`:e.x===i&&t.x===i?`${on("",e.z+1,"D")} 01F 01U' 01F' ${on("",e.z+1,"D'")} 01F 01U 01F'`:""}let uN=(e,t,n,i)=>{const o=n-1,s=0;let a="";return e.y===s?a=oN(e,o,s):e.y>s&&e.y<o?a=sN(e,o,s,i):e.y===o&&i===3?a=aN(e,o,s):e.z===t.z&&e.x===t.x?a=lN(e,t,o,s):a="01B",a};function rt(e,t,n){return e+(t<10?"0":"")+t+n}let cN=(e,t,n,i)=>{const l=n-1,u=0;let c="";if(t.z===l)e.y<l&&e.z===l&&e.x===l?i===2?c=`01L' 01B 01L ${rt("",e.y+1,"F'")} 01L' 01B 01L 01B2 ${rt("",e.y+1,"F")}`:c="01R 01B 01R' 01B' 01U' 01B 01U":e.z===t.z&&e.y===t.y?c=`01L' 01B 01L ${rt("",n-e.x,"F'")} 01L' 01B 01L 01B2 ${rt("",n-e.x,"F")}`:e.y===l&&e.z!==l?c="01U' 01B 01U":e.y!==l&&(e.z===l&&e.x===u?c="01L' 01B' 01L 01B":e.z===u&&e.x===u?c="01L 01B' 01L' 01B":e.z===u&&e.x===l&&(c="01R' 01B 01R 01B'"));else if(t.x===l)e.y<l&&e.z===u&&e.x===l?i===5?c=`01U' 01B 01U ${rt("",e.y+1,"F'")} 01U' 01B 01U 01B2 ${rt("",e.y+1,"F")} 01R' 01B2 01R`:c="01D 01B 01D' 01B' 01R' 01B 01R2 01B' 01R'":e.x===t.x&&e.y===t.y?c=`01U' 01B 01U ${rt("",e.z+1,"F'")} 01U' 01B 01U 01B2 ${rt("",e.z+1,"F")} 01R' 01B2 01R`:e.y===l?e.z===u?c="01R' 01B 01R2 01B' 01R'":e.x===u&&(c="01R' 01B2 01R2 01B2 01R'"):e.y!==l&&(e.x===l&&e.z===l?c="01B 01R 01B 01R' 01B2":e.x===u&&e.z===l?c="01L' 01B' 01L 01B":e.x===u&&e.z===u&&(c="01D' 01B 01D 01B'"));else if(t.z===u)e.y<l&&e.z===u&&e.x===u?i===4?c=`01R' 01B 01R ${rt("",e.y+1,"F'")} 01R' 01B 01R 01B2 ${rt("",e.y+1,"F")} 01D 01U' 01B2 01D' 01U`:c="01L 01B 01L' 01B' 01D' 01B 01D2 01B' 01D' 01B' 01R' 01B' 01R 01B2":e.z===t.z&&e.y===t.y?c=`01R' 01B 01R ${rt("",e.x+1,"F'")} 01R' 01B 01R 01B2 ${rt("",e.x+1,"F")} 01D 01U' 01B2 01D' 01U`:e.y===l?c="01D' 01B 01D2 01B' 01D'":e.y<l&&(c="01D 01R 01U 01B 01U' 01R' 01D'");else if(t.x===u){const f="01R 01B' 01R' 01B 01U 01B 01U' 01B'",h=`01D' 01B 01D ${rt("",e.y+1,"F'")} 01D' 01B 01D 01B2 ${rt("",e.y+1,"F")} 01L 01R' 01B2 01R 01L'`,d="01B 01U 01B' 01U' 01B' 01R 01B 01R'",g="01R 01B 01R' 01B' 01U' 01B 01U2 01B' 01U' 01B' 01L' 01B' 01L 01B2";e.y<l&&e.z===l&&e.x===l?i===2?c=`${f} ${h} ${d}`:c=`${g}`:e.y<l&&e.z===l&&e.x===u?i===1?c=`${rt("",n-1,"f")} ${f} ${h} ${d} ${rt("",n-1,"f'")}`:c=`${rt("",n-1,"f")} ${g} ${rt("",n-1,"f'")}`:e.y<l&&e.z===u&&e.x===u?i===4?c=`${rt("",n-1,"f2")} ${f} ${h} ${d} ${rt("",n-1,"f2")}`:c=`${rt("",n-1,"f2")} ${g} ${rt("",n-1,"f2")}`:e.y<l&&e.z===u&&e.x===l?i===5?c=`${rt("",n-1,"f'")} ${f} ${h} ${d} ${rt("",n-1,"f")}`:c=`${rt("",n-1,"f'")} ${g} ${rt("",n-1,"f")}`:e.x===t.x&&e.y===t.y&&(c=`${f} 01D' 01B 01D ${rt("",n-e.z,"F'")} 01D' 01B 01D 01B2 ${rt("",n-e.z,"F")} 01L 01R' 01B2 01L' 01R 01L 01D 01R 01B 01R' 01D' 01L'`)}return c};function De(e,t){return(e<10?"0":"")+e+t}let fN=(e,t,n)=>{const i=n-1,r=0,o=Math.floor(n/2);let s=[],a=t.x===r&&t.z===i,l=t.x===i&&t.z===i,u=t.x===i&&t.z===r,c=["01R","01U'","01B","01R'","01U"],f=["01D","01R'","01B","01D'","01R"],h=["01L","01D'","01B","01L'","01D"];const d=[De(o+1,"B'"),"01R","01B","01R'","01U","01R'","01U'","01R",De(o+1,"B")],g=[De(o+1,"B'"),"01D","01B","01D'","01R","01D'","01R'","01D",De(o+1,"B")],v=[De(o+1,"B'"),"01L","01B","01L'","01D","01L'","01D'","01L",De(o+1,"B")],y=[De(o,"b2"),"01L2","01D2",De(o,"b2"),"01D2","01L2",De(o,"b2"),"01D2"],m=[De(o,"f"),"01L2",De(o,"f"),"01L2",De(o,"f'"),"01L2",De(o,"f"),"01L2",De(o,"b'"),"01L2",De(o,"f"),"01L2",De(o,"f'"),"01L2",De(n,"f'"),De(o,"f'"),"01L2",De(o,"f'"),"01L2",De(o+1,"F"),"01L'","01B","01D"];let p=E=>["01F",De(E,"F"),"01R","01U'","01B","01R'","01U","01F'",De(E,"F'")],x=E=>[De(E,"B'"),"01B'","01R","01U'","01B","01R'","01U",De(E,"B"),"01B"],w=E=>["01F",De(E,"F"),"01D","01R'","01B","01D'","01R","01F'",De(E,"F'")],b=E=>[De(E,"B'"),"01B'","01D","01R'","01B","01D'","01R",De(E,"B"),"01B"],_=E=>["01F",De(E,"F"),"01L","01D'","01B","01L'","01D","01F'",De(E,"F'")],S=E=>[De(E,"B'"),"01B'","01L","01D'","01B","01L'","01D",De(E,"B"),"01B"],L=E=>[De(E,"B'"),"01D2",De(E,"F"),"01L2",De(E,"F'"),"01L2",De(E,"B2"),"01D2",De(E,"B"),"01D2",De(E,"B'"),"01D2","01L2",De(E,"B2"),"01L2"];return n>4&&n%2&&e.y===o?a?e.x===r&&e.z===r?s=[De(o+1,"F'"),"01D2",De(o+1,"F")]:e.x===i&&e.z===r?s=["01D2"]:e.x===i&&e.z===i?s=[De(o+1,"F"),"01R2",De(o+1,"F'")]:s=d:l?e.x===r&&e.z===r?s=["01D2"]:e.x===i&&e.z===r?s=[De(o+1,"F"),"01D2",De(o+1,"F'")]:s=g:u?e.x===i&&e.z===r?s=v:s=y:s=m:a?e.x===r&&e.z===i?e.y>=o?s=x(n-e.y):s=p(e.y+1):e.x===i&&e.z===i?e.y===t.y?s=c:e.y>=o?s=p(n-e.y):s=x(e.y+1):e.x===r&&e.z===r?s.push("01D2","01R2"):s.push("01R2"):l?e.x===i&&e.z===i?e.y>=o?s=b(n-e.y):s=w(e.y+1):e.x===i&&e.z===r?e.y===t.y?s=f:e.y>=o?s=w(n-e.y):s=b(e.y+1):s.push("01D2"):u?e.x===i&&e.z===r?e.y===i-1?s=S(n-e.y):s=_(e.y+1):e.x===r&&e.z===r&&(e.y===t.y?s=h:e.y===i-1?s=_(n-e.y):s=S(e.y+1)):s=L(e.y+1),s.join(" ")};function kc(e,t){return e.indexOf(t)}function hN(e,t,n,i,r){const o=e,s=4,a=o-2,l=Math.floor(n/(a*s)),u=kc(t,"white"),c=kc(t,"yellow"),f=kc(t,"blue"),h=kc(t,"green");let d="",g={x:t[6],y:t[7],z:t[8]},v={x:t[9],y:t[10],z:t[11]};if(g.x===v.x&&g.y===v.y&&g.z===v.z&&(u===0&&l===0||c===3&&l===1||f===1&&l===2||h===5&&l===2))return"";switch(l){case 0:d=uN(g,v,o,u);break;case 1:d=cN(g,v,o,c);break;case 2:d=fN(g,v,o);break;default:console.log("Should never reach here")}return d}function dN(e,t,n,i,r){const a=(t-2)*12;let l="";const u={};return r<a?(l=hN(t,e[i[r]],r),l.trim().length?u.moveSet=n(l):u.rubiksIndex=r+1):(u.solveState=1,u.rubiksIndex=0,u.currentFunc="Solving",u.moveSet=["stop"]),u}const ar={SOLVE_MIDDLES:0,SOLVE_EDGES:.1,SOLVE_WHITE_CROSS:1,SOLVE_WHITE_CORNERS:2,SOLVE_MIDDLE_EDGES:3,SOLVE_YELLOW_CROSS:4,ALIGN_YELLOW_CROSS:5,ALIGN_YELLOW_CORNERS:6,SOLVE_YELLOW_CORNERS:7};function pN(e,t,n,i,r,o,s,a,l){switch(e){case ar.SOLVE_MIDDLES:return rN(t,n,i,o,s);case ar.SOLVE_EDGES:return dN(t,n,i,a,o);case ar.SOLVE_WHITE_CROSS:return Hk(t,n,i,a);case ar.SOLVE_WHITE_CORNERS:return jk(t,n,i,l);case ar.SOLVE_MIDDLE_EDGES:return Wk(t,i,a,n);case ar.SOLVE_YELLOW_CROSS:return $k(t,i,a,n);case ar.ALIGN_YELLOW_CROSS:return Yk(t,i,a,n);case ar.ALIGN_YELLOW_CORNERS:return Zk(t,n,i,l);case ar.SOLVE_YELLOW_CORNERS:return qk(t,n,i,r,l);default:console.log("invalid solve state")}}const jE="125",Yr={ROTATE:0,DOLLY:1,PAN:2},qr={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},mN=0,Kx=1,gN=2,VE=1,vN=2,Ll=3,gd=0,xt=1,Ti=2,WE=1,Hl=0,jl=1,Qx=2,ew=3,tw=4,yN=5,Ws=100,xN=101,wN=102,nw=103,iw=104,_N=200,bN=201,SN=202,MN=203,GE=204,$E=205,EN=206,TN=207,LN=208,CN=209,RN=210,PN=0,AN=1,DN=2,Ug=3,ON=4,FN=5,kN=6,NN=7,vd=0,IN=1,BN=2,Vl=0,UN=1,zN=2,HN=3,jN=4,VN=5,XE=300,o0=301,s0=302,rw=303,ow=304,a0=306,l0=307,zg=1e3,Vn=1001,Hg=1002,gn=1003,sw=1004,aw=1005,un=1006,WN=1007,yd=1008,u0=1009,GN=1010,$N=1011,dh=1012,XN=1013,Df=1014,Kr=1015,ph=1016,YN=1017,qN=1018,ZN=1019,Wl=1020,JN=1021,Zo=1022,Di=1023,KN=1024,QN=1025,ma=1026,xu=1027,eI=1028,tI=1029,nI=1030,iI=1031,rI=1032,oI=1033,lw=33776,uw=33777,cw=33778,fw=33779,hw=35840,dw=35841,pw=35842,mw=35843,sI=36196,gw=37492,vw=37496,aI=37808,lI=37809,uI=37810,cI=37811,fI=37812,hI=37813,dI=37814,pI=37815,mI=37816,gI=37817,vI=37818,yI=37819,xI=37820,wI=37821,_I=36492,bI=37840,SI=37841,MI=37842,EI=37843,TI=37844,LI=37845,CI=37846,RI=37847,PI=37848,AI=37849,DI=37850,OI=37851,FI=37852,kI=37853,NI=2200,II=2201,BI=2202,mh=2300,Of=2301,Wp=2302,ra=2400,oa=2401,gh=2402,c0=2500,YE=2501,UI=0,qu=3e3,qE=3001,zI=3007,HI=3002,jI=3003,VI=3004,WI=3005,GI=3006,$I=3200,XI=3201,Xa=0,YI=1,Gp=7680,qI=519,xd=35044,wu=35048,yw="300 es";function ir(){}Object.assign(ir.prototype,{addEventListener:function(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)},hasEventListener:function(e,t){if(this._listeners===void 0)return!1;const n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1},removeEventListener:function(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const r=i.indexOf(t);r!==-1&&i.splice(r,1)}},dispatchEvent:function(e){if(this._listeners===void 0)return;const n=this._listeners[e.type];if(n!==void 0){e.target=this;const i=n.slice(0);for(let r=0,o=i.length;r<o;r++)i[r].call(this,e)}}});const qt=[];for(let e=0;e<256;e++)qt[e]=(e<16?"0":"")+e.toString(16);let Nc=1234567;const ke={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){const e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(qt[e&255]+qt[e>>8&255]+qt[e>>16&255]+qt[e>>24&255]+"-"+qt[t&255]+qt[t>>8&255]+"-"+qt[t>>16&15|64]+qt[t>>24&255]+"-"+qt[n&63|128]+qt[n>>8&255]+"-"+qt[n>>16&255]+qt[n>>24&255]+qt[i&255]+qt[i>>8&255]+qt[i>>16&255]+qt[i>>24&255]).toUpperCase()},clamp:function(e,t,n){return Math.max(t,Math.min(n,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,n,i,r){return i+(e-t)*(r-i)/(n-t)},lerp:function(e,t,n){return(1-n)*e+n*t},damp:function(e,t,n,i){return ke.lerp(e,t,1-Math.exp(-n*i))},pingpong:function(e,t=1){return t-Math.abs(ke.euclideanModulo(e,t*2)-t)},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t),e*e*(3-2*e))},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t),e*e*e*(e*(e*6-15)+10))},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},seededRandom:function(e){return e!==void 0&&(Nc=e%2147483647),Nc=Nc*16807%2147483647,(Nc-1)/2147483646},degToRad:function(e){return e*ke.DEG2RAD},radToDeg:function(e){return e*ke.RAD2DEG},isPowerOfTwo:function(e){return(e&e-1)===0&&e!==0},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))},setQuaternionFromProperEuler:function(e,t,n,i,r){const o=Math.cos,s=Math.sin,a=o(n/2),l=s(n/2),u=o((t+i)/2),c=s((t+i)/2),f=o((t-i)/2),h=s((t-i)/2),d=o((i-t)/2),g=s((i-t)/2);switch(r){case"XYX":e.set(a*c,l*f,l*h,a*u);break;case"YZY":e.set(l*h,a*c,l*f,a*u);break;case"ZXZ":e.set(l*f,l*h,a*c,a*u);break;case"XZX":e.set(a*c,l*g,l*d,a*u);break;case"YXY":e.set(l*d,a*c,l*g,a*u);break;case"ZYZ":e.set(l*g,l*d,a*c,a*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}};class ee{constructor(t=0,n=0){Object.defineProperty(this,"isVector2",{value:!0}),this.x=t,this.y=n}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,n){return this.x=t,this.y=n,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,n){switch(t){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t,n){return n!==void 0?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,n)):(this.x+=t.x,this.y+=t.y,this)}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,n){return this.x=t.x+n.x,this.y=t.y+n.y,this}addScaledVector(t,n){return this.x+=t.x*n,this.y+=t.y*n,this}sub(t,n){return n!==void 0?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,n)):(this.x-=t.x,this.y-=t.y,this)}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,n){return this.x=t.x-n.x,this.y=t.y-n.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const n=this.x,i=this.y,r=t.elements;return this.x=r[0]*n+r[3]*i+r[6],this.y=r[1]*n+r[4]*i+r[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,n){return this.x=Math.max(t.x,Math.min(n.x,this.x)),this.y=Math.max(t.y,Math.min(n.y,this.y)),this}clampScalar(t,n){return this.x=Math.max(t,Math.min(n,this.x)),this.y=Math.max(t,Math.min(n,this.y)),this}clampLength(t,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(n,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const n=this.x-t.x,i=this.y-t.y;return n*n+i*i}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,n){return this.x+=(t.x-this.x)*n,this.y+=(t.y-this.y)*n,this}lerpVectors(t,n,i){return this.x=t.x+(n.x-t.x)*i,this.y=t.y+(n.y-t.y)*i,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,n=0){return this.x=t[n],this.y=t[n+1],this}toArray(t=[],n=0){return t[n]=this.x,t[n+1]=this.y,t}fromBufferAttribute(t,n,i){return i!==void 0&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(n),this.y=t.getY(n),this}rotateAround(t,n){const i=Math.cos(n),r=Math.sin(n),o=this.x-t.x,s=this.y-t.y;return this.x=o*i-s*r+t.x,this.y=o*r+s*i+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}}class li{constructor(){Object.defineProperty(this,"isMatrix3",{value:!0}),this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(t,n,i,r,o,s,a,l,u){const c=this.elements;return c[0]=t,c[1]=r,c[2]=a,c[3]=n,c[4]=o,c[5]=l,c[6]=i,c[7]=s,c[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}clone(){return new this.constructor().fromArray(this.elements)}copy(t){const n=this.elements,i=t.elements;return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],this}extractBasis(t,n,i){return t.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const n=t.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,n){const i=t.elements,r=n.elements,o=this.elements,s=i[0],a=i[3],l=i[6],u=i[1],c=i[4],f=i[7],h=i[2],d=i[5],g=i[8],v=r[0],y=r[3],m=r[6],p=r[1],x=r[4],w=r[7],b=r[2],_=r[5],S=r[8];return o[0]=s*v+a*p+l*b,o[3]=s*y+a*x+l*_,o[6]=s*m+a*w+l*S,o[1]=u*v+c*p+f*b,o[4]=u*y+c*x+f*_,o[7]=u*m+c*w+f*S,o[2]=h*v+d*p+g*b,o[5]=h*y+d*x+g*_,o[8]=h*m+d*w+g*S,this}multiplyScalar(t){const n=this.elements;return n[0]*=t,n[3]*=t,n[6]*=t,n[1]*=t,n[4]*=t,n[7]*=t,n[2]*=t,n[5]*=t,n[8]*=t,this}determinant(){const t=this.elements,n=t[0],i=t[1],r=t[2],o=t[3],s=t[4],a=t[5],l=t[6],u=t[7],c=t[8];return n*s*c-n*a*u-i*o*c+i*a*l+r*o*u-r*s*l}invert(){const t=this.elements,n=t[0],i=t[1],r=t[2],o=t[3],s=t[4],a=t[5],l=t[6],u=t[7],c=t[8],f=c*s-a*u,h=a*l-c*o,d=u*o-s*l,g=n*f+i*h+r*d;if(g===0)return this.set(0,0,0,0,0,0,0,0,0);const v=1/g;return t[0]=f*v,t[1]=(r*u-c*i)*v,t[2]=(a*i-r*s)*v,t[3]=h*v,t[4]=(c*n-r*l)*v,t[5]=(r*o-a*n)*v,t[6]=d*v,t[7]=(i*l-u*n)*v,t[8]=(s*n-i*o)*v,this}transpose(){let t;const n=this.elements;return t=n[1],n[1]=n[3],n[3]=t,t=n[2],n[2]=n[6],n[6]=t,t=n[5],n[5]=n[7],n[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).copy(this).invert().transpose()}transposeIntoArray(t){const n=this.elements;return t[0]=n[0],t[1]=n[3],t[2]=n[6],t[3]=n[1],t[4]=n[4],t[5]=n[7],t[6]=n[2],t[7]=n[5],t[8]=n[8],this}setUvTransform(t,n,i,r,o,s,a){const l=Math.cos(o),u=Math.sin(o);return this.set(i*l,i*u,-i*(l*s+u*a)+s+t,-r*u,r*l,-r*(-u*s+l*a)+a+n,0,0,1),this}scale(t,n){const i=this.elements;return i[0]*=t,i[3]*=t,i[6]*=t,i[1]*=n,i[4]*=n,i[7]*=n,this}rotate(t){const n=Math.cos(t),i=Math.sin(t),r=this.elements,o=r[0],s=r[3],a=r[6],l=r[1],u=r[4],c=r[7];return r[0]=n*o+i*l,r[3]=n*s+i*u,r[6]=n*a+i*c,r[1]=-i*o+n*l,r[4]=-i*s+n*u,r[7]=-i*a+n*c,this}translate(t,n){const i=this.elements;return i[0]+=t*i[2],i[3]+=t*i[5],i[6]+=t*i[8],i[1]+=n*i[2],i[4]+=n*i[5],i[7]+=n*i[8],this}equals(t){const n=this.elements,i=t.elements;for(let r=0;r<9;r++)if(n[r]!==i[r])return!1;return!0}fromArray(t,n=0){for(let i=0;i<9;i++)this.elements[i]=t[i+n];return this}toArray(t=[],n=0){const i=this.elements;return t[n]=i[0],t[n+1]=i[1],t[n+2]=i[2],t[n+3]=i[3],t[n+4]=i[4],t[n+5]=i[5],t[n+6]=i[6],t[n+7]=i[7],t[n+8]=i[8],t}}let Ss;const Ya={getDataURL:function(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Ss===void 0&&(Ss=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),Ss.width=e.width,Ss.height=e.height;const n=Ss.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=Ss}return t.width>2048||t.height>2048?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}};let ZI=0;function ht(e=ht.DEFAULT_IMAGE,t=ht.DEFAULT_MAPPING,n=Vn,i=Vn,r=un,o=yd,s=Di,a=u0,l=1,u=qu){Object.defineProperty(this,"id",{value:ZI++}),this.uuid=ke.generateUUID(),this.name="",this.image=e,this.mipmaps=[],this.mapping=t,this.wrapS=n,this.wrapT=i,this.magFilter=r,this.minFilter=o,this.anisotropy=l,this.format=s,this.internalFormat=null,this.type=a,this.offset=new ee(0,0),this.repeat=new ee(1,1),this.center=new ee(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new li,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=u,this.version=0,this.onUpdate=null}ht.DEFAULT_IMAGE=void 0;ht.DEFAULT_MAPPING=XE;ht.prototype=Object.assign(Object.create(ir.prototype),{constructor:ht,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this},toJSON:function(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(this.image!==void 0){const i=this.image;if(i.uuid===void 0&&(i.uuid=ke.generateUUID()),!t&&e.images[i.uuid]===void 0){let r;if(Array.isArray(i)){r=[];for(let o=0,s=i.length;o<s;o++)i[o].isDataTexture?r.push($p(i[o].image)):r.push($p(i[o]))}else r=$p(i);e.images[i.uuid]={uuid:i.uuid,url:r}}n.image=i.uuid}return t||(e.textures[this.uuid]=n),n},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(this.mapping!==XE)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case zg:e.x=e.x-Math.floor(e.x);break;case Vn:e.x=e.x<0?0:1;break;case Hg:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case zg:e.y=e.y-Math.floor(e.y);break;case Vn:e.y=e.y<0?0:1;break;case Hg:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}});Object.defineProperty(ht.prototype,"needsUpdate",{set:function(e){e===!0&&this.version++}});function $p(e){return typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap?Ya.getDataURL(e):e.data?{data:Array.prototype.slice.call(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}class ot{constructor(t=0,n=0,i=0,r=1){Object.defineProperty(this,"isVector4",{value:!0}),this.x=t,this.y=n,this.z=i,this.w=r}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,n,i,r){return this.x=t,this.y=n,this.z=i,this.w=r,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,n){switch(t){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w!==void 0?t.w:1,this}add(t,n){return n!==void 0?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,n)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,n){return this.x=t.x+n.x,this.y=t.y+n.y,this.z=t.z+n.z,this.w=t.w+n.w,this}addScaledVector(t,n){return this.x+=t.x*n,this.y+=t.y*n,this.z+=t.z*n,this.w+=t.w*n,this}sub(t,n){return n!==void 0?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,n)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,n){return this.x=t.x-n.x,this.y=t.y-n.y,this.z=t.z-n.z,this.w=t.w-n.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const n=this.x,i=this.y,r=this.z,o=this.w,s=t.elements;return this.x=s[0]*n+s[4]*i+s[8]*r+s[12]*o,this.y=s[1]*n+s[5]*i+s[9]*r+s[13]*o,this.z=s[2]*n+s[6]*i+s[10]*r+s[14]*o,this.w=s[3]*n+s[7]*i+s[11]*r+s[15]*o,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const n=Math.sqrt(1-t.w*t.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/n,this.y=t.y/n,this.z=t.z/n),this}setAxisAngleFromRotationMatrix(t){let n,i,r,o;const l=t.elements,u=l[0],c=l[4],f=l[8],h=l[1],d=l[5],g=l[9],v=l[2],y=l[6],m=l[10];if(Math.abs(c-h)<.01&&Math.abs(f-v)<.01&&Math.abs(g-y)<.01){if(Math.abs(c+h)<.1&&Math.abs(f+v)<.1&&Math.abs(g+y)<.1&&Math.abs(u+d+m-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const x=(u+1)/2,w=(d+1)/2,b=(m+1)/2,_=(c+h)/4,S=(f+v)/4,L=(g+y)/4;return x>w&&x>b?x<.01?(i=0,r=.707106781,o=.707106781):(i=Math.sqrt(x),r=_/i,o=S/i):w>b?w<.01?(i=.707106781,r=0,o=.707106781):(r=Math.sqrt(w),i=_/r,o=L/r):b<.01?(i=.707106781,r=.707106781,o=0):(o=Math.sqrt(b),i=S/o,r=L/o),this.set(i,r,o,n),this}let p=Math.sqrt((y-g)*(y-g)+(f-v)*(f-v)+(h-c)*(h-c));return Math.abs(p)<.001&&(p=1),this.x=(y-g)/p,this.y=(f-v)/p,this.z=(h-c)/p,this.w=Math.acos((u+d+m-1)/2),this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,n){return this.x=Math.max(t.x,Math.min(n.x,this.x)),this.y=Math.max(t.y,Math.min(n.y,this.y)),this.z=Math.max(t.z,Math.min(n.z,this.z)),this.w=Math.max(t.w,Math.min(n.w,this.w)),this}clampScalar(t,n){return this.x=Math.max(t,Math.min(n,this.x)),this.y=Math.max(t,Math.min(n,this.y)),this.z=Math.max(t,Math.min(n,this.z)),this.w=Math.max(t,Math.min(n,this.w)),this}clampLength(t,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(n,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,n){return this.x+=(t.x-this.x)*n,this.y+=(t.y-this.y)*n,this.z+=(t.z-this.z)*n,this.w+=(t.w-this.w)*n,this}lerpVectors(t,n,i){return this.x=t.x+(n.x-t.x)*i,this.y=t.y+(n.y-t.y)*i,this.z=t.z+(n.z-t.z)*i,this.w=t.w+(n.w-t.w)*i,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,n=0){return this.x=t[n],this.y=t[n+1],this.z=t[n+2],this.w=t[n+3],this}toArray(t=[],n=0){return t[n]=this.x,t[n+1]=this.y,t[n+2]=this.z,t[n+3]=this.w,t}fromBufferAttribute(t,n,i){return i!==void 0&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(n),this.y=t.getY(n),this.z=t.getZ(n),this.w=t.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}}class Gl extends ir{constructor(t,n,i){super(),Object.defineProperty(this,"isWebGLRenderTarget",{value:!0}),this.width=t,this.height=n,this.scissor=new ot(0,0,t,n),this.scissorTest=!1,this.viewport=new ot(0,0,t,n),i=i||{},this.texture=new ht(void 0,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.image={},this.texture.image.width=t,this.texture.image.height=n,this.texture.generateMipmaps=i.generateMipmaps!==void 0?i.generateMipmaps:!1,this.texture.minFilter=i.minFilter!==void 0?i.minFilter:un,this.depthBuffer=i.depthBuffer!==void 0?i.depthBuffer:!0,this.stencilBuffer=i.stencilBuffer!==void 0?i.stencilBuffer:!1,this.depthTexture=i.depthTexture!==void 0?i.depthTexture:null}setSize(t,n){(this.width!==t||this.height!==n)&&(this.width=t,this.height=n,this.texture.image.width=t,this.texture.image.height=n,this.dispose()),this.viewport.set(0,0,t,n),this.scissor.set(0,0,t,n)}clone(){return new this.constructor().copy(this)}copy(t){return this.width=t.width,this.height=t.height,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this}dispose(){this.dispatchEvent({type:"dispose"})}}class xn{constructor(t=0,n=0,i=0,r=1){Object.defineProperty(this,"isQuaternion",{value:!0}),this._x=t,this._y=n,this._z=i,this._w=r}static slerp(t,n,i,r){return i.copy(t).slerp(n,r)}static slerpFlat(t,n,i,r,o,s,a){let l=i[r+0],u=i[r+1],c=i[r+2],f=i[r+3];const h=o[s+0],d=o[s+1],g=o[s+2],v=o[s+3];if(f!==v||l!==h||u!==d||c!==g){let y=1-a;const m=l*h+u*d+c*g+f*v,p=m>=0?1:-1,x=1-m*m;if(x>Number.EPSILON){const b=Math.sqrt(x),_=Math.atan2(b,m*p);y=Math.sin(y*_)/b,a=Math.sin(a*_)/b}const w=a*p;if(l=l*y+h*w,u=u*y+d*w,c=c*y+g*w,f=f*y+v*w,y===1-a){const b=1/Math.sqrt(l*l+u*u+c*c+f*f);l*=b,u*=b,c*=b,f*=b}}t[n]=l,t[n+1]=u,t[n+2]=c,t[n+3]=f}static multiplyQuaternionsFlat(t,n,i,r,o,s){const a=i[r],l=i[r+1],u=i[r+2],c=i[r+3],f=o[s],h=o[s+1],d=o[s+2],g=o[s+3];return t[n]=a*g+c*f+l*d-u*h,t[n+1]=l*g+c*h+u*f-a*d,t[n+2]=u*g+c*d+a*h-l*f,t[n+3]=c*g-a*f-l*h-u*d,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,n,i,r){return this._x=t,this._y=n,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,n){if(!(t&&t.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const i=t._x,r=t._y,o=t._z,s=t._order,a=Math.cos,l=Math.sin,u=a(i/2),c=a(r/2),f=a(o/2),h=l(i/2),d=l(r/2),g=l(o/2);switch(s){case"XYZ":this._x=h*c*f+u*d*g,this._y=u*d*f-h*c*g,this._z=u*c*g+h*d*f,this._w=u*c*f-h*d*g;break;case"YXZ":this._x=h*c*f+u*d*g,this._y=u*d*f-h*c*g,this._z=u*c*g-h*d*f,this._w=u*c*f+h*d*g;break;case"ZXY":this._x=h*c*f-u*d*g,this._y=u*d*f+h*c*g,this._z=u*c*g+h*d*f,this._w=u*c*f-h*d*g;break;case"ZYX":this._x=h*c*f-u*d*g,this._y=u*d*f+h*c*g,this._z=u*c*g-h*d*f,this._w=u*c*f+h*d*g;break;case"YZX":this._x=h*c*f+u*d*g,this._y=u*d*f+h*c*g,this._z=u*c*g-h*d*f,this._w=u*c*f-h*d*g;break;case"XZY":this._x=h*c*f-u*d*g,this._y=u*d*f-h*c*g,this._z=u*c*g+h*d*f,this._w=u*c*f+h*d*g;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return n!==!1&&this._onChangeCallback(),this}setFromAxisAngle(t,n){const i=n/2,r=Math.sin(i);return this._x=t.x*r,this._y=t.y*r,this._z=t.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(t){const n=t.elements,i=n[0],r=n[4],o=n[8],s=n[1],a=n[5],l=n[9],u=n[2],c=n[6],f=n[10],h=i+a+f;if(h>0){const d=.5/Math.sqrt(h+1);this._w=.25/d,this._x=(c-l)*d,this._y=(o-u)*d,this._z=(s-r)*d}else if(i>a&&i>f){const d=2*Math.sqrt(1+i-a-f);this._w=(c-l)/d,this._x=.25*d,this._y=(r+s)/d,this._z=(o+u)/d}else if(a>f){const d=2*Math.sqrt(1+a-i-f);this._w=(o-u)/d,this._x=(r+s)/d,this._y=.25*d,this._z=(l+c)/d}else{const d=2*Math.sqrt(1+f-i-a);this._w=(s-r)/d,this._x=(o+u)/d,this._y=(l+c)/d,this._z=.25*d}return this._onChangeCallback(),this}setFromUnitVectors(t,n){let r=t.dot(n)+1;return r<1e-6?(r=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=r):(this._x=0,this._y=-t.z,this._z=t.y,this._w=r)):(this._x=t.y*n.z-t.z*n.y,this._y=t.z*n.x-t.x*n.z,this._z=t.x*n.y-t.y*n.x,this._w=r),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(ke.clamp(this.dot(t),-1,1)))}rotateTowards(t,n){const i=this.angleTo(t);if(i===0)return this;const r=Math.min(1,n/i);return this.slerp(t,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return t===0?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t,n){return n!==void 0?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,n)):this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,n){const i=t._x,r=t._y,o=t._z,s=t._w,a=n._x,l=n._y,u=n._z,c=n._w;return this._x=i*c+s*a+r*u-o*l,this._y=r*c+s*l+o*a-i*u,this._z=o*c+s*u+i*l-r*a,this._w=s*c-i*a-r*l-o*u,this._onChangeCallback(),this}slerp(t,n){if(n===0)return this;if(n===1)return this.copy(t);const i=this._x,r=this._y,o=this._z,s=this._w;let a=s*t._w+i*t._x+r*t._y+o*t._z;if(a<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,a=-a):this.copy(t),a>=1)return this._w=s,this._x=i,this._y=r,this._z=o,this;const l=1-a*a;if(l<=Number.EPSILON){const d=1-n;return this._w=d*s+n*this._w,this._x=d*i+n*this._x,this._y=d*r+n*this._y,this._z=d*o+n*this._z,this.normalize(),this._onChangeCallback(),this}const u=Math.sqrt(l),c=Math.atan2(u,a),f=Math.sin((1-n)*c)/u,h=Math.sin(n*c)/u;return this._w=s*f+this._w*h,this._x=i*f+this._x*h,this._y=r*f+this._y*h,this._z=o*f+this._z*h,this._onChangeCallback(),this}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,n=0){return this._x=t[n],this._y=t[n+1],this._z=t[n+2],this._w=t[n+3],this._onChangeCallback(),this}toArray(t=[],n=0){return t[n]=this._x,t[n+1]=this._y,t[n+2]=this._z,t[n+3]=this._w,t}fromBufferAttribute(t,n){return this._x=t.getX(n),this._y=t.getY(n),this._z=t.getZ(n),this._w=t.getW(n),this}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}}class F{constructor(t=0,n=0,i=0){Object.defineProperty(this,"isVector3",{value:!0}),this.x=t,this.y=n,this.z=i}set(t,n,i){return i===void 0&&(i=this.z),this.x=t,this.y=n,this.z=i,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,n){switch(t){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t,n){return n!==void 0?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,n)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,n){return this.x=t.x+n.x,this.y=t.y+n.y,this.z=t.z+n.z,this}addScaledVector(t,n){return this.x+=t.x*n,this.y+=t.y*n,this.z+=t.z*n,this}sub(t,n){return n!==void 0?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,n)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,n){return this.x=t.x-n.x,this.y=t.y-n.y,this.z=t.z-n.z,this}multiply(t,n){return n!==void 0?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,n)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,n){return this.x=t.x*n.x,this.y=t.y*n.y,this.z=t.z*n.z,this}applyEuler(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(xw.setFromEuler(t))}applyAxisAngle(t,n){return this.applyQuaternion(xw.setFromAxisAngle(t,n))}applyMatrix3(t){const n=this.x,i=this.y,r=this.z,o=t.elements;return this.x=o[0]*n+o[3]*i+o[6]*r,this.y=o[1]*n+o[4]*i+o[7]*r,this.z=o[2]*n+o[5]*i+o[8]*r,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const n=this.x,i=this.y,r=this.z,o=t.elements,s=1/(o[3]*n+o[7]*i+o[11]*r+o[15]);return this.x=(o[0]*n+o[4]*i+o[8]*r+o[12])*s,this.y=(o[1]*n+o[5]*i+o[9]*r+o[13])*s,this.z=(o[2]*n+o[6]*i+o[10]*r+o[14])*s,this}applyQuaternion(t){const n=this.x,i=this.y,r=this.z,o=t.x,s=t.y,a=t.z,l=t.w,u=l*n+s*r-a*i,c=l*i+a*n-o*r,f=l*r+o*i-s*n,h=-o*n-s*i-a*r;return this.x=u*l+h*-o+c*-a-f*-s,this.y=c*l+h*-s+f*-o-u*-a,this.z=f*l+h*-a+u*-s-c*-o,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const n=this.x,i=this.y,r=this.z,o=t.elements;return this.x=o[0]*n+o[4]*i+o[8]*r,this.y=o[1]*n+o[5]*i+o[9]*r,this.z=o[2]*n+o[6]*i+o[10]*r,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,n){return this.x=Math.max(t.x,Math.min(n.x,this.x)),this.y=Math.max(t.y,Math.min(n.y,this.y)),this.z=Math.max(t.z,Math.min(n.z,this.z)),this}clampScalar(t,n){return this.x=Math.max(t,Math.min(n,this.x)),this.y=Math.max(t,Math.min(n,this.y)),this.z=Math.max(t,Math.min(n,this.z)),this}clampLength(t,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(t,Math.min(n,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,n){return this.x+=(t.x-this.x)*n,this.y+=(t.y-this.y)*n,this.z+=(t.z-this.z)*n,this}lerpVectors(t,n,i){return this.x=t.x+(n.x-t.x)*i,this.y=t.y+(n.y-t.y)*i,this.z=t.z+(n.z-t.z)*i,this}cross(t,n){return n!==void 0?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,n)):this.crossVectors(this,t)}crossVectors(t,n){const i=t.x,r=t.y,o=t.z,s=n.x,a=n.y,l=n.z;return this.x=r*l-o*a,this.y=o*s-i*l,this.z=i*a-r*s,this}projectOnVector(t){const n=t.lengthSq();if(n===0)return this.set(0,0,0);const i=t.dot(this)/n;return this.copy(t).multiplyScalar(i)}projectOnPlane(t){return Xp.copy(this).projectOnVector(t),this.sub(Xp)}reflect(t){return this.sub(Xp.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const n=Math.sqrt(this.lengthSq()*t.lengthSq());if(n===0)return Math.PI/2;const i=this.dot(t)/n;return Math.acos(ke.clamp(i,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const n=this.x-t.x,i=this.y-t.y,r=this.z-t.z;return n*n+i*i+r*r}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,n,i){const r=Math.sin(n)*t;return this.x=r*Math.sin(i),this.y=Math.cos(n)*t,this.z=r*Math.cos(i),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,n,i){return this.x=t*Math.sin(n),this.y=i,this.z=t*Math.cos(n),this}setFromMatrixPosition(t){const n=t.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(t){const n=this.setFromMatrixColumn(t,0).length(),i=this.setFromMatrixColumn(t,1).length(),r=this.setFromMatrixColumn(t,2).length();return this.x=n,this.y=i,this.z=r,this}setFromMatrixColumn(t,n){return this.fromArray(t.elements,n*4)}setFromMatrix3Column(t,n){return this.fromArray(t.elements,n*3)}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,n=0){return this.x=t[n],this.y=t[n+1],this.z=t[n+2],this}toArray(t=[],n=0){return t[n]=this.x,t[n+1]=this.y,t[n+2]=this.z,t}fromBufferAttribute(t,n,i){return i!==void 0&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(n),this.y=t.getY(n),this.z=t.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}}const Xp=new F,xw=new xn;class vs{constructor(t,n){Object.defineProperty(this,"isBox3",{value:!0}),this.min=t!==void 0?t:new F(1/0,1/0,1/0),this.max=n!==void 0?n:new F(-1/0,-1/0,-1/0)}set(t,n){return this.min.copy(t),this.max.copy(n),this}setFromArray(t){let n=1/0,i=1/0,r=1/0,o=-1/0,s=-1/0,a=-1/0;for(let l=0,u=t.length;l<u;l+=3){const c=t[l],f=t[l+1],h=t[l+2];c<n&&(n=c),f<i&&(i=f),h<r&&(r=h),c>o&&(o=c),f>s&&(s=f),h>a&&(a=h)}return this.min.set(n,i,r),this.max.set(o,s,a),this}setFromBufferAttribute(t){let n=1/0,i=1/0,r=1/0,o=-1/0,s=-1/0,a=-1/0;for(let l=0,u=t.count;l<u;l++){const c=t.getX(l),f=t.getY(l),h=t.getZ(l);c<n&&(n=c),f<i&&(i=f),h<r&&(r=h),c>o&&(o=c),f>s&&(s=f),h>a&&(a=h)}return this.min.set(n,i,r),this.max.set(o,s,a),this}setFromPoints(t){this.makeEmpty();for(let n=0,i=t.length;n<i;n++)this.expandByPoint(t[n]);return this}setFromCenterAndSize(t,n){const i=dl.copy(n).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}setFromObject(t){return this.makeEmpty(),this.expandByObject(t)}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return t===void 0&&(console.warn("THREE.Box3: .getCenter() target is now required"),t=new F),this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return t===void 0&&(console.warn("THREE.Box3: .getSize() target is now required"),t=new F),this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t){t.updateWorldMatrix(!1,!1);const n=t.geometry;n!==void 0&&(n.boundingBox===null&&n.computeBoundingBox(),qp.copy(n.boundingBox),qp.applyMatrix4(t.matrixWorld),this.union(qp));const i=t.children;for(let r=0,o=i.length;r<o;r++)this.expandByObject(i[r]);return this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,n){return n===void 0&&(console.warn("THREE.Box3: .getParameter() target is now required"),n=new F),n.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}intersectsSphere(t){return this.clampPoint(t.center,dl),dl.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let n,i;return t.normal.x>0?(n=t.normal.x*this.min.x,i=t.normal.x*this.max.x):(n=t.normal.x*this.max.x,i=t.normal.x*this.min.x),t.normal.y>0?(n+=t.normal.y*this.min.y,i+=t.normal.y*this.max.y):(n+=t.normal.y*this.max.y,i+=t.normal.y*this.min.y),t.normal.z>0?(n+=t.normal.z*this.min.z,i+=t.normal.z*this.max.z):(n+=t.normal.z*this.max.z,i+=t.normal.z*this.min.z),n<=-t.constant&&i>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(pl),Ic.subVectors(this.max,pl),Ms.subVectors(t.a,pl),Es.subVectors(t.b,pl),Ts.subVectors(t.c,pl),Br.subVectors(Es,Ms),Ur.subVectors(Ts,Es),Bo.subVectors(Ms,Ts);let n=[0,-Br.z,Br.y,0,-Ur.z,Ur.y,0,-Bo.z,Bo.y,Br.z,0,-Br.x,Ur.z,0,-Ur.x,Bo.z,0,-Bo.x,-Br.y,Br.x,0,-Ur.y,Ur.x,0,-Bo.y,Bo.x,0];return!Yp(n,Ms,Es,Ts,Ic)||(n=[1,0,0,0,1,0,0,0,1],!Yp(n,Ms,Es,Ts,Ic))?!1:(Bc.crossVectors(Br,Ur),n=[Bc.x,Bc.y,Bc.z],Yp(n,Ms,Es,Ts,Ic))}clampPoint(t,n){return n===void 0&&(console.warn("THREE.Box3: .clampPoint() target is now required"),n=new F),n.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return dl.copy(t).clamp(this.min,this.max).sub(t).length()}getBoundingSphere(t){return t===void 0&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(t.center),t.radius=this.getSize(dl).length()*.5,t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()?this:(lr[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),lr[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),lr[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),lr[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),lr[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),lr[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),lr[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),lr[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(lr),this)}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}function Yp(e,t,n,i,r){for(let o=0,s=e.length-3;o<=s;o+=3){Uo.fromArray(e,o);const a=r.x*Math.abs(Uo.x)+r.y*Math.abs(Uo.y)+r.z*Math.abs(Uo.z),l=t.dot(Uo),u=n.dot(Uo),c=i.dot(Uo);if(Math.max(-Math.max(l,u,c),Math.min(l,u,c))>a)return!1}return!0}const lr=[new F,new F,new F,new F,new F,new F,new F,new F],dl=new F,qp=new vs,Ms=new F,Es=new F,Ts=new F,Br=new F,Ur=new F,Bo=new F,pl=new F,Ic=new F,Bc=new F,Uo=new F,JI=new vs;class ys{constructor(t,n){this.center=t!==void 0?t:new F,this.radius=n!==void 0?n:-1}set(t,n){return this.center.copy(t),this.radius=n,this}setFromPoints(t,n){const i=this.center;n!==void 0?i.copy(n):JI.setFromPoints(t).getCenter(i);let r=0;for(let o=0,s=t.length;o<s;o++)r=Math.max(r,i.distanceToSquared(t[o]));return this.radius=Math.sqrt(r),this}clone(){return new this.constructor().copy(this)}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const n=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=n*n}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,n){const i=this.center.distanceToSquared(t);return n===void 0&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),n=new F),n.copy(t),i>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(t){return t===void 0&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),t=new vs),this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}}const ur=new F,Zp=new F,Uc=new F,zr=new F,Jp=new F,zc=new F,Kp=new F;class Zu{constructor(t,n){this.origin=t!==void 0?t:new F,this.direction=n!==void 0?n:new F(0,0,-1)}set(t,n){return this.origin.copy(t),this.direction.copy(n),this}clone(){return new this.constructor().copy(this)}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,n){return n===void 0&&(console.warn("THREE.Ray: .at() target is now required"),n=new F),n.copy(this.direction).multiplyScalar(t).add(this.origin)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,ur)),this}closestPointToPoint(t,n){n===void 0&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),n=new F),n.subVectors(t,this.origin);const i=n.dot(this.direction);return i<0?n.copy(this.origin):n.copy(this.direction).multiplyScalar(i).add(this.origin)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const n=ur.subVectors(t,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(t):(ur.copy(this.direction).multiplyScalar(n).add(this.origin),ur.distanceToSquared(t))}distanceSqToSegment(t,n,i,r){Zp.copy(t).add(n).multiplyScalar(.5),Uc.copy(n).sub(t).normalize(),zr.copy(this.origin).sub(Zp);const o=t.distanceTo(n)*.5,s=-this.direction.dot(Uc),a=zr.dot(this.direction),l=-zr.dot(Uc),u=zr.lengthSq(),c=Math.abs(1-s*s);let f,h,d,g;if(c>0)if(f=s*l-a,h=s*a-l,g=o*c,f>=0)if(h>=-g)if(h<=g){const v=1/c;f*=v,h*=v,d=f*(f+s*h+2*a)+h*(s*f+h+2*l)+u}else h=o,f=Math.max(0,-(s*h+a)),d=-f*f+h*(h+2*l)+u;else h=-o,f=Math.max(0,-(s*h+a)),d=-f*f+h*(h+2*l)+u;else h<=-g?(f=Math.max(0,-(-s*o+a)),h=f>0?-o:Math.min(Math.max(-o,-l),o),d=-f*f+h*(h+2*l)+u):h<=g?(f=0,h=Math.min(Math.max(-o,-l),o),d=h*(h+2*l)+u):(f=Math.max(0,-(s*o+a)),h=f>0?o:Math.min(Math.max(-o,-l),o),d=-f*f+h*(h+2*l)+u);else h=s>0?-o:o,f=Math.max(0,-(s*h+a)),d=-f*f+h*(h+2*l)+u;return i&&i.copy(this.direction).multiplyScalar(f).add(this.origin),r&&r.copy(Uc).multiplyScalar(h).add(Zp),d}intersectSphere(t,n){ur.subVectors(t.center,this.origin);const i=ur.dot(this.direction),r=ur.dot(ur)-i*i,o=t.radius*t.radius;if(r>o)return null;const s=Math.sqrt(o-r),a=i-s,l=i+s;return a<0&&l<0?null:a<0?this.at(l,n):this.at(a,n)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const n=t.normal.dot(this.direction);if(n===0)return t.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(t.normal)+t.constant)/n;return i>=0?i:null}intersectPlane(t,n){const i=this.distanceToPlane(t);return i===null?null:this.at(i,n)}intersectsPlane(t){const n=t.distanceToPoint(this.origin);return n===0||t.normal.dot(this.direction)*n<0}intersectBox(t,n){let i,r,o,s,a,l;const u=1/this.direction.x,c=1/this.direction.y,f=1/this.direction.z,h=this.origin;return u>=0?(i=(t.min.x-h.x)*u,r=(t.max.x-h.x)*u):(i=(t.max.x-h.x)*u,r=(t.min.x-h.x)*u),c>=0?(o=(t.min.y-h.y)*c,s=(t.max.y-h.y)*c):(o=(t.max.y-h.y)*c,s=(t.min.y-h.y)*c),i>s||o>r||((o>i||i!==i)&&(i=o),(s<r||r!==r)&&(r=s),f>=0?(a=(t.min.z-h.z)*f,l=(t.max.z-h.z)*f):(a=(t.max.z-h.z)*f,l=(t.min.z-h.z)*f),i>l||a>r)||((a>i||i!==i)&&(i=a),(l<r||r!==r)&&(r=l),r<0)?null:this.at(i>=0?i:r,n)}intersectsBox(t){return this.intersectBox(t,ur)!==null}intersectTriangle(t,n,i,r,o){Jp.subVectors(n,t),zc.subVectors(i,t),Kp.crossVectors(Jp,zc);let s=this.direction.dot(Kp),a;if(s>0){if(r)return null;a=1}else if(s<0)a=-1,s=-s;else return null;zr.subVectors(this.origin,t);const l=a*this.direction.dot(zc.crossVectors(zr,zc));if(l<0)return null;const u=a*this.direction.dot(Jp.cross(zr));if(u<0||l+u>s)return null;const c=-a*zr.dot(Kp);return c<0?null:this.at(c/s,o)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}}class Ve{constructor(){Object.defineProperty(this,"isMatrix4",{value:!0}),this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(t,n,i,r,o,s,a,l,u,c,f,h,d,g,v,y){const m=this.elements;return m[0]=t,m[4]=n,m[8]=i,m[12]=r,m[1]=o,m[5]=s,m[9]=a,m[13]=l,m[2]=u,m[6]=c,m[10]=f,m[14]=h,m[3]=d,m[7]=g,m[11]=v,m[15]=y,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Ve().fromArray(this.elements)}copy(t){const n=this.elements,i=t.elements;return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],n[9]=i[9],n[10]=i[10],n[11]=i[11],n[12]=i[12],n[13]=i[13],n[14]=i[14],n[15]=i[15],this}copyPosition(t){const n=this.elements,i=t.elements;return n[12]=i[12],n[13]=i[13],n[14]=i[14],this}setFromMatrix3(t){const n=t.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(t,n,i){return t.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(t,n,i){return this.set(t.x,n.x,i.x,0,t.y,n.y,i.y,0,t.z,n.z,i.z,0,0,0,0,1),this}extractRotation(t){const n=this.elements,i=t.elements,r=1/Ls.setFromMatrixColumn(t,0).length(),o=1/Ls.setFromMatrixColumn(t,1).length(),s=1/Ls.setFromMatrixColumn(t,2).length();return n[0]=i[0]*r,n[1]=i[1]*r,n[2]=i[2]*r,n[3]=0,n[4]=i[4]*o,n[5]=i[5]*o,n[6]=i[6]*o,n[7]=0,n[8]=i[8]*s,n[9]=i[9]*s,n[10]=i[10]*s,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const n=this.elements,i=t.x,r=t.y,o=t.z,s=Math.cos(i),a=Math.sin(i),l=Math.cos(r),u=Math.sin(r),c=Math.cos(o),f=Math.sin(o);if(t.order==="XYZ"){const h=s*c,d=s*f,g=a*c,v=a*f;n[0]=l*c,n[4]=-l*f,n[8]=u,n[1]=d+g*u,n[5]=h-v*u,n[9]=-a*l,n[2]=v-h*u,n[6]=g+d*u,n[10]=s*l}else if(t.order==="YXZ"){const h=l*c,d=l*f,g=u*c,v=u*f;n[0]=h+v*a,n[4]=g*a-d,n[8]=s*u,n[1]=s*f,n[5]=s*c,n[9]=-a,n[2]=d*a-g,n[6]=v+h*a,n[10]=s*l}else if(t.order==="ZXY"){const h=l*c,d=l*f,g=u*c,v=u*f;n[0]=h-v*a,n[4]=-s*f,n[8]=g+d*a,n[1]=d+g*a,n[5]=s*c,n[9]=v-h*a,n[2]=-s*u,n[6]=a,n[10]=s*l}else if(t.order==="ZYX"){const h=s*c,d=s*f,g=a*c,v=a*f;n[0]=l*c,n[4]=g*u-d,n[8]=h*u+v,n[1]=l*f,n[5]=v*u+h,n[9]=d*u-g,n[2]=-u,n[6]=a*l,n[10]=s*l}else if(t.order==="YZX"){const h=s*l,d=s*u,g=a*l,v=a*u;n[0]=l*c,n[4]=v-h*f,n[8]=g*f+d,n[1]=f,n[5]=s*c,n[9]=-a*c,n[2]=-u*c,n[6]=d*f+g,n[10]=h-v*f}else if(t.order==="XZY"){const h=s*l,d=s*u,g=a*l,v=a*u;n[0]=l*c,n[4]=-f,n[8]=u*c,n[1]=h*f+v,n[5]=s*c,n[9]=d*f-g,n[2]=g*f-d,n[6]=a*c,n[10]=v*f+h}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(t){return this.compose(KI,t,QI)}lookAt(t,n,i){const r=this.elements;return Bn.subVectors(t,n),Bn.lengthSq()===0&&(Bn.z=1),Bn.normalize(),Hr.crossVectors(i,Bn),Hr.lengthSq()===0&&(Math.abs(i.z)===1?Bn.x+=1e-4:Bn.z+=1e-4,Bn.normalize(),Hr.crossVectors(i,Bn)),Hr.normalize(),Hc.crossVectors(Bn,Hr),r[0]=Hr.x,r[4]=Hc.x,r[8]=Bn.x,r[1]=Hr.y,r[5]=Hc.y,r[9]=Bn.y,r[2]=Hr.z,r[6]=Hc.z,r[10]=Bn.z,this}multiply(t,n){return n!==void 0?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,n)):this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,n){const i=t.elements,r=n.elements,o=this.elements,s=i[0],a=i[4],l=i[8],u=i[12],c=i[1],f=i[5],h=i[9],d=i[13],g=i[2],v=i[6],y=i[10],m=i[14],p=i[3],x=i[7],w=i[11],b=i[15],_=r[0],S=r[4],L=r[8],E=r[12],A=r[1],B=r[5],j=r[9],z=r[13],k=r[2],U=r[6],D=r[10],G=r[14],I=r[3],H=r[7],V=r[11],J=r[15];return o[0]=s*_+a*A+l*k+u*I,o[4]=s*S+a*B+l*U+u*H,o[8]=s*L+a*j+l*D+u*V,o[12]=s*E+a*z+l*G+u*J,o[1]=c*_+f*A+h*k+d*I,o[5]=c*S+f*B+h*U+d*H,o[9]=c*L+f*j+h*D+d*V,o[13]=c*E+f*z+h*G+d*J,o[2]=g*_+v*A+y*k+m*I,o[6]=g*S+v*B+y*U+m*H,o[10]=g*L+v*j+y*D+m*V,o[14]=g*E+v*z+y*G+m*J,o[3]=p*_+x*A+w*k+b*I,o[7]=p*S+x*B+w*U+b*H,o[11]=p*L+x*j+w*D+b*V,o[15]=p*E+x*z+w*G+b*J,this}multiplyScalar(t){const n=this.elements;return n[0]*=t,n[4]*=t,n[8]*=t,n[12]*=t,n[1]*=t,n[5]*=t,n[9]*=t,n[13]*=t,n[2]*=t,n[6]*=t,n[10]*=t,n[14]*=t,n[3]*=t,n[7]*=t,n[11]*=t,n[15]*=t,this}determinant(){const t=this.elements,n=t[0],i=t[4],r=t[8],o=t[12],s=t[1],a=t[5],l=t[9],u=t[13],c=t[2],f=t[6],h=t[10],d=t[14],g=t[3],v=t[7],y=t[11],m=t[15];return g*(+o*l*f-r*u*f-o*a*h+i*u*h+r*a*d-i*l*d)+v*(+n*l*d-n*u*h+o*s*h-r*s*d+r*u*c-o*l*c)+y*(+n*u*f-n*a*d-o*s*f+i*s*d+o*a*c-i*u*c)+m*(-r*a*c-n*l*f+n*a*h+r*s*f-i*s*h+i*l*c)}transpose(){const t=this.elements;let n;return n=t[1],t[1]=t[4],t[4]=n,n=t[2],t[2]=t[8],t[8]=n,n=t[6],t[6]=t[9],t[9]=n,n=t[3],t[3]=t[12],t[12]=n,n=t[7],t[7]=t[13],t[13]=n,n=t[11],t[11]=t[14],t[14]=n,this}setPosition(t,n,i){const r=this.elements;return t.isVector3?(r[12]=t.x,r[13]=t.y,r[14]=t.z):(r[12]=t,r[13]=n,r[14]=i),this}invert(){const t=this.elements,n=t[0],i=t[1],r=t[2],o=t[3],s=t[4],a=t[5],l=t[6],u=t[7],c=t[8],f=t[9],h=t[10],d=t[11],g=t[12],v=t[13],y=t[14],m=t[15],p=f*y*u-v*h*u+v*l*d-a*y*d-f*l*m+a*h*m,x=g*h*u-c*y*u-g*l*d+s*y*d+c*l*m-s*h*m,w=c*v*u-g*f*u+g*a*d-s*v*d-c*a*m+s*f*m,b=g*f*l-c*v*l-g*a*h+s*v*h+c*a*y-s*f*y,_=n*p+i*x+r*w+o*b;if(_===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const S=1/_;return t[0]=p*S,t[1]=(v*h*o-f*y*o-v*r*d+i*y*d+f*r*m-i*h*m)*S,t[2]=(a*y*o-v*l*o+v*r*u-i*y*u-a*r*m+i*l*m)*S,t[3]=(f*l*o-a*h*o-f*r*u+i*h*u+a*r*d-i*l*d)*S,t[4]=x*S,t[5]=(c*y*o-g*h*o+g*r*d-n*y*d-c*r*m+n*h*m)*S,t[6]=(g*l*o-s*y*o-g*r*u+n*y*u+s*r*m-n*l*m)*S,t[7]=(s*h*o-c*l*o+c*r*u-n*h*u-s*r*d+n*l*d)*S,t[8]=w*S,t[9]=(g*f*o-c*v*o-g*i*d+n*v*d+c*i*m-n*f*m)*S,t[10]=(s*v*o-g*a*o+g*i*u-n*v*u-s*i*m+n*a*m)*S,t[11]=(c*a*o-s*f*o-c*i*u+n*f*u+s*i*d-n*a*d)*S,t[12]=b*S,t[13]=(c*v*r-g*f*r+g*i*h-n*v*h-c*i*y+n*f*y)*S,t[14]=(g*a*r-s*v*r-g*i*l+n*v*l+s*i*y-n*a*y)*S,t[15]=(s*f*r-c*a*r+c*i*l-n*f*l-s*i*h+n*a*h)*S,this}scale(t){const n=this.elements,i=t.x,r=t.y,o=t.z;return n[0]*=i,n[4]*=r,n[8]*=o,n[1]*=i,n[5]*=r,n[9]*=o,n[2]*=i,n[6]*=r,n[10]*=o,n[3]*=i,n[7]*=r,n[11]*=o,this}getMaxScaleOnAxis(){const t=this.elements,n=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],r=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(n,i,r))}makeTranslation(t,n,i){return this.set(1,0,0,t,0,1,0,n,0,0,1,i,0,0,0,1),this}makeRotationX(t){const n=Math.cos(t),i=Math.sin(t);return this.set(1,0,0,0,0,n,-i,0,0,i,n,0,0,0,0,1),this}makeRotationY(t){const n=Math.cos(t),i=Math.sin(t);return this.set(n,0,i,0,0,1,0,0,-i,0,n,0,0,0,0,1),this}makeRotationZ(t){const n=Math.cos(t),i=Math.sin(t);return this.set(n,-i,0,0,i,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,n){const i=Math.cos(n),r=Math.sin(n),o=1-i,s=t.x,a=t.y,l=t.z,u=o*s,c=o*a;return this.set(u*s+i,u*a-r*l,u*l+r*a,0,u*a+r*l,c*a+i,c*l-r*s,0,u*l-r*a,c*l+r*s,o*l*l+i,0,0,0,0,1),this}makeScale(t,n,i){return this.set(t,0,0,0,0,n,0,0,0,0,i,0,0,0,0,1),this}makeShear(t,n,i){return this.set(1,n,i,0,t,1,i,0,t,n,1,0,0,0,0,1),this}compose(t,n,i){const r=this.elements,o=n._x,s=n._y,a=n._z,l=n._w,u=o+o,c=s+s,f=a+a,h=o*u,d=o*c,g=o*f,v=s*c,y=s*f,m=a*f,p=l*u,x=l*c,w=l*f,b=i.x,_=i.y,S=i.z;return r[0]=(1-(v+m))*b,r[1]=(d+w)*b,r[2]=(g-x)*b,r[3]=0,r[4]=(d-w)*_,r[5]=(1-(h+m))*_,r[6]=(y+p)*_,r[7]=0,r[8]=(g+x)*S,r[9]=(y-p)*S,r[10]=(1-(h+v))*S,r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,this}decompose(t,n,i){const r=this.elements;let o=Ls.set(r[0],r[1],r[2]).length();const s=Ls.set(r[4],r[5],r[6]).length(),a=Ls.set(r[8],r[9],r[10]).length();this.determinant()<0&&(o=-o),t.x=r[12],t.y=r[13],t.z=r[14],yi.copy(this);const u=1/o,c=1/s,f=1/a;return yi.elements[0]*=u,yi.elements[1]*=u,yi.elements[2]*=u,yi.elements[4]*=c,yi.elements[5]*=c,yi.elements[6]*=c,yi.elements[8]*=f,yi.elements[9]*=f,yi.elements[10]*=f,n.setFromRotationMatrix(yi),i.x=o,i.y=s,i.z=a,this}makePerspective(t,n,i,r,o,s){s===void 0&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const a=this.elements,l=2*o/(n-t),u=2*o/(i-r),c=(n+t)/(n-t),f=(i+r)/(i-r),h=-(s+o)/(s-o),d=-2*s*o/(s-o);return a[0]=l,a[4]=0,a[8]=c,a[12]=0,a[1]=0,a[5]=u,a[9]=f,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=d,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(t,n,i,r,o,s){const a=this.elements,l=1/(n-t),u=1/(i-r),c=1/(s-o),f=(n+t)*l,h=(i+r)*u,d=(s+o)*c;return a[0]=2*l,a[4]=0,a[8]=0,a[12]=-f,a[1]=0,a[5]=2*u,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2*c,a[14]=-d,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(t){const n=this.elements,i=t.elements;for(let r=0;r<16;r++)if(n[r]!==i[r])return!1;return!0}fromArray(t,n=0){for(let i=0;i<16;i++)this.elements[i]=t[i+n];return this}toArray(t=[],n=0){const i=this.elements;return t[n]=i[0],t[n+1]=i[1],t[n+2]=i[2],t[n+3]=i[3],t[n+4]=i[4],t[n+5]=i[5],t[n+6]=i[6],t[n+7]=i[7],t[n+8]=i[8],t[n+9]=i[9],t[n+10]=i[10],t[n+11]=i[11],t[n+12]=i[12],t[n+13]=i[13],t[n+14]=i[14],t[n+15]=i[15],t}}const Ls=new F,yi=new Ve,KI=new F(0,0,0),QI=new F(1,1,1),Hr=new F,Hc=new F,Bn=new F;class Ju{constructor(t=0,n=0,i=0,r=Ju.DefaultOrder){Object.defineProperty(this,"isEuler",{value:!0}),this._x=t,this._y=n,this._z=i,this._order=r}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,n,i,r){return this._x=t,this._y=n,this._z=i,this._order=r||this._order,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,n,i){const r=ke.clamp,o=t.elements,s=o[0],a=o[4],l=o[8],u=o[1],c=o[5],f=o[9],h=o[2],d=o[6],g=o[10];switch(n=n||this._order,n){case"XYZ":this._y=Math.asin(r(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-f,g),this._z=Math.atan2(-a,s)):(this._x=Math.atan2(d,c),this._z=0);break;case"YXZ":this._x=Math.asin(-r(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(l,g),this._z=Math.atan2(u,c)):(this._y=Math.atan2(-h,s),this._z=0);break;case"ZXY":this._x=Math.asin(r(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-h,g),this._z=Math.atan2(-a,c)):(this._y=0,this._z=Math.atan2(u,s));break;case"ZYX":this._y=Math.asin(-r(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(d,g),this._z=Math.atan2(u,s)):(this._x=0,this._z=Math.atan2(-a,c));break;case"YZX":this._z=Math.asin(r(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-f,c),this._y=Math.atan2(-h,s)):(this._x=0,this._y=Math.atan2(l,g));break;case"XZY":this._z=Math.asin(-r(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(d,c),this._y=Math.atan2(l,s)):(this._x=Math.atan2(-f,g),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,i!==!1&&this._onChangeCallback(),this}setFromQuaternion(t,n,i){return ww.makeRotationFromQuaternion(t),this.setFromRotationMatrix(ww,n,i)}setFromVector3(t,n){return this.set(t.x,t.y,t.z,n||this._order)}reorder(t){return _w.setFromEuler(this),this.setFromQuaternion(_w,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],t[3]!==void 0&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],n=0){return t[n]=this._x,t[n+1]=this._y,t[n+2]=this._z,t[n+3]=this._order,t}toVector3(t){return t?t.set(this._x,this._y,this._z):new F(this._x,this._y,this._z)}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}}Ju.DefaultOrder="XYZ";Ju.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];const ww=new Ve,_w=new xn;class ZE{constructor(){this.mask=1}set(t){this.mask=1<<t|0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return(this.mask&t.mask)!==0}}let eB=0;const bw=new F,Cs=new xn,cr=new Ve,jc=new F,ml=new F,tB=new F,nB=new xn,Sw=new F(1,0,0),Mw=new F(0,1,0),Ew=new F(0,0,1),iB={type:"added"},Tw={type:"removed"};function Re(){Object.defineProperty(this,"id",{value:eB++}),this.uuid=ke.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Re.DefaultUp.clone();const e=new F,t=new Ju,n=new xn,i=new F(1,1,1);function r(){n.setFromEuler(t,!1)}function o(){t.setFromQuaternion(n,void 0,!1)}t._onChange(r),n._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Ve},normalMatrix:{value:new li}}),this.matrix=new Ve,this.matrixWorld=new Ve,this.matrixAutoUpdate=Re.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new ZE,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}Re.DefaultUp=new F(0,1,0);Re.DefaultMatrixAutoUpdate=!0;Re.prototype=Object.assign(Object.create(ir.prototype),{constructor:Re,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix4:function(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(e){return this.quaternion.premultiply(e),this},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:function(e,t){return Cs.setFromAxisAngle(e,t),this.quaternion.multiply(Cs),this},rotateOnWorldAxis:function(e,t){return Cs.setFromAxisAngle(e,t),this.quaternion.premultiply(Cs),this},rotateX:function(e){return this.rotateOnAxis(Sw,e)},rotateY:function(e){return this.rotateOnAxis(Mw,e)},rotateZ:function(e){return this.rotateOnAxis(Ew,e)},translateOnAxis:function(e,t){return bw.copy(e).applyQuaternion(this.quaternion),this.position.add(bw.multiplyScalar(t)),this},translateX:function(e){return this.translateOnAxis(Sw,e)},translateY:function(e){return this.translateOnAxis(Mw,e)},translateZ:function(e){return this.translateOnAxis(Ew,e)},localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:function(e){return e.applyMatrix4(cr.copy(this.matrixWorld).invert())},lookAt:function(e,t,n){e.isVector3?jc.copy(e):jc.set(e,t,n);const i=this.parent;this.updateWorldMatrix(!0,!1),ml.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?cr.lookAt(ml,jc,this.up):cr.lookAt(jc,ml,this.up),this.quaternion.setFromRotationMatrix(cr),i&&(cr.extractRotation(i.matrixWorld),Cs.setFromRotationMatrix(cr),this.quaternion.premultiply(Cs.invert()))},add:function(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(iB)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)},remove:function(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(Tw)),this},clear:function(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(Tw)}return this.children.length=0,this},attach:function(e){return this.updateWorldMatrix(!0,!1),cr.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),cr.multiply(e.parent.matrixWorld)),e.applyMatrix4(cr),e.updateWorldMatrix(!1,!1),this.add(e),this},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(let n=0,i=this.children.length;n<i;n++){const o=this.children[n].getObjectByProperty(e,t);if(o!==void 0)return o}},getWorldPosition:function(e){return e===void 0&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),e=new F),this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(e){return e===void 0&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),e=new xn),this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(ml,e,tB),e},getWorldScale:function(e){return e===void 0&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),e=new F),this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(ml,nB,e),e},getWorldDirection:function(e){e===void 0&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),e=new F),this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()},raycast:function(){},traverse:function(e){e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverse(e)},traverseVisible:function(e){if(this.visible===!1)return;e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverseVisible(e)},traverseAncestors:function(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].updateMatrixWorld(e)},updateWorldMatrix:function(e,t){const n=this.parent;if(e===!0&&n!==null&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const i=this.children;for(let r=0,o=i.length;r<o;r++)i[r].updateWorldMatrix(!1,!0)}},toJSON:function(e){const t=e===void 0||typeof e=="string",n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON());function r(s,a){return s[a.uuid]===void 0&&(s[a.uuid]=a.toJSON(e)),a.uuid}if(this.isMesh||this.isLine||this.isPoints){i.geometry=r(e.geometries,this.geometry);const s=this.geometry.parameters;if(s!==void 0&&s.shapes!==void 0){const a=s.shapes;if(Array.isArray(a))for(let l=0,u=a.length;l<u;l++){const c=a[l];r(e.shapes,c)}else r(e.shapes,a)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(r(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const s=[];for(let a=0,l=this.material.length;a<l;a++)s.push(r(e.materials,this.material[a]));i.material=s}else i.material=r(e.materials,this.material);if(this.children.length>0){i.children=[];for(let s=0;s<this.children.length;s++)i.children.push(this.children[s].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let s=0;s<this.animations.length;s++){const a=this.animations[s];i.animations.push(r(e.animations,a))}}if(t){const s=o(e.geometries),a=o(e.materials),l=o(e.textures),u=o(e.images),c=o(e.shapes),f=o(e.skeletons),h=o(e.animations);s.length>0&&(n.geometries=s),a.length>0&&(n.materials=a),l.length>0&&(n.textures=l),u.length>0&&(n.images=u),c.length>0&&(n.shapes=c),f.length>0&&(n.skeletons=f),h.length>0&&(n.animations=h)}return n.object=i,n;function o(s){const a=[];for(const l in s){const u=s[l];delete u.metadata,a.push(u)}return a}},clone:function(e){return new this.constructor().copy(this,e)},copy:function(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let n=0;n<e.children.length;n++){const i=e.children[n];this.add(i.clone())}return this}});const Qp=new F,rB=new F,oB=new li;class mr{constructor(t,n){Object.defineProperty(this,"isPlane",{value:!0}),this.normal=t!==void 0?t:new F(1,0,0),this.constant=n!==void 0?n:0}set(t,n){return this.normal.copy(t),this.constant=n,this}setComponents(t,n,i,r){return this.normal.set(t,n,i),this.constant=r,this}setFromNormalAndCoplanarPoint(t,n){return this.normal.copy(t),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(t,n,i){const r=Qp.subVectors(i,n).cross(rB.subVectors(t,n)).normalize();return this.setFromNormalAndCoplanarPoint(r,t),this}clone(){return new this.constructor().copy(this)}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,n){return n===void 0&&(console.warn("THREE.Plane: .projectPoint() target is now required"),n=new F),n.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)}intersectLine(t,n){n===void 0&&(console.warn("THREE.Plane: .intersectLine() target is now required"),n=new F);const i=t.delta(Qp),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(t.start)===0?n.copy(t.start):void 0;const o=-(t.start.dot(this.normal)+this.constant)/r;if(!(o<0||o>1))return n.copy(i).multiplyScalar(o).add(t.start)}intersectsLine(t){const n=this.distanceToPoint(t.start),i=this.distanceToPoint(t.end);return n<0&&i>0||i<0&&n>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t===void 0&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),t=new F),t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,n){const i=n||oB.getNormalMatrix(t),r=this.coplanarPoint(Qp).applyMatrix4(t),o=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(o),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}}const xi=new F,fr=new F,em=new F,hr=new F,Rs=new F,Ps=new F,Lw=new F,tm=new F,nm=new F,im=new F;class vn{constructor(t,n,i){this.a=t!==void 0?t:new F,this.b=n!==void 0?n:new F,this.c=i!==void 0?i:new F}static getNormal(t,n,i,r){r===void 0&&(console.warn("THREE.Triangle: .getNormal() target is now required"),r=new F),r.subVectors(i,n),xi.subVectors(t,n),r.cross(xi);const o=r.lengthSq();return o>0?r.multiplyScalar(1/Math.sqrt(o)):r.set(0,0,0)}static getBarycoord(t,n,i,r,o){xi.subVectors(r,n),fr.subVectors(i,n),em.subVectors(t,n);const s=xi.dot(xi),a=xi.dot(fr),l=xi.dot(em),u=fr.dot(fr),c=fr.dot(em),f=s*u-a*a;if(o===void 0&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),o=new F),f===0)return o.set(-2,-1,-1);const h=1/f,d=(u*l-a*c)*h,g=(s*c-a*l)*h;return o.set(1-d-g,g,d)}static containsPoint(t,n,i,r){return this.getBarycoord(t,n,i,r,hr),hr.x>=0&&hr.y>=0&&hr.x+hr.y<=1}static getUV(t,n,i,r,o,s,a,l){return this.getBarycoord(t,n,i,r,hr),l.set(0,0),l.addScaledVector(o,hr.x),l.addScaledVector(s,hr.y),l.addScaledVector(a,hr.z),l}static isFrontFacing(t,n,i,r){return xi.subVectors(i,n),fr.subVectors(t,n),xi.cross(fr).dot(r)<0}set(t,n,i){return this.a.copy(t),this.b.copy(n),this.c.copy(i),this}setFromPointsAndIndices(t,n,i,r){return this.a.copy(t[n]),this.b.copy(t[i]),this.c.copy(t[r]),this}clone(){return new this.constructor().copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return xi.subVectors(this.c,this.b),fr.subVectors(this.a,this.b),xi.cross(fr).length()*.5}getMidpoint(t){return t===void 0&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),t=new F),t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return vn.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t===void 0&&(console.warn("THREE.Triangle: .getPlane() target is now required"),t=new mr),t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,n){return vn.getBarycoord(t,this.a,this.b,this.c,n)}getUV(t,n,i,r,o){return vn.getUV(t,this.a,this.b,this.c,n,i,r,o)}containsPoint(t){return vn.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return vn.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,n){n===void 0&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),n=new F);const i=this.a,r=this.b,o=this.c;let s,a;Rs.subVectors(r,i),Ps.subVectors(o,i),tm.subVectors(t,i);const l=Rs.dot(tm),u=Ps.dot(tm);if(l<=0&&u<=0)return n.copy(i);nm.subVectors(t,r);const c=Rs.dot(nm),f=Ps.dot(nm);if(c>=0&&f<=c)return n.copy(r);const h=l*f-c*u;if(h<=0&&l>=0&&c<=0)return s=l/(l-c),n.copy(i).addScaledVector(Rs,s);im.subVectors(t,o);const d=Rs.dot(im),g=Ps.dot(im);if(g>=0&&d<=g)return n.copy(o);const v=d*u-l*g;if(v<=0&&u>=0&&g<=0)return a=u/(u-g),n.copy(i).addScaledVector(Ps,a);const y=c*g-d*f;if(y<=0&&f-c>=0&&d-g>=0)return Lw.subVectors(o,r),a=(f-c)/(f-c+(d-g)),n.copy(r).addScaledVector(Lw,a);const m=1/(y+v+h);return s=v*m,a=h*m,n.copy(i).addScaledVector(Rs,s).addScaledVector(Ps,a)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}const JE={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},wi={h:0,s:0,l:0},Vc={h:0,s:0,l:0};function rm(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*6*(2/3-n):e}function om(e){return e<.04045?e*.0773993808:Math.pow(e*.9478672986+.0521327014,2.4)}function sm(e){return e<.0031308?e*12.92:1.055*Math.pow(e,.41666)-.055}class _e{constructor(t,n,i){return Object.defineProperty(this,"isColor",{value:!0}),n===void 0&&i===void 0?this.set(t):this.setRGB(t,n,i)}set(t){return t&&t.isColor?this.copy(t):typeof t=="number"?this.setHex(t):typeof t=="string"&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(t&255)/255,this}setRGB(t,n,i){return this.r=t,this.g=n,this.b=i,this}setHSL(t,n,i){if(t=ke.euclideanModulo(t,1),n=ke.clamp(n,0,1),i=ke.clamp(i,0,1),n===0)this.r=this.g=this.b=i;else{const r=i<=.5?i*(1+n):i+n-i*n,o=2*i-r;this.r=rm(o,r,t+1/3),this.g=rm(o,r,t),this.b=rm(o,r,t-1/3)}return this}setStyle(t){function n(r){r!==void 0&&parseFloat(r)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let i;if(i=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(t)){let r;const o=i[1],s=i[2];switch(o){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,n(r[4]),this;if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,n(r[4]),this;break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s)){const a=parseFloat(r[1])/360,l=parseInt(r[2],10)/100,u=parseInt(r[3],10)/100;return n(r[4]),this.setHSL(a,l,u)}break}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(t)){const r=i[1],o=r.length;if(o===3)return this.r=parseInt(r.charAt(0)+r.charAt(0),16)/255,this.g=parseInt(r.charAt(1)+r.charAt(1),16)/255,this.b=parseInt(r.charAt(2)+r.charAt(2),16)/255,this;if(o===6)return this.r=parseInt(r.charAt(0)+r.charAt(1),16)/255,this.g=parseInt(r.charAt(2)+r.charAt(3),16)/255,this.b=parseInt(r.charAt(4)+r.charAt(5),16)/255,this}return t&&t.length>0?this.setColorName(t):this}setColorName(t){const n=JE[t];return n!==void 0?this.setHex(n):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copyGammaToLinear(t,n=2){return this.r=Math.pow(t.r,n),this.g=Math.pow(t.g,n),this.b=Math.pow(t.b,n),this}copyLinearToGamma(t,n=2){const i=n>0?1/n:1;return this.r=Math.pow(t.r,i),this.g=Math.pow(t.g,i),this.b=Math.pow(t.b,i),this}convertGammaToLinear(t){return this.copyGammaToLinear(this,t),this}convertLinearToGamma(t){return this.copyLinearToGamma(this,t),this}copySRGBToLinear(t){return this.r=om(t.r),this.g=om(t.g),this.b=om(t.b),this}copyLinearToSRGB(t){return this.r=sm(t.r),this.g=sm(t.g),this.b=sm(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return this.r*255<<16^this.g*255<<8^this.b*255<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(t){t===void 0&&(console.warn("THREE.Color: .getHSL() target is now required"),t={h:0,s:0,l:0});const n=this.r,i=this.g,r=this.b,o=Math.max(n,i,r),s=Math.min(n,i,r);let a,l;const u=(s+o)/2;if(s===o)a=0,l=0;else{const c=o-s;switch(l=u<=.5?c/(o+s):c/(2-o-s),o){case n:a=(i-r)/c+(i<r?6:0);break;case i:a=(r-n)/c+2;break;case r:a=(n-i)/c+4;break}a/=6}return t.h=a,t.s=l,t.l=u,t}getStyle(){return"rgb("+(this.r*255|0)+","+(this.g*255|0)+","+(this.b*255|0)+")"}offsetHSL(t,n,i){return this.getHSL(wi),wi.h+=t,wi.s+=n,wi.l+=i,this.setHSL(wi.h,wi.s,wi.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,n){return this.r=t.r+n.r,this.g=t.g+n.g,this.b=t.b+n.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,n){return this.r+=(t.r-this.r)*n,this.g+=(t.g-this.g)*n,this.b+=(t.b-this.b)*n,this}lerpColors(t,n,i){return this.r=t.r+(n.r-t.r)*i,this.g=t.g+(n.g-t.g)*i,this.b=t.b+(n.b-t.b)*i,this}lerpHSL(t,n){this.getHSL(wi),t.getHSL(Vc);const i=ke.lerp(wi.h,Vc.h,n),r=ke.lerp(wi.s,Vc.s,n),o=ke.lerp(wi.l,Vc.l,n);return this.setHSL(i,r,o),this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,n=0){return this.r=t[n],this.g=t[n+1],this.b=t[n+2],this}toArray(t=[],n=0){return t[n]=this.r,t[n+1]=this.g,t[n+2]=this.b,t}fromBufferAttribute(t,n){return this.r=t.getX(n),this.g=t.getY(n),this.b=t.getZ(n),t.normalized===!0&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}_e.NAMES=JE;_e.prototype.r=1;_e.prototype.g=1;_e.prototype.b=1;class sB{constructor(t,n,i,r,o,s=0){this.a=t,this.b=n,this.c=i,this.normal=r&&r.isVector3?r:new F,this.vertexNormals=Array.isArray(r)?r:[],this.color=o&&o.isColor?o:new _e,this.vertexColors=Array.isArray(o)?o:[],this.materialIndex=s}clone(){return new this.constructor().copy(this)}copy(t){this.a=t.a,this.b=t.b,this.c=t.c,this.normal.copy(t.normal),this.color.copy(t.color),this.materialIndex=t.materialIndex;for(let n=0,i=t.vertexNormals.length;n<i;n++)this.vertexNormals[n]=t.vertexNormals[n].clone();for(let n=0,i=t.vertexColors.length;n<i;n++)this.vertexColors[n]=t.vertexColors[n].clone();return this}}let aB=0;function Pe(){Object.defineProperty(this,"id",{value:aB++}),this.uuid=ke.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.blending=jl,this.side=gd,this.flatShading=!1,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=GE,this.blendDst=$E,this.blendEquation=Ws,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=Ug,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=qI,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Gp,this.stencilZFail=Gp,this.stencilZPass=Gp,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0}Pe.prototype=Object.assign(Object.create(ir.prototype),{constructor:Pe,isMaterial:!0,onBeforeCompile:function(){},customProgramCacheKey:function(){return this.onBeforeCompile.toString()},setValues:function(e){if(e!==void 0)for(const t in e){const n=e[t];if(n===void 0){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if(t==="shading"){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=n===WE;continue}const i=this[t];if(i===void 0){console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.");continue}i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[t]=n}},toJSON:function(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(n.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,n.reflectivity=this.reflectivity,n.refractionRatio=this.refractionRatio,this.combine!==void 0&&(n.combine=this.combine),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),this.size!==void 0&&(n.size=this.size),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==jl&&(n.blending=this.blending),this.flatShading===!0&&(n.flatShading=this.flatShading),this.side!==gd&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.morphTargets===!0&&(n.morphTargets=!0),this.morphNormals===!0&&(n.morphNormals=!0),this.skinning===!0&&(n.skinning=!0),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),JSON.stringify(this.userData)!=="{}"&&(n.userData=this.userData);function i(r){const o=[];for(const s in r){const a=r[s];delete a.metadata,o.push(a)}return o}if(t){const r=i(e.textures),o=i(e.images);r.length>0&&(n.textures=r),o.length>0&&(n.images=o)}return n},clone:function(){return new this.constructor().copy(this)},copy:function(e){this.name=e.name,this.fog=e.fog,this.blending=e.blending,this.side=e.side,this.flatShading=e.flatShading,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(t!==null){const i=t.length;n=new Array(i);for(let r=0;r!==i;++r)n[r]=t[r].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this},dispose:function(){this.dispatchEvent({type:"dispose"})}});Object.defineProperty(Pe.prototype,"needsUpdate",{set:function(e){e===!0&&this.version++}});function Er(e){Pe.call(this),this.type="MeshBasicMaterial",this.color=new _e(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=vd,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.setValues(e)}Er.prototype=Object.create(Pe.prototype);Er.prototype.constructor=Er;Er.prototype.isMeshBasicMaterial=!0;Er.prototype.copy=function(e){return Pe.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this};const ut=new F,Wc=new ee;function je(e,t,n){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=n===!0,this.usage=xd,this.updateRange={offset:0,count:-1},this.version=0}Object.defineProperty(je.prototype,"needsUpdate",{set:function(e){e===!0&&this.version++}});Object.assign(je.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(e){return this.usage=e,this},copy:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this},copyAt:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let i=0,r=this.itemSize;i<r;i++)this.array[e+i]=t.array[n+i];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(e){const t=this.array;let n=0;for(let i=0,r=e.length;i<r;i++){let o=e[i];o===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),o=new _e),t[n++]=o.r,t[n++]=o.g,t[n++]=o.b}return this},copyVector2sArray:function(e){const t=this.array;let n=0;for(let i=0,r=e.length;i<r;i++){let o=e[i];o===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),o=new ee),t[n++]=o.x,t[n++]=o.y}return this},copyVector3sArray:function(e){const t=this.array;let n=0;for(let i=0,r=e.length;i<r;i++){let o=e[i];o===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),o=new F),t[n++]=o.x,t[n++]=o.y,t[n++]=o.z}return this},copyVector4sArray:function(e){const t=this.array;let n=0;for(let i=0,r=e.length;i<r;i++){let o=e[i];o===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),o=new ot),t[n++]=o.x,t[n++]=o.y,t[n++]=o.z,t[n++]=o.w}return this},applyMatrix3:function(e){if(this.itemSize===2)for(let t=0,n=this.count;t<n;t++)Wc.fromBufferAttribute(this,t),Wc.applyMatrix3(e),this.setXY(t,Wc.x,Wc.y);else if(this.itemSize===3)for(let t=0,n=this.count;t<n;t++)ut.fromBufferAttribute(this,t),ut.applyMatrix3(e),this.setXYZ(t,ut.x,ut.y,ut.z);return this},applyMatrix4:function(e){for(let t=0,n=this.count;t<n;t++)ut.x=this.getX(t),ut.y=this.getY(t),ut.z=this.getZ(t),ut.applyMatrix4(e),this.setXYZ(t,ut.x,ut.y,ut.z);return this},applyNormalMatrix:function(e){for(let t=0,n=this.count;t<n;t++)ut.x=this.getX(t),ut.y=this.getY(t),ut.z=this.getZ(t),ut.applyNormalMatrix(e),this.setXYZ(t,ut.x,ut.y,ut.z);return this},transformDirection:function(e){for(let t=0,n=this.count;t<n;t++)ut.x=this.getX(t),ut.y=this.getY(t),ut.z=this.getZ(t),ut.transformDirection(e),this.setXYZ(t,ut.x,ut.y,ut.z);return this},set:function(e,t=0){return this.array.set(e,t),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){return this.array[e*this.itemSize]=t,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){return this.array[e*this.itemSize+3]=t,this},setXY:function(e,t,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this},setXYZ:function(e,t,n,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this},setXYZW:function(e,t,n,i,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this.array[e+3]=r,this},onUpload:function(e){return this.onUploadCallback=e,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}});function jg(e,t,n){je.call(this,new Int8Array(e),t,n)}jg.prototype=Object.create(je.prototype);jg.prototype.constructor=jg;function Vg(e,t,n){je.call(this,new Uint8Array(e),t,n)}Vg.prototype=Object.create(je.prototype);Vg.prototype.constructor=Vg;function Wg(e,t,n){je.call(this,new Uint8ClampedArray(e),t,n)}Wg.prototype=Object.create(je.prototype);Wg.prototype.constructor=Wg;function Gg(e,t,n){je.call(this,new Int16Array(e),t,n)}Gg.prototype=Object.create(je.prototype);Gg.prototype.constructor=Gg;function _u(e,t,n){je.call(this,new Uint16Array(e),t,n)}_u.prototype=Object.create(je.prototype);_u.prototype.constructor=_u;function $g(e,t,n){je.call(this,new Int32Array(e),t,n)}$g.prototype=Object.create(je.prototype);$g.prototype.constructor=$g;function bu(e,t,n){je.call(this,new Uint32Array(e),t,n)}bu.prototype=Object.create(je.prototype);bu.prototype.constructor=bu;function vh(e,t,n){je.call(this,new Uint16Array(e),t,n)}vh.prototype=Object.create(je.prototype);vh.prototype.constructor=vh;vh.prototype.isFloat16BufferAttribute=!0;function bt(e,t,n){je.call(this,new Float32Array(e),t,n)}bt.prototype=Object.create(je.prototype);bt.prototype.constructor=bt;function Xg(e,t,n){je.call(this,new Float64Array(e),t,n)}Xg.prototype=Object.create(je.prototype);Xg.prototype.constructor=Xg;function KE(e){if(e.length===0)return-1/0;let t=e[0];for(let n=1,i=e.length;n<i;++n)e[n]>t&&(t=e[n]);return t}const lB={Int8Array,Uint8Array,Uint8ClampedArray:typeof Uint8ClampedArray<"u"?Uint8ClampedArray:Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Gc(e,t){return new lB[e](t)}let uB=0;const Ii=new Ve,am=new Re,As=new F,Un=new vs,gl=new vs,Vt=new F;function ft(){Object.defineProperty(this,"id",{value:uB++}),this.uuid=ke.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}ft.prototype=Object.assign(Object.create(ir.prototype),{constructor:ft,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(e){return Array.isArray(e)?this.index=new(KE(e)>65535?bu:_u)(e,1):this.index=e,this},getAttribute:function(e){return this.attributes[e]},setAttribute:function(e,t){return this.attributes[e]=t,this},deleteAttribute:function(e){return delete this.attributes[e],this},hasAttribute:function(e){return this.attributes[e]!==void 0},addGroup:function(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e,this.drawRange.count=t},applyMatrix4:function(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const r=new li().getNormalMatrix(e);n.applyNormalMatrix(r),n.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this},rotateX:function(e){return Ii.makeRotationX(e),this.applyMatrix4(Ii),this},rotateY:function(e){return Ii.makeRotationY(e),this.applyMatrix4(Ii),this},rotateZ:function(e){return Ii.makeRotationZ(e),this.applyMatrix4(Ii),this},translate:function(e,t,n){return Ii.makeTranslation(e,t,n),this.applyMatrix4(Ii),this},scale:function(e,t,n){return Ii.makeScale(e,t,n),this.applyMatrix4(Ii),this},lookAt:function(e){return am.lookAt(e),am.updateMatrix(),this.applyMatrix4(am.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(As).negate(),this.translate(As.x,As.y,As.z),this},setFromPoints:function(e){const t=[];for(let n=0,i=e.length;n<i;n++){const r=e[n];t.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new bt(t,3)),this},computeBoundingBox:function(){this.boundingBox===null&&(this.boundingBox=new vs);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new F(-1/0,-1/0,-1/0),new F(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,i=t.length;n<i;n++){const r=t[n];Un.setFromBufferAttribute(r),this.morphTargetsRelative?(Vt.addVectors(this.boundingBox.min,Un.min),this.boundingBox.expandByPoint(Vt),Vt.addVectors(this.boundingBox.max,Un.max),this.boundingBox.expandByPoint(Vt)):(this.boundingBox.expandByPoint(Un.min),this.boundingBox.expandByPoint(Un.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){this.boundingSphere===null&&(this.boundingSphere=new ys);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new F,1/0);return}if(e){const n=this.boundingSphere.center;if(Un.setFromBufferAttribute(e),t)for(let r=0,o=t.length;r<o;r++){const s=t[r];gl.setFromBufferAttribute(s),this.morphTargetsRelative?(Vt.addVectors(Un.min,gl.min),Un.expandByPoint(Vt),Vt.addVectors(Un.max,gl.max),Un.expandByPoint(Vt)):(Un.expandByPoint(gl.min),Un.expandByPoint(gl.max))}Un.getCenter(n);let i=0;for(let r=0,o=e.count;r<o;r++)Vt.fromBufferAttribute(e,r),i=Math.max(i,n.distanceToSquared(Vt));if(t)for(let r=0,o=t.length;r<o;r++){const s=t[r],a=this.morphTargetsRelative;for(let l=0,u=s.count;l<u;l++)Vt.fromBufferAttribute(s,l),a&&(As.fromBufferAttribute(e,l),Vt.add(As)),i=Math.max(i,n.distanceToSquared(Vt))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}},computeFaceNormals:function(){},computeTangents:function(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const n=e.array,i=t.position.array,r=t.normal.array,o=t.uv.array,s=i.length/3;t.tangent===void 0&&this.setAttribute("tangent",new je(new Float32Array(4*s),4));const a=t.tangent.array,l=[],u=[];for(let E=0;E<s;E++)l[E]=new F,u[E]=new F;const c=new F,f=new F,h=new F,d=new ee,g=new ee,v=new ee,y=new F,m=new F;function p(E,A,B){c.fromArray(i,E*3),f.fromArray(i,A*3),h.fromArray(i,B*3),d.fromArray(o,E*2),g.fromArray(o,A*2),v.fromArray(o,B*2),f.sub(c),h.sub(c),g.sub(d),v.sub(d);const j=1/(g.x*v.y-v.x*g.y);isFinite(j)&&(y.copy(f).multiplyScalar(v.y).addScaledVector(h,-g.y).multiplyScalar(j),m.copy(h).multiplyScalar(g.x).addScaledVector(f,-v.x).multiplyScalar(j),l[E].add(y),l[A].add(y),l[B].add(y),u[E].add(m),u[A].add(m),u[B].add(m))}let x=this.groups;x.length===0&&(x=[{start:0,count:n.length}]);for(let E=0,A=x.length;E<A;++E){const B=x[E],j=B.start,z=B.count;for(let k=j,U=j+z;k<U;k+=3)p(n[k+0],n[k+1],n[k+2])}const w=new F,b=new F,_=new F,S=new F;function L(E){_.fromArray(r,E*3),S.copy(_);const A=l[E];w.copy(A),w.sub(_.multiplyScalar(_.dot(A))).normalize(),b.crossVectors(S,A);const j=b.dot(u[E])<0?-1:1;a[E*4]=w.x,a[E*4+1]=w.y,a[E*4+2]=w.z,a[E*4+3]=j}for(let E=0,A=x.length;E<A;++E){const B=x[E],j=B.start,z=B.count;for(let k=j,U=j+z;k<U;k+=3)L(n[k+0]),L(n[k+1]),L(n[k+2])}},computeVertexNormals:function(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new je(new Float32Array(t.count*3),3),this.setAttribute("normal",n);else for(let f=0,h=n.count;f<h;f++)n.setXYZ(f,0,0,0);const i=new F,r=new F,o=new F,s=new F,a=new F,l=new F,u=new F,c=new F;if(e)for(let f=0,h=e.count;f<h;f+=3){const d=e.getX(f+0),g=e.getX(f+1),v=e.getX(f+2);i.fromBufferAttribute(t,d),r.fromBufferAttribute(t,g),o.fromBufferAttribute(t,v),u.subVectors(o,r),c.subVectors(i,r),u.cross(c),s.fromBufferAttribute(n,d),a.fromBufferAttribute(n,g),l.fromBufferAttribute(n,v),s.add(u),a.add(u),l.add(u),n.setXYZ(d,s.x,s.y,s.z),n.setXYZ(g,a.x,a.y,a.z),n.setXYZ(v,l.x,l.y,l.z)}else for(let f=0,h=t.count;f<h;f+=3)i.fromBufferAttribute(t,f+0),r.fromBufferAttribute(t,f+1),o.fromBufferAttribute(t,f+2),u.subVectors(o,r),c.subVectors(i,r),u.cross(c),n.setXYZ(f+0,u.x,u.y,u.z),n.setXYZ(f+1,u.x,u.y,u.z),n.setXYZ(f+2,u.x,u.y,u.z);this.normalizeNormals(),n.needsUpdate=!0}},merge:function(e,t){if(!(e&&e.isBufferGeometry)){console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);return}t===void 0&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const n=this.attributes;for(const i in n){if(e.attributes[i]===void 0)continue;const o=n[i].array,s=e.attributes[i],a=s.array,l=s.itemSize*t,u=Math.min(a.length,o.length-l);for(let c=0,f=l;c<u;c++,f++)o[f]=a[c]}return this},normalizeNormals:function(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)Vt.fromBufferAttribute(e,t),Vt.normalize(),e.setXYZ(t,Vt.x,Vt.y,Vt.z)},toNonIndexed:function(){function e(s,a){const l=s.array,u=s.itemSize,c=s.normalized,f=new l.constructor(a.length*u);let h=0,d=0;for(let g=0,v=a.length;g<v;g++){h=a[g]*u;for(let y=0;y<u;y++)f[d++]=l[h++]}return new je(f,u,c)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new ft,n=this.index.array,i=this.attributes;for(const s in i){const a=i[s],l=e(a,n);t.setAttribute(s,l)}const r=this.morphAttributes;for(const s in r){const a=[],l=r[s];for(let u=0,c=l.length;u<c;u++){const f=l[u],h=e(f,n);a.push(h)}t.morphAttributes[s]=a}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let s=0,a=o.length;s<a;s++){const l=o[s];t.addGroup(l.start,l.count,l.materialIndex)}return t},toJSON:function(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const a=this.parameters;for(const l in a)a[l]!==void 0&&(e[l]=a[l]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const a in n){const l=n[a],u=l.toJSON(e.data);l.name!==""&&(u.name=l.name),e.data.attributes[a]=u}const i={};let r=!1;for(const a in this.morphAttributes){const l=this.morphAttributes[a],u=[];for(let c=0,f=l.length;c<f;c++){const h=l[c],d=h.toJSON(e.data);h.name!==""&&(d.name=h.name),u.push(d)}u.length>0&&(i[a]=u,r=!0)}r&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const s=this.boundingSphere;return s!==null&&(e.data.boundingSphere={center:s.center.toArray(),radius:s.radius}),e},clone:function(){return new ft().copy(this)},copy:function(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;n!==null&&this.setIndex(n.clone(t));const i=e.attributes;for(const l in i){const u=i[l];this.setAttribute(l,u.clone(t))}const r=e.morphAttributes;for(const l in r){const u=[],c=r[l];for(let f=0,h=c.length;f<h;f++)u.push(c[f].clone(t));this.morphAttributes[l]=u}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let l=0,u=o.length;l<u;l++){const c=o[l];this.addGroup(c.start,c.count,c.materialIndex)}const s=e.boundingBox;s!==null&&(this.boundingBox=s.clone());const a=e.boundingSphere;return a!==null&&(this.boundingSphere=a.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});const Cw=new Ve,Ds=new Zu,lm=new ys,jr=new F,Vr=new F,Wr=new F,um=new F,cm=new F,fm=new F,$c=new F,Xc=new F,Yc=new F,qc=new ee,Zc=new ee,Jc=new ee,hm=new F,Kc=new F;function pt(e=new ft,t=new Er){Re.call(this),this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}pt.prototype=Object.assign(Object.create(Re.prototype),{constructor:pt,isMesh:!0,copy:function(e){return Re.prototype.copy.call(this,e),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this},updateMorphTargets:function(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const i=t[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,o=i.length;r<o;r++){const s=i[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=r}}}}else{const t=e.morphTargets;t!==void 0&&t.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},raycast:function(e,t){const n=this.geometry,i=this.material,r=this.matrixWorld;if(i===void 0||(n.boundingSphere===null&&n.computeBoundingSphere(),lm.copy(n.boundingSphere),lm.applyMatrix4(r),e.ray.intersectsSphere(lm)===!1)||(Cw.copy(r).invert(),Ds.copy(e.ray).applyMatrix4(Cw),n.boundingBox!==null&&Ds.intersectsBox(n.boundingBox)===!1))return;let o;if(n.isBufferGeometry){const s=n.index,a=n.attributes.position,l=n.morphAttributes.position,u=n.morphTargetsRelative,c=n.attributes.uv,f=n.attributes.uv2,h=n.groups,d=n.drawRange;if(s!==null)if(Array.isArray(i))for(let g=0,v=h.length;g<v;g++){const y=h[g],m=i[y.materialIndex],p=Math.max(y.start,d.start),x=Math.min(y.start+y.count,d.start+d.count);for(let w=p,b=x;w<b;w+=3){const _=s.getX(w),S=s.getX(w+1),L=s.getX(w+2);o=Qc(this,m,e,Ds,a,l,u,c,f,_,S,L),o&&(o.faceIndex=Math.floor(w/3),o.face.materialIndex=y.materialIndex,t.push(o))}}else{const g=Math.max(0,d.start),v=Math.min(s.count,d.start+d.count);for(let y=g,m=v;y<m;y+=3){const p=s.getX(y),x=s.getX(y+1),w=s.getX(y+2);o=Qc(this,i,e,Ds,a,l,u,c,f,p,x,w),o&&(o.faceIndex=Math.floor(y/3),t.push(o))}}else if(a!==void 0)if(Array.isArray(i))for(let g=0,v=h.length;g<v;g++){const y=h[g],m=i[y.materialIndex],p=Math.max(y.start,d.start),x=Math.min(y.start+y.count,d.start+d.count);for(let w=p,b=x;w<b;w+=3){const _=w,S=w+1,L=w+2;o=Qc(this,m,e,Ds,a,l,u,c,f,_,S,L),o&&(o.faceIndex=Math.floor(w/3),o.face.materialIndex=y.materialIndex,t.push(o))}}else{const g=Math.max(0,d.start),v=Math.min(a.count,d.start+d.count);for(let y=g,m=v;y<m;y+=3){const p=y,x=y+1,w=y+2;o=Qc(this,i,e,Ds,a,l,u,c,f,p,x,w),o&&(o.faceIndex=Math.floor(y/3),t.push(o))}}}else n.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}});function cB(e,t,n,i,r,o,s,a){let l;if(t.side===xt?l=i.intersectTriangle(s,o,r,!0,a):l=i.intersectTriangle(r,o,s,t.side!==Ti,a),l===null)return null;Kc.copy(a),Kc.applyMatrix4(e.matrixWorld);const u=n.ray.origin.distanceTo(Kc);return u<n.near||u>n.far?null:{distance:u,point:Kc.clone(),object:e}}function Qc(e,t,n,i,r,o,s,a,l,u,c,f){jr.fromBufferAttribute(r,u),Vr.fromBufferAttribute(r,c),Wr.fromBufferAttribute(r,f);const h=e.morphTargetInfluences;if(t.morphTargets&&o&&h){$c.set(0,0,0),Xc.set(0,0,0),Yc.set(0,0,0);for(let g=0,v=o.length;g<v;g++){const y=h[g],m=o[g];y!==0&&(um.fromBufferAttribute(m,u),cm.fromBufferAttribute(m,c),fm.fromBufferAttribute(m,f),s?($c.addScaledVector(um,y),Xc.addScaledVector(cm,y),Yc.addScaledVector(fm,y)):($c.addScaledVector(um.sub(jr),y),Xc.addScaledVector(cm.sub(Vr),y),Yc.addScaledVector(fm.sub(Wr),y)))}jr.add($c),Vr.add(Xc),Wr.add(Yc)}e.isSkinnedMesh&&(e.boneTransform(u,jr),e.boneTransform(c,Vr),e.boneTransform(f,Wr));const d=cB(e,t,n,i,jr,Vr,Wr,hm);if(d){a&&(qc.fromBufferAttribute(a,u),Zc.fromBufferAttribute(a,c),Jc.fromBufferAttribute(a,f),d.uv=vn.getUV(hm,jr,Vr,Wr,qc,Zc,Jc,new ee)),l&&(qc.fromBufferAttribute(l,u),Zc.fromBufferAttribute(l,c),Jc.fromBufferAttribute(l,f),d.uv2=vn.getUV(hm,jr,Vr,Wr,qc,Zc,Jc,new ee));const g=new sB(u,c,f);vn.getNormal(jr,Vr,Wr,g.normal),d.face=g}return d}class wd extends ft{constructor(t=1,n=1,i=1,r=1,o=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:n,depth:i,widthSegments:r,heightSegments:o,depthSegments:s};const a=this;r=Math.floor(r),o=Math.floor(o),s=Math.floor(s);const l=[],u=[],c=[],f=[];let h=0,d=0;g("z","y","x",-1,-1,i,n,t,s,o,0),g("z","y","x",1,-1,i,n,-t,s,o,1),g("x","z","y",1,1,t,i,n,r,s,2),g("x","z","y",1,-1,t,i,-n,r,s,3),g("x","y","z",1,-1,t,n,i,r,o,4),g("x","y","z",-1,-1,t,n,-i,r,o,5),this.setIndex(l),this.setAttribute("position",new bt(u,3)),this.setAttribute("normal",new bt(c,3)),this.setAttribute("uv",new bt(f,2));function g(v,y,m,p,x,w,b,_,S,L,E){const A=w/S,B=b/L,j=w/2,z=b/2,k=_/2,U=S+1,D=L+1;let G=0,I=0;const H=new F;for(let V=0;V<D;V++){const J=V*B-z;for(let he=0;he<U;he++){const ge=he*A-j;H[v]=ge*p,H[y]=J*x,H[m]=k,u.push(H.x,H.y,H.z),H[v]=0,H[y]=0,H[m]=_>0?1:-1,c.push(H.x,H.y,H.z),f.push(he/S),f.push(1-V/L),G+=1}}for(let V=0;V<L;V++)for(let J=0;J<S;J++){const he=h+J+U*V,ge=h+J+U*(V+1),xe=h+(J+1)+U*(V+1),Y=h+(J+1)+U*V;l.push(he,ge,Y),l.push(ge,xe,Y),I+=6}a.addGroup(d,I,E),d+=I,h+=G}}}function Ta(e){const t={};for(const n in e){t[n]={};for(const i in e[n]){const r=e[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture)?t[n][i]=r.clone():Array.isArray(r)?t[n][i]=r.slice():t[n][i]=r}}return t}function rn(e){const t={};for(let n=0;n<e.length;n++){const i=Ta(e[n]);for(const r in i)t[r]=i[r]}return t}const fB={clone:Ta,merge:rn};var hB=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,dB=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;function Fn(e){Pe.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=hB,this.fragmentShader=dB,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&(e.attributes!==void 0&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}Fn.prototype=Object.create(Pe.prototype);Fn.prototype.constructor=Fn;Fn.prototype.isShaderMaterial=!0;Fn.prototype.copy=function(e){return Pe.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Ta(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this};Fn.prototype.toJSON=function(e){const t=Pe.prototype.toJSON.call(this,e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const o=this.uniforms[i].value;o&&o.isTexture?t.uniforms[i]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[i]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[i]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[i]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[i]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[i]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[i]={type:"m4",value:o.toArray()}:t.uniforms[i]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const n={};for(const i in this.extensions)this.extensions[i]===!0&&(n[i]=!0);return Object.keys(n).length>0&&(t.extensions=n),t};function _o(){Re.call(this),this.type="Camera",this.matrixWorldInverse=new Ve,this.projectionMatrix=new Ve,this.projectionMatrixInverse=new Ve}_o.prototype=Object.assign(Object.create(Re.prototype),{constructor:_o,isCamera:!0,copy:function(e,t){return Re.prototype.copy.call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this},getWorldDirection:function(e){e===void 0&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),e=new F),this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()},updateMatrixWorld:function(e){Re.prototype.updateMatrixWorld.call(this,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()},updateWorldMatrix:function(e,t){Re.prototype.updateWorldMatrix.call(this,e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()},clone:function(){return new this.constructor().copy(this)}});function Gt(e=50,t=1,n=.1,i=2e3){_o.call(this),this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}Gt.prototype=Object.assign(Object.create(_o.prototype),{constructor:Gt,isPerspectiveCamera:!0,copy:function(e,t){return _o.prototype.copy.call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this},setFocalLength:function(e){const t=.5*this.getFilmHeight()/e;this.fov=ke.RAD2DEG*2*Math.atan(t),this.updateProjectionMatrix()},getFocalLength:function(){const e=Math.tan(ke.DEG2RAD*.5*this.fov);return .5*this.getFilmHeight()/e},getEffectiveFOV:function(){return ke.RAD2DEG*2*Math.atan(Math.tan(ke.DEG2RAD*.5*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(e,t,n,i,r,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){const e=this.near;let t=e*Math.tan(ke.DEG2RAD*.5*this.fov)/this.zoom,n=2*t,i=this.aspect*n,r=-.5*i;const o=this.view;if(this.view!==null&&this.view.enabled){const a=o.fullWidth,l=o.fullHeight;r+=o.offsetX*i/a,t-=o.offsetY*n/l,i*=o.width/a,n*=o.height/l}const s=this.filmOffset;s!==0&&(r+=e*s/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+i,t,t-n,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()},toJSON:function(e){const t=Re.prototype.toJSON.call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}});const Os=90,Fs=1;function La(e,t,n){if(Re.call(this),this.type="CubeCamera",n.isWebGLCubeRenderTarget!==!0){console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");return}this.renderTarget=n;const i=new Gt(Os,Fs,e,t);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new F(1,0,0)),this.add(i);const r=new Gt(Os,Fs,e,t);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new F(-1,0,0)),this.add(r);const o=new Gt(Os,Fs,e,t);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(new F(0,1,0)),this.add(o);const s=new Gt(Os,Fs,e,t);s.layers=this.layers,s.up.set(0,0,-1),s.lookAt(new F(0,-1,0)),this.add(s);const a=new Gt(Os,Fs,e,t);a.layers=this.layers,a.up.set(0,-1,0),a.lookAt(new F(0,0,1)),this.add(a);const l=new Gt(Os,Fs,e,t);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new F(0,0,-1)),this.add(l),this.update=function(u,c){this.parent===null&&this.updateMatrixWorld();const f=u.xr.enabled,h=u.getRenderTarget();u.xr.enabled=!1;const d=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,u.setRenderTarget(n,0),u.render(c,i),u.setRenderTarget(n,1),u.render(c,r),u.setRenderTarget(n,2),u.render(c,o),u.setRenderTarget(n,3),u.render(c,s),u.setRenderTarget(n,4),u.render(c,a),n.texture.generateMipmaps=d,u.setRenderTarget(n,5),u.render(c,l),u.setRenderTarget(h),u.xr.enabled=f}}La.prototype=Object.create(Re.prototype);La.prototype.constructor=La;function bo(e,t,n,i,r,o,s,a,l,u){e=e!==void 0?e:[],t=t!==void 0?t:o0,s=s!==void 0?s:Zo,ht.call(this,e,t,n,i,r,o,s,a,l,u),this.flipY=!1,this._needsFlipEnvMap=!0}bo.prototype=Object.create(ht.prototype);bo.prototype.constructor=bo;bo.prototype.isCubeTexture=!0;Object.defineProperty(bo.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}});class pB extends Gl{constructor(t,n,i){Number.isInteger(n)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),n=i),super(t,t,n),Object.defineProperty(this,"isWebGLCubeRenderTarget",{value:!0}),n=n||{},this.texture=new bo(void 0,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture._needsFlipEnvMap=!1}fromEquirectangularTexture(t,n){this.texture.type=n.type,this.texture.format=Di,this.texture.encoding=n.encoding,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new wd(5,5,5),o=new Fn({name:"CubemapFromEquirect",uniforms:Ta(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:xt,blending:Hl});o.uniforms.tEquirect.value=n;const s=new pt(r,o),a=n.minFilter;return n.minFilter===yd&&(n.minFilter=un),new La(1,10,this).update(t,s),n.minFilter=a,s.geometry.dispose(),s.material.dispose(),this}clear(t,n,i,r){const o=t.getRenderTarget();for(let s=0;s<6;s++)t.setRenderTarget(this,s),t.clear(n,i,r);t.setRenderTarget(o)}}function Ca(e,t,n,i,r,o,s,a,l,u,c,f){ht.call(this,null,o,s,a,l,u,i,r,c,f),this.image={data:e||null,width:t||1,height:n||1},this.magFilter=l!==void 0?l:gn,this.minFilter=u!==void 0?u:gn,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}Ca.prototype=Object.create(ht.prototype);Ca.prototype.constructor=Ca;Ca.prototype.isDataTexture=!0;const ks=new ys,ef=new F;class _d{constructor(t,n,i,r,o,s){this.planes=[t!==void 0?t:new mr,n!==void 0?n:new mr,i!==void 0?i:new mr,r!==void 0?r:new mr,o!==void 0?o:new mr,s!==void 0?s:new mr]}set(t,n,i,r,o,s){const a=this.planes;return a[0].copy(t),a[1].copy(n),a[2].copy(i),a[3].copy(r),a[4].copy(o),a[5].copy(s),this}clone(){return new this.constructor().copy(this)}copy(t){const n=this.planes;for(let i=0;i<6;i++)n[i].copy(t.planes[i]);return this}setFromProjectionMatrix(t){const n=this.planes,i=t.elements,r=i[0],o=i[1],s=i[2],a=i[3],l=i[4],u=i[5],c=i[6],f=i[7],h=i[8],d=i[9],g=i[10],v=i[11],y=i[12],m=i[13],p=i[14],x=i[15];return n[0].setComponents(a-r,f-l,v-h,x-y).normalize(),n[1].setComponents(a+r,f+l,v+h,x+y).normalize(),n[2].setComponents(a+o,f+u,v+d,x+m).normalize(),n[3].setComponents(a-o,f-u,v-d,x-m).normalize(),n[4].setComponents(a-s,f-c,v-g,x-p).normalize(),n[5].setComponents(a+s,f+c,v+g,x+p).normalize(),this}intersectsObject(t){const n=t.geometry;return n.boundingSphere===null&&n.computeBoundingSphere(),ks.copy(n.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(ks)}intersectsSprite(t){return ks.center.set(0,0,0),ks.radius=.7071067811865476,ks.applyMatrix4(t.matrixWorld),this.intersectsSphere(ks)}intersectsSphere(t){const n=this.planes,i=t.center,r=-t.radius;for(let o=0;o<6;o++)if(n[o].distanceToPoint(i)<r)return!1;return!0}intersectsBox(t){const n=this.planes;for(let i=0;i<6;i++){const r=n[i];if(ef.x=r.normal.x>0?t.max.x:t.min.x,ef.y=r.normal.y>0?t.max.y:t.min.y,ef.z=r.normal.z>0?t.max.z:t.min.z,r.distanceToPoint(ef)<0)return!1}return!0}containsPoint(t){const n=this.planes;for(let i=0;i<6;i++)if(n[i].distanceToPoint(t)<0)return!1;return!0}}function QE(){let e=null,t=!1,n=null,i=null;function r(o,s){n(o,s),i=e.requestAnimationFrame(r)}return{start:function(){t!==!0&&n!==null&&(i=e.requestAnimationFrame(r),t=!0)},stop:function(){e.cancelAnimationFrame(i),t=!1},setAnimationLoop:function(o){n=o},setContext:function(o){e=o}}}function mB(e,t){const n=t.isWebGL2,i=new WeakMap;function r(u,c){const f=u.array,h=u.usage,d=e.createBuffer();e.bindBuffer(c,d),e.bufferData(c,f,h),u.onUploadCallback();let g=5126;return f instanceof Float32Array?g=5126:f instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):f instanceof Uint16Array?u.isFloat16BufferAttribute?n?g=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):g=5123:f instanceof Int16Array?g=5122:f instanceof Uint32Array?g=5125:f instanceof Int32Array?g=5124:f instanceof Int8Array?g=5120:f instanceof Uint8Array&&(g=5121),{buffer:d,type:g,bytesPerElement:f.BYTES_PER_ELEMENT,version:u.version}}function o(u,c,f){const h=c.array,d=c.updateRange;e.bindBuffer(f,u),d.count===-1?e.bufferSubData(f,0,h):(n?e.bufferSubData(f,d.offset*h.BYTES_PER_ELEMENT,h,d.offset,d.count):e.bufferSubData(f,d.offset*h.BYTES_PER_ELEMENT,h.subarray(d.offset,d.offset+d.count)),d.count=-1)}function s(u){return u.isInterleavedBufferAttribute&&(u=u.data),i.get(u)}function a(u){u.isInterleavedBufferAttribute&&(u=u.data);const c=i.get(u);c&&(e.deleteBuffer(c.buffer),i.delete(u))}function l(u,c){if(u.isGLBufferAttribute){const h=i.get(u);(!h||h.version<u.version)&&i.set(u,{buffer:u.buffer,type:u.type,bytesPerElement:u.elementSize,version:u.version});return}u.isInterleavedBufferAttribute&&(u=u.data);const f=i.get(u);f===void 0?i.set(u,r(u,c)):f.version<u.version&&(o(f.buffer,u,c),f.version=u.version)}return{get:s,remove:a,update:l}}class eT extends ft{constructor(t=1,n=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:n,widthSegments:i,heightSegments:r};const o=t/2,s=n/2,a=Math.floor(i),l=Math.floor(r),u=a+1,c=l+1,f=t/a,h=n/l,d=[],g=[],v=[],y=[];for(let m=0;m<c;m++){const p=m*h-s;for(let x=0;x<u;x++){const w=x*f-o;g.push(w,-p,0),v.push(0,0,1),y.push(x/a),y.push(1-m/l)}}for(let m=0;m<l;m++)for(let p=0;p<a;p++){const x=p+u*m,w=p+u*(m+1),b=p+1+u*(m+1),_=p+1+u*m;d.push(x,w,_),d.push(w,b,_)}this.setIndex(d),this.setAttribute("position",new bt(g,3)),this.setAttribute("normal",new bt(v,3)),this.setAttribute("uv",new bt(y,2))}}var gB=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,vB=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,yB=`#ifdef ALPHATEST
	if ( diffuseColor.a < ALPHATEST ) discard;
#endif`,xB=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );
	#endif
#endif`,wB=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,_B="vec3 transformed = vec3( position );",bB=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,SB=`vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	return vec2( -1.04, 1.04 ) * a004 + r.zw;
}
float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
#if defined ( PHYSICALLY_CORRECT_LIGHTS )
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
#else
	if( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
		return pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );
	}
	return 1.0;
#endif
}
vec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {
	float fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );
	return ( 1.0 - specularColor ) * fresnel + specularColor;
}
vec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {
	float fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );
	vec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;
	return Fr * fresnel + F0;
}
float G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	float gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	return 1.0 / ( gl * gv );
}
float G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( incidentLight.direction + viewDir );
	float dotNL = saturate( dot( normal, incidentLight.direction ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
	vec3 F = F_Schlick( specularColor, dotLH );
	float G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( G * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
vec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 brdf = integrateSpecularBRDF( dotNV, roughness );
	return specularColor * brdf.x + brdf.y;
}
void BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
	float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
	vec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );
	vec2 brdf = integrateSpecularBRDF( dotNV, roughness );
	vec3 FssEss = F * brdf.x + brdf.y;
	float Ess = brdf.x + brdf.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );
	float dotNH = saturate( dot( geometry.normal, halfDir ) );
	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
	vec3 F = F_Schlick( specularColor, dotLH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
float GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {
	return ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );
}
float BlinnExponentToGGXRoughness( const in float blinnExponent ) {
	return sqrt( 2.0 / ( blinnExponent + 2.0 ) );
}
#if defined( USE_SHEEN )
float D_Charlie(float roughness, float NoH) {
	float invAlpha = 1.0 / roughness;
	float cos2h = NoH * NoH;
	float sin2h = max(1.0 - cos2h, 0.0078125);	return (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);
}
float V_Neubelt(float NoV, float NoL) {
	return saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));
}
vec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {
	vec3 N = geometry.normal;
	vec3 V = geometry.viewDir;
	vec3 H = normalize( V + L );
	float dotNH = saturate( dot( N, H ) );
	return specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );
}
#endif`,MB=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {
		vec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );
		vec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 );
		fDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,EB=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,TB=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,LB=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,CB=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,RB=`#ifdef USE_COLOR
	diffuseColor.rgb *= vColor;
#endif`,PB=`#ifdef USE_COLOR
	varying vec3 vColor;
#endif`,AB=`#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,DB=`#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor.xyz *= color.xyz;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,OB=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate(a) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement(a) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract(sin(sn) * c);
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
vec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	float distance = dot( planeNormal, point - pointOnPlane );
	return - distance * planeNormal + point;
}
float sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return sign( dot( point - pointOnPlane, planeNormal ) );
}
vec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float linearToRelativeLuminance( const in vec3 color ) {
	vec3 weights = vec3( 0.2126, 0.7152, 0.0722 );
	return dot( weights, color.rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,FB=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_maxMipLevel 8.0
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_maxTileSize 256.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		float texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );
		vec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );
		vec2 f = fract( uv );
		uv += 0.5 - f;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		if ( mipInt < cubeUV_maxMipLevel ) {
			uv.y += 2.0 * cubeUV_maxTileSize;
		}
		uv.y += filterInt * 2.0 * cubeUV_minTileSize;
		uv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );
		uv *= texelSize;
		vec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		uv.x += texelSize;
		vec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		uv.y += texelSize;
		vec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		uv.x -= texelSize;
		vec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		vec3 tm = mix( tl, tr, f.x );
		vec3 bm = mix( bl, br, f.x );
		return mix( tm, bm, f.y );
	}
	#define r0 1.0
	#define v0 0.339
	#define m0 - 2.0
	#define r1 0.8
	#define v1 0.276
	#define m1 - 1.0
	#define r4 0.4
	#define v4 0.046
	#define m4 2.0
	#define r5 0.305
	#define v5 0.016
	#define m5 3.0
	#define r6 0.21
	#define v6 0.0038
	#define m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= r1 ) {
			mip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;
		} else if ( roughness >= r4 ) {
			mip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;
		} else if ( roughness >= r5 ) {
			mip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;
		} else if ( roughness >= r6 ) {
			mip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,kB=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,NB=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,IB=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,BB=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	emissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,UB=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,zB="gl_FragColor = linearToOutputTexel( gl_FragColor );",HB=`
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 GammaToLinear( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );
}
vec4 LinearToGamma( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );
}
vec4 sRGBToLinear( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 RGBEToLinear( in vec4 value ) {
	return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );
}
vec4 LinearToRGBE( in vec4 value ) {
	float maxComponent = max( max( value.r, value.g ), value.b );
	float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );
	return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );
}
vec4 RGBMToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * value.a * maxRange, 1.0 );
}
vec4 LinearToRGBM( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float M = clamp( maxRGB / maxRange, 0.0, 1.0 );
	M = ceil( M * 255.0 ) / 255.0;
	return vec4( value.rgb / ( M * maxRange ), M );
}
vec4 RGBDToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );
}
vec4 LinearToRGBD( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float D = max( maxRange / maxRGB, 1.0 );
	D = clamp( floor( D ) / 255.0, 0.0, 1.0 );
	return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );
}
const mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );
vec4 LinearToLogLuv( in vec4 value ) {
	vec3 Xp_Y_XYZp = cLogLuvM * value.rgb;
	Xp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );
	vec4 vResult;
	vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;
	float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;
	vResult.w = fract( Le );
	vResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;
	return vResult;
}
const mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );
vec4 LogLuvToLinear( in vec4 value ) {
	float Le = value.z * 255.0 + value.w;
	vec3 Xp_Y_XYZp;
	Xp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );
	Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;
	Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;
	vec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;
	return vec4( max( vRGB, 0.0 ), 1.0 );
}`,jB=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifndef ENVMAP_TYPE_CUBE_UV
		envColor = envMapTexelToLinear( envColor );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,VB=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform int maxMipLevel;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,WB=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,GB=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,$B=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,XB=`#ifdef USE_FOG
	fogDepth = - mvPosition.z;
#endif`,YB=`#ifdef USE_FOG
	varying float fogDepth;
#endif`,qB=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, fogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,ZB=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float fogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,JB=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return texture2D( gradientMap, coord ).rgb;
	#else
		return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );
	#endif
}`,KB=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel= texture2D( lightMap, vUv2 );
	reflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
#endif`,QB=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,eU=`vec3 diffuse = vec3( 1.0 );
GeometricContext geometry;
geometry.position = mvPosition.xyz;
geometry.normal = normalize( transformedNormal );
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
GeometricContext backGeometry;
backGeometry.position = geometry.position;
backGeometry.normal = -geometry.normal;
backGeometry.viewDir = geometry.viewDir;
vLightFront = vec3( 0.0 );
vIndirectFront = vec3( 0.0 );
#ifdef DOUBLE_SIDED
	vLightBack = vec3( 0.0 );
	vIndirectBack = vec3( 0.0 );
#endif
IncidentLight directLight;
float dotNL;
vec3 directLightColor_Diffuse;
vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
vIndirectFront += getLightProbeIrradiance( lightProbe, geometry );
#ifdef DOUBLE_SIDED
	vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
	vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );
#endif
#if NUM_POINT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		getPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_SPOT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		getSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_DIR_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		getDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_HEMI_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
		vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		#ifdef DOUBLE_SIDED
			vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );
		#endif
	}
	#pragma unroll_loop_end
#endif`,tU=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {
	vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	return irradiance;
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		directLight.color = directionalLight.color;
		directLight.direction = directionalLight.direction;
		directLight.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		vec3 lVector = pointLight.position - geometry.position;
		directLight.direction = normalize( lVector );
		float lightDistance = length( lVector );
		directLight.color = pointLight.color;
		directLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );
		directLight.visible = ( directLight.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		vec3 lVector = spotLight.position - geometry.position;
		directLight.direction = normalize( lVector );
		float lightDistance = length( lVector );
		float angleCos = dot( directLight.direction, spotLight.direction );
		if ( angleCos > spotLight.coneCos ) {
			float spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );
			directLight.color = spotLight.color;
			directLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );
			directLight.visible = true;
		} else {
			directLight.color = vec3( 0.0 );
			directLight.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {
		float dotNL = dot( geometry.normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			irradiance *= PI;
		#endif
		return irradiance;
	}
#endif`,nU=`#if defined( USE_ENVMAP )
	#ifdef ENVMAP_MODE_REFRACTION
		uniform float refractionRatio;
	#endif
	vec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {
		vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
		#ifdef ENVMAP_TYPE_CUBE
			vec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );
			#else
				vec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_CUBE_UV )
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
		#else
			vec4 envMapColor = vec4( 0.0 );
		#endif
		return PI * envMapColor.rgb * envMapIntensity;
	}
	float getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {
		float maxMIPLevelScalar = float( maxMIPLevel );
		float sigma = PI * roughness * roughness / ( 1.0 + roughness );
		float desiredMIPLevel = maxMIPLevelScalar + log2( sigma );
		return clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );
	}
	vec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( -viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
		#else
			vec3 reflectVec = refract( -viewDir, normal, refractionRatio );
		#endif
		reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
		float specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );
		#ifdef ENVMAP_TYPE_CUBE
			vec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );
			#else
				vec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_CUBE_UV )
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
		#endif
		return envMapColor.rgb * envMapIntensity;
	}
#endif`,iU=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,rU=`varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,oU=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,sU=`varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,aU=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;
material.specularRoughness = min( material.specularRoughness, 1.0 );
#ifdef REFLECTIVITY
	material.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );
#endif
#ifdef CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheen;
#endif`,lU=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float specularRoughness;
	vec3 specularColor;
#ifdef CLEARCOAT
	float clearcoat;
	float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	vec3 sheenColor;
#endif
};
#define MAXIMUM_SPECULAR_COEFFICIENT 0.16
#define DEFAULT_SPECULAR_COEFFICIENT 0.04
float clearcoatDHRApprox( const in float roughness, const in float dotNL ) {
	return DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.specularRoughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	#ifdef CLEARCOAT
		float ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = ccDotNL * directLight.color;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			ccIrradiance *= PI;
		#endif
		float clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );
		reflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );
	#else
		float clearcoatDHR = 0.0;
	#endif
	#ifdef USE_SHEEN
		reflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(
			material.specularRoughness,
			directLight.direction,
			geometry,
			material.sheenColor
		);
	#else
		reflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);
	#endif
	reflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef CLEARCOAT
		float ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		reflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );
		float ccDotNL = ccDotNV;
		float clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );
	#else
		float clearcoatDHR = 0.0;
	#endif
	float clearcoatInv = 1.0 - clearcoatDHR;
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	BRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );
	vec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );
	reflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,uU=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointDirectLightIrradiance( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotDirectLightIrradiance( spotLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,cU=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			lightMapIrradiance *= PI;
		#endif
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );
	#ifdef CLEARCOAT
		clearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );
	#endif
#endif`,fU=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,hU=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,dU=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,pU=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,mU=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,gU=`#ifdef USE_MAP
	vec4 texelColor = texture2D( map, vUv );
	texelColor = mapTexelToLinear( texelColor );
	diffuseColor *= texelColor;
#endif`,vU=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,yU=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	vec4 mapTexel = texture2D( map, uv );
	diffuseColor *= mapTexelToLinear( mapTexel );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,xU=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,wU=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,_U=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,bU=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
	objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
	objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
	objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
#endif`,SU=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifndef USE_MORPHNORMALS
		uniform float morphTargetInfluences[ 8 ];
	#else
		uniform float morphTargetInfluences[ 4 ];
	#endif
#endif`,MU=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	transformed += morphTarget0 * morphTargetInfluences[ 0 ];
	transformed += morphTarget1 * morphTargetInfluences[ 1 ];
	transformed += morphTarget2 * morphTargetInfluences[ 2 ];
	transformed += morphTarget3 * morphTargetInfluences[ 3 ];
	#ifndef USE_MORPHNORMALS
		transformed += morphTarget4 * morphTargetInfluences[ 4 ];
		transformed += morphTarget5 * morphTargetInfluences[ 5 ];
		transformed += morphTarget6 * morphTargetInfluences[ 6 ];
		transformed += morphTarget7 * morphTargetInfluences[ 7 ];
	#endif
#endif`,EU=`#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
			bitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,TU=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( -vViewPosition, normal, mapN );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );
#endif`,LU=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {
		vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );
		vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		float scale = sign( st1.t * st0.s - st0.t * st1.s );
		vec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );
		vec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );
		vec3 N = normalize( surf_norm );
		mat3 tsn = mat3( S, T, N );
		mapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		return normalize( tsn * mapN );
	}
#endif`,CU=`#ifdef CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,RU=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );
	#endif
#endif`,PU=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,AU=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return (( near + viewZ ) * far ) / (( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,DU=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,OU=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,FU=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,kU=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,NU=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,IU=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,BU=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,UU=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,zU=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );
		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,HU=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,jU=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,VU=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	#ifdef BONE_TEXTURE
		uniform highp sampler2D boneTexture;
		uniform int boneTextureSize;
		mat4 getBoneMatrix( const in float i ) {
			float j = i * 4.0;
			float x = mod( j, float( boneTextureSize ) );
			float y = floor( j / float( boneTextureSize ) );
			float dx = 1.0 / float( boneTextureSize );
			float dy = 1.0 / float( boneTextureSize );
			y = dy * ( y + 0.5 );
			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
			mat4 bone = mat4( v1, v2, v3, v4 );
			return bone;
		}
	#else
		uniform mat4 boneMatrices[ MAX_BONES ];
		mat4 getBoneMatrix( const in float i ) {
			mat4 bone = boneMatrices[ int(i) ];
			return bone;
		}
	#endif
#endif`,WU=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,GU=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,$U=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,XU=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,YU=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,qU=`#ifndef saturate
#define saturate(a) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,ZU=`#ifdef USE_TRANSMISSIONMAP
	totalTransmission *= texture2D( transmissionMap, vUv ).r;
#endif`,JU=`#ifdef USE_TRANSMISSIONMAP
	uniform sampler2D transmissionMap;
#endif`,KU=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,QU=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,ez=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,tz=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,nz=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,iz=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,rz=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,oz=`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,sz=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,az=`#include <envmap_common_pars_fragment>
uniform float opacity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	vec3 vReflect = vWorldDirection;
	#include <envmap_fragment>
	gl_FragColor = envColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,lz=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,uz=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,cz=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,fz=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,hz=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,dz=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	vec4 texColor = texture2D( tEquirect, sampleUV );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,pz=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,mz=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,gz=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,vz=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
	
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,yz=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <skinbase_vertex>
	#ifdef USE_ENVMAP
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,xz=`uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <emissivemap_fragment>
	#ifdef DOUBLE_SIDED
		reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;
	#else
		reflectedLight.indirectDiffuse += vIndirectFront;
	#endif
	#include <lightmap_fragment>
	reflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );
	#ifdef DOUBLE_SIDED
		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;
	#else
		reflectedLight.directDiffuse = vLightFront;
	#endif
	reflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,wz=`#define LAMBERT
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <bsdfs>
#include <lights_pars_begin>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <lights_lambert_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,_z=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <fog_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
		matcapColor = matcapTexelToLinear( matcapColor );
	#else
		vec4 matcapColor = vec4( 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,bz=`#define MATCAP
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#ifndef FLAT_SHADED
		vNormal = normalize( transformedNormal );
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,Sz=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Mz=`#define TOON
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Ez=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Tz=`#define PHONG
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Lz=`#define STANDARD
#ifdef PHYSICAL
	#define REFLECTIVITY
	#define CLEARCOAT
	#define TRANSMISSION
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef TRANSMISSION
	uniform float transmission;
#endif
#ifdef REFLECTIVITY
	uniform float reflectivity;
#endif
#ifdef CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheen;
#endif
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <transmissionmap_pars_fragment>
#include <bsdfs>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <lights_physical_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#ifdef TRANSMISSION
		float totalTransmission = transmission;
	#endif
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <transmissionmap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#ifdef TRANSMISSION
		diffuseColor.a *= mix( saturate( 1. - totalTransmission + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) ), 1.0, metalness );
	#endif
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Cz=`#define STANDARD
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Rz=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <packing>
#include <uv_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
}`,Pz=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,Az=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Dz=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,Oz=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,Fz=`#include <common>
#include <fog_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <begin_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,kz=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,Nz=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`;const Ge={alphamap_fragment:gB,alphamap_pars_fragment:vB,alphatest_fragment:yB,aomap_fragment:xB,aomap_pars_fragment:wB,begin_vertex:_B,beginnormal_vertex:bB,bsdfs:SB,bumpmap_pars_fragment:MB,clipping_planes_fragment:EB,clipping_planes_pars_fragment:TB,clipping_planes_pars_vertex:LB,clipping_planes_vertex:CB,color_fragment:RB,color_pars_fragment:PB,color_pars_vertex:AB,color_vertex:DB,common:OB,cube_uv_reflection_fragment:FB,defaultnormal_vertex:kB,displacementmap_pars_vertex:NB,displacementmap_vertex:IB,emissivemap_fragment:BB,emissivemap_pars_fragment:UB,encodings_fragment:zB,encodings_pars_fragment:HB,envmap_fragment:jB,envmap_common_pars_fragment:VB,envmap_pars_fragment:WB,envmap_pars_vertex:GB,envmap_physical_pars_fragment:nU,envmap_vertex:$B,fog_vertex:XB,fog_pars_vertex:YB,fog_fragment:qB,fog_pars_fragment:ZB,gradientmap_pars_fragment:JB,lightmap_fragment:KB,lightmap_pars_fragment:QB,lights_lambert_vertex:eU,lights_pars_begin:tU,lights_toon_fragment:iU,lights_toon_pars_fragment:rU,lights_phong_fragment:oU,lights_phong_pars_fragment:sU,lights_physical_fragment:aU,lights_physical_pars_fragment:lU,lights_fragment_begin:uU,lights_fragment_maps:cU,lights_fragment_end:fU,logdepthbuf_fragment:hU,logdepthbuf_pars_fragment:dU,logdepthbuf_pars_vertex:pU,logdepthbuf_vertex:mU,map_fragment:gU,map_pars_fragment:vU,map_particle_fragment:yU,map_particle_pars_fragment:xU,metalnessmap_fragment:wU,metalnessmap_pars_fragment:_U,morphnormal_vertex:bU,morphtarget_pars_vertex:SU,morphtarget_vertex:MU,normal_fragment_begin:EU,normal_fragment_maps:TU,normalmap_pars_fragment:LU,clearcoat_normal_fragment_begin:CU,clearcoat_normal_fragment_maps:RU,clearcoat_pars_fragment:PU,packing:AU,premultiplied_alpha_fragment:DU,project_vertex:OU,dithering_fragment:FU,dithering_pars_fragment:kU,roughnessmap_fragment:NU,roughnessmap_pars_fragment:IU,shadowmap_pars_fragment:BU,shadowmap_pars_vertex:UU,shadowmap_vertex:zU,shadowmask_pars_fragment:HU,skinbase_vertex:jU,skinning_pars_vertex:VU,skinning_vertex:WU,skinnormal_vertex:GU,specularmap_fragment:$U,specularmap_pars_fragment:XU,tonemapping_fragment:YU,tonemapping_pars_fragment:qU,transmissionmap_fragment:ZU,transmissionmap_pars_fragment:JU,uv_pars_fragment:KU,uv_pars_vertex:QU,uv_vertex:ez,uv2_pars_fragment:tz,uv2_pars_vertex:nz,uv2_vertex:iz,worldpos_vertex:rz,background_frag:oz,background_vert:sz,cube_frag:az,cube_vert:lz,depth_frag:uz,depth_vert:cz,distanceRGBA_frag:fz,distanceRGBA_vert:hz,equirect_frag:dz,equirect_vert:pz,linedashed_frag:mz,linedashed_vert:gz,meshbasic_frag:vz,meshbasic_vert:yz,meshlambert_frag:xz,meshlambert_vert:wz,meshmatcap_frag:_z,meshmatcap_vert:bz,meshtoon_frag:Sz,meshtoon_vert:Mz,meshphong_frag:Ez,meshphong_vert:Tz,meshphysical_frag:Lz,meshphysical_vert:Cz,normal_frag:Rz,normal_vert:Pz,points_frag:Az,points_vert:Dz,shadow_frag:Oz,shadow_vert:Fz,sprite_frag:kz,sprite_vert:Nz},pe={common:{diffuse:{value:new _e(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new li},uv2Transform:{value:new li},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new ee(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new _e(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new _e(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new li}},sprite:{diffuse:{value:new _e(15658734)},opacity:{value:1},center:{value:new ee(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new li}}},zi={basic:{uniforms:rn([pe.common,pe.specularmap,pe.envmap,pe.aomap,pe.lightmap,pe.fog]),vertexShader:Ge.meshbasic_vert,fragmentShader:Ge.meshbasic_frag},lambert:{uniforms:rn([pe.common,pe.specularmap,pe.envmap,pe.aomap,pe.lightmap,pe.emissivemap,pe.fog,pe.lights,{emissive:{value:new _e(0)}}]),vertexShader:Ge.meshlambert_vert,fragmentShader:Ge.meshlambert_frag},phong:{uniforms:rn([pe.common,pe.specularmap,pe.envmap,pe.aomap,pe.lightmap,pe.emissivemap,pe.bumpmap,pe.normalmap,pe.displacementmap,pe.fog,pe.lights,{emissive:{value:new _e(0)},specular:{value:new _e(1118481)},shininess:{value:30}}]),vertexShader:Ge.meshphong_vert,fragmentShader:Ge.meshphong_frag},standard:{uniforms:rn([pe.common,pe.envmap,pe.aomap,pe.lightmap,pe.emissivemap,pe.bumpmap,pe.normalmap,pe.displacementmap,pe.roughnessmap,pe.metalnessmap,pe.fog,pe.lights,{emissive:{value:new _e(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Ge.meshphysical_vert,fragmentShader:Ge.meshphysical_frag},toon:{uniforms:rn([pe.common,pe.aomap,pe.lightmap,pe.emissivemap,pe.bumpmap,pe.normalmap,pe.displacementmap,pe.gradientmap,pe.fog,pe.lights,{emissive:{value:new _e(0)}}]),vertexShader:Ge.meshtoon_vert,fragmentShader:Ge.meshtoon_frag},matcap:{uniforms:rn([pe.common,pe.bumpmap,pe.normalmap,pe.displacementmap,pe.fog,{matcap:{value:null}}]),vertexShader:Ge.meshmatcap_vert,fragmentShader:Ge.meshmatcap_frag},points:{uniforms:rn([pe.points,pe.fog]),vertexShader:Ge.points_vert,fragmentShader:Ge.points_frag},dashed:{uniforms:rn([pe.common,pe.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Ge.linedashed_vert,fragmentShader:Ge.linedashed_frag},depth:{uniforms:rn([pe.common,pe.displacementmap]),vertexShader:Ge.depth_vert,fragmentShader:Ge.depth_frag},normal:{uniforms:rn([pe.common,pe.bumpmap,pe.normalmap,pe.displacementmap,{opacity:{value:1}}]),vertexShader:Ge.normal_vert,fragmentShader:Ge.normal_frag},sprite:{uniforms:rn([pe.sprite,pe.fog]),vertexShader:Ge.sprite_vert,fragmentShader:Ge.sprite_frag},background:{uniforms:{uvTransform:{value:new li},t2D:{value:null}},vertexShader:Ge.background_vert,fragmentShader:Ge.background_frag},cube:{uniforms:rn([pe.envmap,{opacity:{value:1}}]),vertexShader:Ge.cube_vert,fragmentShader:Ge.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Ge.equirect_vert,fragmentShader:Ge.equirect_frag},distanceRGBA:{uniforms:rn([pe.common,pe.displacementmap,{referencePosition:{value:new F},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Ge.distanceRGBA_vert,fragmentShader:Ge.distanceRGBA_frag},shadow:{uniforms:rn([pe.lights,pe.fog,{color:{value:new _e(0)},opacity:{value:1}}]),vertexShader:Ge.shadow_vert,fragmentShader:Ge.shadow_frag}};zi.physical={uniforms:rn([zi.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new ee(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new _e(0)},transmission:{value:0},transmissionMap:{value:null}}]),vertexShader:Ge.meshphysical_vert,fragmentShader:Ge.meshphysical_frag};function Iz(e,t,n,i,r){const o=new _e(0);let s=0,a,l,u=null,c=0,f=null;function h(g,v,y,m){let p=v.isScene===!0?v.background:null;p&&p.isTexture&&(p=t.get(p));const x=e.xr,w=x.getSession&&x.getSession();w&&w.environmentBlendMode==="additive"&&(p=null),p===null?d(o,s):p&&p.isColor&&(d(p,1),m=!0),(e.autoClear||m)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),p&&(p.isCubeTexture||p.isWebGLCubeRenderTarget||p.mapping===a0)?(l===void 0&&(l=new pt(new wd(1,1,1),new Fn({name:"BackgroundCubeMaterial",uniforms:Ta(zi.cube.uniforms),vertexShader:zi.cube.vertexShader,fragmentShader:zi.cube.fragmentShader,side:xt,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),l.geometry.deleteAttribute("uv"),l.onBeforeRender=function(b,_,S){this.matrixWorld.copyPosition(S.matrixWorld)},Object.defineProperty(l.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(l)),p.isWebGLCubeRenderTarget&&(p=p.texture),l.material.uniforms.envMap.value=p,l.material.uniforms.flipEnvMap.value=p.isCubeTexture&&p._needsFlipEnvMap?-1:1,(u!==p||c!==p.version||f!==e.toneMapping)&&(l.material.needsUpdate=!0,u=p,c=p.version,f=e.toneMapping),g.unshift(l,l.geometry,l.material,0,0,null)):p&&p.isTexture&&(a===void 0&&(a=new pt(new eT(2,2),new Fn({name:"BackgroundMaterial",uniforms:Ta(zi.background.uniforms),vertexShader:zi.background.vertexShader,fragmentShader:zi.background.fragmentShader,side:gd,depthTest:!1,depthWrite:!1,fog:!1})),a.geometry.deleteAttribute("normal"),Object.defineProperty(a.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(a)),a.material.uniforms.t2D.value=p,p.matrixAutoUpdate===!0&&p.updateMatrix(),a.material.uniforms.uvTransform.value.copy(p.matrix),(u!==p||c!==p.version||f!==e.toneMapping)&&(a.material.needsUpdate=!0,u=p,c=p.version,f=e.toneMapping),g.unshift(a,a.geometry,a.material,0,0,null))}function d(g,v){n.buffers.color.setClear(g.r,g.g,g.b,v,r)}return{getClearColor:function(){return o},setClearColor:function(g,v=1){o.set(g),s=v,d(o,s)},getClearAlpha:function(){return s},setClearAlpha:function(g){s=g,d(o,s)},render:h}}function Bz(e,t,n,i){const r=e.getParameter(34921),o=i.isWebGL2?null:t.get("OES_vertex_array_object"),s=i.isWebGL2||o!==null,a={},l=v(null);let u=l;function c(z,k,U,D,G){let I=!1;if(s){const H=g(D,U,k);u!==H&&(u=H,h(u.object)),I=y(D,G),I&&m(D,G)}else{const H=k.wireframe===!0;(u.geometry!==D.id||u.program!==U.id||u.wireframe!==H)&&(u.geometry=D.id,u.program=U.id,u.wireframe=H,I=!0)}z.isInstancedMesh===!0&&(I=!0),G!==null&&n.update(G,34963),I&&(S(z,k,U,D),G!==null&&e.bindBuffer(34963,n.get(G).buffer))}function f(){return i.isWebGL2?e.createVertexArray():o.createVertexArrayOES()}function h(z){return i.isWebGL2?e.bindVertexArray(z):o.bindVertexArrayOES(z)}function d(z){return i.isWebGL2?e.deleteVertexArray(z):o.deleteVertexArrayOES(z)}function g(z,k,U){const D=U.wireframe===!0;let G=a[z.id];G===void 0&&(G={},a[z.id]=G);let I=G[k.id];I===void 0&&(I={},G[k.id]=I);let H=I[D];return H===void 0&&(H=v(f()),I[D]=H),H}function v(z){const k=[],U=[],D=[];for(let G=0;G<r;G++)k[G]=0,U[G]=0,D[G]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:k,enabledAttributes:U,attributeDivisors:D,object:z,attributes:{},index:null}}function y(z,k){const U=u.attributes,D=z.attributes;let G=0;for(const I in D){const H=U[I],V=D[I];if(H===void 0||H.attribute!==V||H.data!==V.data)return!0;G++}return u.attributesNum!==G||u.index!==k}function m(z,k){const U={},D=z.attributes;let G=0;for(const I in D){const H=D[I],V={};V.attribute=H,H.data&&(V.data=H.data),U[I]=V,G++}u.attributes=U,u.attributesNum=G,u.index=k}function p(){const z=u.newAttributes;for(let k=0,U=z.length;k<U;k++)z[k]=0}function x(z){w(z,0)}function w(z,k){const U=u.newAttributes,D=u.enabledAttributes,G=u.attributeDivisors;U[z]=1,D[z]===0&&(e.enableVertexAttribArray(z),D[z]=1),G[z]!==k&&((i.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](z,k),G[z]=k)}function b(){const z=u.newAttributes,k=u.enabledAttributes;for(let U=0,D=k.length;U<D;U++)k[U]!==z[U]&&(e.disableVertexAttribArray(U),k[U]=0)}function _(z,k,U,D,G,I){i.isWebGL2===!0&&(U===5124||U===5125)?e.vertexAttribIPointer(z,k,U,G,I):e.vertexAttribPointer(z,k,U,D,G,I)}function S(z,k,U,D){if(i.isWebGL2===!1&&(z.isInstancedMesh||D.isInstancedBufferGeometry)&&t.get("ANGLE_instanced_arrays")===null)return;p();const G=D.attributes,I=U.getAttributes(),H=k.defaultAttributeValues;for(const V in I){const J=I[V];if(J>=0){const he=G[V];if(he!==void 0){const ge=he.normalized,xe=he.itemSize,Y=n.get(he);if(Y===void 0)continue;const Qe=Y.buffer,Ce=Y.type,We=Y.bytesPerElement;if(he.isInterleavedBufferAttribute){const Ae=he.data,Ye=Ae.stride,Fe=he.offset;Ae&&Ae.isInstancedInterleavedBuffer?(w(J,Ae.meshPerAttribute),D._maxInstanceCount===void 0&&(D._maxInstanceCount=Ae.meshPerAttribute*Ae.count)):x(J),e.bindBuffer(34962,Qe),_(J,xe,Ce,ge,Ye*We,Fe*We)}else he.isInstancedBufferAttribute?(w(J,he.meshPerAttribute),D._maxInstanceCount===void 0&&(D._maxInstanceCount=he.meshPerAttribute*he.count)):x(J),e.bindBuffer(34962,Qe),_(J,xe,Ce,ge,0,0)}else if(V==="instanceMatrix"){const ge=n.get(z.instanceMatrix);if(ge===void 0)continue;const xe=ge.buffer,Y=ge.type;w(J+0,1),w(J+1,1),w(J+2,1),w(J+3,1),e.bindBuffer(34962,xe),e.vertexAttribPointer(J+0,4,Y,!1,64,0),e.vertexAttribPointer(J+1,4,Y,!1,64,16),e.vertexAttribPointer(J+2,4,Y,!1,64,32),e.vertexAttribPointer(J+3,4,Y,!1,64,48)}else if(V==="instanceColor"){const ge=n.get(z.instanceColor);if(ge===void 0)continue;const xe=ge.buffer,Y=ge.type;w(J,1),e.bindBuffer(34962,xe),e.vertexAttribPointer(J,3,Y,!1,12,0)}else if(H!==void 0){const ge=H[V];if(ge!==void 0)switch(ge.length){case 2:e.vertexAttrib2fv(J,ge);break;case 3:e.vertexAttrib3fv(J,ge);break;case 4:e.vertexAttrib4fv(J,ge);break;default:e.vertexAttrib1fv(J,ge)}}}}b()}function L(){B();for(const z in a){const k=a[z];for(const U in k){const D=k[U];for(const G in D)d(D[G].object),delete D[G];delete k[U]}delete a[z]}}function E(z){if(a[z.id]===void 0)return;const k=a[z.id];for(const U in k){const D=k[U];for(const G in D)d(D[G].object),delete D[G];delete k[U]}delete a[z.id]}function A(z){for(const k in a){const U=a[k];if(U[z.id]===void 0)continue;const D=U[z.id];for(const G in D)d(D[G].object),delete D[G];delete U[z.id]}}function B(){j(),u!==l&&(u=l,h(u.object))}function j(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:c,reset:B,resetDefaultState:j,dispose:L,releaseStatesOfGeometry:E,releaseStatesOfProgram:A,initAttributes:p,enableAttribute:x,disableUnusedAttributes:b}}function Uz(e,t,n,i){const r=i.isWebGL2;let o;function s(u){o=u}function a(u,c){e.drawArrays(o,u,c),n.update(c,o,1)}function l(u,c,f){if(f===0)return;let h,d;if(r)h=e,d="drawArraysInstanced";else if(h=t.get("ANGLE_instanced_arrays"),d="drawArraysInstancedANGLE",h===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}h[d](o,u,c,f),n.update(c,o,f)}this.setMode=s,this.render=a,this.renderInstances=l}function zz(e,t,n){let i;function r(){if(i!==void 0)return i;const _=t.get("EXT_texture_filter_anisotropic");return _!==null?i=e.getParameter(_.MAX_TEXTURE_MAX_ANISOTROPY_EXT):i=0,i}function o(_){if(_==="highp"){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";_="mediump"}return _==="mediump"&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const s=typeof WebGL2RenderingContext<"u"&&e instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&e instanceof WebGL2ComputeRenderingContext;let a=n.precision!==void 0?n.precision:"highp";const l=o(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const u=n.logarithmicDepthBuffer===!0,c=e.getParameter(34930),f=e.getParameter(35660),h=e.getParameter(3379),d=e.getParameter(34076),g=e.getParameter(34921),v=e.getParameter(36347),y=e.getParameter(36348),m=e.getParameter(36349),p=f>0,x=s||!!t.get("OES_texture_float"),w=p&&x,b=s?e.getParameter(36183):0;return{isWebGL2:s,getMaxAnisotropy:r,getMaxPrecision:o,precision:a,logarithmicDepthBuffer:u,maxTextures:c,maxVertexTextures:f,maxTextureSize:h,maxCubemapSize:d,maxAttributes:g,maxVertexUniforms:v,maxVaryings:y,maxFragmentUniforms:m,vertexTextures:p,floatFragmentTextures:x,floatVertexTextures:w,maxSamples:b}}function Hz(e){const t=this;let n=null,i=0,r=!1,o=!1;const s=new mr,a=new li,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(f,h,d){const g=f.length!==0||h||i!==0||r;return r=h,n=c(f,d,0),i=f.length,g},this.beginShadows=function(){o=!0,c(null)},this.endShadows=function(){o=!1,u()},this.setState=function(f,h,d){const g=f.clippingPlanes,v=f.clipIntersection,y=f.clipShadows,m=e.get(f);if(!r||g===null||g.length===0||o&&!y)o?c(null):u();else{const p=o?0:i,x=p*4;let w=m.clippingState||null;l.value=w,w=c(g,h,x,d);for(let b=0;b!==x;++b)w[b]=n[b];m.clippingState=w,this.numIntersection=v?this.numPlanes:0,this.numPlanes+=p}};function u(){l.value!==n&&(l.value=n,l.needsUpdate=i>0),t.numPlanes=i,t.numIntersection=0}function c(f,h,d,g){const v=f!==null?f.length:0;let y=null;if(v!==0){if(y=l.value,g!==!0||y===null){const m=d+v*4,p=h.matrixWorldInverse;a.getNormalMatrix(p),(y===null||y.length<m)&&(y=new Float32Array(m));for(let x=0,w=d;x!==v;++x,w+=4)s.copy(f[x]).applyMatrix4(p,a),s.normal.toArray(y,w),y[w+3]=s.constant}l.value=y,l.needsUpdate=!0}return t.numPlanes=v,t.numIntersection=0,y}}function jz(e){let t=new WeakMap;function n(s,a){return a===rw?s.mapping=o0:a===ow&&(s.mapping=s0),s}function i(s){if(s&&s.isTexture){const a=s.mapping;if(a===rw||a===ow)if(t.has(s)){const l=t.get(s).texture;return n(l,s.mapping)}else{const l=s.image;if(l&&l.height>0){const u=e.getRenderList(),c=e.getRenderTarget(),f=new pB(l.height/2);return f.fromEquirectangularTexture(e,s),t.set(s,f),e.setRenderTarget(c),e.setRenderList(u),s.addEventListener("dispose",r),n(f.texture,s.mapping)}else return null}}return s}function r(s){const a=s.target;a.removeEventListener("dispose",r);const l=t.get(a);l!==void 0&&(t.delete(a),l.dispose())}function o(){t=new WeakMap}return{get:i,dispose:o}}function Vz(e){const t={};function n(i){if(t[i]!==void 0)return t[i];let r;switch(i){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(i)}return t[i]=r,r}return{has:function(i){return n(i)!==null},init:function(i){i.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float")},get:function(i){const r=n(i);return r===null&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function Wz(e,t,n,i){const r={},o=new WeakMap;function s(f){const h=f.target;h.index!==null&&t.remove(h.index);for(const g in h.attributes)t.remove(h.attributes[g]);h.removeEventListener("dispose",s),delete r[h.id];const d=o.get(h);d&&(t.remove(d),o.delete(h)),i.releaseStatesOfGeometry(h),h.isInstancedBufferGeometry===!0&&delete h._maxInstanceCount,n.memory.geometries--}function a(f,h){return r[h.id]===!0||(h.addEventListener("dispose",s),r[h.id]=!0,n.memory.geometries++),h}function l(f){const h=f.attributes;for(const g in h)t.update(h[g],34962);const d=f.morphAttributes;for(const g in d){const v=d[g];for(let y=0,m=v.length;y<m;y++)t.update(v[y],34962)}}function u(f){const h=[],d=f.index,g=f.attributes.position;let v=0;if(d!==null){const p=d.array;v=d.version;for(let x=0,w=p.length;x<w;x+=3){const b=p[x+0],_=p[x+1],S=p[x+2];h.push(b,_,_,S,S,b)}}else{const p=g.array;v=g.version;for(let x=0,w=p.length/3-1;x<w;x+=3){const b=x+0,_=x+1,S=x+2;h.push(b,_,_,S,S,b)}}const y=new(KE(h)>65535?bu:_u)(h,1);y.version=v;const m=o.get(f);m&&t.remove(m),o.set(f,y)}function c(f){const h=o.get(f);if(h){const d=f.index;d!==null&&h.version<d.version&&u(f)}else u(f);return o.get(f)}return{get:a,update:l,getWireframeAttribute:c}}function Gz(e,t,n,i){const r=i.isWebGL2;let o;function s(h){o=h}let a,l;function u(h){a=h.type,l=h.bytesPerElement}function c(h,d){e.drawElements(o,d,a,h*l),n.update(d,o,1)}function f(h,d,g){if(g===0)return;let v,y;if(r)v=e,y="drawElementsInstanced";else if(v=t.get("ANGLE_instanced_arrays"),y="drawElementsInstancedANGLE",v===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}v[y](o,d,a,h*l,g),n.update(d,o,g)}this.setMode=s,this.setIndex=u,this.render=c,this.renderInstances=f}function $z(e){const t={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function i(o,s,a){switch(n.calls++,s){case 4:n.triangles+=a*(o/3);break;case 1:n.lines+=a*(o/2);break;case 3:n.lines+=a*(o-1);break;case 2:n.lines+=a*o;break;case 0:n.points+=a*o;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",s);break}}function r(){n.frame++,n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:t,render:n,programs:null,autoReset:!0,reset:r,update:i}}function Xz(e,t){return e[0]-t[0]}function Yz(e,t){return Math.abs(t[1])-Math.abs(e[1])}function qz(e){const t={},n=new Float32Array(8),i=[];for(let o=0;o<8;o++)i[o]=[o,0];function r(o,s,a,l){const u=o.morphTargetInfluences,c=u===void 0?0:u.length;let f=t[s.id];if(f===void 0){f=[];for(let y=0;y<c;y++)f[y]=[y,0];t[s.id]=f}for(let y=0;y<c;y++){const m=f[y];m[0]=y,m[1]=u[y]}f.sort(Yz);for(let y=0;y<8;y++)y<c&&f[y][1]?(i[y][0]=f[y][0],i[y][1]=f[y][1]):(i[y][0]=Number.MAX_SAFE_INTEGER,i[y][1]=0);i.sort(Xz);const h=a.morphTargets&&s.morphAttributes.position,d=a.morphNormals&&s.morphAttributes.normal;let g=0;for(let y=0;y<8;y++){const m=i[y],p=m[0],x=m[1];p!==Number.MAX_SAFE_INTEGER&&x?(h&&s.getAttribute("morphTarget"+y)!==h[p]&&s.setAttribute("morphTarget"+y,h[p]),d&&s.getAttribute("morphNormal"+y)!==d[p]&&s.setAttribute("morphNormal"+y,d[p]),n[y]=x,g+=x):(h&&s.hasAttribute("morphTarget"+y)===!0&&s.deleteAttribute("morphTarget"+y),d&&s.hasAttribute("morphNormal"+y)===!0&&s.deleteAttribute("morphNormal"+y),n[y]=0)}const v=s.morphTargetsRelative?1:1-g;l.getUniforms().setValue(e,"morphTargetBaseInfluence",v),l.getUniforms().setValue(e,"morphTargetInfluences",n)}return{update:r}}function Zz(e,t,n,i){let r=new WeakMap;function o(l){const u=i.render.frame,c=l.geometry,f=t.get(l,c);return r.get(f)!==u&&(t.update(f),r.set(f,u)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),n.update(l.instanceMatrix,34962),l.instanceColor!==null&&n.update(l.instanceColor,34962)),f}function s(){r=new WeakMap}function a(l){const u=l.target;u.removeEventListener("dispose",a),n.remove(u.instanceMatrix),u.instanceColor!==null&&n.remove(u.instanceColor)}return{update:o,dispose:s}}function Su(e=null,t=1,n=1,i=1){ht.call(this,null),this.image={data:e,width:t,height:n,depth:i},this.magFilter=gn,this.minFilter=gn,this.wrapR=Vn,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}Su.prototype=Object.create(ht.prototype);Su.prototype.constructor=Su;Su.prototype.isDataTexture2DArray=!0;function Mu(e=null,t=1,n=1,i=1){ht.call(this,null),this.image={data:e,width:t,height:n,depth:i},this.magFilter=gn,this.minFilter=gn,this.wrapR=Vn,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}Mu.prototype=Object.create(ht.prototype);Mu.prototype.constructor=Mu;Mu.prototype.isDataTexture3D=!0;const tT=new ht,Jz=new Su,Kz=new Mu,nT=new bo,Rw=[],Pw=[],Aw=new Float32Array(16),Dw=new Float32Array(9),Ow=new Float32Array(4);function qa(e,t,n){const i=e[0];if(i<=0||i>0)return e;const r=t*n;let o=Rw[r];if(o===void 0&&(o=new Float32Array(r),Rw[r]=o),t!==0){i.toArray(o,0);for(let s=1,a=0;s!==t;++s)a+=n,e[s].toArray(o,a)}return o}function pi(e,t){if(e.length!==t.length)return!1;for(let n=0,i=e.length;n<i;n++)if(e[n]!==t[n])return!1;return!0}function qn(e,t){for(let n=0,i=t.length;n<i;n++)e[n]=t[n]}function iT(e,t){let n=Pw[t];n===void 0&&(n=new Int32Array(t),Pw[t]=n);for(let i=0;i!==t;++i)n[i]=e.allocateTextureUnit();return n}function Qz(e,t){const n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function e4(e,t){const n=this.cache;if(t.x!==void 0)(n[0]!==t.x||n[1]!==t.y)&&(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(pi(n,t))return;e.uniform2fv(this.addr,t),qn(n,t)}}function t4(e,t){const n=this.cache;if(t.x!==void 0)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z)&&(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(t.r!==void 0)(n[0]!==t.r||n[1]!==t.g||n[2]!==t.b)&&(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(pi(n,t))return;e.uniform3fv(this.addr,t),qn(n,t)}}function n4(e,t){const n=this.cache;if(t.x!==void 0)(n[0]!==t.x||n[1]!==t.y||n[2]!==t.z||n[3]!==t.w)&&(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(pi(n,t))return;e.uniform4fv(this.addr,t),qn(n,t)}}function i4(e,t){const n=this.cache,i=t.elements;if(i===void 0){if(pi(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),qn(n,t)}else{if(pi(n,i))return;Ow.set(i),e.uniformMatrix2fv(this.addr,!1,Ow),qn(n,i)}}function r4(e,t){const n=this.cache,i=t.elements;if(i===void 0){if(pi(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),qn(n,t)}else{if(pi(n,i))return;Dw.set(i),e.uniformMatrix3fv(this.addr,!1,Dw),qn(n,i)}}function o4(e,t){const n=this.cache,i=t.elements;if(i===void 0){if(pi(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),qn(n,t)}else{if(pi(n,i))return;Aw.set(i),e.uniformMatrix4fv(this.addr,!1,Aw),qn(n,i)}}function s4(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.safeSetTexture2D(t||tT,r)}function a4(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture2DArray(t||Jz,r)}function l4(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture3D(t||Kz,r)}function u4(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.safeSetTextureCube(t||nT,r)}function c4(e,t){const n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function f4(e,t){const n=this.cache;pi(n,t)||(e.uniform2iv(this.addr,t),qn(n,t))}function h4(e,t){const n=this.cache;pi(n,t)||(e.uniform3iv(this.addr,t),qn(n,t))}function d4(e,t){const n=this.cache;pi(n,t)||(e.uniform4iv(this.addr,t),qn(n,t))}function p4(e,t){const n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function m4(e){switch(e){case 5126:return Qz;case 35664:return e4;case 35665:return t4;case 35666:return n4;case 35674:return i4;case 35675:return r4;case 35676:return o4;case 5124:case 35670:return c4;case 35667:case 35671:return f4;case 35668:case 35672:return h4;case 35669:case 35673:return d4;case 5125:return p4;case 35678:case 36198:case 36298:case 36306:case 35682:return s4;case 35679:case 36299:case 36307:return l4;case 35680:case 36300:case 36308:case 36293:return u4;case 36289:case 36303:case 36311:case 36292:return a4}}function g4(e,t){e.uniform1fv(this.addr,t)}function v4(e,t){e.uniform1iv(this.addr,t)}function y4(e,t){e.uniform2iv(this.addr,t)}function x4(e,t){e.uniform3iv(this.addr,t)}function w4(e,t){e.uniform4iv(this.addr,t)}function _4(e,t){const n=qa(t,this.size,2);e.uniform2fv(this.addr,n)}function b4(e,t){const n=qa(t,this.size,3);e.uniform3fv(this.addr,n)}function S4(e,t){const n=qa(t,this.size,4);e.uniform4fv(this.addr,n)}function M4(e,t){const n=qa(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function E4(e,t){const n=qa(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function T4(e,t){const n=qa(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function L4(e,t,n){const i=t.length,r=iT(n,i);e.uniform1iv(this.addr,r);for(let o=0;o!==i;++o)n.safeSetTexture2D(t[o]||tT,r[o])}function C4(e,t,n){const i=t.length,r=iT(n,i);e.uniform1iv(this.addr,r);for(let o=0;o!==i;++o)n.safeSetTextureCube(t[o]||nT,r[o])}function R4(e){switch(e){case 5126:return g4;case 35664:return _4;case 35665:return b4;case 35666:return S4;case 35674:return M4;case 35675:return E4;case 35676:return T4;case 5124:case 35670:return v4;case 35667:case 35671:return y4;case 35668:case 35672:return x4;case 35669:case 35673:return w4;case 35678:case 36198:case 36298:case 36306:case 35682:return L4;case 35680:case 36300:case 36308:case 36293:return C4}}function P4(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=m4(t.type)}function rT(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=R4(t.type)}rT.prototype.updateCache=function(e){const t=this.cache;e instanceof Float32Array&&t.length!==e.length&&(this.cache=new Float32Array(e.length)),qn(t,e)};function oT(e){this.id=e,this.seq=[],this.map={}}oT.prototype.setValue=function(e,t,n){const i=this.seq;for(let r=0,o=i.length;r!==o;++r){const s=i[r];s.setValue(e,t[s.id],n)}};const dm=/(\w+)(\])?(\[|\.)?/g;function Fw(e,t){e.seq.push(t),e.map[t.id]=t}function A4(e,t,n){const i=e.name,r=i.length;for(dm.lastIndex=0;;){const o=dm.exec(i),s=dm.lastIndex;let a=o[1];const l=o[2]==="]",u=o[3];if(l&&(a=a|0),u===void 0||u==="["&&s+2===r){Fw(n,u===void 0?new P4(a,e,t):new rT(a,e,t));break}else{let f=n.map[a];f===void 0&&(f=new oT(a),Fw(n,f)),n=f}}}function go(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,35718);for(let i=0;i<n;++i){const r=e.getActiveUniform(t,i),o=e.getUniformLocation(t,r.name);A4(r,o,this)}}go.prototype.setValue=function(e,t,n,i){const r=this.map[t];r!==void 0&&r.setValue(e,n,i)};go.prototype.setOptional=function(e,t,n){const i=t[n];i!==void 0&&this.setValue(e,n,i)};go.upload=function(e,t,n,i){for(let r=0,o=t.length;r!==o;++r){const s=t[r],a=n[s.id];a.needsUpdate!==!1&&s.setValue(e,a.value,i)}};go.seqWithValue=function(e,t){const n=[];for(let i=0,r=e.length;i!==r;++i){const o=e[i];o.id in t&&n.push(o)}return n};function kw(e,t,n){const i=e.createShader(t);return e.shaderSource(i,n),e.compileShader(i),i}let D4=0;function O4(e){const t=e.split(`
`);for(let n=0;n<t.length;n++)t[n]=n+1+": "+t[n];return t.join(`
`)}function sT(e){switch(e){case qu:return["Linear","( value )"];case qE:return["sRGB","( value )"];case HI:return["RGBE","( value )"];case VI:return["RGBM","( value, 7.0 )"];case WI:return["RGBM","( value, 16.0 )"];case GI:return["RGBD","( value, 256.0 )"];case zI:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case jI:return["LogLuv","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"]}}function Nw(e,t,n){const i=e.getShaderParameter(t,35713),r=e.getShaderInfoLog(t).trim();if(i&&r==="")return"";const o=e.getShaderSource(t);return"THREE.WebGLShader: gl.getShaderInfoLog() "+n+`
`+r+O4(o)}function vl(e,t){const n=sT(t);return"vec4 "+e+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function F4(e,t){const n=sT(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function k4(e,t){let n;switch(t){case UN:n="Linear";break;case zN:n="Reinhard";break;case HN:n="OptimizedCineon";break;case jN:n="ACESFilmic";break;case VN:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function N4(e){return[e.extensionDerivatives||e.envMapCubeUV||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||e.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Cl).join(`
`)}function I4(e){const t=[];for(const n in e){const i=e[n];i!==!1&&t.push("#define "+n+" "+i)}return t.join(`
`)}function B4(e,t){const n={},i=e.getProgramParameter(t,35721);for(let r=0;r<i;r++){const s=e.getActiveAttrib(t,r).name;n[s]=e.getAttribLocation(t,s)}return n}function Cl(e){return e!==""}function Iw(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function Bw(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const U4=/^[ \t]*#include +<([\w\d./]+)>/gm;function Yg(e){return e.replace(U4,z4)}function z4(e,t){const n=Ge[t];if(n===void 0)throw new Error("Can not resolve #include <"+t+">");return Yg(n)}const H4=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,j4=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Uw(e){return e.replace(j4,aT).replace(H4,V4)}function V4(e,t,n,i){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),aT(e,t,n,i)}function aT(e,t,n,i){let r="";for(let o=parseInt(t);o<parseInt(n);o++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return r}function zw(e){let t="precision "+e.precision+` float;
precision `+e.precision+" int;";return e.precision==="highp"?t+=`
#define HIGH_PRECISION`:e.precision==="mediump"?t+=`
#define MEDIUM_PRECISION`:e.precision==="lowp"&&(t+=`
#define LOW_PRECISION`),t}function W4(e){let t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===VE?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===vN?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===Ll&&(t="SHADOWMAP_TYPE_VSM"),t}function G4(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case o0:case s0:t="ENVMAP_TYPE_CUBE";break;case a0:case l0:t="ENVMAP_TYPE_CUBE_UV";break}return t}function $4(e){let t="ENVMAP_MODE_REFLECTION";if(e.envMap)switch(e.envMapMode){case s0:case l0:t="ENVMAP_MODE_REFRACTION";break}return t}function X4(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case vd:t="ENVMAP_BLENDING_MULTIPLY";break;case IN:t="ENVMAP_BLENDING_MIX";break;case BN:t="ENVMAP_BLENDING_ADD";break}return t}function Y4(e,t,n,i){const r=e.getContext(),o=n.defines;let s=n.vertexShader,a=n.fragmentShader;const l=W4(n),u=G4(n),c=$4(n),f=X4(n),h=e.gammaFactor>0?e.gammaFactor:1,d=n.isWebGL2?"":N4(n),g=I4(o),v=r.createProgram();let y,m,p=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(y=[g].filter(Cl).join(`
`),y.length>0&&(y+=`
`),m=[d,g].filter(Cl).join(`
`),m.length>0&&(m+=`
`)):(y=[zw(n),"#define SHADER_NAME "+n.shaderName,g,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+h,"#define MAX_BONES "+n.maxBones,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.useVertexTexture?"#define BONE_TEXTURE":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#ifdef USE_COLOR","	attribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Cl).join(`
`),m=[d,zw(n),"#define SHADER_NAME "+n.shaderName,g,n.alphaTest?"#define ALPHATEST "+n.alphaTest+(n.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+h,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.envMap?"#define "+c:"",n.envMap?"#define "+f:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.sheen?"#define USE_SHEEN":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(n.extensionShaderTextureLOD||n.envMap)&&n.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==Vl?"#define TONE_MAPPING":"",n.toneMapping!==Vl?Ge.tonemapping_pars_fragment:"",n.toneMapping!==Vl?k4("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",Ge.encodings_pars_fragment,n.map?vl("mapTexelToLinear",n.mapEncoding):"",n.matcap?vl("matcapTexelToLinear",n.matcapEncoding):"",n.envMap?vl("envMapTexelToLinear",n.envMapEncoding):"",n.emissiveMap?vl("emissiveMapTexelToLinear",n.emissiveMapEncoding):"",n.lightMap?vl("lightMapTexelToLinear",n.lightMapEncoding):"",F4("linearToOutputTexel",n.outputEncoding),n.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(Cl).join(`
`)),s=Yg(s),s=Iw(s,n),s=Bw(s,n),a=Yg(a),a=Iw(a,n),a=Bw(a,n),s=Uw(s),a=Uw(a),n.isWebGL2&&n.isRawShaderMaterial!==!0&&(p=`#version 300 es
`,y=["#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+y,m=["#define varying in",n.glslVersion===yw?"":"out highp vec4 pc_fragColor;",n.glslVersion===yw?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+m);const x=p+y+s,w=p+m+a,b=kw(r,35633,x),_=kw(r,35632,w);if(r.attachShader(v,b),r.attachShader(v,_),n.index0AttributeName!==void 0?r.bindAttribLocation(v,0,n.index0AttributeName):n.morphTargets===!0&&r.bindAttribLocation(v,0,"position"),r.linkProgram(v),e.debug.checkShaderErrors){const E=r.getProgramInfoLog(v).trim(),A=r.getShaderInfoLog(b).trim(),B=r.getShaderInfoLog(_).trim();let j=!0,z=!0;if(r.getProgramParameter(v,35714)===!1){j=!1;const k=Nw(r,b,"vertex"),U=Nw(r,_,"fragment");console.error("THREE.WebGLProgram: shader error: ",r.getError(),"35715",r.getProgramParameter(v,35715),"gl.getProgramInfoLog",E,k,U)}else E!==""?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",E):(A===""||B==="")&&(z=!1);z&&(this.diagnostics={runnable:j,programLog:E,vertexShader:{log:A,prefix:y},fragmentShader:{log:B,prefix:m}})}r.deleteShader(b),r.deleteShader(_);let S;this.getUniforms=function(){return S===void 0&&(S=new go(r,v)),S};let L;return this.getAttributes=function(){return L===void 0&&(L=B4(r,v)),L},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(v),this.program=void 0},this.name=n.shaderName,this.id=D4++,this.cacheKey=t,this.usedTimes=1,this.program=v,this.vertexShader=b,this.fragmentShader=_,this}function q4(e,t,n,i,r,o){const s=[],a=i.isWebGL2,l=i.logarithmicDepthBuffer,u=i.floatVertexTextures,c=i.maxVertexUniforms,f=i.vertexTextures;let h=i.precision;const d={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},g=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen","transmissionMap"];function v(_){const L=_.skeleton.bones;if(u)return 1024;{const A=Math.floor((c-20)/4),B=Math.min(A,L.length);return B<L.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+L.length+" bones. This GPU supports "+B+"."),0):B}}function y(_){let S;return _&&_.isTexture?S=_.encoding:_&&_.isWebGLRenderTarget?(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),S=_.texture.encoding):S=qu,S}function m(_,S,L,E,A){const B=E.fog,j=_.isMeshStandardMaterial?E.environment:null,z=t.get(_.envMap||j),k=d[_.type],U=A.isSkinnedMesh?v(A):0;_.precision!==null&&(h=i.getMaxPrecision(_.precision),h!==_.precision&&console.warn("THREE.WebGLProgram.getParameters:",_.precision,"not supported, using",h,"instead."));let D,G;if(k){const V=zi[k];D=V.vertexShader,G=V.fragmentShader}else D=_.vertexShader,G=_.fragmentShader;const I=e.getRenderTarget();return{isWebGL2:a,shaderID:k,shaderName:_.type,vertexShader:D,fragmentShader:G,defines:_.defines,isRawShaderMaterial:_.isRawShaderMaterial===!0,glslVersion:_.glslVersion,precision:h,instancing:A.isInstancedMesh===!0,instancingColor:A.isInstancedMesh===!0&&A.instanceColor!==null,supportsVertexTextures:f,outputEncoding:I!==null?y(I.texture):e.outputEncoding,map:!!_.map,mapEncoding:y(_.map),matcap:!!_.matcap,matcapEncoding:y(_.matcap),envMap:!!z,envMapMode:z&&z.mapping,envMapEncoding:y(z),envMapCubeUV:!!z&&(z.mapping===a0||z.mapping===l0),lightMap:!!_.lightMap,lightMapEncoding:y(_.lightMap),aoMap:!!_.aoMap,emissiveMap:!!_.emissiveMap,emissiveMapEncoding:y(_.emissiveMap),bumpMap:!!_.bumpMap,normalMap:!!_.normalMap,objectSpaceNormalMap:_.normalMapType===YI,tangentSpaceNormalMap:_.normalMapType===Xa,clearcoatMap:!!_.clearcoatMap,clearcoatRoughnessMap:!!_.clearcoatRoughnessMap,clearcoatNormalMap:!!_.clearcoatNormalMap,displacementMap:!!_.displacementMap,roughnessMap:!!_.roughnessMap,metalnessMap:!!_.metalnessMap,specularMap:!!_.specularMap,alphaMap:!!_.alphaMap,gradientMap:!!_.gradientMap,sheen:!!_.sheen,transmissionMap:!!_.transmissionMap,combine:_.combine,vertexTangents:_.normalMap&&_.vertexTangents,vertexColors:_.vertexColors,vertexUvs:!!_.map||!!_.bumpMap||!!_.normalMap||!!_.specularMap||!!_.alphaMap||!!_.emissiveMap||!!_.roughnessMap||!!_.metalnessMap||!!_.clearcoatMap||!!_.clearcoatRoughnessMap||!!_.clearcoatNormalMap||!!_.displacementMap||!!_.transmissionMap,uvsVertexOnly:!(_.map||_.bumpMap||_.normalMap||_.specularMap||_.alphaMap||_.emissiveMap||_.roughnessMap||_.metalnessMap||_.clearcoatNormalMap||_.transmissionMap)&&!!_.displacementMap,fog:!!B,useFog:_.fog,fogExp2:B&&B.isFogExp2,flatShading:_.flatShading,sizeAttenuation:_.sizeAttenuation,logarithmicDepthBuffer:l,skinning:_.skinning&&U>0,maxBones:U,useVertexTexture:u,morphTargets:_.morphTargets,morphNormals:_.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,numDirLights:S.directional.length,numPointLights:S.point.length,numSpotLights:S.spot.length,numRectAreaLights:S.rectArea.length,numHemiLights:S.hemi.length,numDirLightShadows:S.directionalShadowMap.length,numPointLightShadows:S.pointShadowMap.length,numSpotLightShadows:S.spotShadowMap.length,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:_.dithering,shadowMapEnabled:e.shadowMap.enabled&&L.length>0,shadowMapType:e.shadowMap.type,toneMapping:_.toneMapped?e.toneMapping:Vl,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:_.premultipliedAlpha,alphaTest:_.alphaTest,doubleSided:_.side===Ti,flipSided:_.side===xt,depthPacking:_.depthPacking!==void 0?_.depthPacking:!1,index0AttributeName:_.index0AttributeName,extensionDerivatives:_.extensions&&_.extensions.derivatives,extensionFragDepth:_.extensions&&_.extensions.fragDepth,extensionDrawBuffers:_.extensions&&_.extensions.drawBuffers,extensionShaderTextureLOD:_.extensions&&_.extensions.shaderTextureLOD,rendererExtensionFragDepth:a||n.has("EXT_frag_depth"),rendererExtensionDrawBuffers:a||n.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:a||n.has("EXT_shader_texture_lod"),customProgramCacheKey:_.customProgramCacheKey()}}function p(_){const S=[];if(_.shaderID?S.push(_.shaderID):(S.push(_.fragmentShader),S.push(_.vertexShader)),_.defines!==void 0)for(const L in _.defines)S.push(L),S.push(_.defines[L]);if(_.isRawShaderMaterial===!1){for(let L=0;L<g.length;L++)S.push(_[g[L]]);S.push(e.outputEncoding),S.push(e.gammaFactor)}return S.push(_.customProgramCacheKey),S.join()}function x(_){const S=d[_.type];let L;if(S){const E=zi[S];L=fB.clone(E.uniforms)}else L=_.uniforms;return L}function w(_,S){let L;for(let E=0,A=s.length;E<A;E++){const B=s[E];if(B.cacheKey===S){L=B,++L.usedTimes;break}}return L===void 0&&(L=new Y4(e,S,_,r),s.push(L)),L}function b(_){if(--_.usedTimes===0){const S=s.indexOf(_);s[S]=s[s.length-1],s.pop(),_.destroy()}}return{getParameters:m,getProgramCacheKey:p,getUniforms:x,acquireProgram:w,releaseProgram:b,programs:s}}function Z4(){let e=new WeakMap;function t(o){let s=e.get(o);return s===void 0&&(s={},e.set(o,s)),s}function n(o){e.delete(o)}function i(o,s,a){e.get(o)[s]=a}function r(){e=new WeakMap}return{get:t,remove:n,update:i,dispose:r}}function J4(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function K4(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function Hw(e){const t=[];let n=0;const i=[],r=[],o={id:-1};function s(){n=0,i.length=0,r.length=0}function a(h,d,g,v,y,m){let p=t[n];const x=e.get(g);return p===void 0?(p={id:h.id,object:h,geometry:d,material:g,program:x.program||o,groupOrder:v,renderOrder:h.renderOrder,z:y,group:m},t[n]=p):(p.id=h.id,p.object=h,p.geometry=d,p.material=g,p.program=x.program||o,p.groupOrder=v,p.renderOrder=h.renderOrder,p.z=y,p.group=m),n++,p}function l(h,d,g,v,y,m){const p=a(h,d,g,v,y,m);(g.transparent===!0?r:i).push(p)}function u(h,d,g,v,y,m){const p=a(h,d,g,v,y,m);(g.transparent===!0?r:i).unshift(p)}function c(h,d){i.length>1&&i.sort(h||J4),r.length>1&&r.sort(d||K4)}function f(){for(let h=n,d=t.length;h<d;h++){const g=t[h];if(g.id===null)break;g.id=null,g.object=null,g.geometry=null,g.material=null,g.program=null,g.group=null}}return{opaque:i,transparent:r,init:s,push:l,unshift:u,finish:f,sort:c}}function Q4(e){let t=new WeakMap;function n(r,o){const s=t.get(r);let a;return s===void 0?(a=new Hw(e),t.set(r,new WeakMap),t.get(r).set(o,a)):(a=s.get(o),a===void 0&&(a=new Hw(e),s.set(o,a))),a}function i(){t=new WeakMap}return{get:n,dispose:i}}function eH(){const e={};return{get:function(t){if(e[t.id]!==void 0)return e[t.id];let n;switch(t.type){case"DirectionalLight":n={direction:new F,color:new _e};break;case"SpotLight":n={position:new F,direction:new F,color:new _e,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new F,color:new _e,distance:0,decay:0};break;case"HemisphereLight":n={direction:new F,skyColor:new _e,groundColor:new _e};break;case"RectAreaLight":n={color:new _e,position:new F,halfWidth:new F,halfHeight:new F};break}return e[t.id]=n,n}}}function tH(){const e={};return{get:function(t){if(e[t.id]!==void 0)return e[t.id];let n;switch(t.type){case"DirectionalLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ee};break;case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ee};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ee,shadowCameraNear:1,shadowCameraFar:1e3};break}return e[t.id]=n,n}}}let nH=0;function iH(e,t){return(t.castShadow?1:0)-(e.castShadow?1:0)}function rH(e,t){const n=new eH,i=tH(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let c=0;c<9;c++)r.probe.push(new F);const o=new F,s=new Ve,a=new Ve;function l(c){let f=0,h=0,d=0;for(let S=0;S<9;S++)r.probe[S].set(0,0,0);let g=0,v=0,y=0,m=0,p=0,x=0,w=0,b=0;c.sort(iH);for(let S=0,L=c.length;S<L;S++){const E=c[S],A=E.color,B=E.intensity,j=E.distance,z=E.shadow&&E.shadow.map?E.shadow.map.texture:null;if(E.isAmbientLight)f+=A.r*B,h+=A.g*B,d+=A.b*B;else if(E.isLightProbe)for(let k=0;k<9;k++)r.probe[k].addScaledVector(E.sh.coefficients[k],B);else if(E.isDirectionalLight){const k=n.get(E);if(k.color.copy(E.color).multiplyScalar(E.intensity),E.castShadow){const U=E.shadow,D=i.get(E);D.shadowBias=U.bias,D.shadowNormalBias=U.normalBias,D.shadowRadius=U.radius,D.shadowMapSize=U.mapSize,r.directionalShadow[g]=D,r.directionalShadowMap[g]=z,r.directionalShadowMatrix[g]=E.shadow.matrix,x++}r.directional[g]=k,g++}else if(E.isSpotLight){const k=n.get(E);if(k.position.setFromMatrixPosition(E.matrixWorld),k.color.copy(A).multiplyScalar(B),k.distance=j,k.coneCos=Math.cos(E.angle),k.penumbraCos=Math.cos(E.angle*(1-E.penumbra)),k.decay=E.decay,E.castShadow){const U=E.shadow,D=i.get(E);D.shadowBias=U.bias,D.shadowNormalBias=U.normalBias,D.shadowRadius=U.radius,D.shadowMapSize=U.mapSize,r.spotShadow[y]=D,r.spotShadowMap[y]=z,r.spotShadowMatrix[y]=E.shadow.matrix,b++}r.spot[y]=k,y++}else if(E.isRectAreaLight){const k=n.get(E);k.color.copy(A).multiplyScalar(B),k.halfWidth.set(E.width*.5,0,0),k.halfHeight.set(0,E.height*.5,0),r.rectArea[m]=k,m++}else if(E.isPointLight){const k=n.get(E);if(k.color.copy(E.color).multiplyScalar(E.intensity),k.distance=E.distance,k.decay=E.decay,E.castShadow){const U=E.shadow,D=i.get(E);D.shadowBias=U.bias,D.shadowNormalBias=U.normalBias,D.shadowRadius=U.radius,D.shadowMapSize=U.mapSize,D.shadowCameraNear=U.camera.near,D.shadowCameraFar=U.camera.far,r.pointShadow[v]=D,r.pointShadowMap[v]=z,r.pointShadowMatrix[v]=E.shadow.matrix,w++}r.point[v]=k,v++}else if(E.isHemisphereLight){const k=n.get(E);k.skyColor.copy(E.color).multiplyScalar(B),k.groundColor.copy(E.groundColor).multiplyScalar(B),r.hemi[p]=k,p++}}m>0&&(t.isWebGL2||e.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=pe.LTC_FLOAT_1,r.rectAreaLTC2=pe.LTC_FLOAT_2):e.has("OES_texture_half_float_linear")===!0?(r.rectAreaLTC1=pe.LTC_HALF_1,r.rectAreaLTC2=pe.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=f,r.ambient[1]=h,r.ambient[2]=d;const _=r.hash;(_.directionalLength!==g||_.pointLength!==v||_.spotLength!==y||_.rectAreaLength!==m||_.hemiLength!==p||_.numDirectionalShadows!==x||_.numPointShadows!==w||_.numSpotShadows!==b)&&(r.directional.length=g,r.spot.length=y,r.rectArea.length=m,r.point.length=v,r.hemi.length=p,r.directionalShadow.length=x,r.directionalShadowMap.length=x,r.pointShadow.length=w,r.pointShadowMap.length=w,r.spotShadow.length=b,r.spotShadowMap.length=b,r.directionalShadowMatrix.length=x,r.pointShadowMatrix.length=w,r.spotShadowMatrix.length=b,_.directionalLength=g,_.pointLength=v,_.spotLength=y,_.rectAreaLength=m,_.hemiLength=p,_.numDirectionalShadows=x,_.numPointShadows=w,_.numSpotShadows=b,r.version=nH++)}function u(c,f){let h=0,d=0,g=0,v=0,y=0;const m=f.matrixWorldInverse;for(let p=0,x=c.length;p<x;p++){const w=c[p];if(w.isDirectionalLight){const b=r.directional[h];b.direction.setFromMatrixPosition(w.matrixWorld),o.setFromMatrixPosition(w.target.matrixWorld),b.direction.sub(o),b.direction.transformDirection(m),h++}else if(w.isSpotLight){const b=r.spot[g];b.position.setFromMatrixPosition(w.matrixWorld),b.position.applyMatrix4(m),b.direction.setFromMatrixPosition(w.matrixWorld),o.setFromMatrixPosition(w.target.matrixWorld),b.direction.sub(o),b.direction.transformDirection(m),g++}else if(w.isRectAreaLight){const b=r.rectArea[v];b.position.setFromMatrixPosition(w.matrixWorld),b.position.applyMatrix4(m),a.identity(),s.copy(w.matrixWorld),s.premultiply(m),a.extractRotation(s),b.halfWidth.set(w.width*.5,0,0),b.halfHeight.set(0,w.height*.5,0),b.halfWidth.applyMatrix4(a),b.halfHeight.applyMatrix4(a),v++}else if(w.isPointLight){const b=r.point[d];b.position.setFromMatrixPosition(w.matrixWorld),b.position.applyMatrix4(m),d++}else if(w.isHemisphereLight){const b=r.hemi[y];b.direction.setFromMatrixPosition(w.matrixWorld),b.direction.transformDirection(m),b.direction.normalize(),y++}}}return{setup:l,setupView:u,state:r}}function jw(e,t){const n=new rH(e,t),i=[],r=[];function o(){i.length=0,r.length=0}function s(f){i.push(f)}function a(f){r.push(f)}function l(){n.setup(i)}function u(f){n.setupView(i,f)}return{init:o,state:{lightsArray:i,shadowsArray:r,lights:n},setupLights:l,setupLightsView:u,pushLight:s,pushShadow:a}}function oH(e,t){let n=new WeakMap;function i(o,s=0){let a;return n.has(o)===!1?(a=new jw(e,t),n.set(o,[]),n.get(o).push(a)):s>=n.get(o).length?(a=new jw(e,t),n.get(o).push(a)):a=n.get(o)[s],a}function r(){n=new WeakMap}return{get:i,dispose:r}}function is(e){Pe.call(this),this.type="MeshDepthMaterial",this.depthPacking=$I,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(e)}is.prototype=Object.create(Pe.prototype);is.prototype.constructor=is;is.prototype.isMeshDepthMaterial=!0;is.prototype.copy=function(e){return Pe.prototype.copy.call(this,e),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this};function rs(e){Pe.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new F,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(e)}rs.prototype=Object.create(Pe.prototype);rs.prototype.constructor=rs;rs.prototype.isMeshDistanceMaterial=!0;rs.prototype.copy=function(e){return Pe.prototype.copy.call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this};var sH=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	float mean = 0.0;
	float squared_mean = 0.0;
	float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy ) / resolution ) );
	for ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, i ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean * HALF_SAMPLE_RATE;
	squared_mean = squared_mean * HALF_SAMPLE_RATE;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`,aH=`void main() {
	gl_Position = vec4( position, 1.0 );
}`;function lT(e,t,n){let i=new _d;const r=new ee,o=new ee,s=new ot,a=[],l=[],u={},c={0:xt,1:gd,2:Ti},f=new Fn({defines:{SAMPLE_RATE:2/8,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new ee},radius:{value:4}},vertexShader:aH,fragmentShader:sH}),h=f.clone();h.defines.HORIZONTAL_PASS=1;const d=new ft;d.setAttribute("position",new je(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const g=new pt(d,f),v=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=VE,this.render=function(b,_,S){if(v.enabled===!1||v.autoUpdate===!1&&v.needsUpdate===!1||b.length===0)return;const L=e.getRenderTarget(),E=e.getActiveCubeFace(),A=e.getActiveMipmapLevel(),B=e.state;B.setBlending(Hl),B.buffers.color.setClear(1,1,1,1),B.buffers.depth.setTest(!0),B.setScissorTest(!1);for(let j=0,z=b.length;j<z;j++){const k=b[j],U=k.shadow;if(U===void 0){console.warn("THREE.WebGLShadowMap:",k,"has no shadow.");continue}if(U.autoUpdate===!1&&U.needsUpdate===!1)continue;r.copy(U.mapSize);const D=U.getFrameExtents();if(r.multiply(D),o.copy(U.mapSize),(r.x>n||r.y>n)&&(r.x>n&&(o.x=Math.floor(n/D.x),r.x=o.x*D.x,U.mapSize.x=o.x),r.y>n&&(o.y=Math.floor(n/D.y),r.y=o.y*D.y,U.mapSize.y=o.y)),U.map===null&&!U.isPointLightShadow&&this.type===Ll){const I={minFilter:un,magFilter:un,format:Di};U.map=new Gl(r.x,r.y,I),U.map.texture.name=k.name+".shadowMap",U.mapPass=new Gl(r.x,r.y,I),U.camera.updateProjectionMatrix()}if(U.map===null){const I={minFilter:gn,magFilter:gn,format:Di};U.map=new Gl(r.x,r.y,I),U.map.texture.name=k.name+".shadowMap",U.camera.updateProjectionMatrix()}e.setRenderTarget(U.map),e.clear();const G=U.getViewportCount();for(let I=0;I<G;I++){const H=U.getViewport(I);s.set(o.x*H.x,o.y*H.y,o.x*H.z,o.y*H.w),B.viewport(s),U.updateMatrices(k,I),i=U.getFrustum(),w(_,S,U.camera,k,this.type)}!U.isPointLightShadow&&this.type===Ll&&y(U,S),U.needsUpdate=!1}v.needsUpdate=!1,e.setRenderTarget(L,E,A)};function y(b,_){const S=t.update(g);f.uniforms.shadow_pass.value=b.map.texture,f.uniforms.resolution.value=b.mapSize,f.uniforms.radius.value=b.radius,e.setRenderTarget(b.mapPass),e.clear(),e.renderBufferDirect(_,null,S,f,g,null),h.uniforms.shadow_pass.value=b.mapPass.texture,h.uniforms.resolution.value=b.mapSize,h.uniforms.radius.value=b.radius,e.setRenderTarget(b.map),e.clear(),e.renderBufferDirect(_,null,S,h,g,null)}function m(b,_,S){const L=b<<0|_<<1|S<<2;let E=a[L];return E===void 0&&(E=new is({depthPacking:XI,morphTargets:b,skinning:_}),a[L]=E),E}function p(b,_,S){const L=b<<0|_<<1|S<<2;let E=l[L];return E===void 0&&(E=new rs({morphTargets:b,skinning:_}),l[L]=E),E}function x(b,_,S,L,E,A,B){let j=null,z=m,k=b.customDepthMaterial;if(L.isPointLight===!0&&(z=p,k=b.customDistanceMaterial),k===void 0){let U=!1;S.morphTargets===!0&&(U=_.morphAttributes&&_.morphAttributes.position&&_.morphAttributes.position.length>0);let D=!1;b.isSkinnedMesh===!0&&(S.skinning===!0?D=!0:console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",b));const G=b.isInstancedMesh===!0;j=z(U,D,G)}else j=k;if(e.localClippingEnabled&&S.clipShadows===!0&&S.clippingPlanes.length!==0){const U=j.uuid,D=S.uuid;let G=u[U];G===void 0&&(G={},u[U]=G);let I=G[D];I===void 0&&(I=j.clone(),G[D]=I),j=I}return j.visible=S.visible,j.wireframe=S.wireframe,B===Ll?j.side=S.shadowSide!==null?S.shadowSide:S.side:j.side=S.shadowSide!==null?S.shadowSide:c[S.side],j.clipShadows=S.clipShadows,j.clippingPlanes=S.clippingPlanes,j.clipIntersection=S.clipIntersection,j.wireframeLinewidth=S.wireframeLinewidth,j.linewidth=S.linewidth,L.isPointLight===!0&&j.isMeshDistanceMaterial===!0&&(j.referencePosition.setFromMatrixPosition(L.matrixWorld),j.nearDistance=E,j.farDistance=A),j}function w(b,_,S,L,E){if(b.visible===!1)return;if(b.layers.test(_.layers)&&(b.isMesh||b.isLine||b.isPoints)&&(b.castShadow||b.receiveShadow&&E===Ll)&&(!b.frustumCulled||i.intersectsObject(b))){b.modelViewMatrix.multiplyMatrices(S.matrixWorldInverse,b.matrixWorld);const j=t.update(b),z=b.material;if(Array.isArray(z)){const k=j.groups;for(let U=0,D=k.length;U<D;U++){const G=k[U],I=z[G.materialIndex];if(I&&I.visible){const H=x(b,j,I,L,S.near,S.far,E);e.renderBufferDirect(S,null,j,H,b,G)}}}else if(z.visible){const k=x(b,j,z,L,S.near,S.far,E);e.renderBufferDirect(S,null,j,k,b,null)}}const B=b.children;for(let j=0,z=B.length;j<z;j++)w(B[j],_,S,L,E)}}function lH(e,t,n){const i=n.isWebGL2;function r(){let N=!1;const re=new ot;let se=null;const we=new ot(0,0,0,0);return{setMask:function(le){se!==le&&!N&&(e.colorMask(le,le,le,le),se=le)},setLocked:function(le){N=le},setClear:function(le,O,oe,ve,fe){fe===!0&&(le*=ve,O*=ve,oe*=ve),re.set(le,O,oe,ve),we.equals(re)===!1&&(e.clearColor(le,O,oe,ve),we.copy(re))},reset:function(){N=!1,se=null,we.set(-1,0,0,0)}}}function o(){let N=!1,re=null,se=null,we=null;return{setTest:function(le){le?V(2929):J(2929)},setMask:function(le){re!==le&&!N&&(e.depthMask(le),re=le)},setFunc:function(le){if(se!==le){if(le)switch(le){case PN:e.depthFunc(512);break;case AN:e.depthFunc(519);break;case DN:e.depthFunc(513);break;case Ug:e.depthFunc(515);break;case ON:e.depthFunc(514);break;case FN:e.depthFunc(518);break;case kN:e.depthFunc(516);break;case NN:e.depthFunc(517);break;default:e.depthFunc(515)}else e.depthFunc(515);se=le}},setLocked:function(le){N=le},setClear:function(le){we!==le&&(e.clearDepth(le),we=le)},reset:function(){N=!1,re=null,se=null,we=null}}}function s(){let N=!1,re=null,se=null,we=null,le=null,O=null,oe=null,ve=null,fe=null;return{setTest:function(Se){N||(Se?V(2960):J(2960))},setMask:function(Se){re!==Se&&!N&&(e.stencilMask(Se),re=Se)},setFunc:function(Se,Je,At){(se!==Se||we!==Je||le!==At)&&(e.stencilFunc(Se,Je,At),se=Se,we=Je,le=At)},setOp:function(Se,Je,At){(O!==Se||oe!==Je||ve!==At)&&(e.stencilOp(Se,Je,At),O=Se,oe=Je,ve=At)},setLocked:function(Se){N=Se},setClear:function(Se){fe!==Se&&(e.clearStencil(Se),fe=Se)},reset:function(){N=!1,re=null,se=null,we=null,le=null,O=null,oe=null,ve=null,fe=null}}}const a=new r,l=new o,u=new s;let c={},f=null,h=null,d=null,g=null,v=null,y=null,m=null,p=null,x=null,w=!1,b=null,_=null,S=null,L=null,E=null;const A=e.getParameter(35661);let B=!1,j=0;const z=e.getParameter(7938);z.indexOf("WebGL")!==-1?(j=parseFloat(/^WebGL (\d)/.exec(z)[1]),B=j>=1):z.indexOf("OpenGL ES")!==-1&&(j=parseFloat(/^OpenGL ES (\d)/.exec(z)[1]),B=j>=2);let k=null,U={};const D=new ot,G=new ot;function I(N,re,se){const we=new Uint8Array(4),le=e.createTexture();e.bindTexture(N,le),e.texParameteri(N,10241,9728),e.texParameteri(N,10240,9728);for(let O=0;O<se;O++)e.texImage2D(re+O,0,6408,1,1,0,6408,5121,we);return le}const H={};H[3553]=I(3553,3553,1),H[34067]=I(34067,34069,6),a.setClear(0,0,0,1),l.setClear(1),u.setClear(0),V(2929),l.setFunc(Ug),Ce(!1),We(Kx),V(2884),Y(Hl);function V(N){c[N]!==!0&&(e.enable(N),c[N]=!0)}function J(N){c[N]!==!1&&(e.disable(N),c[N]=!1)}function he(N){return f!==N?(e.useProgram(N),f=N,!0):!1}const ge={[Ws]:32774,[xN]:32778,[wN]:32779};if(i)ge[nw]=32775,ge[iw]=32776;else{const N=t.get("EXT_blend_minmax");N!==null&&(ge[nw]=N.MIN_EXT,ge[iw]=N.MAX_EXT)}const xe={[_N]:0,[bN]:1,[SN]:768,[GE]:770,[RN]:776,[LN]:774,[EN]:772,[MN]:769,[$E]:771,[CN]:775,[TN]:773};function Y(N,re,se,we,le,O,oe,ve){if(N===Hl){h&&(J(3042),h=!1);return}if(h||(V(3042),h=!0),N!==yN){if(N!==d||ve!==w){if((g!==Ws||m!==Ws)&&(e.blendEquation(32774),g=Ws,m=Ws),ve)switch(N){case jl:e.blendFuncSeparate(1,771,1,771);break;case Qx:e.blendFunc(1,1);break;case ew:e.blendFuncSeparate(0,0,769,771);break;case tw:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",N);break}else switch(N){case jl:e.blendFuncSeparate(770,771,1,771);break;case Qx:e.blendFunc(770,1);break;case ew:e.blendFunc(0,769);break;case tw:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",N);break}v=null,y=null,p=null,x=null,d=N,w=ve}return}le=le||re,O=O||se,oe=oe||we,(re!==g||le!==m)&&(e.blendEquationSeparate(ge[re],ge[le]),g=re,m=le),(se!==v||we!==y||O!==p||oe!==x)&&(e.blendFuncSeparate(xe[se],xe[we],xe[O],xe[oe]),v=se,y=we,p=O,x=oe),d=N,w=null}function Qe(N,re){N.side===Ti?J(2884):V(2884);let se=N.side===xt;re&&(se=!se),Ce(se),N.blending===jl&&N.transparent===!1?Y(Hl):Y(N.blending,N.blendEquation,N.blendSrc,N.blendDst,N.blendEquationAlpha,N.blendSrcAlpha,N.blendDstAlpha,N.premultipliedAlpha),l.setFunc(N.depthFunc),l.setTest(N.depthTest),l.setMask(N.depthWrite),a.setMask(N.colorWrite);const we=N.stencilWrite;u.setTest(we),we&&(u.setMask(N.stencilWriteMask),u.setFunc(N.stencilFunc,N.stencilRef,N.stencilFuncMask),u.setOp(N.stencilFail,N.stencilZFail,N.stencilZPass)),Ye(N.polygonOffset,N.polygonOffsetFactor,N.polygonOffsetUnits)}function Ce(N){b!==N&&(N?e.frontFace(2304):e.frontFace(2305),b=N)}function We(N){N!==mN?(V(2884),N!==_&&(N===Kx?e.cullFace(1029):N===gN?e.cullFace(1028):e.cullFace(1032))):J(2884),_=N}function Ae(N){N!==S&&(B&&e.lineWidth(N),S=N)}function Ye(N,re,se){N?(V(32823),(L!==re||E!==se)&&(e.polygonOffset(re,se),L=re,E=se)):J(32823)}function Fe(N){N?V(3089):J(3089)}function ie(N){N===void 0&&(N=33984+A-1),k!==N&&(e.activeTexture(N),k=N)}function ce(N,re){k===null&&ie();let se=U[k];se===void 0&&(se={type:void 0,texture:void 0},U[k]=se),(se.type!==N||se.texture!==re)&&(e.bindTexture(N,re||H[N]),se.type=N,se.texture=re)}function ue(){const N=U[k];N!==void 0&&N.type!==void 0&&(e.bindTexture(N.type,null),N.type=void 0,N.texture=void 0)}function be(){try{e.compressedTexImage2D.apply(e,arguments)}catch(N){console.error("THREE.WebGLState:",N)}}function ae(){try{e.texImage2D.apply(e,arguments)}catch(N){console.error("THREE.WebGLState:",N)}}function R(){try{e.texImage3D.apply(e,arguments)}catch(N){console.error("THREE.WebGLState:",N)}}function T(N){D.equals(N)===!1&&(e.scissor(N.x,N.y,N.z,N.w),D.copy(N))}function Q(N){G.equals(N)===!1&&(e.viewport(N.x,N.y,N.z,N.w),G.copy(N))}function K(){c={},k=null,U={},f=null,h=null,d=null,g=null,v=null,y=null,m=null,p=null,x=null,w=!1,b=null,_=null,S=null,L=null,E=null,a.reset(),l.reset(),u.reset()}return{buffers:{color:a,depth:l,stencil:u},enable:V,disable:J,useProgram:he,setBlending:Y,setMaterial:Qe,setFlipSided:Ce,setCullFace:We,setLineWidth:Ae,setPolygonOffset:Ye,setScissorTest:Fe,activeTexture:ie,bindTexture:ce,unbindTexture:ue,compressedTexImage2D:be,texImage2D:ae,texImage3D:R,scissor:T,viewport:Q,reset:K}}function uH(e,t,n,i,r,o,s){const a=r.isWebGL2,l=r.maxTextures,u=r.maxCubemapSize,c=r.maxTextureSize,f=r.maxSamples,h=new WeakMap;let d,g=!1;try{g=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function v(R,T){return g?new OffscreenCanvas(R,T):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function y(R,T,Q,K){let N=1;if((R.width>K||R.height>K)&&(N=K/Math.max(R.width,R.height)),N<1||T===!0)if(typeof HTMLImageElement<"u"&&R instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&R instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&R instanceof ImageBitmap){const re=T?ke.floorPowerOfTwo:Math.floor,se=re(N*R.width),we=re(N*R.height);d===void 0&&(d=v(se,we));const le=Q?v(se,we):d;return le.width=se,le.height=we,le.getContext("2d").drawImage(R,0,0,se,we),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+R.width+"x"+R.height+") to ("+se+"x"+we+")."),le}else return"data"in R&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+R.width+"x"+R.height+")."),R;return R}function m(R){return ke.isPowerOfTwo(R.width)&&ke.isPowerOfTwo(R.height)}function p(R){return a?!1:R.wrapS!==Vn||R.wrapT!==Vn||R.minFilter!==gn&&R.minFilter!==un}function x(R,T){return R.generateMipmaps&&T&&R.minFilter!==gn&&R.minFilter!==un}function w(R,T,Q,K){e.generateMipmap(R);const N=i.get(T);N.__maxMipLevel=Math.log(Math.max(Q,K))*Math.LOG2E}function b(R,T,Q){if(a===!1)return T;if(R!==null){if(e[R]!==void 0)return e[R];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+R+"'")}let K=T;return T===6403&&(Q===5126&&(K=33326),Q===5131&&(K=33325),Q===5121&&(K=33321)),T===6407&&(Q===5126&&(K=34837),Q===5131&&(K=34843),Q===5121&&(K=32849)),T===6408&&(Q===5126&&(K=34836),Q===5131&&(K=34842),Q===5121&&(K=32856)),(K===33325||K===33326||K===34842||K===34836)&&t.get("EXT_color_buffer_float"),K}function _(R){return R===gn||R===sw||R===aw?9728:9729}function S(R){const T=R.target;T.removeEventListener("dispose",S),E(T),T.isVideoTexture&&h.delete(T),s.memory.textures--}function L(R){const T=R.target;T.removeEventListener("dispose",L),A(T),s.memory.textures--}function E(R){const T=i.get(R);T.__webglInit!==void 0&&(e.deleteTexture(T.__webglTexture),i.remove(R))}function A(R){const T=i.get(R),Q=i.get(R.texture);if(R){if(Q.__webglTexture!==void 0&&e.deleteTexture(Q.__webglTexture),R.depthTexture&&R.depthTexture.dispose(),R.isWebGLCubeRenderTarget)for(let K=0;K<6;K++)e.deleteFramebuffer(T.__webglFramebuffer[K]),T.__webglDepthbuffer&&e.deleteRenderbuffer(T.__webglDepthbuffer[K]);else e.deleteFramebuffer(T.__webglFramebuffer),T.__webglDepthbuffer&&e.deleteRenderbuffer(T.__webglDepthbuffer),T.__webglMultisampledFramebuffer&&e.deleteFramebuffer(T.__webglMultisampledFramebuffer),T.__webglColorRenderbuffer&&e.deleteRenderbuffer(T.__webglColorRenderbuffer),T.__webglDepthRenderbuffer&&e.deleteRenderbuffer(T.__webglDepthRenderbuffer);i.remove(R.texture),i.remove(R)}}let B=0;function j(){B=0}function z(){const R=B;return R>=l&&console.warn("THREE.WebGLTextures: Trying to use "+R+" texture units while this GPU supports only "+l),B+=1,R}function k(R,T){const Q=i.get(R);if(R.isVideoTexture&&ie(R),R.version>0&&Q.__version!==R.version){const K=R.image;if(K===void 0)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else if(K.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{he(Q,R,T);return}}n.activeTexture(33984+T),n.bindTexture(3553,Q.__webglTexture)}function U(R,T){const Q=i.get(R);if(R.version>0&&Q.__version!==R.version){he(Q,R,T);return}n.activeTexture(33984+T),n.bindTexture(35866,Q.__webglTexture)}function D(R,T){const Q=i.get(R);if(R.version>0&&Q.__version!==R.version){he(Q,R,T);return}n.activeTexture(33984+T),n.bindTexture(32879,Q.__webglTexture)}function G(R,T){const Q=i.get(R);if(R.version>0&&Q.__version!==R.version){ge(Q,R,T);return}n.activeTexture(33984+T),n.bindTexture(34067,Q.__webglTexture)}const I={[zg]:10497,[Vn]:33071,[Hg]:33648},H={[gn]:9728,[sw]:9984,[aw]:9986,[un]:9729,[WN]:9985,[yd]:9987};function V(R,T,Q){Q?(e.texParameteri(R,10242,I[T.wrapS]),e.texParameteri(R,10243,I[T.wrapT]),(R===32879||R===35866)&&e.texParameteri(R,32882,I[T.wrapR]),e.texParameteri(R,10240,H[T.magFilter]),e.texParameteri(R,10241,H[T.minFilter])):(e.texParameteri(R,10242,33071),e.texParameteri(R,10243,33071),(R===32879||R===35866)&&e.texParameteri(R,32882,33071),(T.wrapS!==Vn||T.wrapT!==Vn)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(R,10240,_(T.magFilter)),e.texParameteri(R,10241,_(T.minFilter)),T.minFilter!==gn&&T.minFilter!==un&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter."));const K=t.get("EXT_texture_filter_anisotropic");if(K){if(T.type===Kr&&t.get("OES_texture_float_linear")===null||T.type===ph&&(a||t.get("OES_texture_half_float_linear"))===null)return;(T.anisotropy>1||i.get(T).__currentAnisotropy)&&(e.texParameterf(R,K.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(T.anisotropy,r.getMaxAnisotropy())),i.get(T).__currentAnisotropy=T.anisotropy)}}function J(R,T){R.__webglInit===void 0&&(R.__webglInit=!0,T.addEventListener("dispose",S),R.__webglTexture=e.createTexture(),s.memory.textures++)}function he(R,T,Q){let K=3553;T.isDataTexture2DArray&&(K=35866),T.isDataTexture3D&&(K=32879),J(R,T),n.activeTexture(33984+Q),n.bindTexture(K,R.__webglTexture),e.pixelStorei(37440,T.flipY),e.pixelStorei(37441,T.premultiplyAlpha),e.pixelStorei(3317,T.unpackAlignment);const N=p(T)&&m(T.image)===!1,re=y(T.image,N,!1,c),se=m(re)||a,we=o.convert(T.format);let le=o.convert(T.type),O=b(T.internalFormat,we,le);V(K,T,se);let oe;const ve=T.mipmaps;if(T.isDepthTexture)O=6402,a?T.type===Kr?O=36012:T.type===Df?O=33190:T.type===Wl?O=35056:O=33189:T.type===Kr&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),T.format===ma&&O===6402&&T.type!==dh&&T.type!==Df&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),T.type=dh,le=o.convert(T.type)),T.format===xu&&O===6402&&(O=34041,T.type!==Wl&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),T.type=Wl,le=o.convert(T.type))),n.texImage2D(3553,0,O,re.width,re.height,0,we,le,null);else if(T.isDataTexture)if(ve.length>0&&se){for(let fe=0,Se=ve.length;fe<Se;fe++)oe=ve[fe],n.texImage2D(3553,fe,O,oe.width,oe.height,0,we,le,oe.data);T.generateMipmaps=!1,R.__maxMipLevel=ve.length-1}else n.texImage2D(3553,0,O,re.width,re.height,0,we,le,re.data),R.__maxMipLevel=0;else if(T.isCompressedTexture){for(let fe=0,Se=ve.length;fe<Se;fe++)oe=ve[fe],T.format!==Di&&T.format!==Zo?we!==null?n.compressedTexImage2D(3553,fe,O,oe.width,oe.height,0,oe.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(3553,fe,O,oe.width,oe.height,0,we,le,oe.data);R.__maxMipLevel=ve.length-1}else if(T.isDataTexture2DArray)n.texImage3D(35866,0,O,re.width,re.height,re.depth,0,we,le,re.data),R.__maxMipLevel=0;else if(T.isDataTexture3D)n.texImage3D(32879,0,O,re.width,re.height,re.depth,0,we,le,re.data),R.__maxMipLevel=0;else if(ve.length>0&&se){for(let fe=0,Se=ve.length;fe<Se;fe++)oe=ve[fe],n.texImage2D(3553,fe,O,we,le,oe);T.generateMipmaps=!1,R.__maxMipLevel=ve.length-1}else n.texImage2D(3553,0,O,we,le,re),R.__maxMipLevel=0;x(T,se)&&w(K,T,re.width,re.height),R.__version=T.version,T.onUpdate&&T.onUpdate(T)}function ge(R,T,Q){if(T.image.length!==6)return;J(R,T),n.activeTexture(33984+Q),n.bindTexture(34067,R.__webglTexture),e.pixelStorei(37440,T.flipY),e.pixelStorei(37441,T.premultiplyAlpha),e.pixelStorei(3317,T.unpackAlignment);const K=T&&(T.isCompressedTexture||T.image[0].isCompressedTexture),N=T.image[0]&&T.image[0].isDataTexture,re=[];for(let fe=0;fe<6;fe++)!K&&!N?re[fe]=y(T.image[fe],!1,!0,u):re[fe]=N?T.image[fe].image:T.image[fe];const se=re[0],we=m(se)||a,le=o.convert(T.format),O=o.convert(T.type),oe=b(T.internalFormat,le,O);V(34067,T,we);let ve;if(K){for(let fe=0;fe<6;fe++){ve=re[fe].mipmaps;for(let Se=0;Se<ve.length;Se++){const Je=ve[Se];T.format!==Di&&T.format!==Zo?le!==null?n.compressedTexImage2D(34069+fe,Se,oe,Je.width,Je.height,0,Je.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(34069+fe,Se,oe,Je.width,Je.height,0,le,O,Je.data)}}R.__maxMipLevel=ve.length-1}else{ve=T.mipmaps;for(let fe=0;fe<6;fe++)if(N){n.texImage2D(34069+fe,0,oe,re[fe].width,re[fe].height,0,le,O,re[fe].data);for(let Se=0;Se<ve.length;Se++){const At=ve[Se].image[fe].image;n.texImage2D(34069+fe,Se+1,oe,At.width,At.height,0,le,O,At.data)}}else{n.texImage2D(34069+fe,0,oe,le,O,re[fe]);for(let Se=0;Se<ve.length;Se++){const Je=ve[Se];n.texImage2D(34069+fe,Se+1,oe,le,O,Je.image[fe])}}R.__maxMipLevel=ve.length}x(T,we)&&w(34067,T,se.width,se.height),R.__version=T.version,T.onUpdate&&T.onUpdate(T)}function xe(R,T,Q,K){const N=o.convert(T.texture.format),re=o.convert(T.texture.type),se=b(T.texture.internalFormat,N,re);n.texImage2D(K,0,se,T.width,T.height,0,N,re,null),e.bindFramebuffer(36160,R),e.framebufferTexture2D(36160,Q,K,i.get(T.texture).__webglTexture,0),e.bindFramebuffer(36160,null)}function Y(R,T,Q){if(e.bindRenderbuffer(36161,R),T.depthBuffer&&!T.stencilBuffer){let K=33189;if(Q){const N=T.depthTexture;N&&N.isDepthTexture&&(N.type===Kr?K=36012:N.type===Df&&(K=33190));const re=Fe(T);e.renderbufferStorageMultisample(36161,re,K,T.width,T.height)}else e.renderbufferStorage(36161,K,T.width,T.height);e.framebufferRenderbuffer(36160,36096,36161,R)}else if(T.depthBuffer&&T.stencilBuffer){if(Q){const K=Fe(T);e.renderbufferStorageMultisample(36161,K,35056,T.width,T.height)}else e.renderbufferStorage(36161,34041,T.width,T.height);e.framebufferRenderbuffer(36160,33306,36161,R)}else{const K=o.convert(T.texture.format),N=o.convert(T.texture.type),re=b(T.texture.internalFormat,K,N);if(Q){const se=Fe(T);e.renderbufferStorageMultisample(36161,se,re,T.width,T.height)}else e.renderbufferStorage(36161,re,T.width,T.height)}e.bindRenderbuffer(36161,null)}function Qe(R,T){if(T&&T.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(36160,R),!(T.depthTexture&&T.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(T.depthTexture).__webglTexture||T.depthTexture.image.width!==T.width||T.depthTexture.image.height!==T.height)&&(T.depthTexture.image.width=T.width,T.depthTexture.image.height=T.height,T.depthTexture.needsUpdate=!0),k(T.depthTexture,0);const K=i.get(T.depthTexture).__webglTexture;if(T.depthTexture.format===ma)e.framebufferTexture2D(36160,36096,3553,K,0);else if(T.depthTexture.format===xu)e.framebufferTexture2D(36160,33306,3553,K,0);else throw new Error("Unknown depthTexture format")}function Ce(R){const T=i.get(R),Q=R.isWebGLCubeRenderTarget===!0;if(R.depthTexture){if(Q)throw new Error("target.depthTexture not supported in Cube render targets");Qe(T.__webglFramebuffer,R)}else if(Q){T.__webglDepthbuffer=[];for(let K=0;K<6;K++)e.bindFramebuffer(36160,T.__webglFramebuffer[K]),T.__webglDepthbuffer[K]=e.createRenderbuffer(),Y(T.__webglDepthbuffer[K],R,!1)}else e.bindFramebuffer(36160,T.__webglFramebuffer),T.__webglDepthbuffer=e.createRenderbuffer(),Y(T.__webglDepthbuffer,R,!1);e.bindFramebuffer(36160,null)}function We(R){const T=i.get(R),Q=i.get(R.texture);R.addEventListener("dispose",L),Q.__webglTexture=e.createTexture(),s.memory.textures++;const K=R.isWebGLCubeRenderTarget===!0,N=R.isWebGLMultisampleRenderTarget===!0,re=m(R)||a;if(a&&R.texture.format===Zo&&(R.texture.type===Kr||R.texture.type===ph)&&(R.texture.format=Di,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),K){T.__webglFramebuffer=[];for(let se=0;se<6;se++)T.__webglFramebuffer[se]=e.createFramebuffer()}else if(T.__webglFramebuffer=e.createFramebuffer(),N)if(a){T.__webglMultisampledFramebuffer=e.createFramebuffer(),T.__webglColorRenderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(36161,T.__webglColorRenderbuffer);const se=o.convert(R.texture.format),we=o.convert(R.texture.type),le=b(R.texture.internalFormat,se,we),O=Fe(R);e.renderbufferStorageMultisample(36161,O,le,R.width,R.height),e.bindFramebuffer(36160,T.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064,36161,T.__webglColorRenderbuffer),e.bindRenderbuffer(36161,null),R.depthBuffer&&(T.__webglDepthRenderbuffer=e.createRenderbuffer(),Y(T.__webglDepthRenderbuffer,R,!0)),e.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(K){n.bindTexture(34067,Q.__webglTexture),V(34067,R.texture,re);for(let se=0;se<6;se++)xe(T.__webglFramebuffer[se],R,36064,34069+se);x(R.texture,re)&&w(34067,R.texture,R.width,R.height),n.bindTexture(34067,null)}else n.bindTexture(3553,Q.__webglTexture),V(3553,R.texture,re),xe(T.__webglFramebuffer,R,36064,3553),x(R.texture,re)&&w(3553,R.texture,R.width,R.height),n.bindTexture(3553,null);R.depthBuffer&&Ce(R)}function Ae(R){const T=R.texture,Q=m(R)||a;if(x(T,Q)){const K=R.isWebGLCubeRenderTarget?34067:3553,N=i.get(T).__webglTexture;n.bindTexture(K,N),w(K,T,R.width,R.height),n.bindTexture(K,null)}}function Ye(R){if(R.isWebGLMultisampleRenderTarget)if(a){const T=i.get(R);e.bindFramebuffer(36008,T.__webglMultisampledFramebuffer),e.bindFramebuffer(36009,T.__webglFramebuffer);const Q=R.width,K=R.height;let N=16384;R.depthBuffer&&(N|=256),R.stencilBuffer&&(N|=1024),e.blitFramebuffer(0,0,Q,K,0,0,Q,K,N,9728),e.bindFramebuffer(36160,T.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")}function Fe(R){return a&&R.isWebGLMultisampleRenderTarget?Math.min(f,R.samples):0}function ie(R){const T=s.render.frame;h.get(R)!==T&&(h.set(R,T),R.update())}let ce=!1,ue=!1;function be(R,T){R&&R.isWebGLRenderTarget&&(ce===!1&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),ce=!0),R=R.texture),k(R,T)}function ae(R,T){R&&R.isWebGLCubeRenderTarget&&(ue===!1&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),ue=!0),R=R.texture),G(R,T)}this.allocateTextureUnit=z,this.resetTextureUnits=j,this.setTexture2D=k,this.setTexture2DArray=U,this.setTexture3D=D,this.setTextureCube=G,this.setupRenderTarget=We,this.updateRenderTargetMipmap=Ae,this.updateMultisampleRenderTarget=Ye,this.safeSetTexture2D=be,this.safeSetTextureCube=ae}function cH(e,t,n){const i=n.isWebGL2;function r(o){let s;if(o===u0)return 5121;if(o===YN)return 32819;if(o===qN)return 32820;if(o===ZN)return 33635;if(o===GN)return 5120;if(o===$N)return 5122;if(o===dh)return 5123;if(o===XN)return 5124;if(o===Df)return 5125;if(o===Kr)return 5126;if(o===ph)return i?5131:(s=t.get("OES_texture_half_float"),s!==null?s.HALF_FLOAT_OES:null);if(o===JN)return 6406;if(o===Zo)return 6407;if(o===Di)return 6408;if(o===KN)return 6409;if(o===QN)return 6410;if(o===ma)return 6402;if(o===xu)return 34041;if(o===eI)return 6403;if(o===tI)return 36244;if(o===nI)return 33319;if(o===iI)return 33320;if(o===rI)return 36248;if(o===oI)return 36249;if(o===lw||o===uw||o===cw||o===fw)if(s=t.get("WEBGL_compressed_texture_s3tc"),s!==null){if(o===lw)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(o===uw)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(o===cw)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(o===fw)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(o===hw||o===dw||o===pw||o===mw)if(s=t.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(o===hw)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(o===dw)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(o===pw)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(o===mw)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(o===sI)return s=t.get("WEBGL_compressed_texture_etc1"),s!==null?s.COMPRESSED_RGB_ETC1_WEBGL:null;if((o===gw||o===vw)&&(s=t.get("WEBGL_compressed_texture_etc"),s!==null)){if(o===gw)return s.COMPRESSED_RGB8_ETC2;if(o===vw)return s.COMPRESSED_RGBA8_ETC2_EAC}if(o===aI||o===lI||o===uI||o===cI||o===fI||o===hI||o===dI||o===pI||o===mI||o===gI||o===vI||o===yI||o===xI||o===wI||o===bI||o===SI||o===MI||o===EI||o===TI||o===LI||o===CI||o===RI||o===PI||o===AI||o===DI||o===OI||o===FI||o===kI)return s=t.get("WEBGL_compressed_texture_astc"),s!==null?o:null;if(o===_I)return s=t.get("EXT_texture_compression_bptc"),s!==null?o:null;if(o===Wl)return i?34042:(s=t.get("WEBGL_depth_texture"),s!==null?s.UNSIGNED_INT_24_8_WEBGL:null)}return{convert:r}}function qg(e=[]){Gt.call(this),this.cameras=e}qg.prototype=Object.assign(Object.create(Gt.prototype),{constructor:qg,isArrayCamera:!0});function Cn(){Re.call(this),this.type="Group"}Cn.prototype=Object.assign(Object.create(Re.prototype),{constructor:Cn,isGroup:!0});function $l(){this._targetRay=null,this._grip=null,this._hand=null}Object.assign($l.prototype,{constructor:$l,getHandSpace:function(){return this._hand===null&&(this._hand=new Cn,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand},getTargetRaySpace:function(){return this._targetRay===null&&(this._targetRay=new Cn,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1),this._targetRay},getGripSpace:function(){return this._grip===null&&(this._grip=new Cn,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1),this._grip},dispatchEvent:function(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this},disconnect:function(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this},update:function(e,t,n){let i=null,r=null,o=null;const s=this._targetRay,a=this._grip,l=this._hand;if(e&&t.session.visibilityState!=="visible-blurred")if(l&&e.hand){o=!0;for(const g of e.hand.values()){const v=t.getJointPose(g,n);if(l.joints[g.jointName]===void 0){const m=new Cn;m.matrixAutoUpdate=!1,m.visible=!1,l.joints[g.jointName]=m,l.add(m)}const y=l.joints[g.jointName];v!==null&&(y.matrix.fromArray(v.transform.matrix),y.matrix.decompose(y.position,y.rotation,y.scale),y.jointRadius=v.radius),y.visible=v!==null}const u=l.joints["index-finger-tip"],c=l.joints["thumb-tip"],f=u.position.distanceTo(c.position),h=.02,d=.005;l.inputState.pinching&&f>h+d?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&f<=h-d&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else s!==null&&(i=t.getPose(e.targetRaySpace,n),i!==null&&(s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale))),a!==null&&e.gripSpace&&(r=t.getPose(e.gripSpace,n),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale)));return s!==null&&(s.visible=i!==null),a!==null&&(a.visible=r!==null),l!==null&&(l.visible=o!==null),this}});function uT(e,t){const n=this;let i=null,r=1,o=null,s="local-floor",a=null;const l=[],u=new Map,c=new Gt;c.layers.enable(1),c.viewport=new ot;const f=new Gt;f.layers.enable(2),f.viewport=new ot;const h=[c,f],d=new qg;d.layers.enable(1),d.layers.enable(2);let g=null,v=null;this.enabled=!1,this.isPresenting=!1,this.getController=function(A){let B=l[A];return B===void 0&&(B=new $l,l[A]=B),B.getTargetRaySpace()},this.getControllerGrip=function(A){let B=l[A];return B===void 0&&(B=new $l,l[A]=B),B.getGripSpace()},this.getHand=function(A){let B=l[A];return B===void 0&&(B=new $l,l[A]=B),B.getHandSpace()};function y(A){const B=u.get(A.inputSource);B&&B.dispatchEvent({type:A.type,data:A.inputSource})}function m(){u.forEach(function(A,B){A.disconnect(B)}),u.clear(),g=null,v=null,e.setFramebuffer(null),e.setRenderTarget(e.getRenderTarget()),E.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(A){r=A,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(A){s=A,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return o},this.getSession=function(){return i},this.setSession=async function(A){if(i=A,i!==null){i.addEventListener("select",y),i.addEventListener("selectstart",y),i.addEventListener("selectend",y),i.addEventListener("squeeze",y),i.addEventListener("squeezestart",y),i.addEventListener("squeezeend",y),i.addEventListener("end",m),i.addEventListener("inputsourceschange",p);const B=t.getContextAttributes();B.xrCompatible!==!0&&await t.makeXRCompatible();const j={antialias:B.antialias,alpha:B.alpha,depth:B.depth,stencil:B.stencil,framebufferScaleFactor:r},z=new XRWebGLLayer(i,t,j);i.updateRenderState({baseLayer:z}),o=await i.requestReferenceSpace(s),E.setContext(i),E.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}};function p(A){const B=i.inputSources;for(let j=0;j<l.length;j++)u.set(B[j],l[j]);for(let j=0;j<A.removed.length;j++){const z=A.removed[j],k=u.get(z);k&&(k.dispatchEvent({type:"disconnected",data:z}),u.delete(z))}for(let j=0;j<A.added.length;j++){const z=A.added[j],k=u.get(z);k&&k.dispatchEvent({type:"connected",data:z})}}const x=new F,w=new F;function b(A,B,j){x.setFromMatrixPosition(B.matrixWorld),w.setFromMatrixPosition(j.matrixWorld);const z=x.distanceTo(w),k=B.projectionMatrix.elements,U=j.projectionMatrix.elements,D=k[14]/(k[10]-1),G=k[14]/(k[10]+1),I=(k[9]+1)/k[5],H=(k[9]-1)/k[5],V=(k[8]-1)/k[0],J=(U[8]+1)/U[0],he=D*V,ge=D*J,xe=z/(-V+J),Y=xe*-V;B.matrixWorld.decompose(A.position,A.quaternion,A.scale),A.translateX(Y),A.translateZ(xe),A.matrixWorld.compose(A.position,A.quaternion,A.scale),A.matrixWorldInverse.copy(A.matrixWorld).invert();const Qe=D+xe,Ce=G+xe,We=he-Y,Ae=ge+(z-Y),Ye=I*G/Ce*Qe,Fe=H*G/Ce*Qe;A.projectionMatrix.makePerspective(We,Ae,Ye,Fe,Qe,Ce)}function _(A,B){B===null?A.matrixWorld.copy(A.matrix):A.matrixWorld.multiplyMatrices(B.matrixWorld,A.matrix),A.matrixWorldInverse.copy(A.matrixWorld).invert()}this.getCamera=function(A){d.near=f.near=c.near=A.near,d.far=f.far=c.far=A.far,(g!==d.near||v!==d.far)&&(i.updateRenderState({depthNear:d.near,depthFar:d.far}),g=d.near,v=d.far);const B=A.parent,j=d.cameras;_(d,B);for(let k=0;k<j.length;k++)_(j[k],B);A.matrixWorld.copy(d.matrixWorld),A.matrix.copy(d.matrix),A.matrix.decompose(A.position,A.quaternion,A.scale);const z=A.children;for(let k=0,U=z.length;k<U;k++)z[k].updateMatrixWorld(!0);return j.length===2?b(d,c,f):d.projectionMatrix.copy(c.projectionMatrix),d};let S=null;function L(A,B){if(a=B.getViewerPose(o),a!==null){const z=a.views,k=i.renderState.baseLayer;e.setFramebuffer(k.framebuffer);let U=!1;z.length!==d.cameras.length&&(d.cameras.length=0,U=!0);for(let D=0;D<z.length;D++){const G=z[D],I=k.getViewport(G),H=h[D];H.matrix.fromArray(G.transform.matrix),H.projectionMatrix.fromArray(G.projectionMatrix),H.viewport.set(I.x,I.y,I.width,I.height),D===0&&d.matrix.copy(H.matrix),U===!0&&d.cameras.push(H)}}const j=i.inputSources;for(let z=0;z<l.length;z++){const k=l[z],U=j[z];k.update(U,B,o)}S&&S(A,B)}const E=new QE;E.setAnimationLoop(L),this.setAnimationLoop=function(A){S=A},this.dispose=function(){}}Object.assign(uT.prototype,ir.prototype);function fH(e){function t(m,p){m.fogColor.value.copy(p.color),p.isFog?(m.fogNear.value=p.near,m.fogFar.value=p.far):p.isFogExp2&&(m.fogDensity.value=p.density)}function n(m,p,x,w){p.isMeshBasicMaterial?i(m,p):p.isMeshLambertMaterial?(i(m,p),l(m,p)):p.isMeshToonMaterial?(i(m,p),c(m,p)):p.isMeshPhongMaterial?(i(m,p),u(m,p)):p.isMeshStandardMaterial?(i(m,p),p.isMeshPhysicalMaterial?h(m,p):f(m,p)):p.isMeshMatcapMaterial?(i(m,p),d(m,p)):p.isMeshDepthMaterial?(i(m,p),g(m,p)):p.isMeshDistanceMaterial?(i(m,p),v(m,p)):p.isMeshNormalMaterial?(i(m,p),y(m,p)):p.isLineBasicMaterial?(r(m,p),p.isLineDashedMaterial&&o(m,p)):p.isPointsMaterial?s(m,p,x,w):p.isSpriteMaterial?a(m,p):p.isShadowMaterial?(m.color.value.copy(p.color),m.opacity.value=p.opacity):p.isShaderMaterial&&(p.uniformsNeedUpdate=!1)}function i(m,p){m.opacity.value=p.opacity,p.color&&m.diffuse.value.copy(p.color),p.emissive&&m.emissive.value.copy(p.emissive).multiplyScalar(p.emissiveIntensity),p.map&&(m.map.value=p.map),p.alphaMap&&(m.alphaMap.value=p.alphaMap),p.specularMap&&(m.specularMap.value=p.specularMap);const x=e.get(p).envMap;if(x){m.envMap.value=x,m.flipEnvMap.value=x.isCubeTexture&&x._needsFlipEnvMap?-1:1,m.reflectivity.value=p.reflectivity,m.refractionRatio.value=p.refractionRatio;const _=e.get(x).__maxMipLevel;_!==void 0&&(m.maxMipLevel.value=_)}p.lightMap&&(m.lightMap.value=p.lightMap,m.lightMapIntensity.value=p.lightMapIntensity),p.aoMap&&(m.aoMap.value=p.aoMap,m.aoMapIntensity.value=p.aoMapIntensity);let w;p.map?w=p.map:p.specularMap?w=p.specularMap:p.displacementMap?w=p.displacementMap:p.normalMap?w=p.normalMap:p.bumpMap?w=p.bumpMap:p.roughnessMap?w=p.roughnessMap:p.metalnessMap?w=p.metalnessMap:p.alphaMap?w=p.alphaMap:p.emissiveMap?w=p.emissiveMap:p.clearcoatMap?w=p.clearcoatMap:p.clearcoatNormalMap?w=p.clearcoatNormalMap:p.clearcoatRoughnessMap&&(w=p.clearcoatRoughnessMap),w!==void 0&&(w.isWebGLRenderTarget&&(w=w.texture),w.matrixAutoUpdate===!0&&w.updateMatrix(),m.uvTransform.value.copy(w.matrix));let b;p.aoMap?b=p.aoMap:p.lightMap&&(b=p.lightMap),b!==void 0&&(b.isWebGLRenderTarget&&(b=b.texture),b.matrixAutoUpdate===!0&&b.updateMatrix(),m.uv2Transform.value.copy(b.matrix))}function r(m,p){m.diffuse.value.copy(p.color),m.opacity.value=p.opacity}function o(m,p){m.dashSize.value=p.dashSize,m.totalSize.value=p.dashSize+p.gapSize,m.scale.value=p.scale}function s(m,p,x,w){m.diffuse.value.copy(p.color),m.opacity.value=p.opacity,m.size.value=p.size*x,m.scale.value=w*.5,p.map&&(m.map.value=p.map),p.alphaMap&&(m.alphaMap.value=p.alphaMap);let b;p.map?b=p.map:p.alphaMap&&(b=p.alphaMap),b!==void 0&&(b.matrixAutoUpdate===!0&&b.updateMatrix(),m.uvTransform.value.copy(b.matrix))}function a(m,p){m.diffuse.value.copy(p.color),m.opacity.value=p.opacity,m.rotation.value=p.rotation,p.map&&(m.map.value=p.map),p.alphaMap&&(m.alphaMap.value=p.alphaMap);let x;p.map?x=p.map:p.alphaMap&&(x=p.alphaMap),x!==void 0&&(x.matrixAutoUpdate===!0&&x.updateMatrix(),m.uvTransform.value.copy(x.matrix))}function l(m,p){p.emissiveMap&&(m.emissiveMap.value=p.emissiveMap)}function u(m,p){m.specular.value.copy(p.specular),m.shininess.value=Math.max(p.shininess,1e-4),p.emissiveMap&&(m.emissiveMap.value=p.emissiveMap),p.bumpMap&&(m.bumpMap.value=p.bumpMap,m.bumpScale.value=p.bumpScale,p.side===xt&&(m.bumpScale.value*=-1)),p.normalMap&&(m.normalMap.value=p.normalMap,m.normalScale.value.copy(p.normalScale),p.side===xt&&m.normalScale.value.negate()),p.displacementMap&&(m.displacementMap.value=p.displacementMap,m.displacementScale.value=p.displacementScale,m.displacementBias.value=p.displacementBias)}function c(m,p){p.gradientMap&&(m.gradientMap.value=p.gradientMap),p.emissiveMap&&(m.emissiveMap.value=p.emissiveMap),p.bumpMap&&(m.bumpMap.value=p.bumpMap,m.bumpScale.value=p.bumpScale,p.side===xt&&(m.bumpScale.value*=-1)),p.normalMap&&(m.normalMap.value=p.normalMap,m.normalScale.value.copy(p.normalScale),p.side===xt&&m.normalScale.value.negate()),p.displacementMap&&(m.displacementMap.value=p.displacementMap,m.displacementScale.value=p.displacementScale,m.displacementBias.value=p.displacementBias)}function f(m,p){m.roughness.value=p.roughness,m.metalness.value=p.metalness,p.roughnessMap&&(m.roughnessMap.value=p.roughnessMap),p.metalnessMap&&(m.metalnessMap.value=p.metalnessMap),p.emissiveMap&&(m.emissiveMap.value=p.emissiveMap),p.bumpMap&&(m.bumpMap.value=p.bumpMap,m.bumpScale.value=p.bumpScale,p.side===xt&&(m.bumpScale.value*=-1)),p.normalMap&&(m.normalMap.value=p.normalMap,m.normalScale.value.copy(p.normalScale),p.side===xt&&m.normalScale.value.negate()),p.displacementMap&&(m.displacementMap.value=p.displacementMap,m.displacementScale.value=p.displacementScale,m.displacementBias.value=p.displacementBias),e.get(p).envMap&&(m.envMapIntensity.value=p.envMapIntensity)}function h(m,p){f(m,p),m.reflectivity.value=p.reflectivity,m.clearcoat.value=p.clearcoat,m.clearcoatRoughness.value=p.clearcoatRoughness,p.sheen&&m.sheen.value.copy(p.sheen),p.clearcoatMap&&(m.clearcoatMap.value=p.clearcoatMap),p.clearcoatRoughnessMap&&(m.clearcoatRoughnessMap.value=p.clearcoatRoughnessMap),p.clearcoatNormalMap&&(m.clearcoatNormalScale.value.copy(p.clearcoatNormalScale),m.clearcoatNormalMap.value=p.clearcoatNormalMap,p.side===xt&&m.clearcoatNormalScale.value.negate()),m.transmission.value=p.transmission,p.transmissionMap&&(m.transmissionMap.value=p.transmissionMap)}function d(m,p){p.matcap&&(m.matcap.value=p.matcap),p.bumpMap&&(m.bumpMap.value=p.bumpMap,m.bumpScale.value=p.bumpScale,p.side===xt&&(m.bumpScale.value*=-1)),p.normalMap&&(m.normalMap.value=p.normalMap,m.normalScale.value.copy(p.normalScale),p.side===xt&&m.normalScale.value.negate()),p.displacementMap&&(m.displacementMap.value=p.displacementMap,m.displacementScale.value=p.displacementScale,m.displacementBias.value=p.displacementBias)}function g(m,p){p.displacementMap&&(m.displacementMap.value=p.displacementMap,m.displacementScale.value=p.displacementScale,m.displacementBias.value=p.displacementBias)}function v(m,p){p.displacementMap&&(m.displacementMap.value=p.displacementMap,m.displacementScale.value=p.displacementScale,m.displacementBias.value=p.displacementBias),m.referencePosition.value.copy(p.referencePosition),m.nearDistance.value=p.nearDistance,m.farDistance.value=p.farDistance}function y(m,p){p.bumpMap&&(m.bumpMap.value=p.bumpMap,m.bumpScale.value=p.bumpScale,p.side===xt&&(m.bumpScale.value*=-1)),p.normalMap&&(m.normalMap.value=p.normalMap,m.normalScale.value.copy(p.normalScale),p.side===xt&&m.normalScale.value.negate()),p.displacementMap&&(m.displacementMap.value=p.displacementMap,m.displacementScale.value=p.displacementScale,m.displacementBias.value=p.displacementBias)}return{refreshFogUniforms:t,refreshMaterialUniforms:n}}function hH(){const e=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return e.style.display="block",e}function Ku(e){e=e||{};const t=e.canvas!==void 0?e.canvas:hH(),n=e.context!==void 0?e.context:null,i=e.alpha!==void 0?e.alpha:!1,r=e.depth!==void 0?e.depth:!0,o=e.stencil!==void 0?e.stencil:!0,s=e.antialias!==void 0?e.antialias:!1,a=e.premultipliedAlpha!==void 0?e.premultipliedAlpha:!0,l=e.preserveDrawingBuffer!==void 0?e.preserveDrawingBuffer:!1,u=e.powerPreference!==void 0?e.powerPreference:"default",c=e.failIfMajorPerformanceCaveat!==void 0?e.failIfMajorPerformanceCaveat:!1;let f=null,h=null;const d=[];this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=qu,this.physicallyCorrectLights=!1,this.toneMapping=Vl,this.toneMappingExposure=1,this.maxMorphTargets=8,this.maxMorphNormals=4;const g=this;let v=!1,y=null,m=0,p=0,x=null,w=null,b=-1,_=null;const S=new ot,L=new ot;let E=null,A=t.width,B=t.height,j=1,z=null,k=null;const U=new ot(0,0,A,B),D=new ot(0,0,A,B);let G=!1;const I=new _d;let H=!1,V=!1;const J=new Ve,he=new F,ge={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function xe(){return x===null?j:1}let Y=n;function Qe(C,X){for(let $=0;$<C.length;$++){const q=C[$],me=t.getContext(q,X);if(me!==null)return me}return null}try{const C={alpha:i,depth:r,stencil:o,antialias:s,premultipliedAlpha:a,preserveDrawingBuffer:l,powerPreference:u,failIfMajorPerformanceCaveat:c};if(t.addEventListener("webglcontextlost",Je,!1),t.addEventListener("webglcontextrestored",At,!1),Y===null){const X=["webgl2","webgl","experimental-webgl"];if(g.isWebGL1Renderer===!0&&X.shift(),Y=Qe(X,C),Y===null)throw Qe(X)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}Y.getShaderPrecisionFormat===void 0&&(Y.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(C){throw console.error("THREE.WebGLRenderer: "+C.message),C}let Ce,We,Ae,Ye,Fe,ie,ce,ue,be,ae,R,T,Q,K,N,re,se,we,le,O,oe;function ve(){Ce=new Vz(Y),We=new zz(Y,Ce,e),Ce.init(We),O=new cH(Y,Ce,We),Ae=new lH(Y,Ce,We),Ae.scissor(L.copy(D).multiplyScalar(j).floor()),Ae.viewport(S.copy(U).multiplyScalar(j).floor()),Ye=new $z,Fe=new Z4,ie=new uH(Y,Ce,Ae,Fe,We,O,Ye),ce=new jz(g),ue=new mB(Y,We),oe=new Bz(Y,Ce,ue,We),be=new Wz(Y,ue,Ye,oe),ae=new Zz(Y,be,ue,Ye),se=new qz(Y),N=new Hz(Fe),R=new q4(g,ce,Ce,We,oe,N),T=new fH(Fe),Q=new Q4(Fe),K=new oH(Ce,We),re=new Iz(g,ce,Ae,ae,a),we=new Uz(Y,Ce,Ye,We),le=new Gz(Y,Ce,Ye,We),Ye.programs=R.programs,g.capabilities=We,g.extensions=Ce,g.properties=Fe,g.renderLists=Q,g.state=Ae,g.info=Ye}ve();const fe=new uT(g,Y);this.xr=fe;const Se=new lT(g,ae,We.maxTextureSize);this.shadowMap=Se,this.getContext=function(){return Y},this.getContextAttributes=function(){return Y.getContextAttributes()},this.forceContextLoss=function(){const C=Ce.get("WEBGL_lose_context");C&&C.loseContext()},this.forceContextRestore=function(){const C=Ce.get("WEBGL_lose_context");C&&C.restoreContext()},this.getPixelRatio=function(){return j},this.setPixelRatio=function(C){C!==void 0&&(j=C,this.setSize(A,B,!1))},this.getSize=function(C){return C===void 0&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),C=new ee),C.set(A,B)},this.setSize=function(C,X,$){if(fe.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}A=C,B=X,t.width=Math.floor(C*j),t.height=Math.floor(X*j),$!==!1&&(t.style.width=C+"px",t.style.height=X+"px"),this.setViewport(0,0,C,X)},this.getDrawingBufferSize=function(C){return C===void 0&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),C=new ee),C.set(A*j,B*j).floor()},this.setDrawingBufferSize=function(C,X,$){A=C,B=X,j=$,t.width=Math.floor(C*$),t.height=Math.floor(X*$),this.setViewport(0,0,C,X)},this.getCurrentViewport=function(C){return C===void 0&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),C=new ot),C.copy(S)},this.getViewport=function(C){return C.copy(U)},this.setViewport=function(C,X,$,q){C.isVector4?U.set(C.x,C.y,C.z,C.w):U.set(C,X,$,q),Ae.viewport(S.copy(U).multiplyScalar(j).floor())},this.getScissor=function(C){return C.copy(D)},this.setScissor=function(C,X,$,q){C.isVector4?D.set(C.x,C.y,C.z,C.w):D.set(C,X,$,q),Ae.scissor(L.copy(D).multiplyScalar(j).floor())},this.getScissorTest=function(){return G},this.setScissorTest=function(C){Ae.setScissorTest(G=C)},this.setOpaqueSort=function(C){z=C},this.setTransparentSort=function(C){k=C},this.getClearColor=function(C){return C===void 0&&(console.warn("WebGLRenderer: .getClearColor() now requires a Color as an argument"),C=new _e),C.copy(re.getClearColor())},this.setClearColor=function(){re.setClearColor.apply(re,arguments)},this.getClearAlpha=function(){return re.getClearAlpha()},this.setClearAlpha=function(){re.setClearAlpha.apply(re,arguments)},this.clear=function(C,X,$){let q=0;(C===void 0||C)&&(q|=16384),(X===void 0||X)&&(q|=256),($===void 0||$)&&(q|=1024),Y.clear(q)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Je,!1),t.removeEventListener("webglcontextrestored",At,!1),Q.dispose(),K.dispose(),Fe.dispose(),ce.dispose(),ae.dispose(),oe.dispose(),fe.dispose(),Do.stop()};function Je(C){C.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),v=!0}function At(){console.log("THREE.WebGLRenderer: Context Restored."),v=!1,ve()}function Ao(C){const X=C.target;X.removeEventListener("dispose",Ao),Sn(X)}function Sn(C){Mn(C),Fe.remove(C)}function Mn(C){const X=Fe.get(C).program;X!==void 0&&R.releaseProgram(X)}function Sd(C,X){C.render(function($){g.renderBufferImmediate($,X)})}this.renderBufferImmediate=function(C,X){oe.initAttributes();const $=Fe.get(C);C.hasPositions&&!$.position&&($.position=Y.createBuffer()),C.hasNormals&&!$.normal&&($.normal=Y.createBuffer()),C.hasUvs&&!$.uv&&($.uv=Y.createBuffer()),C.hasColors&&!$.color&&($.color=Y.createBuffer());const q=X.getAttributes();C.hasPositions&&(Y.bindBuffer(34962,$.position),Y.bufferData(34962,C.positionArray,35048),oe.enableAttribute(q.position),Y.vertexAttribPointer(q.position,3,5126,!1,0,0)),C.hasNormals&&(Y.bindBuffer(34962,$.normal),Y.bufferData(34962,C.normalArray,35048),oe.enableAttribute(q.normal),Y.vertexAttribPointer(q.normal,3,5126,!1,0,0)),C.hasUvs&&(Y.bindBuffer(34962,$.uv),Y.bufferData(34962,C.uvArray,35048),oe.enableAttribute(q.uv),Y.vertexAttribPointer(q.uv,2,5126,!1,0,0)),C.hasColors&&(Y.bindBuffer(34962,$.color),Y.bufferData(34962,C.colorArray,35048),oe.enableAttribute(q.color),Y.vertexAttribPointer(q.color,3,5126,!1,0,0)),oe.disableUnusedAttributes(),Y.drawArrays(4,0,C.count),C.count=0},this.renderBufferDirect=function(C,X,$,q,me,Xe){X===null&&(X=ge);const Ue=me.isMesh&&me.matrixWorld.determinant()<0,qe=Dt(C,X,q,me);Ae.setMaterial(q,Ue);let ze=$.index;const Nt=$.attributes.position;if(ze===null){if(Nt===void 0||Nt.count===0)return}else if(ze.count===0)return;let Ot=1;q.wireframe===!0&&(ze=be.getWireframeAttribute($),Ot=2),(q.morphTargets||q.morphNormals)&&se.update(me,$,q,qe),oe.setup(me,q,qe,$,ze);let Ie,it=we;ze!==null&&(Ie=ue.get(ze),it=le,it.setIndex(Ie));const or=ze!==null?ze.count:Nt.count,yt=$.drawRange.start*Ot,Fo=$.drawRange.count*Ot,jt=Xe!==null?Xe.start*Ot:0,Ed=Xe!==null?Xe.count*Ot:1/0,En=Math.max(yt,jt),Za=Math.min(or,yt+Fo,jt+Ed)-1,ws=Math.max(0,Za-En+1);if(ws!==0){if(me.isMesh)q.wireframe===!0?(Ae.setLineWidth(q.wireframeLinewidth*xe()),it.setMode(1)):it.setMode(4);else if(me.isLine){let Ja=q.linewidth;Ja===void 0&&(Ja=1),Ae.setLineWidth(Ja*xe()),me.isLineSegments?it.setMode(1):me.isLineLoop?it.setMode(2):it.setMode(3)}else me.isPoints?it.setMode(0):me.isSprite&&it.setMode(4);if(me.isInstancedMesh)it.renderInstances(En,ws,me.count);else if($.isInstancedBufferGeometry){const Ja=Math.min($.instanceCount,$._maxInstanceCount);it.renderInstances(En,ws,Ja)}else it.render(En,ws)}},this.compile=function(C,X){h=K.get(C),h.init(),C.traverseVisible(function(q){q.isLight&&q.layers.test(X.layers)&&(h.pushLight(q),q.castShadow&&h.pushShadow(q))}),h.setupLights();const $=new WeakMap;C.traverse(function(q){const me=q.material;if(me)if(Array.isArray(me))for(let Xe=0;Xe<me.length;Xe++){const Ue=me[Xe];$.has(Ue)===!1&&(vt(Ue,C,q),$.set(Ue))}else $.has(me)===!1&&(vt(me,C,q),$.set(me))})};let xs=null;function Md(C){fe.isPresenting||xs&&xs(C)}const Do=new QE;Do.setAnimationLoop(Md),typeof window<"u"&&Do.setContext(window),this.setAnimationLoop=function(C){xs=C,fe.setAnimationLoop(C),C===null?Do.stop():Do.start()},this.render=function(C,X){let $,q;if(arguments[2]!==void 0&&(console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),$=arguments[2]),arguments[3]!==void 0&&(console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),q=arguments[3]),X!==void 0&&X.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(v===!0)return;oe.resetDefaultState(),b=-1,_=null,C.autoUpdate===!0&&C.updateMatrixWorld(),X.parent===null&&X.updateMatrixWorld(),fe.enabled===!0&&fe.isPresenting===!0&&(X=fe.getCamera(X)),C.isScene===!0&&C.onBeforeRender(g,C,X,$||x),h=K.get(C,d.length),h.init(),d.push(h),J.multiplyMatrices(X.projectionMatrix,X.matrixWorldInverse),I.setFromProjectionMatrix(J),V=this.localClippingEnabled,H=N.init(this.clippingPlanes,V,X),f=Q.get(C,X),f.init(),Qu(C,X,0,g.sortObjects),f.finish(),g.sortObjects===!0&&f.sort(z,k),H===!0&&N.beginShadows();const me=h.state.shadowsArray;Se.render(me,C,X),h.setupLights(),h.setupLightsView(X),H===!0&&N.endShadows(),this.info.autoReset===!0&&this.info.reset(),$!==void 0&&this.setRenderTarget($),re.render(f,C,X,q);const Xe=f.opaque,Ue=f.transparent;Xe.length>0&&kt(Xe,C,X),Ue.length>0&&kt(Ue,C,X),C.isScene===!0&&C.onAfterRender(g,C,X),x!==null&&(ie.updateRenderTargetMipmap(x),ie.updateMultisampleRenderTarget(x)),Ae.buffers.depth.setTest(!0),Ae.buffers.depth.setMask(!0),Ae.buffers.color.setMask(!0),Ae.setPolygonOffset(!1),d.pop(),d.length>0?h=d[d.length-1]:h=null,f=null};function Qu(C,X,$,q){if(C.visible===!1)return;if(C.layers.test(X.layers)){if(C.isGroup)$=C.renderOrder;else if(C.isLOD)C.autoUpdate===!0&&C.update(X);else if(C.isLight)h.pushLight(C),C.castShadow&&h.pushShadow(C);else if(C.isSprite){if(!C.frustumCulled||I.intersectsSprite(C)){q&&he.setFromMatrixPosition(C.matrixWorld).applyMatrix4(J);const Ue=ae.update(C),qe=C.material;qe.visible&&f.push(C,Ue,qe,$,he.z,null)}}else if(C.isImmediateRenderObject)q&&he.setFromMatrixPosition(C.matrixWorld).applyMatrix4(J),f.push(C,null,C.material,$,he.z,null);else if((C.isMesh||C.isLine||C.isPoints)&&(C.isSkinnedMesh&&C.skeleton.frame!==Ye.render.frame&&(C.skeleton.update(),C.skeleton.frame=Ye.render.frame),!C.frustumCulled||I.intersectsObject(C))){q&&he.setFromMatrixPosition(C.matrixWorld).applyMatrix4(J);const Ue=ae.update(C),qe=C.material;if(Array.isArray(qe)){const ze=Ue.groups;for(let Nt=0,Ot=ze.length;Nt<Ot;Nt++){const Ie=ze[Nt],it=qe[Ie.materialIndex];it&&it.visible&&f.push(C,Ue,it,$,he.z,Ie)}}else qe.visible&&f.push(C,Ue,qe,$,he.z,null)}}const Xe=C.children;for(let Ue=0,qe=Xe.length;Ue<qe;Ue++)Qu(Xe[Ue],X,$,q)}function kt(C,X,$){const q=X.isScene===!0?X.overrideMaterial:null;for(let me=0,Xe=C.length;me<Xe;me++){const Ue=C[me],qe=Ue.object,ze=Ue.geometry,Nt=q===null?Ue.material:q,Ot=Ue.group;if($.isArrayCamera){const Ie=$.cameras;for(let it=0,or=Ie.length;it<or;it++){const yt=Ie[it];qe.layers.test(yt.layers)&&(Ae.viewport(S.copy(yt.viewport)),h.setupLightsView(yt),Be(qe,X,yt,ze,Nt,Ot))}}else Be(qe,X,$,ze,Nt,Ot)}}function Be(C,X,$,q,me,Xe){if(C.onBeforeRender(g,X,$,q,me,Xe),C.modelViewMatrix.multiplyMatrices($.matrixWorldInverse,C.matrixWorld),C.normalMatrix.getNormalMatrix(C.modelViewMatrix),C.isImmediateRenderObject){const Ue=Dt($,X,me,C);Ae.setMaterial(me),oe.reset(),Sd(C,Ue)}else g.renderBufferDirect($,X,q,me,C,Xe);C.onAfterRender(g,X,$,q,me,Xe)}function vt(C,X,$){X.isScene!==!0&&(X=ge);const q=Fe.get(C),me=h.state.lights,Xe=h.state.shadowsArray,Ue=me.state.version,qe=R.getParameters(C,me.state,Xe,X,$),ze=R.getProgramCacheKey(qe);let Nt=q.program,Ot=!0;if(q.environment=C.isMeshStandardMaterial?X.environment:null,q.fog=X.fog,q.envMap=ce.get(C.envMap||q.environment),Nt===void 0)C.addEventListener("dispose",Ao);else if(Nt.cacheKey!==ze)Mn(C);else if(q.lightsStateVersion!==Ue)Ot=!1;else{if(qe.shaderID!==void 0)return;Ot=!1}Ot&&(qe.uniforms=R.getUniforms(C),C.onBeforeCompile(qe,g),Nt=R.acquireProgram(qe,ze),q.program=Nt,q.uniforms=qe.uniforms,q.outputEncoding=qe.outputEncoding);const Ie=q.uniforms;(!C.isShaderMaterial&&!C.isRawShaderMaterial||C.clipping===!0)&&(q.numClippingPlanes=N.numPlanes,q.numIntersection=N.numIntersection,Ie.clippingPlanes=N.uniform),q.needsLights=Oo(C),q.lightsStateVersion=Ue,q.needsLights&&(Ie.ambientLightColor.value=me.state.ambient,Ie.lightProbe.value=me.state.probe,Ie.directionalLights.value=me.state.directional,Ie.directionalLightShadows.value=me.state.directionalShadow,Ie.spotLights.value=me.state.spot,Ie.spotLightShadows.value=me.state.spotShadow,Ie.rectAreaLights.value=me.state.rectArea,Ie.ltc_1.value=me.state.rectAreaLTC1,Ie.ltc_2.value=me.state.rectAreaLTC2,Ie.pointLights.value=me.state.point,Ie.pointLightShadows.value=me.state.pointShadow,Ie.hemisphereLights.value=me.state.hemi,Ie.directionalShadowMap.value=me.state.directionalShadowMap,Ie.directionalShadowMatrix.value=me.state.directionalShadowMatrix,Ie.spotShadowMap.value=me.state.spotShadowMap,Ie.spotShadowMatrix.value=me.state.spotShadowMatrix,Ie.pointShadowMap.value=me.state.pointShadowMap,Ie.pointShadowMatrix.value=me.state.pointShadowMatrix);const it=q.program.getUniforms(),or=go.seqWithValue(it.seq,Ie);q.uniformsList=or}function Dt(C,X,$,q){X.isScene!==!0&&(X=ge),ie.resetTextureUnits();const me=X.fog,Xe=$.isMeshStandardMaterial?X.environment:null,Ue=x===null?g.outputEncoding:x.texture.encoding,qe=ce.get($.envMap||Xe),ze=Fe.get($),Nt=h.state.lights;if(H===!0&&(V===!0||C!==_)){const jt=C===_&&$.id===b;N.setState($,C,jt)}$.version===ze.__version?($.fog&&ze.fog!==me||ze.environment!==Xe||ze.needsLights&&ze.lightsStateVersion!==Nt.state.version||ze.numClippingPlanes!==void 0&&(ze.numClippingPlanes!==N.numPlanes||ze.numIntersection!==N.numIntersection)||ze.outputEncoding!==Ue||ze.envMap!==qe)&&vt($,X,q):(vt($,X,q),ze.__version=$.version);let Ot=!1,Ie=!1,it=!1;const or=ze.program,yt=or.getUniforms(),Fo=ze.uniforms;if(Ae.useProgram(or.program)&&(Ot=!0,Ie=!0,it=!0),$.id!==b&&(b=$.id,Ie=!0),Ot||_!==C){if(yt.setValue(Y,"projectionMatrix",C.projectionMatrix),We.logarithmicDepthBuffer&&yt.setValue(Y,"logDepthBufFC",2/(Math.log(C.far+1)/Math.LN2)),_!==C&&(_=C,Ie=!0,it=!0),$.isShaderMaterial||$.isMeshPhongMaterial||$.isMeshToonMaterial||$.isMeshStandardMaterial||$.envMap){const jt=yt.map.cameraPosition;jt!==void 0&&jt.setValue(Y,he.setFromMatrixPosition(C.matrixWorld))}($.isMeshPhongMaterial||$.isMeshToonMaterial||$.isMeshLambertMaterial||$.isMeshBasicMaterial||$.isMeshStandardMaterial||$.isShaderMaterial)&&yt.setValue(Y,"isOrthographic",C.isOrthographicCamera===!0),($.isMeshPhongMaterial||$.isMeshToonMaterial||$.isMeshLambertMaterial||$.isMeshBasicMaterial||$.isMeshStandardMaterial||$.isShaderMaterial||$.isShadowMaterial||$.skinning)&&yt.setValue(Y,"viewMatrix",C.matrixWorldInverse)}if($.skinning){yt.setOptional(Y,q,"bindMatrix"),yt.setOptional(Y,q,"bindMatrixInverse");const jt=q.skeleton;if(jt){const Ed=jt.bones;if(We.floatVertexTextures){if(jt.boneTexture===null){let En=Math.sqrt(Ed.length*4);En=ke.ceilPowerOfTwo(En),En=Math.max(En,4);const Za=new Float32Array(En*En*4);Za.set(jt.boneMatrices);const ws=new Ca(Za,En,En,Di,Kr);jt.boneMatrices=Za,jt.boneTexture=ws,jt.boneTextureSize=En}yt.setValue(Y,"boneTexture",jt.boneTexture,ie),yt.setValue(Y,"boneTextureSize",jt.boneTextureSize)}else yt.setOptional(Y,jt,"boneMatrices")}}return(Ie||ze.receiveShadow!==q.receiveShadow)&&(ze.receiveShadow=q.receiveShadow,yt.setValue(Y,"receiveShadow",q.receiveShadow)),Ie&&(yt.setValue(Y,"toneMappingExposure",g.toneMappingExposure),ze.needsLights&&rr(Fo,it),me&&$.fog&&T.refreshFogUniforms(Fo,me),T.refreshMaterialUniforms(Fo,$,j,B),go.upload(Y,ze.uniformsList,Fo,ie)),$.isShaderMaterial&&$.uniformsNeedUpdate===!0&&(go.upload(Y,ze.uniformsList,Fo,ie),$.uniformsNeedUpdate=!1),$.isSpriteMaterial&&yt.setValue(Y,"center",q.center),yt.setValue(Y,"modelViewMatrix",q.modelViewMatrix),yt.setValue(Y,"normalMatrix",q.normalMatrix),yt.setValue(Y,"modelMatrix",q.matrixWorld),or}function rr(C,X){C.ambientLightColor.needsUpdate=X,C.lightProbe.needsUpdate=X,C.directionalLights.needsUpdate=X,C.directionalLightShadows.needsUpdate=X,C.pointLights.needsUpdate=X,C.pointLightShadows.needsUpdate=X,C.spotLights.needsUpdate=X,C.spotLightShadows.needsUpdate=X,C.rectAreaLights.needsUpdate=X,C.hemisphereLights.needsUpdate=X}function Oo(C){return C.isMeshLambertMaterial||C.isMeshToonMaterial||C.isMeshPhongMaterial||C.isMeshStandardMaterial||C.isShadowMaterial||C.isShaderMaterial&&C.lights===!0}this.setFramebuffer=function(C){y!==C&&x===null&&Y.bindFramebuffer(36160,C),y=C},this.getActiveCubeFace=function(){return m},this.getActiveMipmapLevel=function(){return p},this.getRenderList=function(){return f},this.setRenderList=function(C){f=C},this.getRenderTarget=function(){return x},this.setRenderTarget=function(C,X=0,$=0){x=C,m=X,p=$,C&&Fe.get(C).__webglFramebuffer===void 0&&ie.setupRenderTarget(C);let q=y,me=!1;if(C){const Xe=Fe.get(C).__webglFramebuffer;C.isWebGLCubeRenderTarget?(q=Xe[X],me=!0):C.isWebGLMultisampleRenderTarget?q=Fe.get(C).__webglMultisampledFramebuffer:q=Xe,S.copy(C.viewport),L.copy(C.scissor),E=C.scissorTest}else S.copy(U).multiplyScalar(j).floor(),L.copy(D).multiplyScalar(j).floor(),E=G;if(w!==q&&(Y.bindFramebuffer(36160,q),w=q),Ae.viewport(S),Ae.scissor(L),Ae.setScissorTest(E),me){const Xe=Fe.get(C.texture);Y.framebufferTexture2D(36160,36064,34069+X,Xe.__webglTexture,$)}},this.readRenderTargetPixels=function(C,X,$,q,me,Xe,Ue){if(!(C&&C.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let qe=Fe.get(C).__webglFramebuffer;if(C.isWebGLCubeRenderTarget&&Ue!==void 0&&(qe=qe[Ue]),qe){let ze=!1;qe!==w&&(Y.bindFramebuffer(36160,qe),ze=!0);try{const Nt=C.texture,Ot=Nt.format,Ie=Nt.type;if(Ot!==Di&&O.convert(Ot)!==Y.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const it=Ie===ph&&(Ce.has("EXT_color_buffer_half_float")||We.isWebGL2&&Ce.has("EXT_color_buffer_float"));if(Ie!==u0&&O.convert(Ie)!==Y.getParameter(35738)&&!(Ie===Kr&&(We.isWebGL2||Ce.has("OES_texture_float")||Ce.has("WEBGL_color_buffer_float")))&&!it){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Y.checkFramebufferStatus(36160)===36053?X>=0&&X<=C.width-q&&$>=0&&$<=C.height-me&&Y.readPixels(X,$,q,me,O.convert(Ot),O.convert(Ie),Xe):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{ze&&Y.bindFramebuffer(36160,w)}}},this.copyFramebufferToTexture=function(C,X,$=0){const q=Math.pow(2,-$),me=Math.floor(X.image.width*q),Xe=Math.floor(X.image.height*q),Ue=O.convert(X.format);ie.setTexture2D(X,0),Y.copyTexImage2D(3553,$,Ue,C.x,C.y,me,Xe,0),Ae.unbindTexture()},this.copyTextureToTexture=function(C,X,$,q=0){const me=X.image.width,Xe=X.image.height,Ue=O.convert($.format),qe=O.convert($.type);ie.setTexture2D($,0),Y.pixelStorei(37440,$.flipY),Y.pixelStorei(37441,$.premultiplyAlpha),Y.pixelStorei(3317,$.unpackAlignment),X.isDataTexture?Y.texSubImage2D(3553,q,C.x,C.y,me,Xe,Ue,qe,X.image.data):X.isCompressedTexture?Y.compressedTexSubImage2D(3553,q,C.x,C.y,X.mipmaps[0].width,X.mipmaps[0].height,Ue,X.mipmaps[0].data):Y.texSubImage2D(3553,q,C.x,C.y,Ue,qe,X.image),q===0&&$.generateMipmaps&&Y.generateMipmap(3553),Ae.unbindTexture()},this.initTexture=function(C){ie.setTexture2D(C,0),Ae.unbindTexture()},this.resetState=function(){Ae.reset(),oe.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function Vw(e){Ku.call(this,e)}Vw.prototype=Object.assign(Object.create(Ku.prototype),{constructor:Vw,isWebGL1Renderer:!0});class cT extends Re{constructor(){super(),Object.defineProperty(this,"isScene",{value:!0}),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,n){return super.copy(t,n),t.background!==null&&(this.background=t.background.clone()),t.environment!==null&&(this.environment=t.environment.clone()),t.fog!==null&&(this.fog=t.fog.clone()),t.overrideMaterial!==null&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const n=super.toJSON(t);return this.background!==null&&(n.object.background=this.background.toJSON(t)),this.environment!==null&&(n.object.environment=this.environment.toJSON(t)),this.fog!==null&&(n.object.fog=this.fog.toJSON()),n}}function ui(e,t){this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=xd,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=ke.generateUUID()}Object.defineProperty(ui.prototype,"needsUpdate",{set:function(e){e===!0&&this.version++}});Object.assign(ui.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setUsage:function(e){return this.usage=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this},copyAt:function(e,t,n){e*=this.stride,n*=t.stride;for(let i=0,r=this.stride;i<r;i++)this.array[e+i]=t.array[n+i];return this},set:function(e,t=0){return this.array.set(e,t),this},clone:function(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ke.generateUUID()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new ui(t,this.stride);return n.setUsage(this.usage),n},onUpload:function(e){return this.onUploadCallback=e,this},toJSON:function(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ke.generateUUID()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}});const zo=new F;function os(e,t,n,i){this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=i===!0}Object.defineProperties(os.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}},needsUpdate:{set:function(e){this.data.needsUpdate=e}}});Object.assign(os.prototype,{isInterleavedBufferAttribute:!0,applyMatrix4:function(e){for(let t=0,n=this.data.count;t<n;t++)zo.x=this.getX(t),zo.y=this.getY(t),zo.z=this.getZ(t),zo.applyMatrix4(e),this.setXYZ(t,zo.x,zo.y,zo.z);return this},setX:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this},setY:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this},setZ:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this},setW:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this},setXYZ:function(e,t,n,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this},setXYZW:function(e,t,n,i,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this.data.array[e+3]=r,this},clone:function(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const i=n*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)t.push(this.data.array[i+r])}return new je(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new os(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)},toJSON:function(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const i=n*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)t.push(this.data.array[i+r])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}});function ss(e){Pe.call(this),this.type="SpriteMaterial",this.color=new _e(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(e)}ss.prototype=Object.create(Pe.prototype);ss.prototype.constructor=ss;ss.prototype.isSpriteMaterial=!0;ss.prototype.copy=function(e){return Pe.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this};let Ns;const yl=new F,Is=new F,Bs=new F,Us=new ee,xl=new ee,fT=new Ve,tf=new F,wl=new F,nf=new F,Ww=new ee,pm=new ee,Gw=new ee;function $w(e){if(Re.call(this),this.type="Sprite",Ns===void 0){Ns=new ft;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),n=new ui(t,5);Ns.setIndex([0,1,2,0,2,3]),Ns.setAttribute("position",new os(n,3,0,!1)),Ns.setAttribute("uv",new os(n,2,3,!1))}this.geometry=Ns,this.material=e!==void 0?e:new ss,this.center=new ee(.5,.5)}$w.prototype=Object.assign(Object.create(Re.prototype),{constructor:$w,isSprite:!0,raycast:function(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Is.setFromMatrixScale(this.matrixWorld),fT.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Bs.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Is.multiplyScalar(-Bs.z);const n=this.material.rotation;let i,r;n!==0&&(r=Math.cos(n),i=Math.sin(n));const o=this.center;rf(tf.set(-.5,-.5,0),Bs,o,Is,i,r),rf(wl.set(.5,-.5,0),Bs,o,Is,i,r),rf(nf.set(.5,.5,0),Bs,o,Is,i,r),Ww.set(0,0),pm.set(1,0),Gw.set(1,1);let s=e.ray.intersectTriangle(tf,wl,nf,!1,yl);if(s===null&&(rf(wl.set(-.5,.5,0),Bs,o,Is,i,r),pm.set(0,1),s=e.ray.intersectTriangle(tf,nf,wl,!1,yl),s===null))return;const a=e.ray.origin.distanceTo(yl);a<e.near||a>e.far||t.push({distance:a,point:yl.clone(),uv:vn.getUV(yl,tf,wl,nf,Ww,pm,Gw,new ee),face:null,object:this})},copy:function(e){return Re.prototype.copy.call(this,e),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}});function rf(e,t,n,i,r,o){Us.subVectors(e,n).addScalar(.5).multiply(i),r!==void 0?(xl.x=o*Us.x-r*Us.y,xl.y=r*Us.x+o*Us.y):xl.copy(Us),e.copy(t),e.x+=xl.x,e.y+=xl.y,e.applyMatrix4(fT)}const of=new F,Xw=new F;function Zg(){Re.call(this),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}Zg.prototype=Object.assign(Object.create(Re.prototype),{constructor:Zg,isLOD:!0,copy:function(e){Re.prototype.copy.call(this,e,!1);const t=e.levels;for(let n=0,i=t.length;n<i;n++){const r=t[n];this.addLevel(r.object.clone(),r.distance)}return this.autoUpdate=e.autoUpdate,this},addLevel:function(e,t=0){t=Math.abs(t);const n=this.levels;let i;for(i=0;i<n.length&&!(t<n[i].distance);i++);return n.splice(i,0,{distance:t,object:e}),this.add(e),this},getCurrentLevel:function(){return this._currentLevel},getObjectForDistance:function(e){const t=this.levels;if(t.length>0){let n,i;for(n=1,i=t.length;n<i&&!(e<t[n].distance);n++);return t[n-1].object}return null},raycast:function(e,t){if(this.levels.length>0){of.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(of);this.getObjectForDistance(i).raycast(e,t)}},update:function(e){const t=this.levels;if(t.length>1){of.setFromMatrixPosition(e.matrixWorld),Xw.setFromMatrixPosition(this.matrixWorld);const n=of.distanceTo(Xw)/e.zoom;t[0].object.visible=!0;let i,r;for(i=1,r=t.length;i<r&&n>=t[i].distance;i++)t[i-1].object.visible=!1,t[i].object.visible=!0;for(this._currentLevel=i-1;i<r;i++)t[i].object.visible=!1}},toJSON:function(e){const t=Re.prototype.toJSON.call(this,e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let i=0,r=n.length;i<r;i++){const o=n[i];t.object.levels.push({object:o.object.uuid,distance:o.distance})}return t}});const Yw=new F,qw=new ot,Zw=new ot,dH=new F,Jw=new Ve;function Jg(e,t){e&&e.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),pt.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Ve,this.bindMatrixInverse=new Ve}Jg.prototype=Object.assign(Object.create(pt.prototype),{constructor:Jg,isSkinnedMesh:!0,copy:function(e){return pt.prototype.copy.call(this,e),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this},bind:function(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){const e=new ot,t=this.geometry.attributes.skinWeight;for(let n=0,i=t.count;n<i;n++){e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.w=t.getW(n);const r=1/e.manhattanLength();r!==1/0?e.multiplyScalar(r):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}},updateMatrixWorld:function(e){pt.prototype.updateMatrixWorld.call(this,e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},boneTransform:function(e,t){const n=this.skeleton,i=this.geometry;qw.fromBufferAttribute(i.attributes.skinIndex,e),Zw.fromBufferAttribute(i.attributes.skinWeight,e),Yw.fromBufferAttribute(i.attributes.position,e).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let r=0;r<4;r++){const o=Zw.getComponent(r);if(o!==0){const s=qw.getComponent(r);Jw.multiplyMatrices(n.bones[s].matrixWorld,n.boneInverses[s]),t.addScaledVector(dH.copy(Yw).applyMatrix4(Jw),o)}}return t.applyMatrix4(this.bindMatrixInverse)}});function Kg(){Re.call(this),this.type="Bone"}Kg.prototype=Object.assign(Object.create(Re.prototype),{constructor:Kg,isBone:!0});const Kw=new Ve,pH=new Ve;function Qg(e=[],t=[]){this.uuid=ke.generateUUID(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}Object.assign(Qg.prototype,{init:function(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let n=0,i=this.bones.length;n<i;n++)this.boneInverses.push(new Ve)}},calculateInverses:function(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const n=new Ve;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}},pose:function(){for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}},update:function(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,i=this.boneTexture;for(let r=0,o=e.length;r<o;r++){const s=e[r]?e[r].matrixWorld:pH;Kw.multiplyMatrices(s,t[r]),Kw.toArray(n,r*16)}i!==null&&(i.needsUpdate=!0)},clone:function(){return new Qg(this.bones,this.boneInverses)},getBoneByName:function(e){for(let t=0,n=this.bones.length;t<n;t++){const i=this.bones[t];if(i.name===e)return i}},dispose:function(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)},fromJSON:function(e,t){this.uuid=e.uuid;for(let n=0,i=e.bones.length;n<i;n++){const r=e.bones[n];let o=t[r];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",r),o=new Kg),this.bones.push(o),this.boneInverses.push(new Ve().fromArray(e.boneInverses[n]))}return this.init(),this},toJSON:function(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let i=0,r=t.length;i<r;i++){const o=t[i];e.bones.push(o.uuid);const s=n[i];e.boneInverses.push(s.toArray())}return e}});const Qw=new Ve,e_=new Ve,sf=[],_l=new pt;function t_(e,t,n){pt.call(this,e,t),this.instanceMatrix=new je(new Float32Array(n*16),16),this.instanceColor=null,this.count=n,this.frustumCulled=!1}t_.prototype=Object.assign(Object.create(pt.prototype),{constructor:t_,isInstancedMesh:!0,copy:function(e){return pt.prototype.copy.call(this,e),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this},getColorAt:function(e,t){t.fromArray(this.instanceColor.array,e*3)},getMatrixAt:function(e,t){t.fromArray(this.instanceMatrix.array,e*16)},raycast:function(e,t){const n=this.matrixWorld,i=this.count;if(_l.geometry=this.geometry,_l.material=this.material,_l.material!==void 0)for(let r=0;r<i;r++){this.getMatrixAt(r,Qw),e_.multiplyMatrices(n,Qw),_l.matrixWorld=e_,_l.raycast(e,sf);for(let o=0,s=sf.length;o<s;o++){const a=sf[o];a.instanceId=r,a.object=this,t.push(a)}sf.length=0}},setColorAt:function(e,t){this.instanceColor===null&&(this.instanceColor=new je(new Float32Array(this.count*3),3)),t.toArray(this.instanceColor.array,e*3)},setMatrixAt:function(e,t){t.toArray(this.instanceMatrix.array,e*16)},updateMorphTargets:function(){},dispose:function(){this.dispatchEvent({type:"dispose"})}});function mi(e){Pe.call(this),this.type="LineBasicMaterial",this.color=new _e(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.morphTargets=!1,this.setValues(e)}mi.prototype=Object.create(Pe.prototype);mi.prototype.constructor=mi;mi.prototype.isLineBasicMaterial=!0;mi.prototype.copy=function(e){return Pe.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.morphTargets=e.morphTargets,this};const n_=new F,i_=new F,r_=new Ve,mm=new Zu,af=new ys;function Ra(e=new ft,t=new mi){Re.call(this),this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}Ra.prototype=Object.assign(Object.create(Re.prototype),{constructor:Ra,isLine:!0,copy:function(e){return Re.prototype.copy.call(this,e),this.material=e.material,this.geometry=e.geometry,this},computeLineDistances:function(){const e=this.geometry;if(e.isBufferGeometry)if(e.index===null){const t=e.attributes.position,n=[0];for(let i=1,r=t.count;i<r;i++)n_.fromBufferAttribute(t,i-1),i_.fromBufferAttribute(t,i),n[i]=n[i-1],n[i]+=n_.distanceTo(i_);e.setAttribute("lineDistance",new bt(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this},raycast:function(e,t){const n=this.geometry,i=this.matrixWorld,r=e.params.Line.threshold;if(n.boundingSphere===null&&n.computeBoundingSphere(),af.copy(n.boundingSphere),af.applyMatrix4(i),af.radius+=r,e.ray.intersectsSphere(af)===!1)return;r_.copy(i).invert(),mm.copy(e.ray).applyMatrix4(r_);const o=r/((this.scale.x+this.scale.y+this.scale.z)/3),s=o*o,a=new F,l=new F,u=new F,c=new F,f=this.isLineSegments?2:1;if(n.isBufferGeometry){const h=n.index,g=n.attributes.position;if(h!==null){const v=h.array;for(let y=0,m=v.length-1;y<m;y+=f){const p=v[y],x=v[y+1];if(a.fromBufferAttribute(g,p),l.fromBufferAttribute(g,x),mm.distanceSqToSegment(a,l,c,u)>s)continue;c.applyMatrix4(this.matrixWorld);const b=e.ray.origin.distanceTo(c);b<e.near||b>e.far||t.push({distance:b,point:u.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}}else for(let v=0,y=g.count-1;v<y;v+=f){if(a.fromBufferAttribute(g,v),l.fromBufferAttribute(g,v+1),mm.distanceSqToSegment(a,l,c,u)>s)continue;c.applyMatrix4(this.matrixWorld);const p=e.ray.origin.distanceTo(c);p<e.near||p>e.far||t.push({distance:p,point:u.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this})}}else n.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")},updateMorphTargets:function(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const i=t[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,o=i.length;r<o;r++){const s=i[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=r}}}}else{const t=e.morphTargets;t!==void 0&&t.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}});const o_=new F,s_=new F;function yh(e,t){Ra.call(this,e,t),this.type="LineSegments"}yh.prototype=Object.assign(Object.create(Ra.prototype),{constructor:yh,isLineSegments:!0,computeLineDistances:function(){const e=this.geometry;if(e.isBufferGeometry)if(e.index===null){const t=e.attributes.position,n=[];for(let i=0,r=t.count;i<r;i+=2)o_.fromBufferAttribute(t,i),s_.fromBufferAttribute(t,i+1),n[i]=i===0?0:n[i-1],n[i+1]=n[i]+o_.distanceTo(s_);e.setAttribute("lineDistance",new bt(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}});function a_(e,t){Ra.call(this,e,t),this.type="LineLoop"}a_.prototype=Object.assign(Object.create(Ra.prototype),{constructor:a_,isLineLoop:!0});function as(e){Pe.call(this),this.type="PointsMaterial",this.color=new _e(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(e)}as.prototype=Object.create(Pe.prototype);as.prototype.constructor=as;as.prototype.isPointsMaterial=!0;as.prototype.copy=function(e){return Pe.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.morphTargets=e.morphTargets,this};const l_=new Ve,ev=new Zu,lf=new ys,uf=new F;function u_(e=new ft,t=new as){Re.call(this),this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}u_.prototype=Object.assign(Object.create(Re.prototype),{constructor:u_,isPoints:!0,copy:function(e){return Re.prototype.copy.call(this,e),this.material=e.material,this.geometry=e.geometry,this},raycast:function(e,t){const n=this.geometry,i=this.matrixWorld,r=e.params.Points.threshold;if(n.boundingSphere===null&&n.computeBoundingSphere(),lf.copy(n.boundingSphere),lf.applyMatrix4(i),lf.radius+=r,e.ray.intersectsSphere(lf)===!1)return;l_.copy(i).invert(),ev.copy(e.ray).applyMatrix4(l_);const o=r/((this.scale.x+this.scale.y+this.scale.z)/3),s=o*o;if(n.isBufferGeometry){const a=n.index,u=n.attributes.position;if(a!==null){const c=a.array;for(let f=0,h=c.length;f<h;f++){const d=c[f];uf.fromBufferAttribute(u,d),c_(uf,d,s,i,e,t,this)}}else for(let c=0,f=u.count;c<f;c++)uf.fromBufferAttribute(u,c),c_(uf,c,s,i,e,t,this)}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")},updateMorphTargets:function(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const i=t[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,o=i.length;r<o;r++){const s=i[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=r}}}}else{const t=e.morphTargets;t!==void 0&&t.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}});function c_(e,t,n,i,r,o,s){const a=ev.distanceSqToPoint(e);if(a<n){const l=new F;ev.closestPointToPoint(e,l),l.applyMatrix4(i);const u=r.ray.origin.distanceTo(l);if(u<r.near||u>r.far)return;o.push({distance:u,distanceToRay:Math.sqrt(a),point:l,index:t,face:null,object:s})}}function f_(e,t,n,i,r,o,s,a,l){ht.call(this,e,t,n,i,r,o,s,a,l),this.format=s!==void 0?s:Zo,this.minFilter=o!==void 0?o:un,this.magFilter=r!==void 0?r:un,this.generateMipmaps=!1;const u=this;function c(){u.needsUpdate=!0,e.requestVideoFrameCallback(c)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(c)}f_.prototype=Object.assign(Object.create(ht.prototype),{constructor:f_,clone:function(){return new this.constructor(this.image).copy(this)},isVideoTexture:!0,update:function(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}});function Eu(e,t,n,i,r,o,s,a,l,u,c,f){ht.call(this,null,o,s,a,l,u,i,r,c,f),this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}Eu.prototype=Object.create(ht.prototype);Eu.prototype.constructor=Eu;Eu.prototype.isCompressedTexture=!0;function xh(e,t,n,i,r,o,s,a,l){ht.call(this,e,t,n,i,r,o,s,a,l),this.needsUpdate=!0}xh.prototype=Object.create(ht.prototype);xh.prototype.constructor=xh;xh.prototype.isCanvasTexture=!0;function wh(e,t,n,i,r,o,s,a,l,u){if(u=u!==void 0?u:ma,u!==ma&&u!==xu)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");n===void 0&&u===ma&&(n=dh),n===void 0&&u===xu&&(n=Wl),ht.call(this,null,i,r,o,s,a,u,n,l),this.image={width:e,height:t},this.magFilter=s!==void 0?s:gn,this.minFilter=a!==void 0?a:gn,this.flipY=!1,this.generateMipmaps=!1}wh.prototype=Object.create(ht.prototype);wh.prototype.constructor=wh;wh.prototype.isDepthTexture=!0;new F;new F;new F;new vn;const mH={triangulate:function(e,t,n){n=n||2;const i=t&&t.length,r=i?t[0]*n:e.length;let o=hT(e,0,r,n,!0);const s=[];if(!o||o.next===o.prev)return s;let a,l,u,c,f,h,d;if(i&&(o=wH(e,t,o,n)),e.length>80*n){a=u=e[0],l=c=e[1];for(let g=n;g<r;g+=n)f=e[g],h=e[g+1],f<a&&(a=f),h<l&&(l=h),f>u&&(u=f),h>c&&(c=h);d=Math.max(u-a,c-l),d=d!==0?1/d:0}return Tu(o,s,n,a,l,d),s}};function hT(e,t,n,i,r){let o,s;if(r===AH(e,t,n,i)>0)for(o=t;o<n;o+=i)s=h_(o,e[o],e[o+1],s);else for(o=n-i;o>=t;o-=i)s=h_(o,e[o],e[o+1],s);return s&&bd(s,s.next)&&(Cu(s),s=s.next),s}function So(e,t){if(!e)return e;t||(t=e);let n=e,i;do if(i=!1,!n.steiner&&(bd(n,n.next)||Tt(n.prev,n,n.next)===0)){if(Cu(n),n=t=n.prev,n===n.next)break;i=!0}else n=n.next;while(i||n!==t);return t}function Tu(e,t,n,i,r,o,s){if(!e)return;!s&&o&&EH(e,i,r,o);let a=e,l,u;for(;e.prev!==e.next;){if(l=e.prev,u=e.next,o?vH(e,i,r,o):gH(e)){t.push(l.i/n),t.push(e.i/n),t.push(u.i/n),Cu(e),e=u.next,a=u.next;continue}if(e=u,e===a){s?s===1?(e=yH(So(e),t,n),Tu(e,t,n,i,r,o,2)):s===2&&xH(e,t,n,i,r,o):Tu(So(e),t,n,i,r,o,1);break}}}function gH(e){const t=e.prev,n=e,i=e.next;if(Tt(t,n,i)>=0)return!1;let r=e.next.next;for(;r!==e.prev;){if(sa(t.x,t.y,n.x,n.y,i.x,i.y,r.x,r.y)&&Tt(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function vH(e,t,n,i){const r=e.prev,o=e,s=e.next;if(Tt(r,o,s)>=0)return!1;const a=r.x<o.x?r.x<s.x?r.x:s.x:o.x<s.x?o.x:s.x,l=r.y<o.y?r.y<s.y?r.y:s.y:o.y<s.y?o.y:s.y,u=r.x>o.x?r.x>s.x?r.x:s.x:o.x>s.x?o.x:s.x,c=r.y>o.y?r.y>s.y?r.y:s.y:o.y>s.y?o.y:s.y,f=tv(a,l,t,n,i),h=tv(u,c,t,n,i);let d=e.prevZ,g=e.nextZ;for(;d&&d.z>=f&&g&&g.z<=h;){if(d!==e.prev&&d!==e.next&&sa(r.x,r.y,o.x,o.y,s.x,s.y,d.x,d.y)&&Tt(d.prev,d,d.next)>=0||(d=d.prevZ,g!==e.prev&&g!==e.next&&sa(r.x,r.y,o.x,o.y,s.x,s.y,g.x,g.y)&&Tt(g.prev,g,g.next)>=0))return!1;g=g.nextZ}for(;d&&d.z>=f;){if(d!==e.prev&&d!==e.next&&sa(r.x,r.y,o.x,o.y,s.x,s.y,d.x,d.y)&&Tt(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;g&&g.z<=h;){if(g!==e.prev&&g!==e.next&&sa(r.x,r.y,o.x,o.y,s.x,s.y,g.x,g.y)&&Tt(g.prev,g,g.next)>=0)return!1;g=g.nextZ}return!0}function yH(e,t,n){let i=e;do{const r=i.prev,o=i.next.next;!bd(r,o)&&dT(r,i,i.next,o)&&Lu(r,o)&&Lu(o,r)&&(t.push(r.i/n),t.push(i.i/n),t.push(o.i/n),Cu(i),Cu(i.next),i=e=o),i=i.next}while(i!==e);return So(i)}function xH(e,t,n,i,r,o){let s=e;do{let a=s.next.next;for(;a!==s.prev;){if(s.i!==a.i&&CH(s,a)){let l=pT(s,a);s=So(s,s.next),l=So(l,l.next),Tu(s,t,n,i,r,o),Tu(l,t,n,i,r,o);return}a=a.next}s=s.next}while(s!==e)}function wH(e,t,n,i){const r=[];let o,s,a,l,u;for(o=0,s=t.length;o<s;o++)a=t[o]*i,l=o<s-1?t[o+1]*i:e.length,u=hT(e,a,l,i,!1),u===u.next&&(u.steiner=!0),r.push(LH(u));for(r.sort(_H),o=0;o<r.length;o++)bH(r[o],n),n=So(n,n.next);return n}function _H(e,t){return e.x-t.x}function bH(e,t){if(t=SH(e,t),t){const n=pT(t,e);So(t,t.next),So(n,n.next)}}function SH(e,t){let n=t;const i=e.x,r=e.y;let o=-1/0,s;do{if(r<=n.y&&r>=n.next.y&&n.next.y!==n.y){const h=n.x+(r-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(h<=i&&h>o){if(o=h,h===i){if(r===n.y)return n;if(r===n.next.y)return n.next}s=n.x<n.next.x?n:n.next}}n=n.next}while(n!==t);if(!s)return null;if(i===o)return s;const a=s,l=s.x,u=s.y;let c=1/0,f;n=s;do i>=n.x&&n.x>=l&&i!==n.x&&sa(r<u?i:o,r,l,u,r<u?o:i,r,n.x,n.y)&&(f=Math.abs(r-n.y)/(i-n.x),Lu(n,e)&&(f<c||f===c&&(n.x>s.x||n.x===s.x&&MH(s,n)))&&(s=n,c=f)),n=n.next;while(n!==a);return s}function MH(e,t){return Tt(e.prev,e,t.prev)<0&&Tt(t.next,e,e.next)<0}function EH(e,t,n,i){let r=e;do r.z===null&&(r.z=tv(r.x,r.y,t,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==e);r.prevZ.nextZ=null,r.prevZ=null,TH(r)}function TH(e){let t,n,i,r,o,s,a,l,u=1;do{for(n=e,e=null,o=null,s=0;n;){for(s++,i=n,a=0,t=0;t<u&&(a++,i=i.nextZ,!!i);t++);for(l=u;a>0||l>0&&i;)a!==0&&(l===0||!i||n.z<=i.z)?(r=n,n=n.nextZ,a--):(r=i,i=i.nextZ,l--),o?o.nextZ=r:e=r,r.prevZ=o,o=r;n=i}o.nextZ=null,u*=2}while(s>1);return e}function tv(e,t,n,i,r){return e=32767*(e-n)*r,t=32767*(t-i)*r,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e|t<<1}function LH(e){let t=e,n=e;do(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next;while(t!==e);return n}function sa(e,t,n,i,r,o,s,a){return(r-s)*(t-a)-(e-s)*(o-a)>=0&&(e-s)*(i-a)-(n-s)*(t-a)>=0&&(n-s)*(o-a)-(r-s)*(i-a)>=0}function CH(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!RH(e,t)&&(Lu(e,t)&&Lu(t,e)&&PH(e,t)&&(Tt(e.prev,e,t.prev)||Tt(e,t.prev,t))||bd(e,t)&&Tt(e.prev,e,e.next)>0&&Tt(t.prev,t,t.next)>0)}function Tt(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function bd(e,t){return e.x===t.x&&e.y===t.y}function dT(e,t,n,i){const r=ff(Tt(e,t,n)),o=ff(Tt(e,t,i)),s=ff(Tt(n,i,e)),a=ff(Tt(n,i,t));return!!(r!==o&&s!==a||r===0&&cf(e,n,t)||o===0&&cf(e,i,t)||s===0&&cf(n,e,i)||a===0&&cf(n,t,i))}function cf(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function ff(e){return e>0?1:e<0?-1:0}function RH(e,t){let n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&dT(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}function Lu(e,t){return Tt(e.prev,e,e.next)<0?Tt(e,t,e.next)>=0&&Tt(e,e.prev,t)>=0:Tt(e,t,e.prev)<0||Tt(e,e.next,t)<0}function PH(e,t){let n=e,i=!1;const r=(e.x+t.x)/2,o=(e.y+t.y)/2;do n.y>o!=n.next.y>o&&n.next.y!==n.y&&r<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next;while(n!==e);return i}function pT(e,t){const n=new nv(e.i,e.x,e.y),i=new nv(t.i,t.x,t.y),r=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=r,r.prev=n,i.next=n,n.prev=i,o.next=i,i.prev=o,i}function h_(e,t,n,i){const r=new nv(e,t,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function Cu(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function nv(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function AH(e,t,n,i){let r=0;for(let o=t,s=n-i;o<n;o+=i)r+=(e[s]-e[o])*(e[o+1]+e[s+1]),s=o;return r}const vo={area:function(e){const t=e.length;let n=0;for(let i=t-1,r=0;r<t;i=r++)n+=e[i].x*e[r].y-e[r].x*e[i].y;return n*.5},isClockWise:function(e){return vo.area(e)<0},triangulateShape:function(e,t){const n=[],i=[],r=[];d_(e),p_(n,e);let o=e.length;t.forEach(d_);for(let a=0;a<t.length;a++)i.push(o),o+=t[a].length,p_(n,t[a]);const s=mH.triangulate(n,i);for(let a=0;a<s.length;a+=3)r.push(s.slice(a,a+3));return r}};function d_(e){const t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function p_(e,t){for(let n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}class mT extends ft{constructor(t,n){super(),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:n},t=Array.isArray(t)?t:[t];const i=this,r=[],o=[];for(let a=0,l=t.length;a<l;a++){const u=t[a];s(u)}this.setAttribute("position",new bt(r,3)),this.setAttribute("uv",new bt(o,2)),this.computeVertexNormals();function s(a){const l=[],u=n.curveSegments!==void 0?n.curveSegments:12,c=n.steps!==void 0?n.steps:1;let f=n.depth!==void 0?n.depth:100,h=n.bevelEnabled!==void 0?n.bevelEnabled:!0,d=n.bevelThickness!==void 0?n.bevelThickness:6,g=n.bevelSize!==void 0?n.bevelSize:d-2,v=n.bevelOffset!==void 0?n.bevelOffset:0,y=n.bevelSegments!==void 0?n.bevelSegments:3;const m=n.extrudePath,p=n.UVGenerator!==void 0?n.UVGenerator:DH;n.amount!==void 0&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),f=n.amount);let x,w=!1,b,_,S,L;m&&(x=m.getSpacedPoints(c),w=!0,h=!1,b=m.computeFrenetFrames(c,!1),_=new F,S=new F,L=new F),h||(y=0,d=0,g=0,v=0);const E=a.extractPoints(u);let A=E.shape;const B=E.holes;if(!vo.isClockWise(A)){A=A.reverse();for(let ie=0,ce=B.length;ie<ce;ie++){const ue=B[ie];vo.isClockWise(ue)&&(B[ie]=ue.reverse())}}const z=vo.triangulateShape(A,B),k=A;for(let ie=0,ce=B.length;ie<ce;ie++){const ue=B[ie];A=A.concat(ue)}function U(ie,ce,ue){return ce||console.error("THREE.ExtrudeGeometry: vec does not exist"),ce.clone().multiplyScalar(ue).add(ie)}const D=A.length,G=z.length;function I(ie,ce,ue){let be,ae,R;const T=ie.x-ce.x,Q=ie.y-ce.y,K=ue.x-ie.x,N=ue.y-ie.y,re=T*T+Q*Q,se=T*N-Q*K;if(Math.abs(se)>Number.EPSILON){const we=Math.sqrt(re),le=Math.sqrt(K*K+N*N),O=ce.x-Q/we,oe=ce.y+T/we,ve=ue.x-N/le,fe=ue.y+K/le,Se=((ve-O)*N-(fe-oe)*K)/(T*N-Q*K);be=O+T*Se-ie.x,ae=oe+Q*Se-ie.y;const Je=be*be+ae*ae;if(Je<=2)return new ee(be,ae);R=Math.sqrt(Je/2)}else{let we=!1;T>Number.EPSILON?K>Number.EPSILON&&(we=!0):T<-Number.EPSILON?K<-Number.EPSILON&&(we=!0):Math.sign(Q)===Math.sign(N)&&(we=!0),we?(be=-Q,ae=T,R=Math.sqrt(re)):(be=T,ae=Q,R=Math.sqrt(re/2))}return new ee(be/R,ae/R)}const H=[];for(let ie=0,ce=k.length,ue=ce-1,be=ie+1;ie<ce;ie++,ue++,be++)ue===ce&&(ue=0),be===ce&&(be=0),H[ie]=I(k[ie],k[ue],k[be]);const V=[];let J,he=H.concat();for(let ie=0,ce=B.length;ie<ce;ie++){const ue=B[ie];J=[];for(let be=0,ae=ue.length,R=ae-1,T=be+1;be<ae;be++,R++,T++)R===ae&&(R=0),T===ae&&(T=0),J[be]=I(ue[be],ue[R],ue[T]);V.push(J),he=he.concat(J)}for(let ie=0;ie<y;ie++){const ce=ie/y,ue=d*Math.cos(ce*Math.PI/2),be=g*Math.sin(ce*Math.PI/2)+v;for(let ae=0,R=k.length;ae<R;ae++){const T=U(k[ae],H[ae],be);Ce(T.x,T.y,-ue)}for(let ae=0,R=B.length;ae<R;ae++){const T=B[ae];J=V[ae];for(let Q=0,K=T.length;Q<K;Q++){const N=U(T[Q],J[Q],be);Ce(N.x,N.y,-ue)}}}const ge=g+v;for(let ie=0;ie<D;ie++){const ce=h?U(A[ie],he[ie],ge):A[ie];w?(S.copy(b.normals[0]).multiplyScalar(ce.x),_.copy(b.binormals[0]).multiplyScalar(ce.y),L.copy(x[0]).add(S).add(_),Ce(L.x,L.y,L.z)):Ce(ce.x,ce.y,0)}for(let ie=1;ie<=c;ie++)for(let ce=0;ce<D;ce++){const ue=h?U(A[ce],he[ce],ge):A[ce];w?(S.copy(b.normals[ie]).multiplyScalar(ue.x),_.copy(b.binormals[ie]).multiplyScalar(ue.y),L.copy(x[ie]).add(S).add(_),Ce(L.x,L.y,L.z)):Ce(ue.x,ue.y,f/c*ie)}for(let ie=y-1;ie>=0;ie--){const ce=ie/y,ue=d*Math.cos(ce*Math.PI/2),be=g*Math.sin(ce*Math.PI/2)+v;for(let ae=0,R=k.length;ae<R;ae++){const T=U(k[ae],H[ae],be);Ce(T.x,T.y,f+ue)}for(let ae=0,R=B.length;ae<R;ae++){const T=B[ae];J=V[ae];for(let Q=0,K=T.length;Q<K;Q++){const N=U(T[Q],J[Q],be);w?Ce(N.x,N.y+x[c-1].y,x[c-1].x+ue):Ce(N.x,N.y,f+ue)}}}xe(),Y();function xe(){const ie=r.length/3;if(h){let ce=0,ue=D*ce;for(let be=0;be<G;be++){const ae=z[be];We(ae[2]+ue,ae[1]+ue,ae[0]+ue)}ce=c+y*2,ue=D*ce;for(let be=0;be<G;be++){const ae=z[be];We(ae[0]+ue,ae[1]+ue,ae[2]+ue)}}else{for(let ce=0;ce<G;ce++){const ue=z[ce];We(ue[2],ue[1],ue[0])}for(let ce=0;ce<G;ce++){const ue=z[ce];We(ue[0]+D*c,ue[1]+D*c,ue[2]+D*c)}}i.addGroup(ie,r.length/3-ie,0)}function Y(){const ie=r.length/3;let ce=0;Qe(k,ce),ce+=k.length;for(let ue=0,be=B.length;ue<be;ue++){const ae=B[ue];Qe(ae,ce),ce+=ae.length}i.addGroup(ie,r.length/3-ie,1)}function Qe(ie,ce){let ue=ie.length;for(;--ue>=0;){const be=ue;let ae=ue-1;ae<0&&(ae=ie.length-1);for(let R=0,T=c+y*2;R<T;R++){const Q=D*R,K=D*(R+1),N=ce+be+Q,re=ce+ae+Q,se=ce+ae+K,we=ce+be+K;Ae(N,re,se,we)}}}function Ce(ie,ce,ue){l.push(ie),l.push(ce),l.push(ue)}function We(ie,ce,ue){Ye(ie),Ye(ce),Ye(ue);const be=r.length/3,ae=p.generateTopUV(i,r,be-3,be-2,be-1);Fe(ae[0]),Fe(ae[1]),Fe(ae[2])}function Ae(ie,ce,ue,be){Ye(ie),Ye(ce),Ye(be),Ye(ce),Ye(ue),Ye(be);const ae=r.length/3,R=p.generateSideWallUV(i,r,ae-6,ae-3,ae-2,ae-1);Fe(R[0]),Fe(R[1]),Fe(R[3]),Fe(R[1]),Fe(R[2]),Fe(R[3])}function Ye(ie){r.push(l[ie*3+0]),r.push(l[ie*3+1]),r.push(l[ie*3+2])}function Fe(ie){o.push(ie.x),o.push(ie.y)}}}toJSON(){const t=ft.prototype.toJSON.call(this),n=this.parameters.shapes,i=this.parameters.options;return OH(n,i,t)}}const DH={generateTopUV:function(e,t,n,i,r){const o=t[n*3],s=t[n*3+1],a=t[i*3],l=t[i*3+1],u=t[r*3],c=t[r*3+1];return[new ee(o,s),new ee(a,l),new ee(u,c)]},generateSideWallUV:function(e,t,n,i,r,o){const s=t[n*3],a=t[n*3+1],l=t[n*3+2],u=t[i*3],c=t[i*3+1],f=t[i*3+2],h=t[r*3],d=t[r*3+1],g=t[r*3+2],v=t[o*3],y=t[o*3+1],m=t[o*3+2];return Math.abs(a-c)<.01?[new ee(s,1-l),new ee(u,1-f),new ee(h,1-g),new ee(v,1-m)]:[new ee(a,1-l),new ee(c,1-f),new ee(d,1-g),new ee(y,1-m)]}};function OH(e,t,n){if(n.shapes=[],Array.isArray(e))for(let i=0,r=e.length;i<r;i++){const o=e[i];n.shapes.push(o.uuid)}else n.shapes.push(e.uuid);return t.extrudePath!==void 0&&(n.options.extrudePath=t.extrudePath.toJSON()),n}function iv(e,t,n){ft.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:n};const i=[],r=[],o=[],s=[],a=1e-5,l=new F,u=new F,c=new F,f=new F,h=new F;e.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");const d=t+1;for(let g=0;g<=n;g++){const v=g/n;for(let y=0;y<=t;y++){const m=y/t;e(m,v,u),r.push(u.x,u.y,u.z),m-a>=0?(e(m-a,v,c),f.subVectors(u,c)):(e(m+a,v,c),f.subVectors(c,u)),v-a>=0?(e(m,v-a,c),h.subVectors(u,c)):(e(m,v+a,c),h.subVectors(c,u)),l.crossVectors(f,h).normalize(),o.push(l.x,l.y,l.z),s.push(m,v)}}for(let g=0;g<n;g++)for(let v=0;v<t;v++){const y=g*d+v,m=g*d+v+1,p=(g+1)*d+v+1,x=(g+1)*d+v;i.push(y,m,x),i.push(m,p,x)}this.setIndex(i),this.setAttribute("position",new bt(r,3)),this.setAttribute("normal",new bt(o,3)),this.setAttribute("uv",new bt(s,2))}iv.prototype=Object.create(ft.prototype);iv.prototype.constructor=iv;class FH extends ft{constructor(t,n=12){super(),this.type="ShapeGeometry",this.parameters={shapes:t,curveSegments:n};const i=[],r=[],o=[],s=[];let a=0,l=0;if(Array.isArray(t)===!1)u(t);else for(let c=0;c<t.length;c++)u(t[c]),this.addGroup(a,l,c),a+=l,l=0;this.setIndex(i),this.setAttribute("position",new bt(r,3)),this.setAttribute("normal",new bt(o,3)),this.setAttribute("uv",new bt(s,2));function u(c){const f=r.length/3,h=c.extractPoints(n);let d=h.shape;const g=h.holes;vo.isClockWise(d)===!1&&(d=d.reverse());for(let y=0,m=g.length;y<m;y++){const p=g[y];vo.isClockWise(p)===!0&&(g[y]=p.reverse())}const v=vo.triangulateShape(d,g);for(let y=0,m=g.length;y<m;y++){const p=g[y];d=d.concat(p)}for(let y=0,m=d.length;y<m;y++){const p=d[y];r.push(p.x,p.y,0),o.push(0,0,1),s.push(p.x,p.y)}for(let y=0,m=v.length;y<m;y++){const p=v[y],x=p[0]+f,w=p[1]+f,b=p[2]+f;i.push(x,w,b),l+=3}}}toJSON(){const t=ft.prototype.toJSON.call(this),n=this.parameters.shapes;return kH(n,t)}}function kH(e,t){if(t.shapes=[],Array.isArray(e))for(let n=0,i=e.length;n<i;n++){const r=e[n];t.shapes.push(r.uuid)}else t.shapes.push(e.uuid);return t}function Pa(e){Pe.call(this),this.type="ShadowMaterial",this.color=new _e(0),this.transparent=!0,this.setValues(e)}Pa.prototype=Object.create(Pe.prototype);Pa.prototype.constructor=Pa;Pa.prototype.isShadowMaterial=!0;Pa.prototype.copy=function(e){return Pe.prototype.copy.call(this,e),this.color.copy(e.color),this};function Ru(e){Fn.call(this,e),this.type="RawShaderMaterial"}Ru.prototype=Object.create(Fn.prototype);Ru.prototype.constructor=Ru;Ru.prototype.isRawShaderMaterial=!0;function mn(e){Pe.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new _e(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new _e(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Xa,this.normalScale=new ee(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.vertexTangents=!1,this.setValues(e)}mn.prototype=Object.create(Pe.prototype);mn.prototype.constructor=mn;mn.prototype.isMeshStandardMaterial=!0;mn.prototype.copy=function(e){return Pe.prototype.copy.call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.vertexTangents=e.vertexTangents,this};function ls(e){mn.call(this),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoat=0,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new ee(1,1),this.clearcoatNormalMap=null,this.reflectivity=.5,Object.defineProperty(this,"ior",{get:function(){return(1+.4*this.reflectivity)/(1-.4*this.reflectivity)},set:function(t){this.reflectivity=ke.clamp(2.5*(t-1)/(t+1),0,1)}}),this.sheen=null,this.transmission=0,this.transmissionMap=null,this.setValues(e)}ls.prototype=Object.create(mn.prototype);ls.prototype.constructor=ls;ls.prototype.isMeshPhysicalMaterial=!0;ls.prototype.copy=function(e){return mn.prototype.copy.call(this,e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.reflectivity=e.reflectivity,e.sheen?this.sheen=(this.sheen||new _e).copy(e.sheen):this.sheen=null,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this};function jn(e){Pe.call(this),this.type="MeshPhongMaterial",this.color=new _e(16777215),this.specular=new _e(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new _e(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Xa,this.normalScale=new ee(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=vd,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}jn.prototype=Object.create(Pe.prototype);jn.prototype.constructor=jn;jn.prototype.isMeshPhongMaterial=!0;jn.prototype.copy=function(e){return Pe.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this};function Aa(e){Pe.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new _e(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new _e(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Xa,this.normalScale=new ee(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}Aa.prototype=Object.create(Pe.prototype);Aa.prototype.constructor=Aa;Aa.prototype.isMeshToonMaterial=!0;Aa.prototype.copy=function(e){return Pe.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this};function Da(e){Pe.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Xa,this.normalScale=new ee(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}Da.prototype=Object.create(Pe.prototype);Da.prototype.constructor=Da;Da.prototype.isMeshNormalMaterial=!0;Da.prototype.copy=function(e){return Pe.prototype.copy.call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this};function Oa(e){Pe.call(this),this.type="MeshLambertMaterial",this.color=new _e(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new _e(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=vd,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}Oa.prototype=Object.create(Pe.prototype);Oa.prototype.constructor=Oa;Oa.prototype.isMeshLambertMaterial=!0;Oa.prototype.copy=function(e){return Pe.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this};function Fa(e){Pe.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new _e(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Xa,this.normalScale=new ee(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}Fa.prototype=Object.create(Pe.prototype);Fa.prototype.constructor=Fa;Fa.prototype.isMeshMatcapMaterial=!0;Fa.prototype.copy=function(e){return Pe.prototype.copy.call(this,e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this};function ka(e){mi.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}ka.prototype=Object.create(mi.prototype);ka.prototype.constructor=ka;ka.prototype.isLineDashedMaterial=!0;ka.prototype.copy=function(e){return mi.prototype.copy.call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this};var NH=Object.freeze({__proto__:null,ShadowMaterial:Pa,SpriteMaterial:ss,RawShaderMaterial:Ru,ShaderMaterial:Fn,PointsMaterial:as,MeshPhysicalMaterial:ls,MeshStandardMaterial:mn,MeshPhongMaterial:jn,MeshToonMaterial:Aa,MeshNormalMaterial:Da,MeshLambertMaterial:Oa,MeshDepthMaterial:is,MeshDistanceMaterial:rs,MeshBasicMaterial:Er,MeshMatcapMaterial:Fa,LineDashedMaterial:ka,LineBasicMaterial:mi,Material:Pe});const wt={arraySlice:function(e,t,n){return wt.isTypedArray(e)?new e.constructor(e.subarray(t,n!==void 0?n:e.length)):e.slice(t,n)},convertArray:function(e,t,n){return!e||!n&&e.constructor===t?e:typeof t.BYTES_PER_ELEMENT=="number"?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){function t(r,o){return e[r]-e[o]}const n=e.length,i=new Array(n);for(let r=0;r!==n;++r)i[r]=r;return i.sort(t),i},sortedArray:function(e,t,n){const i=e.length,r=new e.constructor(i);for(let o=0,s=0;s!==i;++o){const a=n[o]*t;for(let l=0;l!==t;++l)r[s++]=e[a+l]}return r},flattenJSON:function(e,t,n,i){let r=1,o=e[0];for(;o!==void 0&&o[i]===void 0;)o=e[r++];if(o===void 0)return;let s=o[i];if(s!==void 0)if(Array.isArray(s))do s=o[i],s!==void 0&&(t.push(o.time),n.push.apply(n,s)),o=e[r++];while(o!==void 0);else if(s.toArray!==void 0)do s=o[i],s!==void 0&&(t.push(o.time),s.toArray(n,n.length)),o=e[r++];while(o!==void 0);else do s=o[i],s!==void 0&&(t.push(o.time),n.push(s)),o=e[r++];while(o!==void 0)},subclip:function(e,t,n,i,r=30){const o=e.clone();o.name=t;const s=[];for(let l=0;l<o.tracks.length;++l){const u=o.tracks[l],c=u.getValueSize(),f=[],h=[];for(let d=0;d<u.times.length;++d){const g=u.times[d]*r;if(!(g<n||g>=i)){f.push(u.times[d]);for(let v=0;v<c;++v)h.push(u.values[d*c+v])}}f.length!==0&&(u.times=wt.convertArray(f,u.times.constructor),u.values=wt.convertArray(h,u.values.constructor),s.push(u))}o.tracks=s;let a=1/0;for(let l=0;l<o.tracks.length;++l)a>o.tracks[l].times[0]&&(a=o.tracks[l].times[0]);for(let l=0;l<o.tracks.length;++l)o.tracks[l].shift(-1*a);return o.resetDuration(),o},makeClipAdditive:function(e,t=0,n=e,i=30){i<=0&&(i=30);const r=n.tracks.length,o=t/i;for(let s=0;s<r;++s){const a=n.tracks[s],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const u=e.tracks.find(function(m){return m.name===a.name&&m.ValueTypeName===l});if(u===void 0)continue;let c=0;const f=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=f/3);let h=0;const d=u.getValueSize();u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=d/3);const g=a.times.length-1;let v;if(o<=a.times[0]){const m=c,p=f-c;v=wt.arraySlice(a.values,m,p)}else if(o>=a.times[g]){const m=g*f+c,p=m+f-c;v=wt.arraySlice(a.values,m,p)}else{const m=a.createInterpolant(),p=c,x=f-c;m.evaluate(o),v=wt.arraySlice(m.resultBuffer,p,x)}l==="quaternion"&&new xn().fromArray(v).normalize().conjugate().toArray(v);const y=u.times.length;for(let m=0;m<y;++m){const p=m*d+h;if(l==="quaternion")xn.multiplyQuaternionsFlat(u.values,p,v,0,u.values,p);else{const x=d-h*2;for(let w=0;w<x;++w)u.values[p+w]-=v[w]}}}return e.blendMode=YE,e}};function fi(e,t,n,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new t.constructor(n),this.sampleValues=t,this.valueSize=n}Object.assign(fi.prototype,{evaluate:function(e){const t=this.parameterPositions;let n=this._cachedIndex,i=t[n],r=t[n-1];e:{t:{let o;n:{i:if(!(e<i)){for(let s=n+2;;){if(i===void 0){if(e<r)break i;return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,e,r)}if(n===s)break;if(r=i,i=t[++n],e<i)break t}o=t.length;break n}if(!(e>=r)){const s=t[1];e<s&&(n=2,r=s);for(let a=n-2;;){if(r===void 0)return this._cachedIndex=0,this.beforeStart_(0,e,i);if(n===a)break;if(i=r,r=t[--n-1],e>=r)break t}o=n,n=0;break n}break e}for(;n<o;){const s=n+o>>>1;e<t[s]?o=s:n=s+1}if(i=t[n],r=t[n-1],r===void 0)return this._cachedIndex=0,this.beforeStart_(0,e,i);if(i===void 0)return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,r,e)}this._cachedIndex=n,this.intervalChanged_(n,r,i)}return this.interpolate_(n,r,e,i)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){const t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=e*i;for(let o=0;o!==i;++o)t[o]=n[r+o];return t},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}});Object.assign(fi.prototype,{beforeStart_:fi.prototype.copySampleValue_,afterEnd_:fi.prototype.copySampleValue_});function rv(e,t,n,i){fi.call(this,e,t,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}rv.prototype=Object.assign(Object.create(fi.prototype),{constructor:rv,DefaultSettings_:{endingStart:ra,endingEnd:ra},intervalChanged_:function(e,t,n){const i=this.parameterPositions;let r=e-2,o=e+1,s=i[r],a=i[o];if(s===void 0)switch(this.getSettings_().endingStart){case oa:r=e,s=2*t-n;break;case gh:r=i.length-2,s=t+i[r]-i[r+1];break;default:r=e,s=n}if(a===void 0)switch(this.getSettings_().endingEnd){case oa:o=e,a=2*n-t;break;case gh:o=1,a=n+i[1]-i[0];break;default:o=e-1,a=t}const l=(n-t)*.5,u=this.valueSize;this._weightPrev=l/(t-s),this._weightNext=l/(a-n),this._offsetPrev=r*u,this._offsetNext=o*u},interpolate_:function(e,t,n,i){const r=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=e*s,l=a-s,u=this._offsetPrev,c=this._offsetNext,f=this._weightPrev,h=this._weightNext,d=(n-t)/(i-t),g=d*d,v=g*d,y=-f*v+2*f*g-f*d,m=(1+f)*v+(-1.5-2*f)*g+(-.5+f)*d+1,p=(-1-h)*v+(1.5+h)*g+.5*d,x=h*v-h*g;for(let w=0;w!==s;++w)r[w]=y*o[u+w]+m*o[l+w]+p*o[a+w]+x*o[c+w];return r}});function _h(e,t,n,i){fi.call(this,e,t,n,i)}_h.prototype=Object.assign(Object.create(fi.prototype),{constructor:_h,interpolate_:function(e,t,n,i){const r=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=e*s,l=a-s,u=(n-t)/(i-t),c=1-u;for(let f=0;f!==s;++f)r[f]=o[l+f]*c+o[a+f]*u;return r}});function ov(e,t,n,i){fi.call(this,e,t,n,i)}ov.prototype=Object.assign(Object.create(fi.prototype),{constructor:ov,interpolate_:function(e){return this.copySampleValue_(e-1)}});function fn(e,t,n,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=wt.convertArray(t,this.TimeBufferType),this.values=wt.convertArray(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}Object.assign(fn,{toJSON:function(e){const t=e.constructor;let n;if(t.toJSON!==void 0)n=t.toJSON(e);else{n={name:e.name,times:wt.convertArray(e.times,Array),values:wt.convertArray(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(n.interpolation=i)}return n.type=e.ValueTypeName,n}});Object.assign(fn.prototype,{constructor:fn,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:Of,InterpolantFactoryMethodDiscrete:function(e){return new ov(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new _h(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new rv(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(e){let t;switch(e){case mh:t=this.InterpolantFactoryMethodDiscrete;break;case Of:t=this.InterpolantFactoryMethodLinear;break;case Wp:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return mh;case this.InterpolantFactoryMethodLinear:return Of;case this.InterpolantFactoryMethodSmooth:return Wp}},getValueSize:function(){return this.values.length/this.times.length},shift:function(e){if(e!==0){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]+=e}return this},scale:function(e){if(e!==1){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]*=e}return this},trim:function(e,t){const n=this.times,i=n.length;let r=0,o=i-1;for(;r!==i&&n[r]<e;)++r;for(;o!==-1&&n[o]>t;)--o;if(++o,r!==0||o!==i){r>=o&&(o=Math.max(o,1),r=o-1);const s=this.getValueSize();this.times=wt.arraySlice(n,r,o),this.values=wt.arraySlice(this.values,r*s,o*s)}return this},validate:function(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,i=this.values,r=n.length;r===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let s=0;s!==r;s++){const a=n[s];if(typeof a=="number"&&isNaN(a)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,s,a),e=!1;break}if(o!==null&&o>a){console.error("THREE.KeyframeTrack: Out of order keys.",this,s,a,o),e=!1;break}o=a}if(i!==void 0&&wt.isTypedArray(i))for(let s=0,a=i.length;s!==a;++s){const l=i[s];if(isNaN(l)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,s,l),e=!1;break}}return e},optimize:function(){const e=wt.arraySlice(this.times),t=wt.arraySlice(this.values),n=this.getValueSize(),i=this.getInterpolation()===Wp,r=e.length-1;let o=1;for(let s=1;s<r;++s){let a=!1;const l=e[s],u=e[s+1];if(l!==u&&(s!==1||l!==e[0]))if(i)a=!0;else{const c=s*n,f=c-n,h=c+n;for(let d=0;d!==n;++d){const g=t[c+d];if(g!==t[f+d]||g!==t[h+d]){a=!0;break}}}if(a){if(s!==o){e[o]=e[s];const c=s*n,f=o*n;for(let h=0;h!==n;++h)t[f+h]=t[c+h]}++o}}if(r>0){e[o]=e[r];for(let s=r*n,a=o*n,l=0;l!==n;++l)t[a+l]=t[s+l];++o}return o!==e.length?(this.times=wt.arraySlice(e,0,o),this.values=wt.arraySlice(t,0,o*n)):(this.times=e,this.values=t),this},clone:function(){const e=wt.arraySlice(this.times,0),t=wt.arraySlice(this.values,0),n=this.constructor,i=new n(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}});function sv(e,t,n){fn.call(this,e,t,n)}sv.prototype=Object.assign(Object.create(fn.prototype),{constructor:sv,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:mh,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});function av(e,t,n,i){fn.call(this,e,t,n,i)}av.prototype=Object.assign(Object.create(fn.prototype),{constructor:av,ValueTypeName:"color"});function Pu(e,t,n,i){fn.call(this,e,t,n,i)}Pu.prototype=Object.assign(Object.create(fn.prototype),{constructor:Pu,ValueTypeName:"number"});function lv(e,t,n,i){fi.call(this,e,t,n,i)}lv.prototype=Object.assign(Object.create(fi.prototype),{constructor:lv,interpolate_:function(e,t,n,i){const r=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=(n-t)/(i-t);let l=e*s;for(let u=l+s;l!==u;l+=4)xn.slerpFlat(r,0,o,l-s,o,l,a);return r}});function bh(e,t,n,i){fn.call(this,e,t,n,i)}bh.prototype=Object.assign(Object.create(fn.prototype),{constructor:bh,ValueTypeName:"quaternion",DefaultInterpolation:Of,InterpolantFactoryMethodLinear:function(e){return new lv(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:void 0});function uv(e,t,n,i){fn.call(this,e,t,n,i)}uv.prototype=Object.assign(Object.create(fn.prototype),{constructor:uv,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:mh,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});function Au(e,t,n,i){fn.call(this,e,t,n,i)}Au.prototype=Object.assign(Object.create(fn.prototype),{constructor:Au,ValueTypeName:"vector"});function Ci(e,t=-1,n,i=c0){this.name=e,this.tracks=n,this.duration=t,this.blendMode=i,this.uuid=ke.generateUUID(),this.duration<0&&this.resetDuration()}function IH(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Pu;case"vector":case"vector2":case"vector3":case"vector4":return Au;case"color":return av;case"quaternion":return bh;case"bool":case"boolean":return sv;case"string":return uv}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}function BH(e){if(e.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=IH(e.type);if(e.times===void 0){const n=[],i=[];wt.flattenJSON(e.keys,n,i,"value"),e.times=n,e.values=i}return t.parse!==void 0?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}Object.assign(Ci,{parse:function(e){const t=[],n=e.tracks,i=1/(e.fps||1);for(let o=0,s=n.length;o!==s;++o)t.push(BH(n[o]).scale(i));const r=new Ci(e.name,e.duration,t,e.blendMode);return r.uuid=e.uuid,r},toJSON:function(e){const t=[],n=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let r=0,o=n.length;r!==o;++r)t.push(fn.toJSON(n[r]));return i},CreateFromMorphTargetSequence:function(e,t,n,i){const r=t.length,o=[];for(let s=0;s<r;s++){let a=[],l=[];a.push((s+r-1)%r,s,(s+1)%r),l.push(0,1,0);const u=wt.getKeyframeOrder(a);a=wt.sortedArray(a,1,u),l=wt.sortedArray(l,1,u),!i&&a[0]===0&&(a.push(r),l.push(l[0])),o.push(new Pu(".morphTargetInfluences["+t[s].name+"]",a,l).scale(1/n))}return new Ci(e,-1,o)},findByName:function(e,t){let n=e;if(!Array.isArray(e)){const i=e;n=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<n.length;i++)if(n[i].name===t)return n[i];return null},CreateClipsFromMorphTargetSequences:function(e,t,n){const i={},r=/^([\w-]*?)([\d]+)$/;for(let s=0,a=e.length;s<a;s++){const l=e[s],u=l.name.match(r);if(u&&u.length>1){const c=u[1];let f=i[c];f||(i[c]=f=[]),f.push(l)}}const o=[];for(const s in i)o.push(Ci.CreateFromMorphTargetSequence(s,i[s],t,n));return o},parseAnimation:function(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(c,f,h,d,g){if(h.length!==0){const v=[],y=[];wt.flattenJSON(h,v,y,d),v.length!==0&&g.push(new c(f,v,y))}},i=[],r=e.name||"default",o=e.fps||30,s=e.blendMode;let a=e.length||-1;const l=e.hierarchy||[];for(let c=0;c<l.length;c++){const f=l[c].keys;if(!(!f||f.length===0))if(f[0].morphTargets){const h={};let d;for(d=0;d<f.length;d++)if(f[d].morphTargets)for(let g=0;g<f[d].morphTargets.length;g++)h[f[d].morphTargets[g]]=-1;for(const g in h){const v=[],y=[];for(let m=0;m!==f[d].morphTargets.length;++m){const p=f[d];v.push(p.time),y.push(p.morphTarget===g?1:0)}i.push(new Pu(".morphTargetInfluence["+g+"]",v,y))}a=h.length*o}else{const h=".bones["+t[c].name+"]";n(Au,h+".position",f,"pos",i),n(bh,h+".quaternion",f,"rot",i),n(Au,h+".scale",f,"scl",i)}}return i.length===0?null:new Ci(r,a,i,s)}});Object.assign(Ci.prototype,{resetDuration:function(){const e=this.tracks;let t=0;for(let n=0,i=e.length;n!==i;++n){const r=this.tracks[n];t=Math.max(t,r.times[r.times.length-1])}return this.duration=t,this},trim:function(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this},validate:function(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e},optimize:function(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this},clone:function(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new Ci(this.name,this.duration,e,this.blendMode)},toJSON:function(){return Ci.toJSON(this)}});const Na={enabled:!1,files:{},add:function(e,t){this.enabled!==!1&&(this.files[e]=t)},get:function(e){if(this.enabled!==!1)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};function UH(e,t,n){const i=this;let r=!1,o=0,s=0,a;const l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(u){s++,r===!1&&i.onStart!==void 0&&i.onStart(u,o,s),r=!0},this.itemEnd=function(u){o++,i.onProgress!==void 0&&i.onProgress(u,o,s),o===s&&(r=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(u){i.onError!==void 0&&i.onError(u)},this.resolveURL=function(u){return a?a(u):u},this.setURLModifier=function(u){return a=u,this},this.addHandler=function(u,c){return l.push(u,c),this},this.removeHandler=function(u){const c=l.indexOf(u);return c!==-1&&l.splice(c,2),this},this.getHandler=function(u){for(let c=0,f=l.length;c<f;c+=2){const h=l[c],d=l[c+1];if(h.global&&(h.lastIndex=0),h.test(u))return d}return null}}const zH=new UH;function st(e){this.manager=e!==void 0?e:zH,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}Object.assign(st.prototype,{load:function(){},loadAsync:function(e,t){const n=this;return new Promise(function(i,r){n.load(e,i,t,r)})},parse:function(){},setCrossOrigin:function(e){return this.crossOrigin=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setPath:function(e){return this.path=e,this},setResourcePath:function(e){return this.resourcePath=e,this},setRequestHeader:function(e){return this.requestHeader=e,this}});const _i={};function Tr(e){st.call(this,e)}Tr.prototype=Object.assign(Object.create(st.prototype),{constructor:Tr,load:function(e,t,n,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,o=Na.get(e);if(o!==void 0)return r.manager.itemStart(e),setTimeout(function(){t&&t(o),r.manager.itemEnd(e)},0),o;if(_i[e]!==void 0){_i[e].push({onLoad:t,onProgress:n,onError:i});return}const s=/^data:(.*?)(;base64)?,(.*)$/,a=e.match(s);let l;if(a){const u=a[1],c=!!a[2];let f=a[3];f=decodeURIComponent(f),c&&(f=atob(f));try{let h;const d=(this.responseType||"").toLowerCase();switch(d){case"arraybuffer":case"blob":const g=new Uint8Array(f.length);for(let y=0;y<f.length;y++)g[y]=f.charCodeAt(y);d==="blob"?h=new Blob([g.buffer],{type:u}):h=g.buffer;break;case"document":h=new DOMParser().parseFromString(f,u);break;case"json":h=JSON.parse(f);break;default:h=f;break}setTimeout(function(){t&&t(h),r.manager.itemEnd(e)},0)}catch(h){setTimeout(function(){i&&i(h),r.manager.itemError(e),r.manager.itemEnd(e)},0)}}else{_i[e]=[],_i[e].push({onLoad:t,onProgress:n,onError:i}),l=new XMLHttpRequest,l.open("GET",e,!0),l.addEventListener("load",function(u){const c=this.response,f=_i[e];if(delete _i[e],this.status===200||this.status===0){this.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),Na.add(e,c);for(let h=0,d=f.length;h<d;h++){const g=f[h];g.onLoad&&g.onLoad(c)}r.manager.itemEnd(e)}else{for(let h=0,d=f.length;h<d;h++){const g=f[h];g.onError&&g.onError(u)}r.manager.itemError(e),r.manager.itemEnd(e)}},!1),l.addEventListener("progress",function(u){const c=_i[e];for(let f=0,h=c.length;f<h;f++){const d=c[f];d.onProgress&&d.onProgress(u)}},!1),l.addEventListener("error",function(u){const c=_i[e];delete _i[e];for(let f=0,h=c.length;f<h;f++){const d=c[f];d.onError&&d.onError(u)}r.manager.itemError(e),r.manager.itemEnd(e)},!1),l.addEventListener("abort",function(u){const c=_i[e];delete _i[e];for(let f=0,h=c.length;f<h;f++){const d=c[f];d.onError&&d.onError(u)}r.manager.itemError(e),r.manager.itemEnd(e)},!1),this.responseType!==void 0&&(l.responseType=this.responseType),this.withCredentials!==void 0&&(l.withCredentials=this.withCredentials),l.overrideMimeType&&l.overrideMimeType(this.mimeType!==void 0?this.mimeType:"text/plain");for(const u in this.requestHeader)l.setRequestHeader(u,this.requestHeader[u]);l.send(null)}return r.manager.itemStart(e),l},setResponseType:function(e){return this.responseType=e,this},setMimeType:function(e){return this.mimeType=e,this}});function m_(e){st.call(this,e)}m_.prototype=Object.assign(Object.create(st.prototype),{constructor:m_,load:function(e,t,n,i){const r=this,o=new Tr(r.manager);o.setPath(r.path),o.setRequestHeader(r.requestHeader),o.setWithCredentials(r.withCredentials),o.load(e,function(s){try{t(r.parse(JSON.parse(s)))}catch(a){i?i(a):console.error(a),r.manager.itemError(e)}},n,i)},parse:function(e){const t=[];for(let n=0;n<e.length;n++){const i=Ci.parse(e[n]);t.push(i)}return t}});function g_(e){st.call(this,e)}g_.prototype=Object.assign(Object.create(st.prototype),{constructor:g_,load:function(e,t,n,i){const r=this,o=[],s=new Eu,a=new Tr(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(r.withCredentials);let l=0;function u(c){a.load(e[c],function(f){const h=r.parse(f,!0);o[c]={width:h.width,height:h.height,format:h.format,mipmaps:h.mipmaps},l+=1,l===6&&(h.mipmapCount===1&&(s.minFilter=un),s.image=o,s.format=h.format,s.needsUpdate=!0,t&&t(s))},n,i)}if(Array.isArray(e))for(let c=0,f=e.length;c<f;++c)u(c);else a.load(e,function(c){const f=r.parse(c,!0);if(f.isCubemap){const h=f.mipmaps.length/f.mipmapCount;for(let d=0;d<h;d++){o[d]={mipmaps:[]};for(let g=0;g<f.mipmapCount;g++)o[d].mipmaps.push(f.mipmaps[d*f.mipmapCount+g]),o[d].format=f.format,o[d].width=f.width,o[d].height=f.height}s.image=o}else s.image.width=f.width,s.image.height=f.height,s.mipmaps=f.mipmaps;f.mipmapCount===1&&(s.minFilter=un),s.format=f.format,s.needsUpdate=!0,t&&t(s)},n,i);return s}});function Sh(e){st.call(this,e)}Sh.prototype=Object.assign(Object.create(st.prototype),{constructor:Sh,load:function(e,t,n,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,o=Na.get(e);if(o!==void 0)return r.manager.itemStart(e),setTimeout(function(){t&&t(o),r.manager.itemEnd(e)},0),o;const s=document.createElementNS("http://www.w3.org/1999/xhtml","img");function a(){s.removeEventListener("load",a,!1),s.removeEventListener("error",l,!1),Na.add(e,this),t&&t(this),r.manager.itemEnd(e)}function l(u){s.removeEventListener("load",a,!1),s.removeEventListener("error",l,!1),i&&i(u),r.manager.itemError(e),r.manager.itemEnd(e)}return s.addEventListener("load",a,!1),s.addEventListener("error",l,!1),e.substr(0,5)!=="data:"&&this.crossOrigin!==void 0&&(s.crossOrigin=this.crossOrigin),r.manager.itemStart(e),s.src=e,s}});function cv(e){st.call(this,e)}cv.prototype=Object.assign(Object.create(st.prototype),{constructor:cv,load:function(e,t,n,i){const r=new bo,o=new Sh(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let s=0;function a(l){o.load(e[l],function(u){r.images[l]=u,s++,s===6&&(r.needsUpdate=!0,t&&t(r))},void 0,i)}for(let l=0;l<e.length;++l)a(l);return r}});function v_(e){st.call(this,e)}v_.prototype=Object.assign(Object.create(st.prototype),{constructor:v_,load:function(e,t,n,i){const r=this,o=new Ca,s=new Tr(this.manager);return s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setPath(this.path),s.setWithCredentials(r.withCredentials),s.load(e,function(a){const l=r.parse(a);l&&(l.image!==void 0?o.image=l.image:l.data!==void 0&&(o.image.width=l.width,o.image.height=l.height,o.image.data=l.data),o.wrapS=l.wrapS!==void 0?l.wrapS:Vn,o.wrapT=l.wrapT!==void 0?l.wrapT:Vn,o.magFilter=l.magFilter!==void 0?l.magFilter:un,o.minFilter=l.minFilter!==void 0?l.minFilter:un,o.anisotropy=l.anisotropy!==void 0?l.anisotropy:1,l.encoding!==void 0&&(o.encoding=l.encoding),l.flipY!==void 0&&(o.flipY=l.flipY),l.format!==void 0&&(o.format=l.format),l.type!==void 0&&(o.type=l.type),l.mipmaps!==void 0&&(o.mipmaps=l.mipmaps,o.minFilter=yd),l.mipmapCount===1&&(o.minFilter=un),o.needsUpdate=!0,t&&t(o,l))},n,i),o}});function Du(e){st.call(this,e)}Du.prototype=Object.assign(Object.create(st.prototype),{constructor:Du,load:function(e,t,n,i){const r=new ht,o=new Sh(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(s){r.image=s;const a=e.search(/\.jpe?g($|\?)/i)>0||e.search(/^data\:image\/jpeg/)===0;r.format=a?Zo:Di,r.needsUpdate=!0,t!==void 0&&t(r)},n,i),r}});function Le(){this.type="Curve",this.arcLengthDivisions=200}Object.assign(Le.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)},getPoints:function(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t},getSpacedPoints:function(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t},getLength:function(){const e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(e===void 0&&(e=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,i=this.getPoint(0),r=0;t.push(0);for(let o=1;o<=e;o++)n=this.getPoint(o/e),r+=n.distanceTo(i),t.push(r),i=n;return this.cacheArcLengths=t,t},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(e,t){const n=this.getLengths();let i=0;const r=n.length;let o;t?o=t:o=e*n[r-1];let s=0,a=r-1,l;for(;s<=a;)if(i=Math.floor(s+(a-s)/2),l=n[i]-o,l<0)s=i+1;else if(l>0)a=i-1;else{a=i;break}if(i=a,n[i]===o)return i/(r-1);const u=n[i],f=n[i+1]-u,h=(o-u)/f;return(i+h)/(r-1)},getTangent:function(e,t){let i=e-1e-4,r=e+1e-4;i<0&&(i=0),r>1&&(r=1);const o=this.getPoint(i),s=this.getPoint(r),a=t||(o.isVector2?new ee:new F);return a.copy(s).sub(o).normalize(),a},getTangentAt:function(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)},computeFrenetFrames:function(e,t){const n=new F,i=[],r=[],o=[],s=new F,a=new Ve;for(let h=0;h<=e;h++){const d=h/e;i[h]=this.getTangentAt(d,new F),i[h].normalize()}r[0]=new F,o[0]=new F;let l=Number.MAX_VALUE;const u=Math.abs(i[0].x),c=Math.abs(i[0].y),f=Math.abs(i[0].z);u<=l&&(l=u,n.set(1,0,0)),c<=l&&(l=c,n.set(0,1,0)),f<=l&&n.set(0,0,1),s.crossVectors(i[0],n).normalize(),r[0].crossVectors(i[0],s),o[0].crossVectors(i[0],r[0]);for(let h=1;h<=e;h++){if(r[h]=r[h-1].clone(),o[h]=o[h-1].clone(),s.crossVectors(i[h-1],i[h]),s.length()>Number.EPSILON){s.normalize();const d=Math.acos(ke.clamp(i[h-1].dot(i[h]),-1,1));r[h].applyMatrix4(a.makeRotationAxis(s,d))}o[h].crossVectors(i[h],r[h])}if(t===!0){let h=Math.acos(ke.clamp(r[0].dot(r[e]),-1,1));h/=e,i[0].dot(s.crossVectors(r[0],r[e]))>0&&(h=-h);for(let d=1;d<=e;d++)r[d].applyMatrix4(a.makeRotationAxis(i[d],h*d)),o[d].crossVectors(i[d],r[d])}return{tangents:i,normals:r,binormals:o}},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this},toJSON:function(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e},fromJSON:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}});function gi(e,t,n,i,r,o,s,a){Le.call(this),this.type="EllipseCurve",this.aX=e||0,this.aY=t||0,this.xRadius=n||1,this.yRadius=i||1,this.aStartAngle=r||0,this.aEndAngle=o||2*Math.PI,this.aClockwise=s||!1,this.aRotation=a||0}gi.prototype=Object.create(Le.prototype);gi.prototype.constructor=gi;gi.prototype.isEllipseCurve=!0;gi.prototype.getPoint=function(e,t){const n=t||new ee,i=Math.PI*2;let r=this.aEndAngle-this.aStartAngle;const o=Math.abs(r)<Number.EPSILON;for(;r<0;)r+=i;for(;r>i;)r-=i;r<Number.EPSILON&&(o?r=0:r=i),this.aClockwise===!0&&!o&&(r===i?r=-i:r=r-i);const s=this.aStartAngle+e*r;let a=this.aX+this.xRadius*Math.cos(s),l=this.aY+this.yRadius*Math.sin(s);if(this.aRotation!==0){const u=Math.cos(this.aRotation),c=Math.sin(this.aRotation),f=a-this.aX,h=l-this.aY;a=f*u-h*c+this.aX,l=f*c+h*u+this.aY}return n.set(a,l)};gi.prototype.copy=function(e){return Le.prototype.copy.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this};gi.prototype.toJSON=function(){const e=Le.prototype.toJSON.call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e};gi.prototype.fromJSON=function(e){return Le.prototype.fromJSON.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this};function Ou(e,t,n,i,r,o){gi.call(this,e,t,n,n,i,r,o),this.type="ArcCurve"}Ou.prototype=Object.create(gi.prototype);Ou.prototype.constructor=Ou;Ou.prototype.isArcCurve=!0;function f0(){let e=0,t=0,n=0,i=0;function r(o,s,a,l){e=o,t=a,n=-3*o+3*s-2*a-l,i=2*o-2*s+a+l}return{initCatmullRom:function(o,s,a,l,u){r(s,a,u*(a-o),u*(l-s))},initNonuniformCatmullRom:function(o,s,a,l,u,c,f){let h=(s-o)/u-(a-o)/(u+c)+(a-s)/c,d=(a-s)/c-(l-s)/(c+f)+(l-a)/f;h*=c,d*=c,r(s,a,h,d)},calc:function(o){const s=o*o,a=s*o;return e+t*o+n*s+i*a}}}const hf=new F,gm=new f0,vm=new f0,ym=new f0;function Zn(e=[],t=!1,n="centripetal",i=.5){Le.call(this),this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=i}Zn.prototype=Object.create(Le.prototype);Zn.prototype.constructor=Zn;Zn.prototype.isCatmullRomCurve3=!0;Zn.prototype.getPoint=function(e,t=new F){const n=t,i=this.points,r=i.length,o=(r-(this.closed?0:1))*e;let s=Math.floor(o),a=o-s;this.closed?s+=s>0?0:(Math.floor(Math.abs(s)/r)+1)*r:a===0&&s===r-1&&(s=r-2,a=1);let l,u;this.closed||s>0?l=i[(s-1)%r]:(hf.subVectors(i[0],i[1]).add(i[0]),l=hf);const c=i[s%r],f=i[(s+1)%r];if(this.closed||s+2<r?u=i[(s+2)%r]:(hf.subVectors(i[r-1],i[r-2]).add(i[r-1]),u=hf),this.curveType==="centripetal"||this.curveType==="chordal"){const h=this.curveType==="chordal"?.5:.25;let d=Math.pow(l.distanceToSquared(c),h),g=Math.pow(c.distanceToSquared(f),h),v=Math.pow(f.distanceToSquared(u),h);g<1e-4&&(g=1),d<1e-4&&(d=g),v<1e-4&&(v=g),gm.initNonuniformCatmullRom(l.x,c.x,f.x,u.x,d,g,v),vm.initNonuniformCatmullRom(l.y,c.y,f.y,u.y,d,g,v),ym.initNonuniformCatmullRom(l.z,c.z,f.z,u.z,d,g,v)}else this.curveType==="catmullrom"&&(gm.initCatmullRom(l.x,c.x,f.x,u.x,this.tension),vm.initCatmullRom(l.y,c.y,f.y,u.y,this.tension),ym.initCatmullRom(l.z,c.z,f.z,u.z,this.tension));return n.set(gm.calc(a),vm.calc(a),ym.calc(a)),n};Zn.prototype.copy=function(e){Le.prototype.copy.call(this,e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this};Zn.prototype.toJSON=function(){const e=Le.prototype.toJSON.call(this);e.points=[];for(let t=0,n=this.points.length;t<n;t++){const i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e};Zn.prototype.fromJSON=function(e){Le.prototype.fromJSON.call(this,e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(new F().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this};function y_(e,t,n,i,r){const o=(i-t)*.5,s=(r-n)*.5,a=e*e,l=e*a;return(2*n-2*i+o+s)*l+(-3*n+3*i-2*o-s)*a+o*e+n}function HH(e,t){const n=1-e;return n*n*t}function jH(e,t){return 2*(1-e)*e*t}function VH(e,t){return e*e*t}function Xl(e,t,n,i){return HH(e,t)+jH(e,n)+VH(e,i)}function WH(e,t){const n=1-e;return n*n*n*t}function GH(e,t){const n=1-e;return 3*n*n*e*t}function $H(e,t){return 3*(1-e)*e*e*t}function XH(e,t){return e*e*e*t}function Yl(e,t,n,i,r){return WH(e,t)+GH(e,n)+$H(e,i)+XH(e,r)}function Zi(e=new ee,t=new ee,n=new ee,i=new ee){Le.call(this),this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=i}Zi.prototype=Object.create(Le.prototype);Zi.prototype.constructor=Zi;Zi.prototype.isCubicBezierCurve=!0;Zi.prototype.getPoint=function(e,t=new ee){const n=t,i=this.v0,r=this.v1,o=this.v2,s=this.v3;return n.set(Yl(e,i.x,r.x,o.x,s.x),Yl(e,i.y,r.y,o.y,s.y)),n};Zi.prototype.copy=function(e){return Le.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this};Zi.prototype.toJSON=function(){const e=Le.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e};Zi.prototype.fromJSON=function(e){return Le.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this};function Lr(e=new F,t=new F,n=new F,i=new F){Le.call(this),this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=i}Lr.prototype=Object.create(Le.prototype);Lr.prototype.constructor=Lr;Lr.prototype.isCubicBezierCurve3=!0;Lr.prototype.getPoint=function(e,t=new F){const n=t,i=this.v0,r=this.v1,o=this.v2,s=this.v3;return n.set(Yl(e,i.x,r.x,o.x,s.x),Yl(e,i.y,r.y,o.y,s.y),Yl(e,i.z,r.z,o.z,s.z)),n};Lr.prototype.copy=function(e){return Le.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this};Lr.prototype.toJSON=function(){const e=Le.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e};Lr.prototype.fromJSON=function(e){return Le.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this};function Jn(e=new ee,t=new ee){Le.call(this),this.type="LineCurve",this.v1=e,this.v2=t}Jn.prototype=Object.create(Le.prototype);Jn.prototype.constructor=Jn;Jn.prototype.isLineCurve=!0;Jn.prototype.getPoint=function(e,t=new ee){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n};Jn.prototype.getPointAt=function(e,t){return this.getPoint(e,t)};Jn.prototype.getTangent=function(e,t){const n=t||new ee;return n.copy(this.v2).sub(this.v1).normalize(),n};Jn.prototype.copy=function(e){return Le.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this};Jn.prototype.toJSON=function(){const e=Le.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e};Jn.prototype.fromJSON=function(e){return Le.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this};function Ji(e=new F,t=new F){Le.call(this),this.type="LineCurve3",this.v1=e,this.v2=t}Ji.prototype=Object.create(Le.prototype);Ji.prototype.constructor=Ji;Ji.prototype.isLineCurve3=!0;Ji.prototype.getPoint=function(e,t=new F){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n};Ji.prototype.getPointAt=function(e,t){return this.getPoint(e,t)};Ji.prototype.copy=function(e){return Le.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this};Ji.prototype.toJSON=function(){const e=Le.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e};Ji.prototype.fromJSON=function(e){return Le.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this};function Ki(e=new ee,t=new ee,n=new ee){Le.call(this),this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}Ki.prototype=Object.create(Le.prototype);Ki.prototype.constructor=Ki;Ki.prototype.isQuadraticBezierCurve=!0;Ki.prototype.getPoint=function(e,t=new ee){const n=t,i=this.v0,r=this.v1,o=this.v2;return n.set(Xl(e,i.x,r.x,o.x),Xl(e,i.y,r.y,o.y)),n};Ki.prototype.copy=function(e){return Le.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this};Ki.prototype.toJSON=function(){const e=Le.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e};Ki.prototype.fromJSON=function(e){return Le.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this};function Cr(e=new F,t=new F,n=new F){Le.call(this),this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}Cr.prototype=Object.create(Le.prototype);Cr.prototype.constructor=Cr;Cr.prototype.isQuadraticBezierCurve3=!0;Cr.prototype.getPoint=function(e,t=new F){const n=t,i=this.v0,r=this.v1,o=this.v2;return n.set(Xl(e,i.x,r.x,o.x),Xl(e,i.y,r.y,o.y),Xl(e,i.z,r.z,o.z)),n};Cr.prototype.copy=function(e){return Le.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this};Cr.prototype.toJSON=function(){const e=Le.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e};Cr.prototype.fromJSON=function(e){return Le.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this};function Qi(e=[]){Le.call(this),this.type="SplineCurve",this.points=e}Qi.prototype=Object.create(Le.prototype);Qi.prototype.constructor=Qi;Qi.prototype.isSplineCurve=!0;Qi.prototype.getPoint=function(e,t=new ee){const n=t,i=this.points,r=(i.length-1)*e,o=Math.floor(r),s=r-o,a=i[o===0?o:o-1],l=i[o],u=i[o>i.length-2?i.length-1:o+1],c=i[o>i.length-3?i.length-1:o+2];return n.set(y_(s,a.x,l.x,u.x,c.x),y_(s,a.y,l.y,u.y,c.y)),n};Qi.prototype.copy=function(e){Le.prototype.copy.call(this,e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(i.clone())}return this};Qi.prototype.toJSON=function(){const e=Le.prototype.toJSON.call(this);e.points=[];for(let t=0,n=this.points.length;t<n;t++){const i=this.points[t];e.points.push(i.toArray())}return e};Qi.prototype.fromJSON=function(e){Le.prototype.fromJSON.call(this,e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(new ee().fromArray(i))}return this};var YH=Object.freeze({__proto__:null,ArcCurve:Ou,CatmullRomCurve3:Zn,CubicBezierCurve:Zi,CubicBezierCurve3:Lr,EllipseCurve:gi,LineCurve:Jn,LineCurve3:Ji,QuadraticBezierCurve:Ki,QuadraticBezierCurve3:Cr,SplineCurve:Qi});function Xo(){Le.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}Xo.prototype=Object.assign(Object.create(Le.prototype),{constructor:Xo,add:function(e){this.curves.push(e)},closePath:function(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new Jn(t,e))},getPoint:function(e){const t=e*this.getLength(),n=this.getCurveLengths();let i=0;for(;i<n.length;){if(n[i]>=t){const r=n[i]-t,o=this.curves[i],s=o.getLength(),a=s===0?0:1-r/s;return o.getPointAt(a)}i++}return null},getLength:function(){const e=this.getCurveLengths();return e[e.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,i=this.curves.length;n<i;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e},getSpacedPoints:function(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t},getPoints:function(e=12){const t=[];let n;for(let i=0,r=this.curves;i<r.length;i++){const o=r[i],s=o&&o.isEllipseCurve?e*2:o&&(o.isLineCurve||o.isLineCurve3)?1:o&&o.isSplineCurve?e*o.points.length:e,a=o.getPoints(s);for(let l=0;l<a.length;l++){const u=a[l];n&&n.equals(u)||(t.push(u),n=u)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t},copy:function(e){Le.prototype.copy.call(this,e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this},toJSON:function(){const e=Le.prototype.toJSON.call(this);e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const i=this.curves[t];e.curves.push(i.toJSON())}return e},fromJSON:function(e){Le.prototype.fromJSON.call(this,e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const i=e.curves[t];this.curves.push(new YH[i.type]().fromJSON(i))}return this}});function ji(e){Xo.call(this),this.type="Path",this.currentPoint=new ee,e&&this.setFromPoints(e)}ji.prototype=Object.assign(Object.create(Xo.prototype),{constructor:ji,setFromPoints:function(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this},moveTo:function(e,t){return this.currentPoint.set(e,t),this},lineTo:function(e,t){const n=new Jn(this.currentPoint.clone(),new ee(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this},quadraticCurveTo:function(e,t,n,i){const r=new Ki(this.currentPoint.clone(),new ee(e,t),new ee(n,i));return this.curves.push(r),this.currentPoint.set(n,i),this},bezierCurveTo:function(e,t,n,i,r,o){const s=new Zi(this.currentPoint.clone(),new ee(e,t),new ee(n,i),new ee(r,o));return this.curves.push(s),this.currentPoint.set(r,o),this},splineThru:function(e){const t=[this.currentPoint.clone()].concat(e),n=new Qi(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this},arc:function(e,t,n,i,r,o){const s=this.currentPoint.x,a=this.currentPoint.y;return this.absarc(e+s,t+a,n,i,r,o),this},absarc:function(e,t,n,i,r,o){return this.absellipse(e,t,n,n,i,r,o),this},ellipse:function(e,t,n,i,r,o,s,a){const l=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+l,t+u,n,i,r,o,s,a),this},absellipse:function(e,t,n,i,r,o,s,a){const l=new gi(e,t,n,i,r,o,s,a);if(this.curves.length>0){const c=l.getPoint(0);c.equals(this.currentPoint)||this.lineTo(c.x,c.y)}this.curves.push(l);const u=l.getPoint(1);return this.currentPoint.copy(u),this},copy:function(e){return Xo.prototype.copy.call(this,e),this.currentPoint.copy(e.currentPoint),this},toJSON:function(){const e=Xo.prototype.toJSON.call(this);return e.currentPoint=this.currentPoint.toArray(),e},fromJSON:function(e){return Xo.prototype.fromJSON.call(this,e),this.currentPoint.fromArray(e.currentPoint),this}});function ga(e){ji.call(this,e),this.uuid=ke.generateUUID(),this.type="Shape",this.holes=[]}ga.prototype=Object.assign(Object.create(ji.prototype),{constructor:ga,getPointsHoles:function(e){const t=[];for(let n=0,i=this.holes.length;n<i;n++)t[n]=this.holes[n].getPoints(e);return t},extractPoints:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},copy:function(e){ji.prototype.copy.call(this,e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const i=e.holes[t];this.holes.push(i.clone())}return this},toJSON:function(){const e=ji.prototype.toJSON.call(this);e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const i=this.holes[t];e.holes.push(i.toJSON())}return e},fromJSON:function(e){ji.prototype.fromJSON.call(this,e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const i=e.holes[t];this.holes.push(new ji().fromJSON(i))}return this}});function gt(e,t=1){Re.call(this),this.type="Light",this.color=new _e(e),this.intensity=t}gt.prototype=Object.assign(Object.create(Re.prototype),{constructor:gt,isLight:!0,copy:function(e){return Re.prototype.copy.call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this},toJSON:function(e){const t=Re.prototype.toJSON.call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}});function x_(e,t,n){gt.call(this,e,n),this.type="HemisphereLight",this.position.copy(Re.DefaultUp),this.updateMatrix(),this.groundColor=new _e(t)}x_.prototype=Object.assign(Object.create(gt.prototype),{constructor:x_,isHemisphereLight:!0,copy:function(e){return gt.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}});function Rr(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.mapSize=new ee(512,512),this.map=null,this.mapPass=null,this.matrix=new Ve,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new _d,this._frameExtents=new ee(1,1),this._viewportCount=1,this._viewports=[new ot(0,0,1,1)]}Object.assign(Rr.prototype,{_projScreenMatrix:new Ve,_lightPositionWorld:new F,_lookTarget:new F,getViewportCount:function(){return this._viewportCount},getFrustum:function(){return this._frustum},updateMatrices:function(e){const t=this.camera,n=this.matrix,i=this._projScreenMatrix,r=this._lookTarget,o=this._lightPositionWorld;o.setFromMatrixPosition(e.matrixWorld),t.position.copy(o),r.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(r),t.updateMatrixWorld(),i.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(i),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(t.projectionMatrix),n.multiply(t.matrixWorldInverse)},getViewport:function(e){return this._viewports[e]},getFrameExtents:function(){return this._frameExtents},copy:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this},clone:function(){return new this.constructor().copy(this)},toJSON:function(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}});function fv(){Rr.call(this,new Gt(50,1,.5,500)),this.focus=1}fv.prototype=Object.assign(Object.create(Rr.prototype),{constructor:fv,isSpotLightShadow:!0,updateMatrices:function(e){const t=this.camera,n=ke.RAD2DEG*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,r=e.distance||t.far;(n!==t.fov||i!==t.aspect||r!==t.far)&&(t.fov=n,t.aspect=i,t.far=r,t.updateProjectionMatrix()),Rr.prototype.updateMatrices.call(this,e)}});function w_(e,t,n,i,r,o){gt.call(this,e,t),this.type="SpotLight",this.position.copy(Re.DefaultUp),this.updateMatrix(),this.target=new Re,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(s){this.intensity=s/Math.PI}}),this.distance=n!==void 0?n:0,this.angle=i!==void 0?i:Math.PI/3,this.penumbra=r!==void 0?r:0,this.decay=o!==void 0?o:1,this.shadow=new fv}w_.prototype=Object.assign(Object.create(gt.prototype),{constructor:w_,isSpotLight:!0,copy:function(e){return gt.prototype.copy.call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}});function hv(){Rr.call(this,new Gt(90,1,.5,500)),this._frameExtents=new ee(4,2),this._viewportCount=6,this._viewports=[new ot(2,1,1,1),new ot(0,1,1,1),new ot(3,1,1,1),new ot(1,1,1,1),new ot(3,0,1,1),new ot(1,0,1,1)],this._cubeDirections=[new F(1,0,0),new F(-1,0,0),new F(0,0,1),new F(0,0,-1),new F(0,1,0),new F(0,-1,0)],this._cubeUps=[new F(0,1,0),new F(0,1,0),new F(0,1,0),new F(0,1,0),new F(0,0,1),new F(0,0,-1)]}hv.prototype=Object.assign(Object.create(Rr.prototype),{constructor:hv,isPointLightShadow:!0,updateMatrices:function(e,t=0){const n=this.camera,i=this.matrix,r=this._lightPositionWorld,o=this._lookTarget,s=this._projScreenMatrix;r.setFromMatrixPosition(e.matrixWorld),n.position.copy(r),o.copy(n.position),o.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(o),n.updateMatrixWorld(),i.makeTranslation(-r.x,-r.y,-r.z),s.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(s)}});function __(e,t,n,i){gt.call(this,e,t),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return this.intensity*4*Math.PI},set:function(r){this.intensity=r/(4*Math.PI)}}),this.distance=n!==void 0?n:0,this.decay=i!==void 0?i:1,this.shadow=new hv}__.prototype=Object.assign(Object.create(gt.prototype),{constructor:__,isPointLight:!0,copy:function(e){return gt.prototype.copy.call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}});function dv(e=-1,t=1,n=1,i=-1,r=.1,o=2e3){_o.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=i,this.near=r,this.far=o,this.updateProjectionMatrix()}dv.prototype=Object.assign(Object.create(_o.prototype),{constructor:dv,isOrthographicCamera:!0,copy:function(e,t){return _o.prototype.copy.call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this},setViewOffset:function(e,t,n,i,r,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let r=n-e,o=n+e,s=i+t,a=i-t;if(this.view!==null&&this.view.enabled){const l=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=l*this.view.offsetX,o=r+l*this.view.width,s-=u*this.view.offsetY,a=s-u*this.view.height}this.projectionMatrix.makeOrthographic(r,o,s,a,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()},toJSON:function(e){const t=Re.prototype.toJSON.call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}});function pv(){Rr.call(this,new dv(-5,5,5,-5,.5,500))}pv.prototype=Object.assign(Object.create(Rr.prototype),{constructor:pv,isDirectionalLightShadow:!0,updateMatrices:function(e){Rr.prototype.updateMatrices.call(this,e)}});function b_(e,t){gt.call(this,e,t),this.type="DirectionalLight",this.position.copy(Re.DefaultUp),this.updateMatrix(),this.target=new Re,this.shadow=new pv}b_.prototype=Object.assign(Object.create(gt.prototype),{constructor:b_,isDirectionalLight:!0,copy:function(e){return gt.prototype.copy.call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}});function mv(e,t){gt.call(this,e,t),this.type="AmbientLight"}mv.prototype=Object.assign(Object.create(gt.prototype),{constructor:mv,isAmbientLight:!0});function S_(e,t,n,i){gt.call(this,e,t),this.type="RectAreaLight",this.width=n!==void 0?n:10,this.height=i!==void 0?i:10}S_.prototype=Object.assign(Object.create(gt.prototype),{constructor:S_,isRectAreaLight:!0,copy:function(e){return gt.prototype.copy.call(this,e),this.width=e.width,this.height=e.height,this},toJSON:function(e){const t=gt.prototype.toJSON.call(this,e);return t.object.width=this.width,t.object.height=this.height,t}});class qH{constructor(){Object.defineProperty(this,"isSphericalHarmonics3",{value:!0}),this.coefficients=[];for(let t=0;t<9;t++)this.coefficients.push(new F)}set(t){for(let n=0;n<9;n++)this.coefficients[n].copy(t[n]);return this}zero(){for(let t=0;t<9;t++)this.coefficients[t].set(0,0,0);return this}getAt(t,n){const i=t.x,r=t.y,o=t.z,s=this.coefficients;return n.copy(s[0]).multiplyScalar(.282095),n.addScaledVector(s[1],.488603*r),n.addScaledVector(s[2],.488603*o),n.addScaledVector(s[3],.488603*i),n.addScaledVector(s[4],1.092548*(i*r)),n.addScaledVector(s[5],1.092548*(r*o)),n.addScaledVector(s[6],.315392*(3*o*o-1)),n.addScaledVector(s[7],1.092548*(i*o)),n.addScaledVector(s[8],.546274*(i*i-r*r)),n}getIrradianceAt(t,n){const i=t.x,r=t.y,o=t.z,s=this.coefficients;return n.copy(s[0]).multiplyScalar(.886227),n.addScaledVector(s[1],2*.511664*r),n.addScaledVector(s[2],2*.511664*o),n.addScaledVector(s[3],2*.511664*i),n.addScaledVector(s[4],2*.429043*i*r),n.addScaledVector(s[5],2*.429043*r*o),n.addScaledVector(s[6],.743125*o*o-.247708),n.addScaledVector(s[7],2*.429043*i*o),n.addScaledVector(s[8],.429043*(i*i-r*r)),n}add(t){for(let n=0;n<9;n++)this.coefficients[n].add(t.coefficients[n]);return this}addScaledSH(t,n){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(t.coefficients[i],n);return this}scale(t){for(let n=0;n<9;n++)this.coefficients[n].multiplyScalar(t);return this}lerp(t,n){for(let i=0;i<9;i++)this.coefficients[i].lerp(t.coefficients[i],n);return this}equals(t){for(let n=0;n<9;n++)if(!this.coefficients[n].equals(t.coefficients[n]))return!1;return!0}copy(t){return this.set(t.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(t,n=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(t,n+r*3);return this}toArray(t=[],n=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(t,n+r*3);return t}static getBasisAt(t,n){const i=t.x,r=t.y,o=t.z;n[0]=.282095,n[1]=.488603*r,n[2]=.488603*o,n[3]=.488603*i,n[4]=1.092548*i*r,n[5]=1.092548*r*o,n[6]=.315392*(3*o*o-1),n[7]=1.092548*i*o,n[8]=.546274*(i*i-r*r)}}function Xi(e,t){gt.call(this,void 0,t),this.type="LightProbe",this.sh=e!==void 0?e:new qH}Xi.prototype=Object.assign(Object.create(gt.prototype),{constructor:Xi,isLightProbe:!0,copy:function(e){return gt.prototype.copy.call(this,e),this.sh.copy(e.sh),this},fromJSON:function(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this},toJSON:function(e){const t=gt.prototype.toJSON.call(this,e);return t.object.sh=this.sh.toArray(),t}});function M_(e){st.call(this,e),this.textures={}}M_.prototype=Object.assign(Object.create(st.prototype),{constructor:M_,load:function(e,t,n,i){const r=this,o=new Tr(r.manager);o.setPath(r.path),o.setRequestHeader(r.requestHeader),o.setWithCredentials(r.withCredentials),o.load(e,function(s){try{t(r.parse(JSON.parse(s)))}catch(a){i?i(a):console.error(a),r.manager.itemError(e)}},n,i)},parse:function(e){const t=this.textures;function n(r){return t[r]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",r),t[r]}const i=new NH[e.type];if(e.uuid!==void 0&&(i.uuid=e.uuid),e.name!==void 0&&(i.name=e.name),e.color!==void 0&&i.color!==void 0&&i.color.setHex(e.color),e.roughness!==void 0&&(i.roughness=e.roughness),e.metalness!==void 0&&(i.metalness=e.metalness),e.sheen!==void 0&&(i.sheen=new _e().setHex(e.sheen)),e.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(e.emissive),e.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(e.specular),e.shininess!==void 0&&(i.shininess=e.shininess),e.clearcoat!==void 0&&(i.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=e.clearcoatRoughness),e.fog!==void 0&&(i.fog=e.fog),e.flatShading!==void 0&&(i.flatShading=e.flatShading),e.blending!==void 0&&(i.blending=e.blending),e.combine!==void 0&&(i.combine=e.combine),e.side!==void 0&&(i.side=e.side),e.opacity!==void 0&&(i.opacity=e.opacity),e.transparent!==void 0&&(i.transparent=e.transparent),e.alphaTest!==void 0&&(i.alphaTest=e.alphaTest),e.depthTest!==void 0&&(i.depthTest=e.depthTest),e.depthWrite!==void 0&&(i.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(i.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(i.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(i.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(i.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(i.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(i.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(i.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(i.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(i.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(i.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(i.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(i.rotation=e.rotation),e.linewidth!==1&&(i.linewidth=e.linewidth),e.dashSize!==void 0&&(i.dashSize=e.dashSize),e.gapSize!==void 0&&(i.gapSize=e.gapSize),e.scale!==void 0&&(i.scale=e.scale),e.polygonOffset!==void 0&&(i.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=e.polygonOffsetUnits),e.skinning!==void 0&&(i.skinning=e.skinning),e.morphTargets!==void 0&&(i.morphTargets=e.morphTargets),e.morphNormals!==void 0&&(i.morphNormals=e.morphNormals),e.dithering!==void 0&&(i.dithering=e.dithering),e.vertexTangents!==void 0&&(i.vertexTangents=e.vertexTangents),e.visible!==void 0&&(i.visible=e.visible),e.toneMapped!==void 0&&(i.toneMapped=e.toneMapped),e.userData!==void 0&&(i.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const r in e.uniforms){const o=e.uniforms[r];switch(i.uniforms[r]={},o.type){case"t":i.uniforms[r].value=n(o.value);break;case"c":i.uniforms[r].value=new _e().setHex(o.value);break;case"v2":i.uniforms[r].value=new ee().fromArray(o.value);break;case"v3":i.uniforms[r].value=new F().fromArray(o.value);break;case"v4":i.uniforms[r].value=new ot().fromArray(o.value);break;case"m3":i.uniforms[r].value=new li().fromArray(o.value);break;case"m4":i.uniforms[r].value=new Ve().fromArray(o.value);break;default:i.uniforms[r].value=o.value}}if(e.defines!==void 0&&(i.defines=e.defines),e.vertexShader!==void 0&&(i.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(i.fragmentShader=e.fragmentShader),e.extensions!==void 0)for(const r in e.extensions)i.extensions[r]=e.extensions[r];if(e.shading!==void 0&&(i.flatShading=e.shading===1),e.size!==void 0&&(i.size=e.size),e.sizeAttenuation!==void 0&&(i.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(i.map=n(e.map)),e.matcap!==void 0&&(i.matcap=n(e.matcap)),e.alphaMap!==void 0&&(i.alphaMap=n(e.alphaMap)),e.bumpMap!==void 0&&(i.bumpMap=n(e.bumpMap)),e.bumpScale!==void 0&&(i.bumpScale=e.bumpScale),e.normalMap!==void 0&&(i.normalMap=n(e.normalMap)),e.normalMapType!==void 0&&(i.normalMapType=e.normalMapType),e.normalScale!==void 0){let r=e.normalScale;Array.isArray(r)===!1&&(r=[r,r]),i.normalScale=new ee().fromArray(r)}return e.displacementMap!==void 0&&(i.displacementMap=n(e.displacementMap)),e.displacementScale!==void 0&&(i.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(i.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(i.roughnessMap=n(e.roughnessMap)),e.metalnessMap!==void 0&&(i.metalnessMap=n(e.metalnessMap)),e.emissiveMap!==void 0&&(i.emissiveMap=n(e.emissiveMap)),e.emissiveIntensity!==void 0&&(i.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(i.specularMap=n(e.specularMap)),e.envMap!==void 0&&(i.envMap=n(e.envMap)),e.envMapIntensity!==void 0&&(i.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(i.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(i.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(i.lightMap=n(e.lightMap)),e.lightMapIntensity!==void 0&&(i.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(i.aoMap=n(e.aoMap)),e.aoMapIntensity!==void 0&&(i.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(i.gradientMap=n(e.gradientMap)),e.clearcoatMap!==void 0&&(i.clearcoatMap=n(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=n(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new ee().fromArray(e.clearcoatNormalScale)),e.transmission!==void 0&&(i.transmission=e.transmission),e.transmissionMap!==void 0&&(i.transmissionMap=n(e.transmissionMap)),i},setTextures:function(e){return this.textures=e,this}});const ZH={decodeText:function(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let n=0,i=e.length;n<i;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch{return t}},extractUrlBase:function(e){const t=e.lastIndexOf("/");return t===-1?"./":e.substr(0,t+1)}};function Mh(){ft.call(this),this.type="InstancedBufferGeometry",this.instanceCount=1/0}Mh.prototype=Object.assign(Object.create(ft.prototype),{constructor:Mh,isInstancedBufferGeometry:!0,copy:function(e){return ft.prototype.copy.call(this,e),this.instanceCount=e.instanceCount,this},clone:function(){return new this.constructor().copy(this)},toJSON:function(){const e=ft.prototype.toJSON.call(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}});function gv(e,t,n,i){typeof n=="number"&&(i=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),je.call(this,e,t,n),this.meshPerAttribute=i||1}gv.prototype=Object.assign(Object.create(je.prototype),{constructor:gv,isInstancedBufferAttribute:!0,copy:function(e){return je.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this},toJSON:function(){const e=je.prototype.toJSON.call(this);return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}});function E_(e){st.call(this,e)}E_.prototype=Object.assign(Object.create(st.prototype),{constructor:E_,load:function(e,t,n,i){const r=this,o=new Tr(r.manager);o.setPath(r.path),o.setRequestHeader(r.requestHeader),o.setWithCredentials(r.withCredentials),o.load(e,function(s){try{t(r.parse(JSON.parse(s)))}catch(a){i?i(a):console.error(a),r.manager.itemError(e)}},n,i)},parse:function(e){const t={},n={};function i(h,d){if(t[d]!==void 0)return t[d];const v=h.interleavedBuffers[d],y=r(h,v.buffer),m=Gc(v.type,y),p=new ui(m,v.stride);return p.uuid=v.uuid,t[d]=p,p}function r(h,d){if(n[d]!==void 0)return n[d];const v=h.arrayBuffers[d],y=new Uint32Array(v).buffer;return n[d]=y,y}const o=e.isInstancedBufferGeometry?new Mh:new ft,s=e.data.index;if(s!==void 0){const h=Gc(s.type,s.array);o.setIndex(new je(h,1))}const a=e.data.attributes;for(const h in a){const d=a[h];let g;if(d.isInterleavedBufferAttribute){const v=i(e.data,d.data);g=new os(v,d.itemSize,d.offset,d.normalized)}else{const v=Gc(d.type,d.array),y=d.isInstancedBufferAttribute?gv:je;g=new y(v,d.itemSize,d.normalized)}d.name!==void 0&&(g.name=d.name),o.setAttribute(h,g)}const l=e.data.morphAttributes;if(l)for(const h in l){const d=l[h],g=[];for(let v=0,y=d.length;v<y;v++){const m=d[v];let p;if(m.isInterleavedBufferAttribute){const x=i(e.data,m.data);p=new os(x,m.itemSize,m.offset,m.normalized)}else{const x=Gc(m.type,m.array);p=new je(x,m.itemSize,m.normalized)}m.name!==void 0&&(p.name=m.name),g.push(p)}o.morphAttributes[h]=g}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const c=e.data.groups||e.data.drawcalls||e.data.offsets;if(c!==void 0)for(let h=0,d=c.length;h!==d;++h){const g=c[h];o.addGroup(g.start,g.count,g.materialIndex)}const f=e.data.boundingSphere;if(f!==void 0){const h=new F;f.center!==void 0&&h.fromArray(f.center),o.boundingSphere=new ys(h,f.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}});function T_(e){typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),st.call(this,e),this.options={premultiplyAlpha:"none"}}T_.prototype=Object.assign(Object.create(st.prototype),{constructor:T_,isImageBitmapLoader:!0,setOptions:function(t){return this.options=t,this},load:function(e,t,n,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,o=Na.get(e);if(o!==void 0)return r.manager.itemStart(e),setTimeout(function(){t&&t(o),r.manager.itemEnd(e)},0),o;const s={};s.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",fetch(e,s).then(function(a){return a.blob()}).then(function(a){return createImageBitmap(a,r.options)}).then(function(a){Na.add(e,a),t&&t(a),r.manager.itemEnd(e)}).catch(function(a){i&&i(a),r.manager.itemError(e),r.manager.itemEnd(e)}),r.manager.itemStart(e)}});function gT(){this.type="ShapePath",this.color=new _e,this.subPaths=[],this.currentPath=null}Object.assign(gT.prototype,{moveTo:function(e,t){return this.currentPath=new ji,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this},lineTo:function(e,t){return this.currentPath.lineTo(e,t),this},quadraticCurveTo:function(e,t,n,i){return this.currentPath.quadraticCurveTo(e,t,n,i),this},bezierCurveTo:function(e,t,n,i,r,o){return this.currentPath.bezierCurveTo(e,t,n,i,r,o),this},splineThru:function(e){return this.currentPath.splineThru(e),this},toShapes:function(e,t){function n(m){const p=[];for(let x=0,w=m.length;x<w;x++){const b=m[x],_=new ga;_.curves=b.curves,p.push(_)}return p}function i(m,p){const x=p.length;let w=!1;for(let b=x-1,_=0;_<x;b=_++){let S=p[b],L=p[_],E=L.x-S.x,A=L.y-S.y;if(Math.abs(A)>Number.EPSILON){if(A<0&&(S=p[_],E=-E,L=p[b],A=-A),m.y<S.y||m.y>L.y)continue;if(m.y===S.y){if(m.x===S.x)return!0}else{const B=A*(m.x-S.x)-E*(m.y-S.y);if(B===0)return!0;if(B<0)continue;w=!w}}else{if(m.y!==S.y)continue;if(L.x<=m.x&&m.x<=S.x||S.x<=m.x&&m.x<=L.x)return!0}}return w}const r=vo.isClockWise,o=this.subPaths;if(o.length===0)return[];if(t===!0)return n(o);let s,a,l;const u=[];if(o.length===1)return a=o[0],l=new ga,l.curves=a.curves,u.push(l),u;let c=!r(o[0].getPoints());c=e?!c:c;const f=[],h=[];let d=[],g=0,v;h[g]=void 0,d[g]=[];for(let m=0,p=o.length;m<p;m++)a=o[m],v=a.getPoints(),s=r(v),s=e?!s:s,s?(!c&&h[g]&&g++,h[g]={s:new ga,p:v},h[g].s.curves=a.curves,c&&g++,d[g]=[]):d[g].push({h:a,p:v[0]});if(!h[0])return n(o);if(h.length>1){let m=!1;const p=[];for(let x=0,w=h.length;x<w;x++)f[x]=[];for(let x=0,w=h.length;x<w;x++){const b=d[x];for(let _=0;_<b.length;_++){const S=b[_];let L=!0;for(let E=0;E<h.length;E++)i(S.p,h[E].p)&&(x!==E&&p.push({froms:x,tos:E,hole:_}),L?(L=!1,f[E].push(S)):m=!0);L&&f[x].push(S)}}p.length>0&&(m||(d=f))}let y;for(let m=0,p=h.length;m<p;m++){l=h[m].s,u.push(l),y=d[m];for(let x=0,w=y.length;x<w;x++)l.holes.push(y[x].h)}return u}});class JH{constructor(t){Object.defineProperty(this,"isFont",{value:!0}),this.type="Font",this.data=t}generateShapes(t,n=100){const i=[],r=KH(t,n,this.data);for(let o=0,s=r.length;o<s;o++)Array.prototype.push.apply(i,r[o].toShapes());return i}}function KH(e,t,n){const i=Array.from?Array.from(e):String(e).split(""),r=t/n.resolution,o=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*r,s=[];let a=0,l=0;for(let u=0;u<i.length;u++){const c=i[u];if(c===`
`)a=0,l-=o;else{const f=QH(c,r,a,l,n);a+=f.offsetX,s.push(f.path)}}return s}function QH(e,t,n,i,r){const o=r.glyphs[e]||r.glyphs["?"];if(!o){console.error('THREE.Font: character "'+e+'" does not exists in font family '+r.familyName+".");return}const s=new gT;let a,l,u,c,f,h,d,g;if(o.o){const v=o._cachedOutline||(o._cachedOutline=o.o.split(" "));for(let y=0,m=v.length;y<m;)switch(v[y++]){case"m":a=v[y++]*t+n,l=v[y++]*t+i,s.moveTo(a,l);break;case"l":a=v[y++]*t+n,l=v[y++]*t+i,s.lineTo(a,l);break;case"q":u=v[y++]*t+n,c=v[y++]*t+i,f=v[y++]*t+n,h=v[y++]*t+i,s.quadraticCurveTo(f,h,u,c);break;case"b":u=v[y++]*t+n,c=v[y++]*t+i,f=v[y++]*t+n,h=v[y++]*t+i,d=v[y++]*t+n,g=v[y++]*t+i,s.bezierCurveTo(f,h,d,g,u,c);break}}return{offsetX:o.ha*t,path:s}}function L_(e){st.call(this,e)}L_.prototype=Object.assign(Object.create(st.prototype),{constructor:L_,load:function(e,t,n,i){const r=this,o=new Tr(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(r.withCredentials),o.load(e,function(s){let a;try{a=JSON.parse(s)}catch{console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),a=JSON.parse(s.substring(65,s.length-2))}const l=r.parse(a);t&&t(l)},n,i)},parse:function(e){return new JH(e)}});let df;const ej={getContext:function(){return df===void 0&&(df=new(window.AudioContext||window.webkitAudioContext)),df},setContext:function(e){df=e}};function C_(e){st.call(this,e)}C_.prototype=Object.assign(Object.create(st.prototype),{constructor:C_,load:function(e,t,n,i){const r=this,o=new Tr(r.manager);o.setResponseType("arraybuffer"),o.setPath(r.path),o.setRequestHeader(r.requestHeader),o.setWithCredentials(r.withCredentials),o.load(e,function(s){try{const a=s.slice(0);ej.getContext().decodeAudioData(a,function(u){t(u)})}catch(a){i?i(a):console.error(a),r.manager.itemError(e)}},n,i)}});function R_(e,t,n){Xi.call(this,void 0,n);const i=new _e().set(e),r=new _e().set(t),o=new F(i.r,i.g,i.b),s=new F(r.r,r.g,r.b),a=Math.sqrt(Math.PI),l=a*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(s).multiplyScalar(a),this.sh.coefficients[1].copy(o).sub(s).multiplyScalar(l)}R_.prototype=Object.assign(Object.create(Xi.prototype),{constructor:R_,isHemisphereLightProbe:!0,copy:function(e){return Xi.prototype.copy.call(this,e),this},toJSON:function(e){return Xi.prototype.toJSON.call(this,e)}});function P_(e,t){Xi.call(this,void 0,t);const n=new _e().set(e);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}P_.prototype=Object.assign(Object.create(Xi.prototype),{constructor:P_,isAmbientLightProbe:!0,copy:function(e){return Xi.prototype.copy.call(this,e),this},toJSON:function(e){return Xi.prototype.toJSON.call(this,e)}});const A_=new Ve,D_=new Ve;function tj(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Gt,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Gt,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}Object.assign(tj.prototype,{update:function(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep;const i=e.projectionMatrix.clone(),r=t.eyeSep/2,o=r*t.near/t.focus,s=t.near*Math.tan(ke.DEG2RAD*t.fov*.5)/t.zoom;let a,l;D_.elements[12]=-r,A_.elements[12]=r,a=-s*t.aspect+o,l=s*t.aspect+o,i.elements[0]=2*t.near/(l-a),i.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(i),a=-s*t.aspect-o,l=s*t.aspect-o,i.elements[0]=2*t.near/(l-a),i.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(i)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(D_),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(A_)}});function vT(e,t,n){this.binding=e,this.valueSize=n;let i,r,o;switch(t){case"quaternion":i=this._slerp,r=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(n*6),this._workIndex=5;break;case"string":case"bool":i=this._select,r=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(n*5);break;default:i=this._lerp,r=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(n*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=r,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}Object.assign(vT.prototype,{accumulate:function(e,t){const n=this.buffer,i=this.valueSize,r=e*i+i;let o=this.cumulativeWeight;if(o===0){for(let s=0;s!==i;++s)n[r+s]=n[s];o=t}else{o+=t;const s=t/o;this._mixBufferRegion(n,r,0,s,i)}this.cumulativeWeight=o},accumulateAdditive:function(e){const t=this.buffer,n=this.valueSize,i=n*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,n),this.cumulativeWeightAdditive+=e},apply:function(e){const t=this.valueSize,n=this.buffer,i=e*t+t,r=this.cumulativeWeight,o=this.cumulativeWeightAdditive,s=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,r<1){const a=t*this._origIndex;this._mixBufferRegion(n,i,a,1-r,t)}o>0&&this._mixBufferRegionAdditive(n,i,this._addIndex*t,1,t);for(let a=t,l=t+t;a!==l;++a)if(n[a]!==n[a+t]){s.setValue(n,i);break}},saveOriginalState:function(){const e=this.binding,t=this.buffer,n=this.valueSize,i=n*this._origIndex;e.getValue(t,i);for(let r=n,o=i;r!==o;++r)t[r]=t[i+r%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0},restoreOriginalState:function(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)},_setAdditiveIdentityNumeric:function(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0},_setAdditiveIdentityQuaternion:function(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1},_setAdditiveIdentityOther:function(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]},_select:function(e,t,n,i,r){if(i>=.5)for(let o=0;o!==r;++o)e[t+o]=e[n+o]},_slerp:function(e,t,n,i){xn.slerpFlat(e,t,e,t,e,n,i)},_slerpAdditive:function(e,t,n,i,r){const o=this._workIndex*r;xn.multiplyQuaternionsFlat(e,o,e,t,e,n),xn.slerpFlat(e,t,e,t,e,o,i)},_lerp:function(e,t,n,i,r){const o=1-i;for(let s=0;s!==r;++s){const a=t+s;e[a]=e[a]*o+e[n+s]*i}},_lerpAdditive:function(e,t,n,i,r){for(let o=0;o!==r;++o){const s=t+o;e[s]=e[s]+e[n+o]*i}}});const h0="\\[\\]\\.:\\/",nj=new RegExp("["+h0+"]","g"),d0="[^"+h0+"]",ij="[^"+h0.replace("\\.","")+"]",rj=/((?:WC+[\/:])*)/.source.replace("WC",d0),oj=/(WCOD+)?/.source.replace("WCOD",ij),sj=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",d0),aj=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",d0),lj=new RegExp("^"+rj+oj+sj+aj+"$"),uj=["material","materials","bones"];function yT(e,t,n){const i=n||wn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}Object.assign(yT.prototype,{getValue:function(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,i=this._bindings[n];i!==void 0&&i.getValue(e,t)},setValue:function(e,t){const n=this._bindings;for(let i=this._targetGroup.nCachedObjects_,r=n.length;i!==r;++i)n[i].setValue(e,t)},bind:function(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()},unbind:function(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}});function wn(e,t,n){this.path=t,this.parsedPath=n||wn.parseTrackName(t),this.node=wn.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e}Object.assign(wn,{Composite:yT,create:function(e,t,n){return e&&e.isAnimationObjectGroup?new wn.Composite(e,t,n):new wn(e,t,n)},sanitizeNodeName:function(e){return e.replace(/\s/g,"_").replace(nj,"")},parseTrackName:function(e){const t=lj.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const r=n.nodeName.substring(i+1);uj.indexOf(r)!==-1&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=r)}if(n.propertyName===null||n.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n},findNode:function(e,t){if(!t||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(n!==void 0)return n}if(e.children){const n=function(r){for(let o=0;o<r.length;o++){const s=r[o];if(s.name===t||s.uuid===t)return s;const a=n(s.children);if(a)return a}return null},i=n(e.children);if(i)return i}return null}});Object.assign(wn.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(t,n){t[n]=this.node[this.propertyName]},function(t,n){const i=this.resolvedProperty;for(let r=0,o=i.length;r!==o;++r)t[n++]=i[r]},function(t,n){t[n]=this.resolvedProperty[this.propertyIndex]},function(t,n){this.resolvedProperty.toArray(t,n)}],SetterByBindingTypeAndVersioning:[[function(t,n){this.targetObject[this.propertyName]=t[n]},function(t,n){this.targetObject[this.propertyName]=t[n],this.targetObject.needsUpdate=!0},function(t,n){this.targetObject[this.propertyName]=t[n],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,n){const i=this.resolvedProperty;for(let r=0,o=i.length;r!==o;++r)i[r]=t[n++]},function(t,n){const i=this.resolvedProperty;for(let r=0,o=i.length;r!==o;++r)i[r]=t[n++];this.targetObject.needsUpdate=!0},function(t,n){const i=this.resolvedProperty;for(let r=0,o=i.length;r!==o;++r)i[r]=t[n++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,n){this.resolvedProperty[this.propertyIndex]=t[n]},function(t,n){this.resolvedProperty[this.propertyIndex]=t[n],this.targetObject.needsUpdate=!0},function(t,n){this.resolvedProperty[this.propertyIndex]=t[n],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,n){this.resolvedProperty.fromArray(t,n)},function(t,n){this.resolvedProperty.fromArray(t,n),this.targetObject.needsUpdate=!0},function(t,n){this.resolvedProperty.fromArray(t,n),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(t,n){this.bind(),this.getValue(t,n)},setValue:function(t,n){this.bind(),this.setValue(t,n)},bind:function(){let e=this.node;const t=this.parsedPath,n=t.objectName,i=t.propertyName;let r=t.propertyIndex;if(e||(e=wn.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(n){let l=t.objectIndex;switch(n){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let u=0;u<e.length;u++)if(e[u].name===l){l=u;break}break;default:if(e[n]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[n]}if(l!==void 0){if(e[l]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[l]}}const o=e[i];if(o===void 0){const l=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+l+"."+i+" but it wasn't found.",e);return}let s=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?s=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(s=this.Versioning.MatrixWorldNeedsUpdate);let a=this.BindingType.Direct;if(r!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(e.geometry.isBufferGeometry){if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[r]!==void 0&&(r=e.morphTargetDictionary[r])}else{console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);return}}a=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=r}else o.fromArray!==void 0&&o.toArray!==void 0?(a=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(a=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=i;this.getValue=this.GetterByBindingType[a],this.setValue=this.SetterByBindingTypeAndVersioning[a][s]},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}});Object.assign(wn.prototype,{_getValue_unbound:wn.prototype.getValue,_setValue_unbound:wn.prototype.setValue});function cj(){this.uuid=ke.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let n=0,i=arguments.length;n!==i;++n)e[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}Object.assign(cj.prototype,{isAnimationObjectGroup:!0,add:function(){const e=this._objects,t=this._indicesByUUID,n=this._paths,i=this._parsedPaths,r=this._bindings,o=r.length;let s,a=e.length,l=this.nCachedObjects_;for(let u=0,c=arguments.length;u!==c;++u){const f=arguments[u],h=f.uuid;let d=t[h];if(d===void 0){d=a++,t[h]=d,e.push(f);for(let g=0,v=o;g!==v;++g)r[g].push(new wn(f,n[g],i[g]))}else if(d<l){s=e[d];const g=--l,v=e[g];t[v.uuid]=d,e[d]=v,t[h]=g,e[g]=f;for(let y=0,m=o;y!==m;++y){const p=r[y],x=p[g];let w=p[d];p[d]=x,w===void 0&&(w=new wn(f,n[y],i[y])),p[g]=w}}else e[d]!==s&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=l},remove:function(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,i=n.length;let r=this.nCachedObjects_;for(let o=0,s=arguments.length;o!==s;++o){const a=arguments[o],l=a.uuid,u=t[l];if(u!==void 0&&u>=r){const c=r++,f=e[c];t[f.uuid]=u,e[u]=f,t[l]=c,e[c]=a;for(let h=0,d=i;h!==d;++h){const g=n[h],v=g[c],y=g[u];g[u]=v,g[c]=y}}}this.nCachedObjects_=r},uncache:function(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,i=n.length;let r=this.nCachedObjects_,o=e.length;for(let s=0,a=arguments.length;s!==a;++s){const l=arguments[s],u=l.uuid,c=t[u];if(c!==void 0)if(delete t[u],c<r){const f=--r,h=e[f],d=--o,g=e[d];t[h.uuid]=c,e[c]=h,t[g.uuid]=f,e[f]=g,e.pop();for(let v=0,y=i;v!==y;++v){const m=n[v],p=m[f],x=m[d];m[c]=p,m[f]=x,m.pop()}}else{const f=--o,h=e[f];f>0&&(t[h.uuid]=c),e[c]=h,e.pop();for(let d=0,g=i;d!==g;++d){const v=n[d];v[c]=v[f],v.pop()}}}this.nCachedObjects_=r},subscribe_:function(e,t){const n=this._bindingsIndicesByPath;let i=n[e];const r=this._bindings;if(i!==void 0)return r[i];const o=this._paths,s=this._parsedPaths,a=this._objects,l=a.length,u=this.nCachedObjects_,c=new Array(l);i=r.length,n[e]=i,o.push(e),s.push(t),r.push(c);for(let f=u,h=a.length;f!==h;++f){const d=a[f];c[f]=new wn(d,e,t)}return c},unsubscribe_:function(e){const t=this._bindingsIndicesByPath,n=t[e];if(n!==void 0){const i=this._paths,r=this._parsedPaths,o=this._bindings,s=o.length-1,a=o[s],l=e[s];t[l]=n,o[n]=a,o.pop(),r[n]=r[s],r.pop(),i[n]=i[s],i.pop()}}});class fj{constructor(t,n,i=null,r=n.blendMode){this._mixer=t,this._clip=n,this._localRoot=i,this.blendMode=r;const o=n.tracks,s=o.length,a=new Array(s),l={endingStart:ra,endingEnd:ra};for(let u=0;u!==s;++u){const c=o[u].createInterpolant(null);a[u]=c,c.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(s),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=II,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(t){return this._startTime=t,this}setLoop(t,n){return this.loop=t,this.repetitions=n,this}setEffectiveWeight(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(t){return this._scheduleFading(t,0,1)}fadeOut(t){return this._scheduleFading(t,1,0)}crossFadeFrom(t,n,i){if(t.fadeOut(n),this.fadeIn(n),i){const r=this._clip.duration,o=t._clip.duration,s=o/r,a=r/o;t.warp(1,s,n),this.warp(a,1,n)}return this}crossFadeTo(t,n,i){return t.crossFadeFrom(this,n,i)}stopFading(){const t=this._weightInterpolant;return t!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}setEffectiveTimeScale(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(t){return this.timeScale=this._clip.duration/t,this.stopWarping()}syncWith(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()}halt(t){return this.warp(this._effectiveTimeScale,0,t)}warp(t,n,i){const r=this._mixer,o=r.time,s=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,u=a.sampleValues;return l[0]=o,l[1]=o+i,u[0]=t/s,u[1]=n/s,this}stopWarping(){const t=this._timeScaleInterpolant;return t!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(t,n,i,r){if(!this.enabled){this._updateWeight(t);return}const o=this._startTime;if(o!==null){const l=(t-o)*i;if(l<0||i===0)return;this._startTime=null,n=i*l}n*=this._updateTimeScale(t);const s=this._updateTime(n),a=this._updateWeight(t);if(a>0){const l=this._interpolants,u=this._propertyBindings;switch(this.blendMode){case YE:for(let c=0,f=l.length;c!==f;++c)l[c].evaluate(s),u[c].accumulateAdditive(a);break;case c0:default:for(let c=0,f=l.length;c!==f;++c)l[c].evaluate(s),u[c].accumulate(r,a)}}}_updateWeight(t){let n=0;if(this.enabled){n=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(t)[0];n*=r,t>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=n,n}_updateTimeScale(t){let n=0;if(!this.paused){n=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const r=i.evaluate(t)[0];n*=r,t>i.parameterPositions[1]&&(this.stopWarping(),n===0?this.paused=!0:this.timeScale=n)}}return this._effectiveTimeScale=n,n}_updateTime(t){const n=this._clip.duration,i=this.loop;let r=this.time+t,o=this._loopCount;const s=i===BI;if(t===0)return o===-1?r:s&&(o&1)===1?n-r:r;if(i===NI){o===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=n)r=n;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(o===-1&&(t>=0?(o=0,this._setEndings(!0,this.repetitions===0,s)):this._setEndings(this.repetitions===0,!0,s)),r>=n||r<0){const a=Math.floor(r/n);r-=n*a,o+=Math.abs(a);const l=this.repetitions-o;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=t>0?n:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(l===1){const u=t<0;this._setEndings(u,!u,s)}else this._setEndings(!1,!1,s);this._loopCount=o,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(s&&(o&1)===1)return n-r}return r}_setEndings(t,n,i){const r=this._interpolantSettings;i?(r.endingStart=oa,r.endingEnd=oa):(t?r.endingStart=this.zeroSlopeAtStart?oa:ra:r.endingStart=gh,n?r.endingEnd=this.zeroSlopeAtEnd?oa:ra:r.endingEnd=gh)}_scheduleFading(t,n,i){const r=this._mixer,o=r.time;let s=this._weightInterpolant;s===null&&(s=r._lendControlInterpolant(),this._weightInterpolant=s);const a=s.parameterPositions,l=s.sampleValues;return a[0]=o,l[0]=n,a[1]=o+t,l[1]=i,this}}function O_(e){this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}O_.prototype=Object.assign(Object.create(ir.prototype),{constructor:O_,_bindAction:function(e,t){const n=e._localRoot||this._root,i=e._clip.tracks,r=i.length,o=e._propertyBindings,s=e._interpolants,a=n.uuid,l=this._bindingsByRootAndName;let u=l[a];u===void 0&&(u={},l[a]=u);for(let c=0;c!==r;++c){const f=i[c],h=f.name;let d=u[h];if(d!==void 0)o[c]=d;else{if(d=o[c],d!==void 0){d._cacheIndex===null&&(++d.referenceCount,this._addInactiveBinding(d,a,h));continue}const g=t&&t._propertyBindings[c].binding.parsedPath;d=new vT(wn.create(n,h,g),f.ValueTypeName,f.getValueSize()),++d.referenceCount,this._addInactiveBinding(d,a,h),o[c]=d}s[c].resultBuffer=d.buffer}},_activateAction:function(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const n=(e._localRoot||this._root).uuid,i=e._clip.uuid,r=this._actionsByClip[i];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,i,n)}const t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){const r=t[n];r.useCount++===0&&(this._lendBinding(r),r.saveOriginalState())}this._lendAction(e)}},_deactivateAction:function(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){const r=t[n];--r.useCount===0&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(e)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},_isActiveAction:function(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions},_addInactiveAction:function(e,t,n){const i=this._actions,r=this._actionsByClip;let o=r[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,r[t]=o;else{const s=o.knownActions;e._byClipCacheIndex=s.length,s.push(e)}e._cacheIndex=i.length,i.push(e),o.actionByRoot[n]=e},_removeInactiveAction:function(e){const t=this._actions,n=t[t.length-1],i=e._cacheIndex;n._cacheIndex=i,t[i]=n,t.pop(),e._cacheIndex=null;const r=e._clip.uuid,o=this._actionsByClip,s=o[r],a=s.knownActions,l=a[a.length-1],u=e._byClipCacheIndex;l._byClipCacheIndex=u,a[u]=l,a.pop(),e._byClipCacheIndex=null;const c=s.actionByRoot,f=(e._localRoot||this._root).uuid;delete c[f],a.length===0&&delete o[r],this._removeInactiveBindingsForAction(e)},_removeInactiveBindingsForAction:function(e){const t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){const r=t[n];--r.referenceCount===0&&this._removeInactiveBinding(r)}},_lendAction:function(e){const t=this._actions,n=e._cacheIndex,i=this._nActiveActions++,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r},_takeBackAction:function(e){const t=this._actions,n=e._cacheIndex,i=--this._nActiveActions,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r},_addInactiveBinding:function(e,t,n){const i=this._bindingsByRootAndName,r=this._bindings;let o=i[t];o===void 0&&(o={},i[t]=o),o[n]=e,e._cacheIndex=r.length,r.push(e)},_removeInactiveBinding:function(e){const t=this._bindings,n=e.binding,i=n.rootNode.uuid,r=n.path,o=this._bindingsByRootAndName,s=o[i],a=t[t.length-1],l=e._cacheIndex;a._cacheIndex=l,t[l]=a,t.pop(),delete s[r],Object.keys(s).length===0&&delete o[i]},_lendBinding:function(e){const t=this._bindings,n=e._cacheIndex,i=this._nActiveBindings++,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r},_takeBackBinding:function(e){const t=this._bindings,n=e._cacheIndex,i=--this._nActiveBindings,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r},_lendControlInterpolant:function(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return n===void 0&&(n=new _h(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),n.__cacheIndex=t,e[t]=n),n},_takeBackControlInterpolant:function(e){const t=this._controlInterpolants,n=e.__cacheIndex,i=--this._nActiveControlInterpolants,r=t[i];e.__cacheIndex=i,t[i]=e,r.__cacheIndex=n,t[n]=r},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(e,t,n){const i=t||this._root,r=i.uuid;let o=typeof e=="string"?Ci.findByName(i,e):e;const s=o!==null?o.uuid:e,a=this._actionsByClip[s];let l=null;if(n===void 0&&(o!==null?n=o.blendMode:n=c0),a!==void 0){const c=a.actionByRoot[r];if(c!==void 0&&c.blendMode===n)return c;l=a.knownActions[0],o===null&&(o=l._clip)}if(o===null)return null;const u=new fj(this,o,t,n);return this._bindAction(u,l),this._addInactiveAction(u,s,r),u},existingAction:function(e,t){const n=t||this._root,i=n.uuid,r=typeof e=="string"?Ci.findByName(n,e):e,o=r?r.uuid:e,s=this._actionsByClip[o];return s!==void 0&&s.actionByRoot[i]||null},stopAllAction:function(){const e=this._actions,t=this._nActiveActions;for(let n=t-1;n>=0;--n)e[n].stop();return this},update:function(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,i=this.time+=e,r=Math.sign(e),o=this._accuIndex^=1;for(let l=0;l!==n;++l)t[l]._update(i,e,r,o);const s=this._bindings,a=this._nActiveBindings;for(let l=0;l!==a;++l)s[l].apply(o);return this},setTime:function(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)},getRoot:function(){return this._root},uncacheClip:function(e){const t=this._actions,n=e.uuid,i=this._actionsByClip,r=i[n];if(r!==void 0){const o=r.knownActions;for(let s=0,a=o.length;s!==a;++s){const l=o[s];this._deactivateAction(l);const u=l._cacheIndex,c=t[t.length-1];l._cacheIndex=null,l._byClipCacheIndex=null,c._cacheIndex=u,t[u]=c,t.pop(),this._removeInactiveBindingsForAction(l)}delete i[n]}},uncacheRoot:function(e){const t=e.uuid,n=this._actionsByClip;for(const o in n){const s=n[o].actionByRoot,a=s[t];a!==void 0&&(this._deactivateAction(a),this._removeInactiveAction(a))}const i=this._bindingsByRootAndName,r=i[t];if(r!==void 0)for(const o in r){const s=r[o];s.restoreOriginalState(),this._removeInactiveBinding(s)}},uncacheAction:function(e,t){const n=this.existingAction(e,t);n!==null&&(this._deactivateAction(n),this._removeInactiveAction(n))}});function F_(e,t,n){ui.call(this,e,t),this.meshPerAttribute=n||1}F_.prototype=Object.assign(Object.create(ui.prototype),{constructor:F_,isInstancedInterleavedBuffer:!0,copy:function(e){return ui.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this},clone:function(e){const t=ui.prototype.clone.call(this,e);return t.meshPerAttribute=this.meshPerAttribute,t},toJSON:function(e){const t=ui.prototype.toJSON.call(this,e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}});function xT(e,t,n,i,r){this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=i,this.count=r,this.version=0}Object.defineProperty(xT.prototype,"needsUpdate",{set:function(e){e===!0&&this.version++}});Object.assign(xT.prototype,{isGLBufferAttribute:!0,setBuffer:function(e){return this.buffer=e,this},setType:function(e,t){return this.type=e,this.elementSize=t,this},setItemSize:function(e){return this.itemSize=e,this},setCount:function(e){return this.count=e,this}});function p0(e,t,n,i){this.ray=new Zu(e,t),this.near=n||0,this.far=i||1/0,this.camera=null,this.layers=new ZE,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function k_(e,t){return e.distance-t.distance}function vv(e,t,n,i){if(e.layers.test(t.layers)&&e.raycast(t,n),i===!0){const r=e.children;for(let o=0,s=r.length;o<s;o++)vv(r[o],t,n,!0)}}Object.assign(p0.prototype,{set:function(e,t){this.ray.set(e,t)},setFromCamera:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)},intersectObject:function(e,t,n){const i=n||[];return vv(e,this,i,t),i.sort(k_),i},intersectObjects:function(e,t,n){const i=n||[];if(Array.isArray(e)===!1)return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),i;for(let r=0,o=e.length;r<o;r++)vv(e[r],this,i,t);return i.sort(k_),i}});class N_{constructor(t=1,n=0,i=0){return this.radius=t,this.phi=n,this.theta=i,this}set(t,n,i){return this.radius=t,this.phi=n,this.theta=i,this}clone(){return new this.constructor().copy(this)}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,n,i){return this.radius=Math.sqrt(t*t+n*n+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,i),this.phi=Math.acos(ke.clamp(n/this.radius,-1,1))),this}}const I_=new ee;class hj{constructor(t,n){Object.defineProperty(this,"isBox2",{value:!0}),this.min=t!==void 0?t:new ee(1/0,1/0),this.max=n!==void 0?n:new ee(-1/0,-1/0)}set(t,n){return this.min.copy(t),this.max.copy(n),this}setFromPoints(t){this.makeEmpty();for(let n=0,i=t.length;n<i;n++)this.expandByPoint(t[n]);return this}setFromCenterAndSize(t,n){const i=I_.copy(n).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(t){return t===void 0&&(console.warn("THREE.Box2: .getCenter() target is now required"),t=new ee),this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return t===void 0&&(console.warn("THREE.Box2: .getSize() target is now required"),t=new ee),this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y}getParameter(t,n){return n===void 0&&(console.warn("THREE.Box2: .getParameter() target is now required"),n=new ee),n.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)}clampPoint(t,n){return n===void 0&&(console.warn("THREE.Box2: .clampPoint() target is now required"),n=new ee),n.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return I_.copy(t).clamp(this.min,this.max).sub(t).length()}intersect(t){return this.min.max(t.min),this.max.min(t.max),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}function Eh(e){Re.call(this),this.material=e,this.render=function(){},this.hasPositions=!1,this.hasNormals=!1,this.hasColors=!1,this.hasUvs=!1,this.positionArray=null,this.normalArray=null,this.colorArray=null,this.uvArray=null,this.count=0}Eh.prototype=Object.create(Re.prototype);Eh.prototype.constructor=Eh;Eh.prototype.isImmediateRenderObject=!0;const Gr=new F,pf=new Ve,xm=new Ve;class dj extends yh{constructor(t){const n=wT(t),i=new ft,r=[],o=[],s=new _e(0,0,1),a=new _e(0,1,0);for(let u=0;u<n.length;u++){const c=n[u];c.parent&&c.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),o.push(s.r,s.g,s.b),o.push(a.r,a.g,a.b))}i.setAttribute("position",new bt(r,3)),i.setAttribute("color",new bt(o,3));const l=new mi({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,l),this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=t,this.bones=n,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(t){const n=this.bones,i=this.geometry,r=i.getAttribute("position");xm.copy(this.root.matrixWorld).invert();for(let o=0,s=0;o<n.length;o++){const a=n[o];a.parent&&a.parent.isBone&&(pf.multiplyMatrices(xm,a.matrixWorld),Gr.setFromMatrixPosition(pf),r.setXYZ(s,Gr.x,Gr.y,Gr.z),pf.multiplyMatrices(xm,a.parent.matrixWorld),Gr.setFromMatrixPosition(pf),r.setXYZ(s+1,Gr.x,Gr.y,Gr.z),s+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(t)}}function wT(e){const t=[];e&&e.isBone&&t.push(e);for(let n=0;n<e.children.length;n++)t.push.apply(t,wT(e.children[n]));return t}class pj extends yh{constructor(t=10,n=10,i=4473924,r=8947848){i=new _e(i),r=new _e(r);const o=n/2,s=t/n,a=t/2,l=[],u=[];for(let h=0,d=0,g=-a;h<=n;h++,g+=s){l.push(-a,0,g,a,0,g),l.push(g,0,-a,g,0,a);const v=h===o?i:r;v.toArray(u,d),d+=3,v.toArray(u,d),d+=3,v.toArray(u,d),d+=3,v.toArray(u,d),d+=3}const c=new ft;c.setAttribute("position",new bt(l,3)),c.setAttribute("color",new bt(u,3));const f=new mi({vertexColors:!0,toneMapped:!1});super(c,f),this.type="GridHelper"}}const mj=new Float32Array(1);new Int32Array(mj.buffer);const gj=new Er({side:xt,depthWrite:!1,depthTest:!1});new pt(new wd,gj);Le.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(Le.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e};Object.assign(ji.prototype,{fromPoints:function(e){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e)}});Object.create(Zn.prototype);Object.create(Zn.prototype);function _T(e){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),Zn.call(this,e),this.type="catmullrom"}_T.prototype=Object.create(Zn.prototype);Object.assign(_T.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}});pj.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")};dj.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")};Object.assign(st.prototype,{extractUrlBase:function(e){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),ZH.extractUrlBase(e)}});st.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}};Object.assign(hj.prototype,{center:function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},size:function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)}});Object.assign(vs.prototype,{center:function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionSphere:function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},size:function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)}});Object.assign(ys.prototype,{empty:function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()}});_d.prototype.setFromMatrix=function(e){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(e)};Object.assign(ke,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(e){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),ke.floorPowerOfTwo(e)},nextPowerOfTwo:function(e){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),ke.ceilPowerOfTwo(e)}});Object.assign(li.prototype,{flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},multiplyVector3:function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBufferAttribute:function(e){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},getInverse:function(e){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(e).invert()}});Object.assign(Ve.prototype,{extractPosition:function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},getPosition:function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),new F().setFromMatrixColumn(this,3)},setRotationFromQuaternion:function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector4:function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBufferAttribute:function(e){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(e,t,n,i,r,o){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,i,n,r,o)},getInverse:function(e){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(e).invert()}});mr.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)};Object.assign(xn.prototype,{multiplyVector3:function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},inverse:function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()}});Object.assign(Zu.prototype,{isIntersectionBox:function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionPlane:function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},isIntersectionSphere:function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)}});Object.assign(vn.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(e,t){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(e,t)},midpoint:function(e){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(e)},normal:function(e){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(e)},plane:function(e){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(e)}});Object.assign(vn,{barycoordFromPoint:function(e,t,n,i,r){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),vn.getBarycoord(e,t,n,i,r)},normal:function(e,t,n,i){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),vn.getNormal(e,t,n,i)}});Object.assign(ga.prototype,{extractAllPoints:function(e){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e)},extrude:function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new mT(this,e)},makeGeometry:function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new FH(this,e)}});Object.assign(ee.prototype,{fromAttribute:function(e,t,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}});Object.assign(F.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},applyProjection:function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},fromAttribute:function(e,t,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}});Object.assign(ot.prototype,{fromAttribute:function(e,t,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}});Object.assign(Re.prototype,{getChildByName:function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},applyMatrix:function(e){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}});Object.defineProperties(Re.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}});Object.assign(pt.prototype,{setDrawMode:function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}});Object.defineProperties(pt.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),UI},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}});Object.defineProperties(Zg.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}});Object.defineProperty(Qg.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}});Jg.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")};Object.defineProperty(Le.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(e){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=e}});Gt.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),t!==void 0&&(this.filmGauge=t),this.setFocalLength(e)};Object.defineProperties(gt.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}});Object.defineProperties(je.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===wu},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(wu)}}});Object.assign(je.prototype,{setDynamic:function(e){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(e===!0?wu:xd),this},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},setArray:function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}});Object.assign(ft.prototype,{addIndex:function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},addAttribute:function(e,t){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),!(t&&t.isBufferAttribute)&&!(t&&t.isInterleavedBufferAttribute)?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(e,new je(arguments[1],arguments[2]))):e==="index"?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t),this):this.setAttribute(e,t)},addDrawCall:function(e,t,n){n!==void 0&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},removeAttribute:function(e){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(e)},applyMatrix:function(e){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}});Object.defineProperties(ft.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}});Object.defineProperties(Mh.prototype,{maxInstancedCount:{get:function(){return console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount},set:function(e){console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount=e}}});Object.defineProperties(p0.prototype,{linePrecision:{get:function(){return console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold},set:function(e){console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold=e}}});Object.defineProperties(ui.prototype,{dynamic:{get:function(){return console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.usage===wu},set:function(e){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.setUsage(e)}}});Object.assign(ui.prototype,{setDynamic:function(e){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(e===!0?wu:xd),this},setArray:function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}});Object.assign(mT.prototype,{getArrays:function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")}});Object.assign(cT.prototype,{dispose:function(){console.error("THREE.Scene: .dispose() has been removed.")}});Object.defineProperties(Pe.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new _e}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=e===WE}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(e){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=e}}});Object.defineProperties(jn.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}});Object.defineProperties(ls.prototype,{transparency:{get:function(){return console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission."),this.transmission},set:function(e){console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission."),this.transmission=e}}});Object.defineProperties(Fn.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}});Object.assign(Ku.prototype,{clearTarget:function(e,t,n,i){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(e),this.clear(t,n,i)},animate:function(e){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(e)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},allocTextureUnit:function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},setTexture:function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},setTexture2D:function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},setTextureCube:function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},getActiveMipMapLevel:function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()}});Object.defineProperties(Ku.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(e){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=e===!0?qE:qu}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}});Object.defineProperties(lT.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}});Object.defineProperties(Gl.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}});La.prototype.updateCubeMap=function(e,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,t)};La.prototype.clear=function(e,t,n,i){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(e,t,n,i)};Ya.crossOrigin=void 0;Ya.loadTexture=function(e,t,n,i){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const r=new Du;r.setCrossOrigin(this.crossOrigin);const o=r.load(e,n,void 0,i);return t&&(o.mapping=t),o};Ya.loadTextureCube=function(e,t,n,i){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const r=new cv;r.setCrossOrigin(this.crossOrigin);const o=r.load(e,n,void 0,i);return t&&(o.mapping=t),o};Ya.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")};Ya.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:jE}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=jE);const wm={red:["green","blue","orange","red","yellow","white"],blue:["red","orange","green","blue","yellow","white"],orange:["blue","green","red","orange","yellow","white"],green:["orange","red","blue","green","yellow","white"]},vj={yellow:["blue","green","white","yellow","red","orange"],green:["yellow","white","blue","green","red","orange"],white:["green","blue","yellow","white","red","orange"],blue:["white","yellow","green","blue","red","orange"]},yj={red:["yellow","white","orange","red","blue","green"],white:["red","orange","yellow","white","blue","green"],orange:["white","yellow","red","orange","blue","green"],yellow:["orange","red","white","yellow","blue","green"]},xj={yellow:["green","blue","white","yellow","orange","red"],blue:["yellow","white","green","blue","orange","red"],white:["blue","green","yellow","white","orange","red"],green:["white","yellow","blue","green","orange","red"]},wj={red:["white","yellow","orange","red","green","blue"],yellow:["red","orange","white","yellow","green","blue"],orange:["yellow","white","red","orange","green","blue"],white:["orange","red","yellow","white","green","blue"]},_j={red:["blue","green","orange","red","white","yellow"],green:["red","orange","blue","green","white","yellow"],orange:["green","blue","red","orange","white","yellow"],blue:["orange","red","green","blue","white","yellow"]},et={generateSolved:function(e,t,n,i=null,r=null){const o=n,s=Math.floor(o/2),a=[],l=[],u=[],c=[];let f=wm.red;if(typeof i=="string"&&typeof r=="string")switch(i){case"yellow":f=wm[r];break;case"red":f=vj[r];break;case"blue":f=yj[r];break;case"orange":f=xj[r];break;case"green":f=wj[r];break;case"white":f=_j[r];break;default:f=wm.red;break}const h=[[],[],[],[],[],[]],d=[[[],[],[],[]],[[],[],[],[]],[[],[],[],[]]];for(let g=0;g<t;g++)for(let v=n-1;v>=0;v--)for(let y=0;y<e;y++){let m="black",p="black",x="black",w="black",b="black",_="black",S=null,L=null;if(f){let B,j,z,k,U,D;[B,j,z,k,U,D]=f,typeof r=="string"&&(k=r),typeof i=="string"&&(U=i),y===e-1?x=B:y===0&&(b=j),g===t-1?w=z:g===0&&(m=k),v===n-1?p=U:v===0&&(_=D)}let E=0;(g===0||g===t-1)&&E++,(v===0||v===n-1)&&E++,(y===0||y===e-1)&&E++;let A="none";E===1?(A="middle",o%2&&(g===s&&v===s||g===s&&y===s||y===s&&v===s)&&(L="center"),g===0&&(h[0].push(a.length),L=h[0].length+1),g===t-1&&(h[1].push(a.length),L=h[1].length+1),v===n-1&&(h[2].push(a.length),L=h[2].length+1),y===0&&(h[3].push(a.length),L=h[3].length+1),v===0&&(h[4].push(a.length),L=h[4].length+1),y===e-1&&(h[5].push(a.length),L=h[5].length+1)):E===2?(A="edge",g===0?v===n-1?(e%2&&d[0][0].length+1===Math.floor(e/2)&&(S="center"),d[0][0].push(a.length)):y===e-1?(e%2&&d[0][1].length+1===Math.floor(e/2)&&(S="center"),d[0][1].push(a.length)):v===0?(e%2&&d[0][2].length+1===Math.floor(e/2)&&(S="center"),d[0][2].push(a.length)):y===0&&(e%2&&d[0][3].length+1===Math.floor(e/2)&&(S="center"),d[0][3].push(a.length)):g===t-1?v===n-1?(e%2&&d[1][0].length+1===Math.floor(e/2)&&(S="center"),d[1][0].push(a.length)):y===e-1?(e%2&&d[1][1].length+1===Math.floor(e/2)&&(S="center"),d[1][1].push(a.length)):v===0?(e%2&&d[1][2].length+1===Math.floor(e/2)&&(S="center"),d[1][2].push(a.length)):y===0&&(e%2&&d[1][3].length+1===Math.floor(e/2)&&(S="center"),d[1][3].push(a.length)):v===n-1&&y===0?(e%2&&d[2][0].length+1===Math.floor(e/2)&&(S="center"),d[2][0].push(a.length)):v===n-1&&y===e-1?(e%2&&d[2][1].length+1===Math.floor(e/2)&&(S="center"),d[2][1].push(a.length)):v===0&&y===e-1?(e%2&&d[2][2].length+1===Math.floor(e/2)&&(S="center"),d[2][2].push(a.length)):v===0&&y===0&&(e%2&&d[2][3].length+1===Math.floor(e/2)&&(S="center"),d[2][3].push(a.length))):E===3&&(A="corner",c.push(a.length)),a.push([m,p,x,w,b,_,y,g,v,y,g,v,A,S,L])}if(o>=6){let g=o-2-1;for(let v=3;v<6;v++){let y=[],m=[],p=0;for(let w=0;w<s-1;w++)m.push([]);m.forEach((w,b)=>{for(let _=0;_<=g;_++)for(let S=0;S<=g;S++)(_===b||g-_===b)&&S>=b&&S<=g-b?(S===0+b||S===g-b)&&(S<Math.ceil(g/2)-1||S>Math.ceil(g/2)+(o%2?1:0))?y.push(h[v][p]):w.push(h[v][p]):(_>b&&g-_>b&&(S===b||S===g-b)||b===s-2&&_===S&&_===g/2)&&w.push(h[v][p]),p+=1;p=0});let x=m[m.length-1];m[m.length-1]=y,m.push(x),m.reverse(),h[v]=m.flat(2)}}for(let g=0;g<6;g++)for(let v=0;v<(e-2)*(e-2);v++)l.push(h[g][v]);for(let g=0;g<3;g++)for(let v=0;v<4;v++)u.push(...d[g][v]);return{tempArr:a,middles:l,edges:u,corners:c}},generateBlank:function(e,t,n){const i=e,r=Math.floor(i/2),o=[],s=[[],[],[],[],[],[]],a=[[[],[],[],[]],[[],[],[],[]],[[],[],[],[]]];for(let l=0;l<t;l++)for(let u=n-1;u>=0;u--)for(let c=0;c<e;c++){let f="black",h="black",d="black",g="black",v="black",y="black",m=null,p=null;c===e-1?d="red":c===0&&(v="orange"),l===t-1?g="yellow":l===0&&(f="white"),u===n-1?h="blue":u===0&&(y="green");let x=0;(l===0||l===t-1)&&x++,(u===0||u===n-1)&&x++,(c===0||c===e-1)&&x++;let w="none";x===1?(w="middle",i%2&&(l===r&&u===r||l===r&&c===r||c===r&&u===r)&&(p="center"),l===0&&(s[0].push(o.length),p=s[0].length+1),l===t-1&&(s[1].push(o.length),p=s[1].length+1),u===n-1&&(s[2].push(o.length),p=s[2].length+1),c===0&&(s[3].push(o.length),p=s[3].length+1),u===0&&(s[4].push(o.length),p=s[4].length+1),c===e-1&&(s[5].push(o.length),p=s[5].length+1)):x===2?(w="edge",l===0?u===n-1?(e%2&&a[0][0].length+1===Math.floor(e/2)&&(m="center"),a[0][0].push(o.length)):c===e-1?(e%2&&a[0][1].length+1===Math.floor(e/2)&&(m="center"),a[0][1].push(o.length)):u===0?(e%2&&a[0][2].length+1===Math.floor(e/2)&&(m="center"),a[0][2].push(o.length)):c===0&&(e%2&&a[0][3].length+1===Math.floor(e/2)&&(m="center"),a[0][3].push(o.length)):l===t-1?u===n-1?(e%2&&a[1][0].length+1===Math.floor(e/2)&&(m="center"),a[1][0].push(o.length)):c===e-1?(e%2&&a[1][1].length+1===Math.floor(e/2)&&(m="center"),a[1][1].push(o.length)):u===0?(e%2&&a[1][2].length+1===Math.floor(e/2)&&(m="center"),a[1][2].push(o.length)):c===0&&(e%2&&a[1][3].length+1===Math.floor(e/2)&&(m="center"),a[1][3].push(o.length)):u===n-1&&c===0?(e%2&&a[2][0].length+1===Math.floor(e/2)&&(m="center"),a[2][0].push(o.length)):u===n-1&&c===e-1?(e%2&&a[2][1].length+1===Math.floor(e/2)&&(m="center"),a[2][1].push(o.length)):u===0&&c===e-1?(e%2&&a[2][2].length+1===Math.floor(e/2)&&(m="center"),a[2][2].push(o.length)):u===0&&c===0&&(e%2&&a[2][3].length+1===Math.floor(e/2)&&(m="center"),a[2][3].push(o.length))):x===3&&(w="corner"),o.push([f,h,d,g,v,y,c,l,u,c,l,u,w,m,p])}return o},generateButtonData:function(e){let t=Math.floor(e/2),n=Math.ceil(e/2);const i=["F","U","R","B","L","D"],r={center:[],single:[],multi:[]};e%2&&r.center.push({clockwise:{name:"C1",data:[0,-1,n,!1]},counter:{name:"C1'",data:[0,0,n,!1]}},{clockwise:{name:"C2",data:[1,-1,n,!1]},counter:{name:"C2'",data:[1,0,n,!1]}},{clockwise:{name:"C3",data:[2,-1,n,!1]},counter:{name:"C3'",data:[2,0,n,!1]}});for(let o=0;o<t;o++)for(let s=0;s<i.length;s++){let a=(o<10?"0":"")+(o+1)+i[s],l=(o<10?"0":"")+(o+1)+i[s].toLowerCase();r.single.push({clockwise:{face:i[s],name:a,data:[s,-1,o+1,!1]},counter:{face:i[s],name:a+"'",data:[s,0,o+1,!1]}}),o>0&&r.multi.push({clockwise:{face:i[s],name:l,data:[s,-1,o+1,!0]},counter:{face:i[s],name:l+"'",data:[s,0,o+1,!0]}})}return r},generateMoveHints:function(e,t){const n=[[],[],[],[],[],[]],i=new eT(1,1),r=new Er({map:e,transparent:!0,color:"black",opacity:".8",side:Ti});for(let o=0;o<t;o++){let s=new Cn,a=new Cn;for(let l=0;l<4;l++)for(let u=0;u<t;u++){let c=new pt(i,r),f=new pt(i,r);l===0?(c.translateX(t-1-o),c.translateZ(t-1+.51),c.translateY(t-1-u),f.translateX(t-1-o),f.translateZ(t-1+.51),f.translateY(t-1-u),f.rotateZ(Math.PI)):l===1?(c.translateX(t-1-o),c.translateZ(t-1-u),c.translateY(t-1+.51),c.rotateX(Math.PI/2),c.rotateZ(Math.PI),f.translateX(t-1-o),f.translateZ(t-1-u),f.translateY(t-1+.51),f.rotateX(Math.PI/2)):l===2?(c.translateX(t-1-o),c.translateZ(-.51),c.translateY(t-1-u),c.rotateX(Math.PI),f.translateX(t-1-o),f.translateZ(-.51),f.translateY(t-1-u)):l===3&&(c.translateX(t-1-o),c.translateZ(t-1-u),c.translateY(-.51),c.rotateX(-Math.PI/2),c.rotateZ(Math.PI),f.translateX(t-1-o),f.translateZ(t-1-u),f.translateY(-.51),f.rotateX(-Math.PI/2)),s.add(c),a.add(f)}s.visible=!1,a.visible=!1,n[2].push(s),n[5].push(a)}for(let o=0;o<t;o++){let s=new Cn,a=new Cn;for(let l=0;l<4;l++)for(let u=0;u<t;u++){let c=new pt(i,r),f=new pt(i,r);l===0?(c.translateX(t-1-u),c.translateZ(t-1+.51),c.translateY(o),c.rotateZ(-Math.PI/2),f.translateX(t-1-u),f.translateZ(t-1+.51),f.translateY(o),f.rotateX(Math.PI),f.rotateZ(Math.PI/2)):l===1?(c.translateX(t-1+.51),c.translateZ(t-1-u),c.translateY(o),c.rotateX(Math.PI/2),c.rotateZ(Math.PI),c.rotateY(Math.PI/2),f.translateX(t-1+.51),f.translateZ(t-1-u),f.translateY(o),f.rotateX(Math.PI/2),f.rotateY(Math.PI/2)):l===2?(c.translateX(t-1-u),c.translateZ(-.51),c.translateY(o),c.rotateX(Math.PI),c.rotateZ(Math.PI/2),f.translateX(t-1-u),f.translateZ(-.51),f.translateY(o),f.rotateZ(-Math.PI/2)):l===3&&(c.translateX(-.51),c.translateZ(t-1-u),c.translateY(o),c.rotateX(-Math.PI/2),c.rotateZ(Math.PI),c.rotateY(-Math.PI/2),f.translateX(-.51),f.translateZ(t-1-u),f.translateY(o),f.rotateX(-Math.PI/2),f.rotateY(Math.PI/2)),s.add(c),a.add(f)}s.visible=!1,a.visible=!1,n[0].push(s),n[3].push(a)}for(let o=0;o<t;o++){let s=new Cn,a=new Cn;for(let l=0;l<4;l++)for(let u=0;u<t;u++){let c=new pt(i,r),f=new pt(i,r);l===0?(c.translateX(t-1-u),c.translateZ(t-1-o),c.translateY(t-1+.51),c.rotateZ(-Math.PI/2),c.rotateY(Math.PI/2),f.translateX(t-1-u),f.translateZ(t-1-o),f.translateY(t-1+.51),f.rotateX(Math.PI),f.rotateZ(Math.PI/2),f.rotateY(Math.PI/2)):l===1?(c.translateX(t-1+.51),c.translateZ(t-1-o),c.translateY(t-1-u),c.rotateZ(Math.PI),c.rotateY(Math.PI/2),f.translateX(t-1+.51),f.translateZ(t-1-o),f.translateY(t-1-u),f.rotateY(Math.PI/2)):l===2?(c.translateX(t-1-u),c.translateZ(t-1-o),c.translateY(-.51),c.rotateX(Math.PI/2),c.rotateZ(Math.PI/2),f.translateX(t-1-u),f.translateZ(t-1-o),f.translateY(-.51),f.rotateX(Math.PI/2),f.rotateZ(-Math.PI/2)):l===3&&(c.translateX(-.51),c.translateZ(t-1-o),c.translateY(t-1-u),c.rotateX(Math.PI),c.rotateZ(Math.PI),c.rotateY(-Math.PI/2),f.translateX(-.51),f.translateZ(t-1-o),f.translateY(t-1-u),f.rotateX(-Math.PI),f.rotateY(Math.PI/2)),s.add(c),a.add(f)}s.visible=!1,a.visible=!1,n[1].push(s),n[4].push(a)}return n},rotatePoint:function(e,t,n,i,r,o){let s=o*Math.PI/180;return n<0&&(s*=-1),{p1:Math.cos(s)*(i-e)-Math.sin(s)*(r-t)+e,p2:Math.sin(s)*(i-e)+Math.cos(s)*(r-t)+t}},rotatePieces:function(e,t,n,i){let r=n.cubeDimension/2-.5,o=n.cubes,s=n.turnDirection,a=n.speed,l=n.start,u=n.face,c=n.cubeDepth,f=n.isMulti;if(u===0){for(let h=0;h<n.rubiksObject.length;h++)if((f||o[h].position.y>c-2)&&o[h].position.y<c){s<0?o[h].rotation.y+=.1745*a/10:o[h].rotation.y-=.1745*a/10;let d=e(r,r,s,o[h].position.x,o[h].position.z,a);l%90===0&&(d.p1=Math.round(d.p1),d.p2=Math.round(d.p2)),o[h].position.x=d.p1,o[h].position.z=d.p2}}if(u===1){for(let h=0;h<n.rubiksObject.length;h++)if((f||o[h].position.z<n.cubeDimension+1-c)&&o[h].position.z>n.cubeDimension-1-c){s<0?o[h].rotation.z-=.1745*a/10:o[h].rotation.z+=.1745*a/10;let d=e(r,r,s,o[h].position.x,o[h].position.y,10*a/10);l%90===0&&(d.p1=Math.round(d.p1),d.p2=Math.round(d.p2)),o[h].position.x=d.p1,o[h].position.y=d.p2}}if(u===2){for(let h=0;h<n.rubiksObject.length;h++)if((f||t[h].position.x<n.cubeDimension+1-c)&&o[h].position.x>n.cubeDimension-1-c){s<0?t[h].rotation.x-=.1745*a/10:t[h].rotation.x+=.1745*a/10;let d=e(r,r,s,t[h].position.y,t[h].position.z,10*a/10);l%90===0&&(d.p1=Math.round(d.p1),d.p2=Math.round(d.p2)),t[h].position.y=d.p1,t[h].position.z=d.p2}}if(u===3){for(let h=0;h<n.rubiksObject.length;h++)if((f||t[h].position.y<n.cubeDimension+1-c)&&o[h].position.y>n.cubeDimension-1-c){s<0?t[h].rotation.y+=.1745*a/10:t[h].rotation.y-=.1745*a/10;let d=e(r,r,s,t[h].position.x,t[h].position.z,10*a/10);l%90===0&&(d.p1=Math.round(d.p1),d.p2=Math.round(d.p2)),t[h].position.x=d.p1,t[h].position.z=d.p2}}if(u===4){for(let h=0;h<n.rubiksObject.length;h++)if((f||t[h].position.x>c-2)&&o[h].position.x<c){s<0?t[h].rotation.x-=.1745*a/10:t[h].rotation.x+=.1745*a/10;let d=e(r,r,s,t[h].position.y,t[h].position.z,10*a/10);l%90===0&&(d.p1=Math.round(d.p1),d.p2=Math.round(d.p2)),t[h].position.y=d.p1,t[h].position.z=d.p2}}if(u===5){for(let h=0;h<n.rubiksObject.length;h++)if((f||t[h].position.z>c-2)&&o[h].position.z<c){s<0?t[h].rotation.z-=.1745*a/10:t[h].rotation.z+=.1745*a/10;let d=e(r,r,s,t[h].position.x,t[h].position.y,10*a/10);l%90===0&&(d.p1=Math.round(d.p1),d.p2=Math.round(d.p2)),t[h].position.x=d.p1,t[h].position.y=d.p2}}return{start:l+a,reload:!0}},rotatePoint2:function(e,t,n,i,r){let o=Math.PI/2;return n<0&&(o*=-1),{p1:-Math.sin(o)*(r-t)+e,p2:Math.sin(o)*(i-e)+t}},rotateFace:function(e,t,n,i,r,o){let s=r,a=r/2-.5,l=[...o],u=90;if(t<0&&(u*=-1),e===0){for(let c=0;c<l.length;c++)if((i||l[c][7]>n-2)&&l[c][7]<n){let f=et.rotatePoint2(a,a,u,l[c][6],l[c][8]);if(l[c][6]=f.p1,l[c][8]=f.p2,t===0){let h=l[c][1];l[c][1]=l[c][2],l[c][2]=l[c][5],l[c][5]=l[c][4],l[c][4]=h}else{let h=l[c][1];l[c][1]=l[c][4],l[c][4]=l[c][5],l[c][5]=l[c][2],l[c][2]=h}}}if(e===1){for(let c=0;c<l.length;c++)if((i||l[c][8]<s+1-n)&&l[c][8]>s-1-n){let f=et.rotatePoint2(a,a,u,l[c][6],l[c][7]);if(l[c][6]=f.p1,l[c][7]=f.p2,t===0){let h=l[c][3];l[c][3]=l[c][2],l[c][2]=l[c][0],l[c][0]=l[c][4],l[c][4]=h}else{let h=l[c][3];l[c][3]=l[c][4],l[c][4]=l[c][0],l[c][0]=l[c][2],l[c][2]=h}}}if(e===2){for(let c=0;c<l.length;c++)if((i||l[c][6]<s+1-n)&&l[c][6]>s-1-n){let f=et.rotatePoint2(a,a,u,l[c][7],l[c][8]);if(l[c][7]=f.p1,l[c][8]=f.p2,t===0){let h=l[c][3];l[c][3]=l[c][5],l[c][5]=l[c][0],l[c][0]=l[c][1],l[c][1]=h}else{let h=l[c][3];l[c][3]=l[c][1],l[c][1]=l[c][0],l[c][0]=l[c][5],l[c][5]=h}}}if(e===3){for(let c=0;c<l.length;c++)if((i||l[c][7]<s+1-n)&&l[c][7]>s-1-n){let f=et.rotatePoint2(a,a,u,l[c][6],l[c][8]);if(l[c][6]=f.p1,l[c][8]=f.p2,t===-1){let h=l[c][1];l[c][1]=l[c][4],l[c][4]=l[c][5],l[c][5]=l[c][2],l[c][2]=h}else{let h=l[c][1];l[c][1]=l[c][2],l[c][2]=l[c][5],l[c][5]=l[c][4],l[c][4]=h}}}if(e===4){for(let c=0;c<l.length;c++)if((i||l[c][6]>n-2)&&l[c][6]<n){let f=et.rotatePoint2(a,a,u,l[c][7],l[c][8]);if(l[c][7]=f.p1,l[c][8]=f.p2,t===-1){let h=l[c][3];l[c][3]=l[c][1],l[c][1]=l[c][0],l[c][0]=l[c][5],l[c][5]=h}else{let h=l[c][3];l[c][3]=l[c][5],l[c][5]=l[c][0],l[c][0]=l[c][1],l[c][1]=h}}}if(e===5){for(let c=0;c<l.length;c++)if((i||l[c][8]>n-2)&&l[c][8]<n){let f=et.rotatePoint2(a,a,u,l[c][6],l[c][7]);if(l[c][6]=f.p1,l[c][7]=f.p2,t===-1){let h=l[c][3];l[c][3]=l[c][4],l[c][4]=l[c][0],l[c][0]=l[c][2],l[c][2]=h}else{let h=l[c][3];l[c][3]=l[c][2],l[c][2]=l[c][0],l[c][0]=l[c][4],l[c][4]=h}}}return l},rotateCubeFace:function(e,t,n,i,r,o,s,a,l){let u={};if(!r){let c="";n<10?c+="0"+n:c+=n,e===0?i?c+="f":c+="F":e===1?i?c+="u":c+="U":e===2?i?c+="r":c+="R":e===3?i?c+="b":c+="B":e===4?i?c+="l":c+="L":e===5&&(i?c+="d":c+="D"),t===-1&&(c+="'"),o&&o.length>0?u.moveLog=o+" "+c:u.moveLog=c,l>-1&&(u.solveMoves=s.length?s+" "+c:s+c)}return e>2&&t===-1?t=0:e>2&&t===0&&(t=-1),u.blockMoveLog=!1,u.face=e,u.turnDirection=t,u.end=a+90,u.cubeDepth=n,u.isMulti=i,u}},bj={F:0,U:1,R:2,B:3,L:4,D:5};function Sj(e){const t={...e},n=e.F,i=e.U,r=e.B,o=e.D;return t.U=n,t.B=i,t.D=r,t.F=o,t.R=e.R,t.L=e.L,t}const bT=Sj(bj),ii=Object.entries(bT).reduce((e,[t,n])=>(e[n]=t,e),{}),It={parseMoveArray:function(e){let t=e.shift(),n=0,i=-1,r=1,o=!1;if(t){t.length===4&&(i=0),r=parseInt(t.slice(0,2)),t.slice(2,3)===t.slice(2,3).toLowerCase()&&(o=!0);const s=t.slice(2,3).toUpperCase();return n=bT[s],[n,i,r,o]}},convertDataToMove:function(e){let t="";const n=[ii[0],ii[1],ii[2],ii[3],ii[4],ii[5]];return t+=e[2].toString().length<2?"0".concat(e[2]):e[2],t+=e[3]?n[e[0]].toLowerCase():n[e[0]],t+=e[1]===-1?"":"'",t},convertMoveToData:function(e){if(e.length<2)return!1;const t=[ii[0],ii[1],ii[2],ii[3],ii[4],ii[5]],n=[];return n.push(t.indexOf(e[2].toUpperCase())),e.length<4?n.push(-1):n.push(0),e[0]==="0"?n.push(parseInt(e[1])):n.push(parseInt(e.substring(0,2))),e[2].toUpperCase()===e[2]?n.push(!1):n.push(!0),n},moveStringToArray:function(e){let t=e.split(" "),n=[];for(let i=0;i<t.length;i++)if(t[i].length===4&&t[i].slice(3,4)==="2"){let r=t[i].slice(0,3);n.push(r),n.push(r)}else n.push(t[i]);return n},generateMove:function(e){let t=Math.ceil(e/2),n=Math.floor(Math.random()*6),i=Math.floor(Math.random()*2-1),r=Math.floor(Math.random()*2),o=1;return n>2&&e%2&&(t-=1),e>2&&(o=Math.floor(Math.random()*t)+1),o===1&&(r=0),o===Math.ceil(e/2)&&e%2&&(r=0),It.convertDataToMove([n,i,o,r])},equivalentMove(e,t){const n=e.split("");let i="",r;switch(n[0]==="0"?r=t-parseInt(n[1])+1:r=t-parseInt(n[0]+n[1])+1,r<10?i+=`0${r}`:i+=`${r}`,n[2]){case"F":i+="B";break;case"f":i+="b";break;case"U":i+="D";break;case"u":i+="d";break;case"R":i+="L";break;case"r":i+="l";break;case"B":i+="F";break;case"b":i+="f";break;case"L":i+="R";break;case"l":i+="r";break;case"D":i+="U";break;case"d":i+="u";break}return n.length<4&&(i+="'"),i},checkMoveEquivalence(e,t,n){if(t.toLowerCase()===t){if(e.toLowerCase().slice(2)===t.slice(2)){if(parseInt(e.slice(0,2))<=parseInt(t.slice(0,2)))return!0}else if(It.equivalentMove(e,n).toLowerCase().slice(2)===t.slice(2)&&parseInt(It.equivalentMove(e,n).slice(0,2))<=parseInt(t.slice(0,2)))return!0}return e===t||It.equivalentMove(e,n)===t}};function ST(e,t){let n=t.map(v=>[...v]),i={...e},r="",o=null,s=null,a=0,l=!1,u=0,c=0;for(i.currentFunc==="Color Picker"&&(i.solveState=0,i.currentFunc="Solving",i.rubiksObject=t.map(v=>[...v]));i.currentFunc==="Solving";)if(!i.moveSet||!i.moveSet.length){o=i.rubiksIndex,o===s?a=a+1:a=0,i.solveState>=1&&c++;let v;if(v=pN(i.solveState,i.rubiksObject,i.cubeDimension,It.moveStringToArray,i.solveMoves,i.rubiksIndex,i.middles,i.edges,i.corners),v||(v={}),v.moveSet&&v.moveSet[0]==="stop"&&(i.currentFunc==="Solving"&&(v.solveMoves=i.solveMoves+` ${v.moveSet[0]}`),v.moveSet.pop()),v.moveSet){let y=[];for(let m=0;m<v.moveSet.length;m++)v.moveSet[m]===""||v.moveSet[m]===" "||v.moveSet[m][0]==="N"||v.moveSet[m]==="'"||y.push(v.moveSet[m]);v.moveSet=y}c>500?(l=!0,v.currentFunc="None"):(a>10&&i.solveState<1||u>1e4||v.moveSet&&v.moveSet[0]==="error")&&(console.log("Solve State: ",i.solveState,`
Piece attempts: `,a,`
Piece: `,i.rubiksObject[i.middles[i.rubiksIndex]]),console.log(v),l=!0,v.currentFunc="None"),v.currentFunc&&v.currentFunc==="None"&&(r=i.solveMoves),u++,i={...i,...v},s=o}else{let v=i.cubeDimension,y=i.blockMoveLog,m=i.moveLog,p=i.solveMoves,x=i.rubiksObject,w=i.end,b=i.solveState,_=It.parseMoveArray(i.moveSet),S=et.rotateCubeFace(..._,y,m,p,w,b);S.rubiksObject=et.rotateFace(S.face,S.turnDirection,S.cubeDepth,S.isMulti,v,x),i={...i,...S}}let f=r.split(" ");(f[0][0]==="N"||f[0][0]==="'")&&f.shift();let h=[];f.forEach(v=>v[v.length-1]==="'"?h.push(v.replace("'","")):h.push(v+"'"));for(let v=0;v<h.length;v++)(h[v]===""||h[v]===" "||h[v][0]==="N"||h[v]==="'"||h[v]===void 0)&&h.splice(v,1);let d=Math.floor(i.cubeDimension/2);h=h.map(v=>{if(v==="stop'")return v;let y=It.convertMoveToData(v);return parseInt(y[2])>d&&!y[3]&&(y[2]=i.cubeDimension-y[2]+1,parseInt(y[0])===0?y[0]=3:parseInt(y[0])===1?y[0]=5:parseInt(y[0])===2?y[0]=4:parseInt(y[0])===3?y[0]=0:parseInt(y[0])===4?y[0]=2:parseInt(y[0])===5&&(y[0]=1),y[1]===0?y[1]=-1:y[1]=0),It.convertDataToMove(y)});let g=0;for(;h.length!==g;){g=h.length;for(let v=0;v<h.length-2;v++)h[v].substring(0,3)===h[v+1].substring(0,3)&&h[v].length!==h[v+1].length&&h.splice(v,2);for(let v=0;v<h.length-2;v++)h[v]===h[v+1]&&h[v]===h[v+2]&&(h[v].length===3?h[v]+="'":h[v]=h[v].substring(0,3),h.splice(v+1,2))}return h[0]==="stop'"&&h[1]==="stop'"&&h.length===2&&(h=[]),e.cubeDimension<6&&i.rubiksObject.forEach(v=>{if(v.includes("middle"))return;let y=v.slice(0,6),m=y.filter(x=>x!=="black"),p=0;[v[6],v[7],v[8]].join("")!==[v[9],v[10],v[11]].join("")&&m.length>1&&(l=!0),(y[0]==="white"||y[0]==="black")&&p++,(y[1]==="blue"||y[1]==="black")&&p++,(y[2]==="red"||y[2]==="black")&&p++,(y[3]==="yellow"||y[3]==="black")&&p++,(y[4]==="orange"||y[4]==="black")&&p++,(y[5]==="green"||y[5]==="black")&&p++,p<6&&(l=!0)}),l?{moveSet:[...h],rubiksObject:n,solveable:!1,solvedSet:[...h],solvedSetIndex:0}:{moveSet:[...h],rubiksObject:n,solveable:!0,solvedSet:[...h],solvedSetIndex:0,tempObject:i.rubiksObject}}const yv={autoJump:function(e,t){let n={...e};for(n.moveSet=t;n.moveSet.length;){let i=n.cubeDimension,r=n.blockMoveLog,o=n.moveLog,s=n.solveMoves,a=n.rubiksObject,l=n.end,u=n.solveState,c=It.parseMoveArray(n.moveSet),f=et.rotateCubeFace(...c,r,o,s,l,u);f.rubiksObject=et.rotateFace(f.face,f.turnDirection,f.cubeDepth,f.isMulti,i,a),n={...n,...f}}return[...n.rubiksObject]},setTarget:function(e,t){if(!(t.state.autoPlay||t.state.autoRewind)){if(parseInt(e.target.id)-t.state.solvedSetIndex===1)t.setState({targetSolveIndex:parseInt(e.target.id)}),t.playOne(t);else if(t.state.solvedSetIndex<=parseInt(e.target.id)){t.setState({targetSolveIndex:parseInt(e.target.id),autoTarget:!0});let n=t.state.solvedSet.slice(0,parseInt(e.target.id)),i=t.state.solvedSet.slice(parseInt(e.target.id),t.state.solvedSet.length),r=t.state.solvedSet.slice(t.state.solvedSetIndex,parseInt(e.target.id));t.setState({solvedSetIndex:parseInt(e.target.id),prevSet:n,moveSet:i,rubiksObject:yv.autoJump(t.state,r)})}else if(t.state.solvedSetIndex>parseInt(e.target.id)){t.setState({targetSolveIndex:parseInt(e.target.id),autoTarget:!0});let n=t.state.solvedSet.slice(0,parseInt(e.target.id)),i=t.state.solvedSet.slice(parseInt(e.target.id),t.state.solvedSet.length),r=t.state.solvedSet.slice(parseInt(e.target.id),t.state.solvedSetIndex).map(o=>o.length===4?o.slice(0,3):o+"'");t.setState({solvedSetIndex:parseInt(e.target.id),prevSet:n,moveSet:i,rubiksObject:yv.autoJump(t.state,r.reverse())})}}},algoStart:function(e,t){let n=t.state.cubeDimension,i=e,r=[],o=et.generateSolved(n,n,n,"yellow","red");i!=="None Selected"&&(r=yu.find(s=>s.name===i&&s.worksFor.includes(n)).moves.split(" ")),t.setState({activeAlgo:i,moveSet:[...r],rubiksObject:o.tempArr,solveable:!0,solvedSet:[...r],solvedSetIndex:0,prevSet:[],jumpToEnd:!0})}};let{setTarget:zs,algoStart:Mj}=yv;class Ej extends Z.Component{constructor(t){super(t)}UNSAFE_componentWillReceiveProps(t){t.state.autoRewind===!0&&t.state.solvedSetIndex>=t.state.targetSolveIndex?(t.state.moveSet[0]==="stop'"&&t.setState({autoRewind:!1}),t.rewindOne()):t.state.autoRewind===!0&&t.state.solvedSetIndex<=t.state.targetSolveIndex&&t.setState({autoRewind:!1}),t.state.autoPlay===!0&&t.state.solvedSetIndex<t.state.targetSolveIndex?(t.state.moveSet[0]==="stop'"&&t.setState({autoPlay:!1}),t.playOne(t)):t.state.autoPlay===!0&&t.state.solvedSetIndex>=t.state.targetSolveIndex&&t.setState({autoPlay:!1}),t.state.jumpToEnd&&t.setState({jumpToEnd:!1},zs({target:{id:t.state.moveSet.length}},t))}componentDidMount(){let t=this.props.setState,n=this.props.state;n.solveOnce&&setTimeout(function(){t({...ST(n,n.rubiksObject),solveOnce:!1})},50)}render(){let t=[],n=this.props.state.prevSet,i=this.props.state.moveSet,r=this.props.state.currentFunc==="Solving"?"Loading, please wait...":"Already Solved",o=this.props.state.currentFunc==="Solving"?r:"None Selected",s=[M.jsx("div",{onClick:m=>v(m,this.props,zs),id:0,className:"solveMoveDiv jumper",children:"Top"},-1)];const a=m=>{if(m=m.toLowerCase(),m.includes("f"))return"white";if(m.includes("r"))return"red";if(m.includes("b"))return"yellow";if(m.includes("l"))return"orange";if(m.includes("d"))return"green"};this.props.state.solvedSet.length?this.props.state.solvedSet.forEach((m,p)=>m===this.props.state.solvedSet[p+1]?M.jsx(M.Fragment,{}):m==="stop'"?(t.push(M.jsxs("div",{style:{width:"100%"},children:[M.jsx("hr",{style:{border:"1px solid lightblue",marginLeft:"5px"}},p),s.length===1?"Edges: ":"3x3: "]},p)),s.push(s.length===1?M.jsx("div",{onClick:x=>v(x,this.props,zs),id:p+1,className:"solveMoveDiv jumper",children:"Edge"},p):M.jsx("div",{onClick:x=>v(x,this.props,zs),id:p+1,className:"solveMoveDiv jumper",children:"3x3"},p))):m===this.props.state.solvedSet[p-1]?p===this.props.state.solvedSetIndex||p===this.props.state.solvedSetIndex+1&&m===this.props.state.solvedSet[p-1]?t.push(M.jsx("div",{id:p-1,className:`solveMoveDiv nextSolveIndex ${a(m)}`,children:m.replace("0"+m[1],m[1]).replace("'","")+"2"},p)):t.push(M.jsx("div",{onClick:x=>zs(x,this.props),id:p-1,className:`solveMoveDiv ${a(m)}`,children:m.replace("0"+m[1],m[1]).replace("'","")+"2"},p)):p===this.props.state.solvedSetIndex||p===this.props.state.solvedSetIndex+1&&m===this.props.state.solvedSet[p-1]?t.push(M.jsx("div",{id:p,className:`solveMoveDiv nextSolveIndex ${a(m)}`,children:m.replace("0"+m[1],m[1])},p)):t.push(M.jsx("div",{onClick:x=>zs(x,this.props),id:p,className:`solveMoveDiv ${a(m)}`,children:m.replace("0"+m[1],m[1])},p))):t.push(o),t.map(m=>M.jsx(Uk,{height:"2rem",children:"el"}));let l=M.jsx("div",{className:"previousMove",children:n.length-1>=0?n[n.length-1]==="stop'"?n[n.length-2]?n[n.length-2]===n[n.length-3]?n[n.length-2].replace("0"+n[n.length-2][1],n[n.length-2][1]).replace("'","")+2:n[n.length-2].replace("0"+n[n.length-2][1],n[n.length-2][1]):"-":n[n.length-1]===n[n.length-2]?n[n.length-1].replace("0"+n[n.length-1][1],n[n.length-1][1]).replace("'","")+2:n[n.length-1].replace("0"+n[n.length-1][1],n[n.length-1][1]):"-"}),u=M.jsx("div",{className:"nextMove",children:i[0]&&typeof i[0][0]=="string"&&i[0]!=="'"?i[0]==="stop'"?i[1]?i[1]===i[2]?i[1].replace("0"+i[1][1],i[1][1]).replace("'","")+2:i[1].replace("0"+i[1][1],i[1][1]):"-":i[0]===i[1]?i[0].replace("0"+i[0][1],i[0][1]).replace("'","")+2:i[0].replace("0"+i[0][0],i[0][1]):"-"});function c(){document.querySelector(".warningPopupSolver").style.visibility="hidden",document.querySelector(".solverInterface").style.display="block",document.querySelector(".exitDiv").style.display="block"}function f(m,p){if(m.stopPropagation(),p.stopSolve(),document.querySelector(".activeMenu")&&document.querySelector(".activeMenu").classList.remove("activeMenu"),document.querySelector("#solverChangeData").data){let x=document.querySelector("#solverChangeData").data.split(",");if(x[0]==="ColorPicker"){p.setState({activeMenu:"",currentFunct:"None",isValidConfig:!1}),document.querySelector("#solverChangeData").data="";return}document.querySelector(`#${x[0]}`).classList.add("activeMenu"),p.setState({activeMenu:x[0],currentFunct:x[1],isValidConfig:!1}),document.querySelector("#solverChangeData").data=""}else p.setState({activeMenu:"",currentFunct:"None",isValidConfig:!1})}function h(m){m.state.moveSet.length&&(m.state.moveSet.length===1?m.playOne(m):m.setState({autoPlay:!0,autoRewind:!1,targetSolveIndex:m.state.solvedSet.length}))}function d(m){m.setState({autoPlay:!1,autoRewind:!0,targetSolveIndex:0})}function g(m){m.setState({autoPlay:!1,autoRewind:!1})}function v(m,p,x){p.setState({autoScroll:!0}),x(m,p)}function y(m,p){switch(p.state.currentFunc){case"Solving":document.querySelector(".warningPopupSolver").style.visibility="visible",document.querySelector(".warningPopupSolver").style.width="100%",document.querySelector(".solverInterface").style.display="none",document.querySelector(".exitDiv").style.display="none";break;case"Algorithms":p.setState({activeMenu:"",currentFunc:"Reset",solvedSet:[],hoverData:[],prevSet:[],moveSet:[],isValidConfig:!1,targetSolveIndex:-1,solveMoves:"",autoPlay:!1,autoRewind:!1,autoTarget:!1,playOne:!1,activeAlgo:"none"});break;default:p.setState({activeMenu:"",currentFunct:"None"})}}return M.jsx("div",{className:"solverUIWrapper",children:M.jsxs(po,{style:{width:"100%",height:"100%",margin:0},children:[M.jsx(Gn,{id:!this.props.mobile&&this.props.state.currentFunc==="Algorithms"?"centerControls2":"",style:{paddingLeft:"0px"},children:this.props.mobile?M.jsx(M.Fragment,{children:this.props.state.currentFunc==="Algorithms"?M.jsxs(M.Fragment,{children:[M.jsx(po,{style:{paddingLeft:"15px"},children:M.jsx("select",{style:{color:"lightgrey",backgroundColor:"#343a40"},id:"patterns",onChange:m=>Mj(m.target.value,this.props),children:yu.map(m=>m.worksFor.includes(this.props.state.cubeDimension)?M.jsx("option",{className:"mobileAlgo",id:m.name,value:m.name,children:m.name},m.name):"")})}),M.jsx(po,{style:{paddingLeft:"15px"},children:M.jsx("div",{className:"algoMoves",children:t})})]}):M.jsx(M.Fragment,{children:M.jsx("div",{className:"solverMovesMobile",children:t})})}):M.jsx(M.Fragment,{children:M.jsx("div",{className:"solverMoves",children:t})})}),M.jsxs(Gn,{id:!this.props.mobile&&this.props.state.currentFunc==="Algorithms"?"centerControls":"centerControlsOther",style:{paddingRight:0,paddingLeft:0,maxWidth:"300px"},children:[M.jsxs("div",{className:"warningPopupSolver",children:[M.jsx("div",{id:"solverChangeData",data:""}),this.props.mobile?M.jsx("div",{className:"solverMessage",children:" Progress will not be saved."}):M.jsx("div",{className:"solverMessage",children:" Are you sure you want to leave Solver? Progress will not be saved."}),M.jsx("button",{onClick:c,className:"solverLeaveStay",children:"Stay"}),M.jsx("button",{onClick:m=>f(m,this.props),className:"solverLeaveStay",children:"Leave"})]}),M.jsxs("div",{className:"solverInterface",children:[M.jsx("div",{className:"solverButtonDiv rewindOne",children:M.jsxs("button",{className:"solverButton",onClick:()=>this.props.rewindOne(this.props),children:["Previous ",l]})}),M.jsx("div",{className:"solverButtonDiv playOne",children:M.jsxs("button",{className:"solverButton",onClick:()=>this.props.playOne(this.props),children:["Next ",u]})}),M.jsx("div",{className:"solverButtonDiv rewindAll",children:this.props.state.autoRewind?M.jsxs("button",{className:"solverButton",onClick:()=>g(this.props),children:[M.jsx("div",{style:{width:"100%"},children:"Pause"})," Solver"]}):M.jsxs("button",{className:"solverButton",onClick:()=>d(this.props),children:[M.jsx("div",{style:{width:"100%"},children:"Auto"})," Rewind"]})}),M.jsx("div",{className:"solverButtonDiv fastforward",children:this.props.state.autoPlay?M.jsxs("button",{className:"solverButton",onClick:()=>g(this.props),children:[M.jsx("div",{style:{width:"100%"},children:"Pause"})," Solver"]}):M.jsxs("button",{className:"solverButton",onClick:()=>h(this.props),children:[M.jsx("div",{style:{width:"100%"},children:"Auto"})," Forward"]})})]}),M.jsx("div",{className:"exitDiv",style:{width:"100%",height:"25%"},children:this.props.state.currentFunc==="Solving"?M.jsx(M.Fragment,{children:M.jsx("button",{id:"Solver",data:"Solving",onClick:m=>y(m,this.props),className:"exitButton",children:"Exit"})}):M.jsx("button",{id:"Algorithms",data:"Algorithms",onClick:m=>y(m,this.props),className:"exitButton",children:"Exit"})})]})]})})}}const Th=de.memo(Ej),Tj=({index:e,color:t,colorPicked:n,changeColor:i,isMobile:r})=>{let o=r?".5rem":"1.3rem",s=r?"5px":"10px";return M.jsx("div",{className:"colorButtonDiv",children:M.jsx("button",{className:`colorPicker color${e}`,style:{color:t,fontSize:o,padding:s},onClick:()=>i(t),children:n===t?M.jsx("strong",{children:t.toUpperCase()}):t.toUpperCase()})})},MT=e=>{const[t,n]=Z.useState("Solve"),[i,r]=Z.useState("Check"),o=["white","blue","red","yellow","orange","green"],s=()=>{n("Configuring..."),setTimeout(function(){e.setColorPickedCube()},100)},a=()=>{r("Checking..."),setTimeout(function(){e.runCheckColors(),r("Check")},100)};function l(){if(e.endColorPicker(),document.querySelector(".activeMenu")&&document.querySelector(".activeMenu").classList.remove("activeMenu"),document.querySelector("#cpChangeData").data){let f=document.querySelector("#cpChangeData").data.split(",");if(f[0]==="Solver"){e.setState({activeMenu:"",currentFunct:"None",isValidConfig:!1}),document.querySelector("#cpChangeData").data="";return}document.querySelector(`#${f[0]}`).classList.add("activeMenu"),document.querySelector("#cpChangeData").data="",e.setState({activeMenu:f[0],currentFunc:f[1],isValidConfig:!1},()=>e.beginSolve())}else e.setState({activeMenu:"",currentFunct:"None",isValidConfig:!1})}function u(){document.querySelector(".warningPopup").style.display="none",document.querySelector(".colorButtonContainer").style.visibility="visible"}function c(f){document.querySelector(".warningPopup").style.display="block",document.querySelector(".warningPopup").style.width="100%",document.querySelector(".colorButtonContainer").style.visibility="hidden"}return M.jsxs(po,{className:"cp-container",style:{height:"98%",width:"100%",overflowX:"hidden!important",overflowY:"hidden!important",margin:"0px"},children:[M.jsx(Gn,{children:M.jsxs("div",{className:"cpInfo",children:[e.isValidConfig?M.jsx("div",{className:"solveCpDiv",children:M.jsx("button",{className:"solveCp",onClick:()=>s(),children:M.jsx("strong",{style:{color:"green",fontSize:"1rem"},children:t})})}):e.cpErrors.length?[]:M.jsx("div",{className:"checkCpDiv",children:M.jsx("button",{className:"checkCp",onClick:()=>a(),children:M.jsx("strong",{style:{color:"blue",fontSize:"1rem"},children:i})})}),M.jsx("div",{style:{fontSize:".5rem"},children:e.state.cpErrors.map((f,h)=>M.jsx("p",{className:"cpErrorMessage",children:"- "+f},h))})]})}),M.jsxs(Gn,{style:{padding:"0px"},children:[M.jsxs("div",{className:"warningPopup",children:[M.jsx("div",{id:"cpChangeData",data:""}),e.isMobile?M.jsx("div",{className:"cpMessage",children:"Progress will not be saved."}):M.jsx("div",{className:"cpMessage",children:"Are you sure you want to leave Color Picker? Progress will not be saved."}),M.jsx("button",{onClick:u,className:"cpLeaveStay",children:"Stay"}),M.jsx("button",{onClick:l,className:"cpLeaveStay",children:"Leave"})]}),M.jsxs("div",{className:"colorButtonContainer",children:[o.map((f,h)=>M.jsx(Tj,{index:h+1,color:f,colorPicked:e.colorPicked,changeColor:e.changeColor,isMobile:e.isMobile},f)),M.jsx("div",{className:"colorButtonDiv",style:{paddingBottom:"0px",width:"100%"},children:M.jsx("button",{id:"ColorPicker",data:"Color Picker",onClick:c,className:"colorPicker activeMenu colorPickerExit",children:"Exit"})})]})]})]})},Lj=100;class Cj extends Z.Component{constructor(t){super(t)}shouldComponentUpdate(t,n){return this.props.state.solvedSet!==t.state.solvedSet||this.props.state.currentFunc!==t.state.currentFunc||this.props.state.activeAlgo!==t.state.activeAlgo?!0:this.props.state.activeAlgo===t.state.activeAlgo&&this.props.state.solvedSetIndex===t.state.solvedSetIndex&&(this.props.state.autoRewind||this.props.state.autoPlay)&&this.props.state.autoRewind===t.state.autoRewind&&this.props.state.autoPlay===t.state.autoPlay?!1:this.props.state.solvedSetIndex!==t.state.solvedSetIndex||t.state.autoRewind&&t.state.solvedSetIndex>=t.state.targetSolveIndex-1||t.state.autoPlay&&t.state.solvedSetIndex<t.state.targetSolveIndex-1||!t.state.autoRewind&&this.props.state.autoRewind||!t.state.autoPlay&&this.props.state.autoPlay?!0:!(this.props.state.activeMenu===t.state.activeMenu&&this.props.state.colorPicked===t.state.colorPicked&&this.props.state.currentFunc===t.state.currentFunc&&this.props.state.isValidConfig===t.state.isValidConfig&&this.props.cpErrors===t.cpErrors&&this.props.state.solveTime===t.state.solveTime&&this.props.state.playOne===t.state.playOne&&!this.props.state.autoPlay||this.props.state.solvedSetIndex===t.state.solvedSetIndex&&this.props.state.autoPlay&&this.props.state.solvedSetIndex<this.props.state.targetSolveIndex||this.props.state.solvedSetIndex===t.state.solvedSetIndex&&this.props.state.autoRewind&&this.props.state.solvedSetIndex>=this.props.state.targetSolveIndex)}render(){const t=yu.filter(r=>r.worksFor.includes(this.props.state.cubeDimension)).length;function n(r,o){switch(r.target.id){case"Reset":o.setState({activeMenu:"",currentFunc:"Reset"});break;case"Scramble":o.state.currentFunc==="None"&&o.beginScramble();break;default:o.setState({activeMenu:r.target.id,currentFunc:"None"})}}function i(r,o){o.state.currentFunc==="None"&&(r.target.id==="ColorPicker"?(o.setState({activeMenu:r.target.id,isValidConfig:!0}),o.beginColorPicker()):r.target.id==="Solver"?(o.setState({activeMenu:r.target.id}),o.beginSolve()):r.target.id==="Algorithms"&&o.setState({activeMenu:r.target.id,currentFunc:"Algorithms",solveOnce:!1,solvedSet:[],prevSet:[],moveSet:[]}))}return M.jsx("div",{className:"menuWrapper",children:(this.props.state.currentFunc==="None"||this.props.state.currentFunc==="Drag Turn"||this.props.state.currentFunc==="Undo"||this.props.state.currentFunc==="Redo"||this.props.state.currentFunc==="Scrambling")&&this.props.state.activeMenu!=="Moves"?M.jsxs(po,{style:{width:"100%",height:"100%",margin:0},children:[M.jsxs(Gn,{xs:6,style:{paddingRight:"7.5px"},children:[this.props.state.cubeDimension<=Lj?M.jsxs(M.Fragment,{children:[M.jsx("button",{className:"mobileButton",id:"ColorPicker",data:"Color Picker",onClick:r=>i(r,this.props),children:"Color Picker"},1),M.jsx("button",{className:"mobileButton",id:"Solver",data:"Solving",onClick:r=>i(r,this.props),children:"Solver"},2)]}):M.jsxs(M.Fragment,{children:[M.jsx("button",{className:"blankButton"},1),M.jsx("button",{className:"blankButton"},2)]}),t?M.jsx("button",{className:"mobileButton",id:"Algorithms",data:"Algorithms",onClick:r=>i(r,this.props),children:"Patterns"},3):""]}),M.jsxs(Gn,{xs:6,style:{paddingLeft:"7.5px"},children:[this.props.state.cubeDimension<1?M.jsx("button",{className:"mobileButton",onClick:()=>n,children:"Moves"},0):M.jsx("button",{className:"blankButton"},0),M.jsx("button",{className:"mobileButton",id:"Scramble",onClick:r=>n(r,this.props),children:"Scramble"},2),M.jsx("button",{className:"mobileButton",id:"Reset",onClick:r=>n(r,this.props),children:"Reset"},3)]})]}):this.props.state.currentFunc==="Color Picker"?M.jsx(MT,{...this.props,isMobile:!0}):this.props.state.currentFunc==="Solving"?M.jsx(Th,{...this.props,mobile:!0}):this.props.state.currentFunc==="Algorithms"?M.jsx(M.Fragment,{children:M.jsx(Th,{...this.props,mobile:!0})}):this.props.state.activeMenu==="Moves"?M.jsxs(po,{style:{height:"100%"},children:[M.jsx(Gn,{xs:2,children:M.jsx("div",{id:"infoBtn",style:{fontSize:"2rem",padding:0,display:"inline"},onClick:()=>{this.props.setState({activeMenu:""})},children:""})}),M.jsx(Gn,{xs:10,children:M.jsx(e0,{...this.props})})]}):M.jsx(M.Fragment,{})})}}const Rj=100,Pj=e=>{let t=yu.filter(o=>o.worksFor.includes(e.state.cubeDimension)).map(o=>M.jsx("button",{id:o.name,className:e.state.activeAlgo===o.name?"algoButton algoActive":"algoButton",onClick:s=>i(s,e),children:"text"},o.name));const n=M.jsxs(M.Fragment,{children:[M.jsx("button",{className:"leftButton invis"}),e.state.cubeDimension<=Rj?M.jsx("button",{id:"Solver",data:"Solving",onClick:r,className:"leftButton",children:"Solver"},"Solver"):M.jsx("button",{className:"leftButton invis"}),t.length?M.jsx("button",{id:"Algorithms",data:"None",onClick:r,className:"leftButton",children:"Algorithms"},"Algorithms"):M.jsx("button",{className:"leftButton invis"})]});function i(o,s){if(s.state.autoPlay||s.state.autoRewind||s.state.playOne)return;let a=s.state.cubeDimension,l=o.target.id,u=[],c=et.generateSolved(a,a,a,"yellow","red");c.preSolveArray=[],yu.forEach(f=>{f.moves&&f.name===l&&f.worksFor.includes(a)&&u.push(...f.moves.split(" "))}),s.setState({activeAlgo:l,moveSet:[...u],rubiksObject:c.preSolveArray,solveable:!0,solvedSet:[...u],solvedSetIndex:0,prevSet:[],autoPlay:!1,autoRewind:!1,autoTarget:!1,playOne:!1,jumpToEnd:!1})}function r(o){e.state.currentFunc==="None"&&(o.target.id==="ColorPicker"?(e.setState({activeMenu:o.target.id,isValidConfig:!0}),e.beginColorPicker()):o.target.id==="Solver"?e.setState({activeMenu:o.target.id},e.beginSolve()):o.target.id==="Algorithms"?(console.log(e.state.currentFunc),e.setState({activeMenu:o.target.id,currentFunc:"Algorithms",solveOnce:!1,solvedSet:[],prevSet:[],moveSet:[],activeAlgo:""})):e.setState({activeMenu:o.target.id,currentFunc:"None"}))}return M.jsx("div",{className:"menuOptionsWrapper",children:e.state.currentFunc==="Solving"?[]:e.state.currentFunc==="Color Picker"?M.jsxs(M.Fragment,{children:[M.jsx("div",{style:{paddingTop:"45%"}}),M.jsx("button",{id:"ColorPicker",data:"Color Picker",onClick:r,className:"cpButton activeMenu",children:"Exit"},"Color Picker")]}):e.state.currentFunc==="Algorithms"?M.jsx("div",{className:"algoList",children:t}):n})},Aj=de.memo(Pj),Dj=e=>{const t=M.jsxs(M.Fragment,{children:[M.jsx("button",{className:"rightButton invis"},"Blank"),M.jsx("button",{id:"Scramble",onClick:n,className:"rightButton scramble",children:"Scramble"},"Scramble"),M.jsx("button",{id:"Reset",onClick:n,className:"rightButton reset",children:"Reset"},"Reset")]});function n(i){switch(i.target.id){case"Reset":e.setState({activeMenu:"",currentFunc:"Reset"});break;case"Scramble":e.state.currentFunc==="None"&&e.beginScramble();break;default:e.setState({activeMenu:i.target.id,currentFunc:"None"})}}return M.jsx("div",{className:"menuOptionsWrapper",style:{float:"right"},children:e.state.currentFunc==="Solving"||e.state.currentFunc==="Color Picker"||e.state.currentFunc==="Algorithms"?M.jsx(M.Fragment,{children:M.jsx("div",{style:{paddingTop:"45%"}})}):t})},_m=de.memo(Dj);class Oj extends Z.Component{constructor(t){super(t)}shouldComponentUpdate(t,n){return this.props.state.upDateCp!==t.state.upDateCp||this.props.state.solvedSet!==t.state.solvedSet||this.props.state.currentFunc!==t.state.currentFunc||this.props.state.activeAlgo!==t.state.activeAlgo?!0:this.props.state.activeAlgo===t.state.activeAlgo&&this.props.state.solvedSetIndex===t.state.solvedSetIndex&&(this.props.state.autoRewind||this.props.state.autoPlay)&&this.props.state.autoRewind===t.state.autoRewind&&this.props.state.autoPlay===t.state.autoPlay?!1:this.props.state.solvedSetIndex!==t.state.solvedSetIndex||t.state.autoRewind&&t.state.solvedSetIndex>=t.state.targetSolveIndex-1||t.state.autoPlay&&t.state.solvedSetIndex<t.state.targetSolveIndex-1||!t.state.autoRewind&&this.props.state.autoRewind||!t.state.autoPlay&&this.props.state.autoPlay?!0:!(this.props.state.activeMenu===t.state.activeMenu&&this.props.state.colorPicked===t.state.colorPicked&&this.props.state.currentFunc===t.state.currentFunc&&this.props.state.isValidConfig===t.state.isValidConfig&&this.props.cpErrors===t.cpErrors&&this.props.state.solveTime===t.state.solveTime&&this.props.state.playOne===t.state.playOne&&!this.props.state.autoPlay||this.props.state.solvedSetIndex===t.state.solvedSetIndex&&this.props.state.autoPlay&&this.props.state.solvedSetIndex<this.props.state.targetSolveIndex||this.props.state.solvedSetIndex===t.state.solvedSetIndex&&this.props.state.autoRewind&&this.props.state.solvedSetIndex>=this.props.state.targetSolveIndex)}render(){let t;switch(this.props.state.activeMenu){case"Moves":t=M.jsx(e0,{...this.props});break;case"ColorPicker":t=M.jsx(MT,{...this.props});break;case"Solver":t=M.jsx(Th,{...this.props});break;case"Algorithms":t=M.jsx(Th,{...this.props});break;default:t=""}return M.jsx("div",{className:"menuWrapper",style:{pointerEvents:"none"},children:M.jsxs(po,{style:{height:"100%",margin:"0px"},children:[this.props.state.activeMenu==="ColorPicker"||this.props.state.activeMenu==="Solver"?[]:M.jsxs(Gn,{className:"MenuOptions",style:{paddingLeft:"20px",paddingBottom:"10px"},children:[M.jsx(Aj,{...this.props}),M.jsx(_m,{...this.props})]},"MenuOptions"),M.jsx(Gn,{id:"menuBox",style:{position:"relative",bottom:"0px",height:"100%"},xs:this.props.state.currentFunc==="Color Picker"||this.props.state.activeMenu==="Solver"?12:this.props.state.currentFunc==="None"||this.props.state.currentFunc==="Scrambling"||this.props.state.currentFunc==="Reset"?4:8,children:t}),this.props.state.activeMenu==="ColorPicker"||this.props.state.activeMenu==="Solver"||this.props.state.activeMenu==="Algorithms"?[]:[M.jsx(Gn,{style:{padding:0,color:"black",opacity:1,display:"none"},xs:.5,children:M.jsx(_m,{...this.props})},"MenuOptionsOther"),M.jsx(Gn,{style:{paddingLeft:"0px",minWidth:"150px",paddingRight:"0px",display:"none"},children:M.jsx(_m,{...this.props})},"MenuOptionsOtherPadding")]]})})}}const xv=de.memo(Oj),Fj=e=>{function t(){document.querySelector(".warningPopup").style.display="none",document.querySelector(".colorButtonContainer").style.visibility="visible"}function n(){document.querySelector(".warningPopup").style.display="block",document.querySelector(".warningPopup").style.width="100%",document.querySelector(".colorButtonContainer").style.visibility="hidden"}return M.jsxs("div",{className:"sideColorPicker",children:[M.jsxs("div",{className:"warningPopup",children:[M.jsx("div",{id:"cpChangeData",data:""}),M.jsx("div",{className:"cpMessage",children:"Progress will not be saved."}),M.jsx("button",{onClick:t,className:"cpLeaveStay",children:"Stay"}),M.jsx("button",{onClick:e.endColorPicker,className:"cpLeaveStay",children:"Leave"})]}),M.jsxs("div",{className:"colorButtonContainer",children:[e.children,M.jsx("div",{className:"colorButtonDiv",style:{paddingBottom:"0px",width:"100%"},children:M.jsx("button",{id:"ColorPicker",data:"Color Picker",onClick:n,className:"colorPicker activeMenu colorPickerExit",children:"Exit"})})]})]})},B_=({status:e,onStart:t,onStop:n})=>M.jsxs("div",{className:"sideSolverUI",children:[M.jsxs("div",{className:"status",children:["Status: ",e]}),M.jsxs("div",{className:"controls",children:[M.jsx("button",{className:"btn btn-primary",onClick:t,children:"Start"}),M.jsx("button",{className:"btn btn-secondary",onClick:n,children:"Stop"})]})]}),U_=({onPrev:e,onNext:t,onReset:n})=>M.jsxs("div",{className:"sideSolverControls",children:[M.jsx("button",{className:"btn btn-light",onClick:e,children:"Prev"}),M.jsx("button",{className:"btn btn-light",onClick:t,children:"Next"}),M.jsx("button",{className:"btn btn-danger",onClick:n,children:"Reset"})]}),kj=({onChange:e,value:t})=>M.jsxs("div",{className:"sideColorPickerController",children:[M.jsx("label",{htmlFor:"scpSelect",style:{marginRight:8},children:"Select color:"}),M.jsxs("select",{id:"scpSelect",value:t,onChange:n=>e(n.target.value),children:[M.jsx("option",{value:"white",children:"White"}),M.jsx("option",{value:"blue",children:"Blue"}),M.jsx("option",{value:"red",children:"Red"}),M.jsx("option",{value:"yellow",children:"Yellow"}),M.jsx("option",{value:"orange",children:"Orange"}),M.jsx("option",{value:"green",children:"Green"})]})]});class Nj extends Z.Component{constructor(t){super(t)}shouldComponentUpdate(t,n){return this.props.state.upDateCp!==t.state.upDateCp||this.props.state.solvedSet!==t.state.solvedSet||this.props.state.currentFunc!==t.state.currentFunc||this.props.state.activeAlgo!==t.state.activeAlgo?!0:this.props.state.activeAlgo===t.state.activeAlgo&&this.props.state.solvedSetIndex===t.state.solvedSetIndex&&(this.props.state.autoRewind||this.props.state.autoPlay)&&this.props.state.autoRewind===t.state.autoRewind&&this.props.state.autoPlay===t.state.autoPlay?!1:this.props.state.solvedSetIndex!==t.state.solvedSetIndex||t.state.autoRewind&&t.state.solvedSetIndex>=t.state.targetSolveIndex-1||t.state.autoPlay&&t.state.solvedSetIndex<t.state.targetSolveIndex-1||!t.state.autoRewind&&this.props.state.autoRewind||!t.state.autoPlay&&this.props.state.autoPlay?!0:!(this.props.state.activeMenu===t.state.activeMenu&&this.props.state.colorPicked===t.state.colorPicked&&this.props.state.currentFunc===t.state.currentFunc&&this.props.state.isValidConfig===t.state.isValidConfig&&this.props.cpErrors===t.cpErrors&&this.props.state.solveTime===t.state.solveTime&&this.props.state.playOne===t.state.playOne&&!this.props.state.autoPlay||this.props.state.solvedSetIndex===t.state.solvedSetIndex&&this.props.state.autoPlay&&this.props.state.solvedSetIndex<this.props.state.targetSolveIndex||this.props.state.solvedSetIndex===t.state.solvedSetIndex&&this.props.state.autoRewind&&this.props.state.solvedSetIndex>=this.props.state.targetSolveIndex)}render(){let t,n,i,r=()=>{document.querySelector(".warningPopupSolver").style.visibility="visible",document.querySelector(".controllerBox").style.visibility="hidden",document.querySelector(".bottomExitDiv").style.visibility="hidden"},o=()=>{document.querySelector(".warningPopup").style.display="block",document.querySelector(".colorButtonContainer").style.visibility="hidden",document.querySelector(".bottomExitDiv").style.visibility="hidden"},s=()=>{this.props.setState({activeMenu:"",currentFunc:"Reset",solvedSet:[],hoverData:[],prevSet:[],moveSet:[],isValidConfig:!1,targetSolveIndex:-1,solveMoves:"",autoPlay:!1,autoRewind:!1,autoTarget:!1,playOne:!1,activeAlgo:"none"})};function a(){document.querySelector(".warningPopupSolver").style.visibility="hidden",document.querySelector(".controllerBox").style.visibility="visible",document.querySelector(".bottomExitDiv").style.visibility="visible"}function l(){document.querySelector(".warningPopup").style.display="none",document.querySelector(".colorButtonContainer").style.visibility="visible",document.querySelector(".bottomExitDiv").style.visibility="visible"}function u(y,m){if(document.querySelector(".warningPopupSolver").style.visibility="hidden",document.querySelector(".bottomExitDiv").style.visibility="visible",y.stopPropagation(),m.stopSolve(),document.querySelector(".activeMenu")&&document.querySelector(".activeMenu").classList.remove("activeMenu"),document.querySelector("#solverChangeData").data){let p=document.querySelector("#solverChangeData").data.split(",");if(p[0]==="ColorPicker"){m.setState({activeMenu:"",currentFunct:"None",isValidConfig:!1}),document.querySelector("#solverChangeData").data="";return}document.querySelector(`#${p[0]}`).classList.add("activeMenu"),m.setState({activeMenu:p[0],currentFunct:p[1],isValidConfig:!1}),document.querySelector("#solverChangeData").data=""}else m.setState({activeMenu:"",currentFunct:"None",isValidConfig:!1})}let c=()=>{if(document.querySelector(".warningPopup").style.display="none",document.querySelector(".bottomExitDiv").style.visibility="visible",this.props.endColorPicker(),document.querySelector(".activeMenu")&&document.querySelector(".activeMenu").classList.remove("activeMenu"),document.querySelector("#cpChangeData").data){let y=document.querySelector("#cpChangeData").data.split(",");if(y[0]==="Solver"){this.props.setState({activeMenu:"",currentFunct:"None",isValidConfig:!1}),document.querySelector("#cpChangeData").data="";return}document.querySelector(`#${y[0]}`).classList.add("activeMenu"),document.querySelector("#cpChangeData").data="",this.props.setState({activeMenu:y[0],currentFunc:y[1],isValidConfig:!1},()=>this.props.beginSolve())}else this.props.setState({activeMenu:"",currentFunct:"None",isValidConfig:!1})},f=M.jsx("button",{id:"Solver",data:"Solving",onClick:r,className:"exitButton",children:"Exit"}),h=M.jsx("button",{id:"Algorithms",data:"Algorithms",onClick:s,className:"exitButton",children:"Exit"}),d=M.jsx("button",{id:"ColorPicker",data:"Color Picker",onClick:o,className:"exitButton",children:"Exit"}),g=M.jsxs("div",{id:"controlsPopup",className:"warningPopupSolver",style:{position:"absolute",left:"35vw",width:"30vw",bottom:"8px"},children:[M.jsx("div",{id:"solverChangeData",data:""}),M.jsx("div",{className:"solverMessage",children:"Are you sure you want to leave Solver? Progress will not be saved."}),M.jsx("button",{onClick:a,className:"solverLeaveStay",children:"Stay"}),M.jsx("button",{onClick:y=>u(y,this.props),className:"solverLeaveStay",children:"Leave"})]}),v=M.jsxs("div",{id:"controlsPopup",className:"warningPopup",style:{position:"absolute",left:"35vw",width:"30vw",bottom:"8px"},children:[M.jsx("div",{id:"cpChangeData",data:""}),M.jsx("div",{className:"cpMessage",children:"Are you sure you want to leave Color Picker? Progress will not be saved."}),M.jsx("button",{onClick:l,className:"cpLeaveStay",children:"Stay"}),M.jsx("button",{onClick:c,className:"cpLeaveStay",children:"Leave"})]});switch(this.props.state.activeMenu){case"Moves":t=M.jsx(e0,{...this.props});break;case"ColorPicker":t=M.jsx(Fj,{...this.props}),n=M.jsx(kj,{...this.props}),i=d;break;case"Solver":t=M.jsx(B_,{...this.props}),n=M.jsx(U_,{...this.props}),i=f;break;case"Algorithms":t=M.jsx(B_,{...this.props}),n=M.jsx(U_,{...this.props}),i=h;break;default:t=M.jsx(xv,{...this.props}),n=""}return[M.jsxs("div",{className:"sideMenuWrapper sideLimit",style:{pointerEvents:"none"},children:[M.jsx(xv,{...this.props}),t]},"sideMenuWrapper"),M.jsxs("div",{className:"bottomMenuWrapper",style:{pointerEvents:"none"},children:[n,v,g,M.jsx("div",{className:"bottomExitDiv",onClick:i===d?c:y=>u(y,this.props),children:i})]},"bottomMenuWrapper")]}}const Ij=de.memo(Nj);class Bj extends Z.Component{constructor(t){super(t)}shouldComponentUpdate(t,n){return this.props.state.resized===!0?(this.props.setState({resized:!1}),!0):this.props.state.upDateCp!==t.state.upDateCp||this.props.state.solvedSet!==t.state.solvedSet||this.props.state.currentFunc==="Scrambling"?!0:!(this.props.state.activeMenu===t.state.activeMenu&&this.props.state.activeMenu==="none"||(this.props.state.currentFunc==="Algorithms"||this.props.state.currentFunc==="Solving")&&this.props.state.moveSet===t.state.moveSet&&this.props.state.playOne===!1&&this.props.state.autoPlay===!1&&this.props.state.autoRewind===!1&&t.state.autoRewind===!1)}render(){const t=this.props;return window.innerWidth>900&&window.innerHeight>580?M.jsx(M.Fragment,{children:M.jsx(Ij,{...t})}):window.innerWidth>600?M.jsx(xv,{...t}):M.jsx(Cj,{...t})}}const Uj=de.memo(Bj);var Fu=function(e,t){t===void 0&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),t===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=e,this.domElement=t,this.enabled=!0,this.target=new F,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={LEFT:Yr.ROTATE,MIDDLE:Yr.DOLLY,RIGHT:Yr.PAN},this.touches={ONE:qr.ROTATE,TWO:qr.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return u.phi},this.getAzimuthalAngle=function(){return u.theta},this.listenToKeyEvents=function(O){O.addEventListener("keydown",N),this._domElementKeyEvents=O},this.saveState=function(){n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=function(){n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(i),n.update(),a=s.NONE},this.update=function(){var O=new F,oe=new xn().setFromUnitVectors(e.up,new F(0,1,0)),ve=oe.clone().invert(),fe=new F,Se=new xn,Je=2*Math.PI;return function(){var Ao=n.object.position;O.copy(Ao).sub(n.target),O.applyQuaternion(oe),u.setFromVector3(O),n.autoRotate&&a===s.NONE&&E(S()),n.enableDamping?(u.theta+=c.theta*n.dampingFactor,u.phi+=c.phi*n.dampingFactor):(u.theta+=c.theta,u.phi+=c.phi);var Sn=n.minAzimuthAngle,Mn=n.maxAzimuthAngle;return isFinite(Sn)&&isFinite(Mn)&&(Sn<-Math.PI?Sn+=Je:Sn>Math.PI&&(Sn-=Je),Mn<-Math.PI?Mn+=Je:Mn>Math.PI&&(Mn-=Je),Sn<=Mn?u.theta=Math.max(Sn,Math.min(Mn,u.theta)):u.theta=u.theta>(Sn+Mn)/2?Math.max(Sn,u.theta):Math.min(Mn,u.theta)),u.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,u.phi)),u.makeSafe(),u.radius*=f,u.radius=Math.max(n.minDistance,Math.min(n.maxDistance,u.radius)),n.enableDamping===!0?n.target.addScaledVector(h,n.dampingFactor):n.target.add(h),O.setFromSpherical(u),O.applyQuaternion(ve),Ao.copy(n.target).add(O),n.object.lookAt(n.target),n.enableDamping===!0?(c.theta*=1-n.dampingFactor,c.phi*=1-n.dampingFactor,h.multiplyScalar(1-n.dampingFactor)):(c.set(0,0,0),h.set(0,0,0)),f=1,d||fe.distanceToSquared(n.object.position)>l||8*(1-Se.dot(n.object.quaternion))>l?(n.dispatchEvent(i),fe.copy(n.object.position),Se.copy(n.object.quaternion),d=!1,!0):!1}}(),this.dispose=function(){n.domElement.removeEventListener("contextmenu",le),n.domElement.removeEventListener("pointerdown",ue),n.domElement.removeEventListener("wheel",K),n.domElement.removeEventListener("touchstart",re),n.domElement.removeEventListener("touchend",we),n.domElement.removeEventListener("touchmove",se),n.domElement.ownerDocument.removeEventListener("pointermove",be),n.domElement.ownerDocument.removeEventListener("pointerup",ae),n._domElementKeyEvents!==null&&n._domElementKeyEvents.removeEventListener("keydown",N)};var n=this,i={type:"change"},r={type:"start"},o={type:"end"},s={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},a=s.NONE,l=1e-6,u=new N_,c=new N_,f=1,h=new F,d=!1,g=new ee,v=new ee,y=new ee,m=new ee,p=new ee,x=new ee,w=new ee,b=new ee,_=new ee;function S(){return 2*Math.PI/60/60*n.autoRotateSpeed}function L(){return Math.pow(.95,n.zoomSpeed)}function E(O){c.theta-=O}function A(O){c.phi-=O}var B=function(){var O=new F;return function(ve,fe){O.setFromMatrixColumn(fe,0),O.multiplyScalar(-ve),h.add(O)}}(),j=function(){var O=new F;return function(ve,fe){n.screenSpacePanning===!0?O.setFromMatrixColumn(fe,1):(O.setFromMatrixColumn(fe,0),O.crossVectors(n.object.up,O)),O.multiplyScalar(ve),h.add(O)}}(),z=function(){var O=new F;return function(ve,fe){var Se=n.domElement;if(n.object.isPerspectiveCamera){var Je=n.object.position;O.copy(Je).sub(n.target);var At=O.length();At*=Math.tan(n.object.fov/2*Math.PI/180),B(2*ve*At/Se.clientHeight,n.object.matrix),j(2*fe*At/Se.clientHeight,n.object.matrix)}else n.object.isOrthographicCamera?(B(ve*(n.object.right-n.object.left)/n.object.zoom/Se.clientWidth,n.object.matrix),j(fe*(n.object.top-n.object.bottom)/n.object.zoom/Se.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}}();function k(O){n.object.isPerspectiveCamera?f/=O:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom*O)),n.object.updateProjectionMatrix(),d=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function U(O){n.object.isPerspectiveCamera?f*=O:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/O)),n.object.updateProjectionMatrix(),d=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function D(O){g.set(O.clientX,O.clientY)}function G(O){w.set(O.clientX,O.clientY)}function I(O){m.set(O.clientX,O.clientY)}function H(O){v.set(O.clientX,O.clientY),y.subVectors(v,g).multiplyScalar(n.rotateSpeed);var oe=n.domElement;E(2*Math.PI*y.x/oe.clientHeight),A(2*Math.PI*y.y/oe.clientHeight),g.copy(v),n.update()}function V(O){b.set(O.clientX,O.clientY),_.subVectors(b,w),_.y>0?k(L()):_.y<0&&U(L()),w.copy(b),n.update()}function J(O){p.set(O.clientX,O.clientY),x.subVectors(p,m).multiplyScalar(n.panSpeed),z(x.x,x.y),m.copy(p),n.update()}function he(O){O.deltaY<0?U(L()):O.deltaY>0&&k(L()),n.update()}function ge(O){var oe=!1;switch(O.keyCode){case n.keys.UP:z(0,n.keyPanSpeed),oe=!0;break;case n.keys.BOTTOM:z(0,-n.keyPanSpeed),oe=!0;break;case n.keys.LEFT:z(n.keyPanSpeed,0),oe=!0;break;case n.keys.RIGHT:z(-n.keyPanSpeed,0),oe=!0;break}oe&&(O.preventDefault(),n.update())}function xe(O){if(O.touches.length==1)g.set(O.touches[0].pageX,O.touches[0].pageY);else{var oe=.5*(O.touches[0].pageX+O.touches[1].pageX),ve=.5*(O.touches[0].pageY+O.touches[1].pageY);g.set(oe,ve)}}function Y(O){if(O.touches.length==1)m.set(O.touches[0].pageX,O.touches[0].pageY);else{var oe=.5*(O.touches[0].pageX+O.touches[1].pageX),ve=.5*(O.touches[0].pageY+O.touches[1].pageY);m.set(oe,ve)}}function Qe(O){var oe=O.touches[0].pageX-O.touches[1].pageX,ve=O.touches[0].pageY-O.touches[1].pageY,fe=Math.sqrt(oe*oe+ve*ve);w.set(0,fe)}function Ce(O){n.enableZoom&&Qe(O),n.enablePan&&Y(O)}function We(O){n.enableZoom&&Qe(O),n.enableRotate&&xe(O)}function Ae(O){if(O.touches.length==1)v.set(O.touches[0].pageX,O.touches[0].pageY);else{var oe=.5*(O.touches[0].pageX+O.touches[1].pageX),ve=.5*(O.touches[0].pageY+O.touches[1].pageY);v.set(oe,ve)}y.subVectors(v,g).multiplyScalar(n.rotateSpeed);var fe=n.domElement;E(2*Math.PI*y.x/fe.clientHeight),A(2*Math.PI*y.y/fe.clientHeight),g.copy(v)}function Ye(O){if(O.touches.length==1)p.set(O.touches[0].pageX,O.touches[0].pageY);else{var oe=.5*(O.touches[0].pageX+O.touches[1].pageX),ve=.5*(O.touches[0].pageY+O.touches[1].pageY);p.set(oe,ve)}x.subVectors(p,m).multiplyScalar(n.panSpeed),z(x.x,x.y),m.copy(p)}function Fe(O){var oe=O.touches[0].pageX-O.touches[1].pageX,ve=O.touches[0].pageY-O.touches[1].pageY,fe=Math.sqrt(oe*oe+ve*ve);b.set(0,fe),_.set(0,Math.pow(b.y/w.y,n.zoomSpeed)),k(_.y),w.copy(b)}function ie(O){n.enableZoom&&Fe(O),n.enablePan&&Ye(O)}function ce(O){n.enableZoom&&Fe(O),n.enableRotate&&Ae(O)}function ue(O){if(n.enabled!==!1)switch(O.pointerType){case"mouse":case"pen":R(O);break}}function be(O){if(n.enabled!==!1)switch(O.pointerType){case"mouse":case"pen":T(O);break}}function ae(O){switch(O.pointerType){case"mouse":case"pen":Q();break}}function R(O){O.preventDefault(),n.domElement.focus?n.domElement.focus():window.focus();var oe;switch(O.button){case 0:oe=n.mouseButtons.LEFT;break;case 1:oe=n.mouseButtons.MIDDLE;break;case 2:oe=n.mouseButtons.RIGHT;break;default:oe=-1}switch(oe){case Yr.DOLLY:if(n.enableZoom===!1)return;G(O),a=s.DOLLY;break;case Yr.ROTATE:if(O.ctrlKey||O.metaKey||O.shiftKey){if(n.enablePan===!1)return;I(O),a=s.PAN}else{if(n.enableRotate===!1)return;D(O),a=s.ROTATE}break;case Yr.PAN:if(O.ctrlKey||O.metaKey||O.shiftKey){if(n.enableRotate===!1)return;D(O),a=s.ROTATE}else{if(n.enablePan===!1)return;I(O),a=s.PAN}break;default:a=s.NONE}a!==s.NONE&&(n.domElement.ownerDocument.addEventListener("pointermove",be),n.domElement.ownerDocument.addEventListener("pointerup",ae),n.dispatchEvent(r))}function T(O){if(n.enabled!==!1)switch(O.preventDefault(),a){case s.ROTATE:if(n.enableRotate===!1)return;H(O);break;case s.DOLLY:if(n.enableZoom===!1)return;V(O);break;case s.PAN:if(n.enablePan===!1)return;J(O);break}}function Q(O){n.domElement.ownerDocument.removeEventListener("pointermove",be),n.domElement.ownerDocument.removeEventListener("pointerup",ae),n.enabled!==!1&&(n.dispatchEvent(o),a=s.NONE)}function K(O){n.enabled===!1||n.enableZoom===!1||a!==s.NONE&&a!==s.ROTATE||(O.preventDefault(),O.stopPropagation(),n.dispatchEvent(r),he(O),n.dispatchEvent(o))}function N(O){n.enabled===!1||n.enablePan===!1||ge(O)}function re(O){if(n.enabled!==!1){switch(O.preventDefault(),O.touches.length){case 1:switch(n.touches.ONE){case qr.ROTATE:if(n.enableRotate===!1)return;xe(O),a=s.TOUCH_ROTATE;break;case qr.PAN:if(n.enablePan===!1)return;Y(O),a=s.TOUCH_PAN;break;default:a=s.NONE}break;case 2:switch(n.touches.TWO){case qr.DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;Ce(O),a=s.TOUCH_DOLLY_PAN;break;case qr.DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;We(O),a=s.TOUCH_DOLLY_ROTATE;break;default:a=s.NONE}break;default:a=s.NONE}a!==s.NONE&&n.dispatchEvent(r)}}function se(O){if(n.enabled!==!1)switch(O.preventDefault(),O.stopPropagation(),a){case s.TOUCH_ROTATE:if(n.enableRotate===!1)return;Ae(O),n.update();break;case s.TOUCH_PAN:if(n.enablePan===!1)return;Ye(O),n.update();break;case s.TOUCH_DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;ie(O),n.update();break;case s.TOUCH_DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;ce(O),n.update();break;default:a=s.NONE}}function we(O){n.enabled!==!1&&(n.dispatchEvent(o),a=s.NONE)}function le(O){n.enabled!==!1&&O.preventDefault()}n.domElement.addEventListener("contextmenu",le),n.domElement.addEventListener("pointerdown",ue),n.domElement.addEventListener("wheel",K),n.domElement.addEventListener("touchstart",re),n.domElement.addEventListener("touchend",we),n.domElement.addEventListener("touchmove",se),this.update()};Fu.prototype=Object.create(ir.prototype);Fu.prototype.constructor=Fu;var wv=function(e,t){Fu.call(this,e,t),this.screenSpacePanning=!1,this.mouseButtons.LEFT=Yr.PAN,this.mouseButtons.RIGHT=Yr.ROTATE,this.touches.ONE=qr.PAN,this.touches.TWO=qr.DOLLY_ROTATE};wv.prototype=Object.create(ir.prototype);wv.prototype.constructor=wv;const ri={alignQuadrant(e,t){let n=e.position,i={colors:e.colors};const r=t-1,o=0,s=1,a=2;return n[o]<Math.floor(t/2)&&n[s]>=Math.floor(t/2)?i.position=[r-n[s],n[o],n[a]].join(""):n[o]>=Math.floor(t/2)&&n[s]>=Math.ceil(t/2)?i.position=[r-n[o],r-n[s],n[a]].join(""):n[o]>=Math.ceil(t/2)&&n[s]<Math.ceil(t/2)?i.position=[n[s],r-n[o],n[a]].join(""):i.position=n.join(""),i},checkOccurences:function(e,t){let n=!0,i=0,r=[];for(var o=0;o<e.length;o++){for(var s=0,a=0;a<t.length;a++)t[a]===e[o]&&s++;s>1&&(n=!1,r.includes(e[o])||r.push(e[o]))}return{success:n,failedColors:r,amount:i}},convertToBlueMiddle:function(e,t){const n=[...e],i=t-1,r=0,o=t-1,s=t-1,a=t-1,l=0,u=0;if(n[7]===r)return{colors:[n[5],n[0],n[2],n[1],n[4],n[3]].join(""),position:[n[6],n[8],i]};if(n[8]===o)return{colors:[n[0],n[1],n[2],n[3],n[4],n[5]].join(""),position:[n[6],n[7],i]};if(n[6]===s)return{colors:[n[0],n[2],n[5],n[3],n[1],n[4]].join(""),position:[i-n[8],n[7],i]};if(n[7]===a)return{colors:[n[1],n[3],n[2],n[5],n[4],n[0]].join(""),position:[n[6],i-n[8],i]};if(n[6]===l)return{colors:[n[0],n[4],n[1],n[3],n[5],n[2]].join(""),position:[n[8],n[7],i]};if(n[8]===u)return{colors:[n[0],n[5],n[4],n[3],n[2],n[1]].join(""),position:[i-n[6],n[7],i]}},checkValidMatchMiddle(e,t,n){let i=ri.alignQuadrant(ri.convertToBlueMiddle(e,n),n),r=ri.alignQuadrant(ri.convertToBlueMiddle(t,n),n);return i.colors===r.colors&&i.position===r.position},convertToBlueWhiteEdge:function(e,t){const n=[...e],i=t-1,r=0,o=t-1,s=t-1,a=t-1,l=0,u=0;return n[7]===r&&n[8]===o?{colors:[n[0],n[1],n[2],n[3],n[4],n[5]].join(""),position:[n[6],0,i].join("")}:n[6]===l&&n[8]===o?{colors:[n[4],n[1],n[0],n[2],n[3],n[5]].join(""),position:[i-n[7],0,i].join("")}:n[7]===a&&n[8]===o?{colors:[n[3],n[1],n[4],n[0],n[2],n[5]].join(""),position:[t-(n[6]+1),0,i].join("")}:n[6]===s&&n[8]===o?{colors:[n[2],n[1],n[3],n[4],n[0],n[5]].join(""),position:[n[7],0,i].join("")}:n[6]===l&&n[7]===r?{colors:[n[0],n[4],n[1],n[3],n[5],n[2]].join(""),position:[n[8],0,i].join("")}:n[6]===s&&n[7]===r?{colors:[n[0],n[2],n[5],n[3],n[1],n[4]].join(""),position:[i-n[8],0,i].join("")}:n[6]===l&&n[7]===a?{colors:[n[4],n[3],"black","black","black","black"].join(""),position:[n[8],0,i].join("")}:n[6]===s&&n[7]===a?{colors:[n[2],n[3],"black","black","black","black"].join(""),position:[i-n[8],0,i].join("")}:n[7]===r&&n[8]===u?{colors:[n[0],n[5],"black","black","black","black"].join(""),position:[i-n[6],0,i].join("")}:n[6]===l&&n[8]===u?{colors:[n[4],n[5],"black","black","black","black"].join(""),position:[n[7],0,i].join("")}:n[7]===a&&n[8]===u?{colors:[n[3],n[5],"black","black","black","black"].join(""),position:[n[6],0,i].join("")}:n[6]===s&&n[8]===u?{colors:[n[2],n[5],"black","black","black","black"].join(""),position:[i-n[7],0,i].join("")}:(console.log("failed to register piece",n),null)},checkValidMatchEdge:function(e,t,n){let i=n-1,r=ri.convertToBlueWhiteEdge([...e],n),o=ri.convertToBlueWhiteEdge([...t],n);return r.colors===o.colors&&r.position===o.position||e.includes("center")?!0:r.colors!==o.colors&&parseInt(r.position[0])===i-parseInt(o.position[0])},checkColors:function(e){let t=e.cubeDimension,n=e.rubiksObject.length,i=0,r=0,o=0,s=0,a=0,l=0,u=!1,c=[],f=0,h={error:[]},d=t*t,g=[...e.rubiksObject],v=et.generateSolved(t,t,t,"yellow","red"),y=[],m,p;for(let _=0;_<g.length;_++){let S=[...g[_]];const L=["white","blue","red","yellow","orange","green"];S.includes("white")&&(i+=1),S.includes("blue")&&(r+=1),S.includes("red")&&(o+=1),S.includes("yellow")&&(s+=1),S.includes("orange")&&(a+=1),S.includes("green")&&(l+=1);let E=ri.checkOccurences(L,S);if(!E.success){u=!0;let A=[];E.failedColors.forEach(B=>{A.includes(B)||A.push(B)}),c=A}}let x=[],w=[];v.tempArr.forEach(([..._],S)=>{y.push([]),g.forEach(([...L],E)=>{let A=0;if(_.slice(0,6).sort().forEach((B,j)=>{L.slice(0,6).sort()[j]===B&&A++}),A===6&&!x.includes(S)&&!w.includes(E)){let B=!1,j=!1;_.includes("edge")?(B=ri.checkValidMatchEdge(_,L,t),_[13]==="center"&&L[13]!=="center"||L[13]==="center"&&_[13]!=="center"?B=!1:_[13]==="center"&&L[13]==="center"&&(B=!0)):_.includes("middle")?j=ri.checkValidMatchMiddle(_,L,t):(B=!0,j=!0),(B||j)&&(f++,x.push(S),w.push(E),y[S]=[...L.slice(0,9),..._.slice(9,15)])}}),y[S].length===0&&(_[12]==="edge"?p="Invalid edge configuration.":_[12]==="middle"&&(m="Invalid middle configuration."))});let b=[];return i!==d&&b.push("white"),r!==d&&b.push("blue"),o!==d&&b.push("red"),s!==d&&b.push("yellow"),a!==d&&b.push("orange"),l!==d&&b.push("green"),b.length&&(b=b.join(", "),h.error.push(`Invalid ${b} sticker count.`)),u&&(c=c.join(", "),h.error.push(`More than one occurence of ${c} found on a piece.`)),f!==n&&e.cubeDimension<4&&h.error.push(`[${f-1}] out of [${n-1}] matched. Missing [${n-1-(f-1)}]`),p&&h.error.push(p),m&&h.error.push(m),h.error.length||({...ST(e,y)}.solveable===!1?h.error.push(`This configuration of the cube is not solveable,
            please check that you've entered all pieces correctly.`):h.error=void 0),h.error||(h.success=!0,h.newGenerated=y),h}};class zj extends Z.Component{constructor(){super(...arguments);He(this,"canvasRef",de.createRef());He(this,"handleSetOrientation",()=>{this.setState({activeMenu:"SetOrientation"})});He(this,"handlePickOrientation",(n,i,r)=>{const o=r&&r.reset===!0,s=`${n.charAt(0).toUpperCase()}${n.slice(1)}Top`,a=t2[s],l=a?a[i]:null;if(console.log("handlePickOrientation invoked:",{topColor:n,frontColor:i,orientationKey:s,isValid:!!l,faces:l}),!l){alert("Invalid orientation selection.");return}if(o){const u=this.state.cubeDimension,c=et.generateSolved(u,u,u,n,i);this.setState({topFaceColor:n,frontFaceColor:i,orientationFaces:l,rubiksObject:c.tempArr,moveLog:"",moveSet:[],prevSet:[],solvedSet:[],solvedSetIndex:0,solveMoves:"",solveState:-1,undoIndex:0,blockMoveLog:!1,isMulti:!1,face:0,turnDirection:0,start:7.5,end:0,activeMenu:"",reload:!0},()=>{console.log("Orientation state applied with reset:",{topFaceColor:this.state.topFaceColor,frontFaceColor:this.state.frontFaceColor}),this.reloadTurnedPieces("all")})}else{const u=this.computeMinimalRotationSequence(n,i);console.log("Applying orientation via minimal rotations:",u),u.length?this.runRotationSequence(u,0):this.setState({orientationFaces:l,topFaceColor:n,frontFaceColor:i})}});He(this,"state",{cubes:[],rubiksObject:[],blackObject:[],topFaceColor:"yellow",frontFaceColor:"red",speed:7.5,rotationSpeed:350,start:7.5,end:0,turnDirection:0,face:0,cameraX:-10,cameraY:30,cameraZ:30,currentFunc:"None",moveLog:"",moveSet:[],prevSet:[],angle:3.9,cubeDimension:null,cubeDepth:1,currentSpeed:"Medium",moves:0,reload:!1,solveState:-1,solveMoves:"",solvedSet:[],solvedSetIndex:0,facePosX:null,facePosY:null,facePosZ:null,faceSide:null,colorPicked:"white",mouseFace:null,mouseDown:!1,mousePos:null,undoIndex:0,blockMoveLog:!1,previousPiece:null,rubiksIndex:0,middles:[],corners:[],showMoveInput:!1,showControls:!1,showHints:!0,showGuideArrows:!0,activeDragsInput:0,deltaPositionInput:{x:100,y:100},controlledPositionInput:{x:0,y:0},activeDragsControls:0,deltaPositionControls:{x:100,y:100},controlledPositionControls:{x:0,y:0},isMulti:!1,isVisible:!1,isValidConfig:!0,hoverData:[],showSolveController:!1,autoPlay:!1,autoRewind:!1,autoTarget:!1,playOne:!1,generateAllMoves:!1,isLocal:null,cpErrors:[],activeMenu:"",solveTime:0,targetSolveIndex:-1,activeAlgo:"None Selected",sliderSpeed:40,jumpToEnd:!1,algoUp:!1,algoDown:!1,upDateCp:0,advancedNotationEnabled:!0});He(this,"toggleAdvancedNotation",n=>{this.setState({advancedNotationEnabled:n!==void 0?n:!this.state.advancedNotationEnabled})});He(this,"getOrientationFacesFromState",()=>{const{topFaceColor:n,frontFaceColor:i}=this.state,o={yellow:rh,red:my,blue:gy,orange:vy,green:yy,white:xy}[n];return o?o[i]:rh.red});He(this,"applyOrientationRotation",(n,i)=>{const r=[...this.getOrientationFacesFromState()];let[o,s,a,l,u,c]=r,f=o,h=s,d=a,g=l,v=u,y=c;n==="x"?i?(v=a,d=c,y=l,g=u,f=o,h=s):(v=l,d=u,y=a,g=c,f=o,h=s):n==="y"?i?(h=l,d=s,f=a,g=o,v=u,y=c):(f=l,d=o,h=a,g=s,v=u,y=c):n==="z"&&(i?(h=u,y=s,f=c,v=o,g=l,d=a):(f=u,y=o,h=c,v=s,g=l,d=a));const m=[f,h,d,g,v,y];this.setState({orientationFaces:m,topFaceColor:v,frontFaceColor:g})});He(this,"simulateOrientationRotation",(n,i,r)=>{let[o,s,a,l,u,c]=n,f=o,h=s,d=a,g=l,v=u,y=c;return i==="x"?r?(v=a,d=c,y=l,g=u):(v=l,d=u,y=a,g=c):i==="y"?r?(h=l,d=s,f=a,g=o):(f=l,d=o,h=a,g=s):i==="z"&&(r?(h=u,y=s,f=c,v=o):(f=u,y=o,h=c,v=s)),[f,h,d,g,v,y]});He(this,"computeMinimalRotationSequence",(n,i)=>{const r=[...this.getOrientationFacesFromState()],o=c=>c[4]+"|"+c[3],s=n+"|"+i;if(o(r)===s)return[];const a=[["x",!1],["x",!0],["y",!1],["y",!0],["z",!1],["z",!0]],l=[{faces:r,seq:[]}],u=new Set([o(r)]);for(;l.length;){const{faces:c,seq:f}=l.shift();for(const[h,d]of a){const g=this.simulateOrientationRotation(c,h,d),v=o(g);if(u.has(v))continue;const y=[...f,{axis:h,prime:d}];if(v===s)return y;u.add(v),l.push({faces:g,seq:y})}}return[]});He(this,"runRotationSequence",(n,i=0)=>{if(!n||i>=n.length)return;if(this.state.start<=this.state.end){setTimeout(()=>this.runRotationSequence(n,i),25);return}const{axis:r,prime:o}=n[i];this.executeCubeRotation(r,o);const s=()=>{this.state.start>this.state.end?this.runRotationSequence(n,i+1):setTimeout(s,25)};s()});He(this,"executeCubeRotation",(n,i)=>{if(this.state.currentFunc!=="None")return;const r=this.state.cubeDimension||this.getSizeFromUrl();let o=0;n==="x"?o=2:n==="y"?o=1:n==="z"&&(o=0);const s=i?0:-1;this.rotateOneFace(n,[o,s,r,!0]),this.applyOrientationRotation(n,i)});He(this,"keyBinds",n=>{switch(n){case"R":this.rotateOneFace(n+"'",[2,0,1]);break;case"r":this.rotateOneFace(n.toUpperCase(),[2,-1,1]);break;case"L":this.rotateOneFace(n+"'",[4,0,1]);break;case"l":this.rotateOneFace(n.toUpperCase(),[4,-1,1]);break;case"F":this.rotateOneFace(n+"'",[0,0,1]);break;case"f":this.rotateOneFace(n.toUpperCase(),[0,-1,1]);break;case"U":this.rotateOneFace(n+"'",[1,0,1]);break;case"u":this.rotateOneFace(n.toUpperCase(),[1,-1,1]);break;case"D":this.rotateOneFace(n+"'",[5,0,1]);break;case"d":this.rotateOneFace(n.toUpperCase(),[5,-1,1]);break;case"B":this.rotateOneFace(n+"'",[3,0,1]);break;case"b":this.rotateOneFace(n.toUpperCase(),[3,-1,1]);break;case"x":this.state.advancedNotationEnabled&&this.executeCubeRotation("x",!1);break;case"X":this.state.advancedNotationEnabled&&this.executeCubeRotation("x",!0);break;case"y":this.state.advancedNotationEnabled&&this.executeCubeRotation("y",!1);break;case"Y":this.state.advancedNotationEnabled&&this.executeCubeRotation("y",!0);break;case"z":this.state.advancedNotationEnabled&&this.executeCubeRotation("z",!1);break;case"Z":this.state.advancedNotationEnabled&&this.executeCubeRotation("z",!0);break;case"1":this.state.currentFunc==="Color Picker"&&this.changeColor("white");break;case"2":this.state.currentFunc==="Color Picker"&&this.changeColor("blue");break;case"3":this.state.currentFunc==="Color Picker"&&this.changeColor("red");break;case"4":this.state.currentFunc==="Color Picker"&&this.changeColor("yellow");break;case"5":this.state.currentFunc==="Color Picker"&&this.changeColor("orange");break;case"6":this.state.currentFunc==="Color Picker"&&this.changeColor("green");break;case"ArrowLeft":this.state.currentFunc==="Solving"||this.state.currentFunc==="Algorithms"?this.rewindSolve():this.state.currentFunc==="None"&&this.undo();break;case"ArrowRight":if(this.state.currentFunc==="Solving"||this.state.currentFunc==="Algorithms"){if(!this.state.moveSet.length)return;if((this.state.moveSet[0]===this.state.moveSet[1]||this.state.moveSet[1]==="stop'")&&!this.state.autoPlay)this.setState({autoPlay:!0,autoRewind:!1,targetSolveIndex:this.state.solvedSetIndex+2});else{if(this.state.playOne===!0)return;this.state.moveSet[0]&&typeof this.state.moveSet[0][0]=="string"&&this.state.moveSet[0]!=="'"&&this.setState({playOne:!0,prevSet:[...this.state.prevSet,this.state.moveSet[0]]})}}else this.state.currentFunc==="None"&&this.redo();break;case"ArrowDown":this.state.currentFunc==="Algorithms"&&this.setState({algoDown:!0,resized:!0});break;case"ArrowUp":this.state.currentFunc==="Algorithms"&&this.setState({algoUp:!0,resized:!0});break}});He(this,"keyHandling",n=>{this.keyBinds(n.key)});He(this,"onSliderChange",n=>{switch(this.setState({sliderSpeed:n}),n){case 0:this.changeSpeed(1.5,1050,"Slowest");break;case 10:this.changeSpeed(3,750,"Slower");break;case 20:this.changeSpeed(5,500,"Slow");break;case 30:this.changeSpeed(7.5,350,"Medium");break;case 40:this.changeSpeed(10,250,"Fast");break;case 50:this.changeSpeed(15,175,"Faster");break;case 60:this.changeSpeed(30,100,"Fastest");break;case 70:this.changeSpeed(90,20,"Zoomin");break;default:console.log("unexpected behavior")}});He(this,"changeSpeed",(n,i,r,o)=>{this.state.currentFunc!=="None"&&!o?this.setState({moveSet:[[n,i,r],...this.state.moveSet]}):this.setState({currentSpeed:r,speed:n,start:n,end:0,rotationSpeed:i})});He(this,"changeColor",n=>{this.setState({colorPicked:n});let i=[...this.state.rubiksObject];for(let r=0;r<i.length;r++){let o=[...i[r]];o[1]=n,i[r]=[...o]}this.setState({rubiksObject:[...i],isValidConfig:!1,upDateCp:this.state.upDateCp+1,cpErrors:[]},()=>{this.reloadTurnedPieces("cp")})});He(this,"changeFaceColor",(n,i,r)=>{let o=[...this.state.rubiksObject];for(let s=0;s<o.length;s++){let a=[...o[s]];a[6]===n.x&&a[7]===n.y&&a[8]===n.z&&(a[i]=r,o[s]=[...a],s=o.length)}this.setState({rubiksObject:[...o],isValidConfig:!1,upDateCp:this.state.upDateCp+1,cpErrors:[]},()=>{this.reloadTurnedPieces("cp")})});He(this,"setColorPickedCube",()=>{let n=[...this.state.rubiksObject],i=this.state.cubeDimension,r=et.generateSolved(i,i,i,"yellow","red"),o=[],s=[],a=[];r.tempArr.forEach(([...l],u)=>{o.push([]),n.forEach(([...c],f)=>{let h=0;if(l.slice(0,6).sort().forEach((d,g)=>{c.slice(0,6).sort()[g]===d&&h++}),h===6&&!s.includes(u)&&!a.includes(f)){let d=!1,g=!1;l.includes("edge")?(d=ri.checkValidMatchEdge(l,c,i),l[13]==="center"&&c[13]!=="center"||c[13]==="center"&&l[13]!=="center"?d=!1:l[13]==="center"&&c[13]==="center"&&(d=!0)):l.includes("middle")?g=ri.checkValidMatchMiddle(l,c,i):(d=!0,g=!0),(d||g)&&(s.push(u),a.push(f),o[u]=[...c.slice(0,9),...l.slice(9,15)])}})}),this.setState({rubiksObject:o,currentFunc:"None",activeMenu:""},()=>{this.reloadTurnedPieces("check"),this.setState({activeMenu:"Solver"}),this.beginSolve()})});He(this,"undo",()=>{let n=this.state.undoIndex,i=this.state.moveLog;const r=It.moveStringToArray(i);if(i!==""){if(this.state.currentFunc!=="None")return;r.length-1-n>=0&&this.setState({blockMoveLog:!0,currentFunc:"Undo",moveSet:[r[r.length-1-n]],undoIndex:n+1})}});He(this,"redo",()=>{if(this.state.currentFunc!=="None")return;let n=this.state.undoIndex,i=this.state.moveLog;if(i==="")return;const r=It.moveStringToArray(i);let o=r[r.length-n];try{o.includes("'")?o=o.substring(0,3):o+="'"}catch{return}n>0&&this.setState({blockMoveLog:!0,currentFunc:"Redo",moveSet:[o],undoIndex:n-1})});He(this,"rotateOneFace",(n,i)=>{if(i.length<4&&i.push(!1),this.state.currentFunc==="None"){let r=this.state.cubeDimension,o=this.state.rubiksObject,s=this.state.blockMoveLog,a=this.state.moveLog,l=this.state.solveMoves,u=this.state.solveState,c=this.state.end,f=et.rotateCubeFace(i[0],i[1],i[2],i[3],s,a,l,c,u);f.currentFunc=n,f.rubiksObject=et.rotateFace(f.face,f.turnDirection,f.cubeDepth,f.isMulti,r,o),this.setState(f)}});He(this,"algorithm",(n,i)=>{if(this.state.currentFunc==="Solving"||this.state.currentFunc==="Algorithms"){this.state.moveSet[0]&&It.checkMoveEquivalence(n,this.state.moveSet[0],this.state.cubeDimension)&&this.playOne(this);return}if(this.state.currentFunc!=="None")return;const r=It.moveStringToArray(n);this.setState({currentFunc:i,moveSet:r})});He(this,"reset",()=>{let n=this.state.cubeDimension,r=et.generateSolved(n,n,n,this.state.topFaceColor||"yellow",this.state.frontFaceColor||"red").tempArr;this.setState({rubiksObject:r,moveSet:[],moveLog:"",currentFunc:"None",solveState:-1,autoPlay:!1,playOne:!1,isVisible:!1,hoverData:[],solveMoves:"",prevSet:[],cpErrors:[],activeMenu:"none"},()=>{this.reloadTurnedPieces("all")})});He(this,"beginScramble",()=>{if(this.state.currentFunc==="None"){let n=[];for(;n.length<25;){let i=It.generateMove(this.state.cubeDimension);n[n.length-1]&&n[n.length-1].slice(0,3)===i.slice(0,3)&&n[n.length-1].length!==i.length||n[n.length-2]&&n[n.length-1]&&n[n.length-2]===i&&n[n.length-1]===i||n.push(i)}this.setState({currentFunc:"Scrambling",moveSet:n})}});He(this,"beginSolve",()=>{this.state.currentFunc==="None"&&this.setState({currentFunc:"Solving",solveState:0,autoPlay:!1,playOne:!1,solveOnce:!0})});He(this,"stopSolve",()=>{this.setState({currentFunc:"None",solveState:-1,autoPlay:!1,playOne:!1,isVisible:!1,hoverData:[],solveMoves:"",prevSet:[],moveSet:[],targetSolveIndex:-1,solvedSet:[]})});He(this,"beginColorPicker",()=>{let n=this.state.cubeDimension;if(this.state.currentFunc!=="None")return;const i=[...et.generateBlank(n,n,n)];this.setState({currentFunc:"Color Picker",rubiksObject:[...i]},()=>{this.reloadTurnedPieces("cp")})});He(this,"endColorPicker",()=>{this.reset(),this.setState({currentFunc:"None",cpErrors:[]})});He(this,"playOne",n=>{if(n.state.moveSet.length)if((n.state.moveSet[0]===n.state.moveSet[1]||n.state.moveSet[1]==="stop'")&&!n.state.autoPlay)n.setState({autoPlay:!0,autoRewind:!1,targetSolveIndex:n.state.solvedSetIndex+2});else{if(n.state.playOne===!0)return;n.state.moveSet[0]&&typeof n.state.moveSet[0][0]=="string"&&n.state.moveSet[0]!=="'"&&n.setState({playOne:!0,prevSet:[...n.state.prevSet,n.state.moveSet[0]]})}});He(this,"rewindSolve",()=>{if(this.state.playOne)return;if((this.state.prevSet[this.state.prevSet.length-1]===this.state.prevSet[this.state.prevSet.length-2]||this.state.prevSet[this.state.prevSet.length-1]==="stop'")&&!this.state.autoRewind){this.setState({autoPlay:!1,autoRewind:!0,targetSolveIndex:this.state.solvedSetIndex-2});return}let n=[],i=[...this.state.moveSet],r=[...this.state.prevSet],o=r[r.length-1],s=r.pop();if(!s){this.setState({autoRewind:!1});return}s[s.length-1]==="'"?s=s.slice(0,3):s+="'",n.push(s,o,...i),this.setState({playOne:!0,prevSet:r,moveSet:n,solvedSetIndex:this.state.solvedSetIndex-2})});He(this,"handleDragInput",(n,i)=>{const{x:r,y:o}=this.state.deltaPositionInput;this.setState({deltaPositionInput:{x:r+i.deltaX,y:o+i.deltaY}})});He(this,"onStartInput",()=>{this.setState({activeDragsInput:this.state.activeDragsInput+1})});He(this,"onStopInput",()=>{this.setState({activeDragsInput:this.state.activeDragsInput-1})});He(this,"mouseOver",(n,i,r)=>{this.state.showHints&&this.setState({isVisible:!0,hoverData:i})});He(this,"mouseLeave",()=>{this.setState({isVisible:!1,hoverData:[]})});He(this,"reloadTurnedPieces",n=>{let i=[...this.state.cubes];for(let r=0;r<this.state.rubiksObject.length;r++){let o={...i[r]},s=o.rotation;n===o.position?(o.opacity=1,i[r]=o):(s.x!==0||s.y!==0||s.z!==0||n==="all"||n==="cp"||n==="check")&&((n==="all"||n==="cp")&&(o.position.x=this.state.rubiksObject[r][9],o.position.y=this.state.rubiksObject[r][10],o.position.z=this.state.rubiksObject[r][11]),n==="check"&&(o.position.x=this.state.rubiksObject[r][6],o.position.y=this.state.rubiksObject[r][7],o.position.z=this.state.rubiksObject[r][8]),o.material[0].color=new _e(this.state.rubiksObject[r][2]),o.material[1].color=new _e(this.state.rubiksObject[r][4]),o.material[2].color=new _e(this.state.rubiksObject[r][3]),o.material[3].color=new _e(this.state.rubiksObject[r][0]),o.material[4].color=new _e(this.state.rubiksObject[r][1]),o.material[5].color=new _e(this.state.rubiksObject[r][5]),o.rotation.x=0,o.rotation.y=0,o.rotation.z=0,i[r]=o)}this.setState({cubes:i,reload:!1})});He(this,"menuSetState",n=>{this.setState(n,()=>{n.activeAlgo&&this.reloadTurnedPieces("all")})});He(this,"windowResized",()=>{this.setState({resized:!0})})}onMouseUp(n){this.setState({mouseDown:!1})}runCheckColors(){let n=ri.checkColors(this.state);n.error?this.setState({cpErrors:[...n.error]}):n.success&&this.setState({isValidConfig:!0,cpErrors:[]})}changeSettings(n,i){switch(n){case"displayMoveInput":this.setState({showMoveInput:!this.state.showMoveInput});break;case"displayControls":this.setState({showControls:!this.state.showControls});break;case"displayHints":this.setState({showHints:!this.state.showHints});break;default:console.log("Invalid Setting")}}componentWillUnmount(){window.removeEventListener("keydown",this.keyHandling)}getSizeFromUrl(n){let i=75,r,o=window.location.href.split("/"),s=o[o.length-1].slice(0,4);return n?o[2].substr(0,9)==="localhost":(s==="#id="&&(r=parseInt(o[o.length-1].substr(4))),r<=i&&r>=1?r:3)}calculateTurn(n,i,r,o,s){let a=null,l=null,u=null;const c={x:i.x-n.x,y:i.y-n.y,z:i.z-n.z};if(n.x===i.x&&n.y===i.y&&n.z===i.z)return null;function f(h,d,g,v,y,m,p,x){return Math.abs(h)>=Math.abs(g)&&Math.abs(h)>.05?{calculated:d?p:p+"'",depth:m}:Math.abs(g)>Math.abs(h)&&Math.abs(g)>.05?{calculated:v?x:x+"'",depth:y}:{calculated:null,depth:null}}switch(o){case 0:u=f(c.z,c.z<0,c.x,c.x>=0,s-r.z,s-r.x,"R","U"),a=u.calculated,l=u.depth;break;case 1:u=f(c.x,c.x<=0,c.y,c.y<0,s-r.x,r.y+1,"B","R"),a=u.calculated,l=u.depth;break;case 2:u=f(c.z,c.z>0,c.y,c.y>0,s-r.z,r.y+1,"F","U"),a=u.calculated,l=u.depth;break;case 3:u=f(c.z,c.z>0,c.x,c.x<=0,s-r.z,s-r.x,"R","U"),a=u.calculated,l=u.depth;break;case 4:u=f(c.z,c.z<0,c.y,c.y<0,s-r.z,r.y+1,"F","U"),a=u.calculated,l=u.depth;break;case 5:u=f(c.x,c.x>=0,c.y,c.y>0,s-r.x,r.y+1,"F","R"),a=u.calculated,l=u.depth;break}return(l<10?"0":"")+l+a}calculateTheta(){}componentDidMount(){let n=this.getSizeFromUrl(),i=et.generateSolved(n,n,n,this.state.topFaceColor||"yellow",this.state.frontFaceColor||"red"),r=i.tempArr,o=[],s=null,a=null,l=!1,u=new cT,c=new Gt(75,window.innerWidth/window.innerHeight,.1,1e3),f=new Ku({antialias:!0,alpha:!0}),h=new p0,d=new ee,g=new wd,v=new Du().load("https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQW92XE-j1aJzRMI9kvvMZIf2VikZzzdEI87zl4rWgHMJBNJ9iw7A&s"),y=new Du().load("https://cdn2.iconfinder.com/data/icons/communication-language/100/Up_Arrow-01-512.png");const m=new mv(4210752,3);m.position.set(0,0,0),u.add(m);let p=Math.tan(Math.PI/180*c.fov/2),x=window.innerHeight;const w=et.generateMoveHints(y,n),b=new Cn;u.add(b);const _=new Cn;b.add(_);const S=n/2-.5;b.position.set(0,0,0);let L=this.calculateTurn,E=this.algorithm;function A(D){c.aspect=window.innerWidth/window.innerHeight,c.fov=360/Math.PI*Math.atan(p*(window.innerHeight/x)),c.updateProjectionMatrix(),c.lookAt(0,0,0),f.setSize(window.innerWidth,window.innerHeight-10),f.render(u,c),D()}function B(D){k.enabled=!0,l=!1,d.x=D.clientX/window.innerWidth*2-1,d.y=-(D.clientY/window.innerHeight)*2+1,h.setFromCamera(d,c);let G=h.intersectObjects(_.children,!0);if(G.length){l=!0,k.saveState(),k.enabled=!1;let I=G[0].faceIndex,H=-1;for(let V=0;V<6;V++)if(I===V*2||I===V*2+1){H=V;break}if(this.state.currentFunc==="Color Picker"){let V=[2,4,3,0,1,5];this.changeFaceColor({x:G[0].object.position.x,y:G[0].object.position.y,z:G[0].object.position.z},V[H],this.state.colorPicked)}G[0].object.material[H]&&H>-1&&G[0].object.material[H].color&&(s=G[0],a=H,f.setClearColor(new _e("black"),0))}else k.enabled=!0,s=null,a=null}function j(D){d.x=D.clientX/window.innerWidth*2-1,d.y=-(D.clientY/window.innerHeight)*2+1,h.setFromCamera(d,c);let G=h.intersectObjects(_.children,!0);if(s&&G.length){let I=G[0].point,H=[2,4,3,0,1,5],V={...s.point},J={...s.object.position},he=Math.floor(s.faceIndex/2),ge=L(I,V,J,H[he],n);ge!==null&&!ge.includes("null")&&(E(ge,"Drag Turn"),s.object.material[a].opacity=1,s=null,a=null)}}function z(D){s&&(s.object.material[a].opacity=1),l&&k.reset(),l=!1,s=null,k.enabled=!0}window.addEventListener("keydown",this.keyHandling,!1),window.addEventListener("pointermove",j.bind(this),!1),window.addEventListener("pointerdown",B.bind(this),!1),window.addEventListener("pointerup",z,!1),window.addEventListener("resize",()=>A(this.windowResized),!1),f.setClearColor(new _e("black"),.3),f.domElement.className="canvas",f.setSize(window.innerWidth,window.innerHeight),this.canvasRef&&this.canvasRef.current?(this.canvasRef.current.innerHTML="",this.canvasRef.current.appendChild(f.domElement)):document.body.appendChild(f.domElement),v.anisotropy=f.capabilities.getMaxAnisotropy(),y.anisotropy=f.capabilities.getMaxAnisotropy();for(let D=0;D<r.length;D++){let G=r[D][6],I=r[D][7],H=r[D][8];const V=[new mn({map:v,transparent:!0,opacity:(r[D][2]==="black",.7),color:r[D][2],side:xt}),new mn({map:v,transparent:!0,opacity:(r[D][4]==="black",.7),color:r[D][4],side:xt}),new mn({map:v,transparent:!0,opacity:(r[D][3]==="black",.7),color:r[D][3],side:xt}),new mn({map:v,transparent:!0,opacity:.7,side:xt}),new mn({map:v,transparent:!0,opacity:(r[D][1]==="black",.7),color:r[D][1],side:xt}),new mn({map:v,transparent:!0,opacity:(r[D][5]==="black",.7),color:r[D][5],side:xt})],J=[new jn({map:v,transparent:!0,opacity:(r[D][2]==="black",.5),color:r[D][2],side:Ti}),new jn({map:v,transparent:!0,opacity:(r[D][4]==="black",.8),color:r[D][4],side:Ti}),new jn({map:v,transparent:!0,opacity:(r[D][3]==="black",.6),color:r[D][3],side:Ti}),new jn({map:v,transparent:!0,opacity:.5,side:Ti}),new jn({map:v,transparent:!0,opacity:(r[D][1]==="black",.7),color:r[D][1],side:Ti}),new jn({map:v,transparent:!0,opacity:(r[D][5]==="black",.6),color:r[D][5],side:Ti})];o[D]=new pt(g,J),o[D].translateX(G),o[D].translateY(I),o[D].translateZ(H);let he=[];he[D]=new pt(g,V),he[D].translateX(G),he[D].translateY(I),he[D].translateZ(H)}_.position.set(-S,-S,-S);let k=new Fu(c,f.domElement);k.enabled=!0,k.enableDamping=!0,k.dampingFactor=.15,k.enableZoom=!1,k.autoRotate=!1,k.minDistance=2+n,k.maxDistance=2+n+20,k.enablePan=!1,k.keys={LEFT:null,UP:null,RIGHT:null,BOTTOM:null},k.target.set(0,0,0),k.update(),k.addEventListener("change",D=>{f&&f.render(u,c)}),w.forEach(D=>_.add(...D)),this.setState({cubes:o,cubeDimension:n,cameraZ:10,cameraX:10,cameraY:10,rubiksObject:r,middles:i.middles,edges:i.edges,corners:i.corners,currentFunc:"Reset",generatedButtons:et.generateButtonData(this.getSizeFromUrl())},()=>{for(let D=0;D<r.length;D++)(this.state.cubes[D].position.x===0||this.state.cubes[D].position.x===this.state.cubeDimension-1||this.state.cubes[D].position.y===0||this.state.cubes[D].position.y===this.state.cubeDimension-1||this.state.cubes[D].position.z===0||this.state.cubes[D].position.z===this.state.cubeDimension-1)&&_.add(this.state.cubes[D]);c.position.z=this.state.cameraZ,c.position.y=this.state.cameraY,c.position.x=this.state.cameraX,c.lookAt(0,0,0),b.rotation.x=-Math.PI/2,f.render(u,c),U()});let U=()=>{requestAnimationFrame(U);for(let D=0;D<w.length;D++)w[D].forEach(G=>G.visible=!1);if(this.state.start<=this.state.end)this.setState(et.rotatePieces(et.rotatePoint,o,this.state));else{if((this.state.currentFunc==="Color Picker"||this.state.currentFunc==="None"||this.state.currentFunc==="Solving"||this.state.currentFunc==="Algorithms")&&this.state.isVisible){let[D,G,I,H]=this.state.hoverData;if(D<3)if(G===-1)if(!H)w[D][I-1].visible=!0;else for(let V=0;V<I;V++)w[D][V].visible=!0;else if(!H)w[D][w[D].length-1-(I-1)].visible=!0;else for(let V=w[D].length-1;V>=w[D].length-1-(I-1);V--)w[D][V].visible=!0;else if(D===3&&(D=0),D===4&&(D=2),D===5&&(D=1),G===-1)if(!H)w[D+3][w[D+3].length-1-(I-1)].visible=!0;else for(let V=w[D+3].length-1;V>=w[D+3].length-1-(I-1);V--)w[D+3][V].visible=!0;else if(!H)w[D][w[D].length-1-(I-1)].visible=!0;else for(let V=w[D].length-1;V>=w[D+3].length-1-(I-1);V--)w[D][V].visible=!0}if(this.state.reload&&this.reloadTurnedPieces(this.state.face),this.state.currentFunc!=="None"){if(!(this.state.currentFunc==="Undo"||this.state.currentFunc==="Redo")){let D=this.state.moveLog,G=this.state.undoIndex;if(G>0){let I=It.moveStringToArray(D);if(this.state.currentFunc[0]==="0"||this.state.currentFunc[0]==="1"||this.state.currentFunc[1]==="1"||this.state.currentFunc[1]==="2"||this.state.currentFunc[1]==="3"){let H=I[I.length-1];for(let V=0;V<=G;V++)I.pop();I.push(H)}else for(let H=0;H<G;H++)I.pop();D=I.join(" "),this.setState({undoIndex:0,moveLog:D})}}if(this.state.currentFunc==="Scrambling")if(this.state.moveSet&&this.state.moveSet.length){let D=this.state.cubeDimension,G=this.state.rubiksObject,I=this.state.blockMoveLog,H=this.state.moveLog,V=this.state.solveMoves,J=this.state.solveState,he=this.state.end;if(typeof this.state.moveSet[0][0]=="number"){let ge=this.state.moveSet;this.changeSpeed(...ge[0],!0),ge.shift(),this.setState({moveSet:ge})}else{let ge=It.parseMoveArray(this.state.moveSet);if(ge){let xe=et.rotateCubeFace(...ge,I,H,V,he,J);xe.rubiksObject=et.rotateFace(xe.face,xe.turnDirection,xe.cubeDepth,xe.isMulti,D,G),this.setState(xe)}}}else this.setState({currentFunc:"None",moves:0});else if(this.state.currentFunc==="Solving"||this.state.currentFunc==="Algorithms"){if(this.state.autoTarget&&!this.state.autoPlay&&!this.state.autoRewind)this.setState({autoTarget:!1},()=>this.reloadTurnedPieces("check"));else if(this.state.playOne){let D=this.state.cubeDimension,G=this.state.rubiksObject,I=this.state.blockMoveLog,H=this.state.moveLog,V=this.state.solveMoves,J=this.state.moveSet,he=this.state.end,ge=this.state.solveState,xe={};if(typeof J[0][0]=="number")this.changeSpeed(...J[0],!0),J.shift(),xe.moveSet=J;else{let Y=It.parseMoveArray(J);Y&&(xe=et.rotateCubeFace(...Y,I,H,V,he,ge)),this.state.playOne&&(xe.playOne=!1),this.mouseLeave(),Y&&(xe.rubiksObject=et.rotateFace(xe.face,xe.turnDirection,xe.cubeDepth,xe.isMulti,D,G),xe.solvedSetIndex=this.state.solvedSetIndex+1)}this.setState(xe)}else if(this.state.moveSet.length){let D=this.state.moveSet,G={};if(typeof D[0][0]=="number")this.changeSpeed(...D[0],!0),D.shift(),G.moveSet=D;else{let I=It.convertMoveToData(D[0]);I&&this.mouseOver(this.state.moveSet[0],I)}G.length&&this.setState({obj:G})}}else if(this.state.currentFunc!=="Color Picker")if(this.state.currentFunc==="Reset")this.reset();else if(this.state.moveSet.length){let D=this.state.cubeDimension,G=this.state.rubiksObject,I=this.state.blockMoveLog,H=this.state.moveLog,V=this.state.solveMoves,J=this.state.solveState,he=this.state.end;if(typeof this.state.moveSet[0][0]=="number"){let ge=this.state.moveSet;this.changeSpeed(...ge[0],!0),ge.shift(),this.setState({moveSet:ge})}else{let ge=It.parseMoveArray(this.state.moveSet);if(ge){let xe=et.rotateCubeFace(...ge,I,H,V,he,J);xe.rubiksObject=et.rotateFace(xe.face,xe.turnDirection,xe.cubeDepth,xe.isMulti,D,G),this.setState(xe)}}}else this.setState({currentFunc:"None"})}}k.update(),f.render(u,c)}}render(){return M.jsxs("div",{className:"App",style:{width:"max-content"},children:[M.jsx("div",{ref:this.canvasRef,style:{position:"fixed",inset:0,zIndex:0}}),M.jsx(wR,{title:"ZERO",changeSettings:this.changeSettings.bind(this),isLocal:this.getSizeFromUrl(!0),state:this.state}),this.state.currentFunc==="Color Picker"?M.jsx(M.Fragment,{}):M.jsxs("p",{style:{position:"fixed",top:"110px",left:"10px",color:"lightgrey",fontSize:"1rem",display:"none"},children:["Speed: ",this.state.currentSpeed]}),this.state.currentFunc==="Color Picker"?[]:M.jsx(M3,{onSliderChange:this.onSliderChange,speed:this.state.sliderSpeed}),this.state.showMoveInput?M.jsx(lF,{algorithm:this.algorithm,handleDrag:this.handleDragInput,onStart:this.onStartInput,onStop:this.onStopInput}):[],this.state.currentFunc==="Solving"?M.jsx(uF,{solvedSetLength:this.state.solvedSet.length,prevSetLength:this.state.prevSet.length}):[],this.state.currentFunc==="Color Picker"?M.jsx(cF,{colorPicked:this.state.colorPicked}):[],M.jsx(Uj,{state:this.state,setState:this.menuSetState,beginScramble:this.beginScramble,disableHover:this.state.showGuideArrows,generatedButtons:this.state.generatedButtons,size:this.getSizeFromUrl(),rotateOneFace:this.rotateOneFace,mouseEnter:this.mouseOver,mouseLeave:this.mouseLeave,beginColorPicker:this.beginColorPicker,endColorPicker:this.endColorPicker,colorPicked:this.state.colorPicked,changeColor:this.changeColor,isValidConfig:this.state.isValidConfig,setColorPickedCube:this.setColorPickedCube,cpErrors:this.state.cpErrors,runCheckColors:this.runCheckColors,beginSolve:this.beginSolve,stopSolve:this.stopSolve,playOne:this.playOne,rewindOne:this.rewindSolve,reload:this.reloadTurnedPieces,onSetOrientation:this.handleSetOrientation}),M.jsx(n2,{onSetOrientation:this.handlePickOrientation,currentTop:this.state.topFaceColor,currentFront:this.state.frontFaceColor}),M.jsx("div",{style:{width:"100%",position:"absolute",bottom:"85px",margin:"auto",display:"flex"},children:M.jsx("div",{style:{margin:"auto",display:"inline-flex"},children:this.state.currentFunc==="None"||this.state.currentFunc==="Undo"||this.state.currentFunc==="Redo"||this.state.currentFunc==="Drag Turn"?[M.jsx("button",{className:"redoUndo",style:{marginRight:"8px",fontSize:"2rem",color:"red",lineHeight:"2rem"},onClick:()=>this.undo(),children:M.jsx("i",{className:"fas fa-arrow-left"})},"undo"),M.jsx("button",{className:"redoUndo",style:{marginLeft:"8px",fontSize:"2rem",color:"green",lineHeight:"2rem"},onClick:()=>this.redo(),children:M.jsx("i",{className:"fas fa-arrow-right"})},"redo")]:""})})]})}}const Hj=M.jsx(pR,{children:M.jsx(aR,{children:M.jsx(fM,{path:"*",element:M.jsx(zj,{})})})}),jj=document.getElementById("root"),Vj=KS(jj);Vj.render(Hj);
